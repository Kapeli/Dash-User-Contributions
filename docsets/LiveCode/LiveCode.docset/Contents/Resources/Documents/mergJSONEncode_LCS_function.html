<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>mergJSONEncode</title><link rel="stylesheet" type="text/css" href="userguide.css" /></head><body><table><tr><td colspan="2"><h1>mergJSONEncode</h1></td></tr><tr><td><b>Type</b></td><td>function</td></tr><tr><td><b>Dictionary</b></td><td>LCS</td></tr><tr><td><b>Syntax</b></td><td><pre><span class="normal">mergJSONEncode(&lt;pVariableName&gt;, [&lt;pForceRootType&gt;, &lt;pPretty&gt;])</span></pre></td></tr><tr><td><b>Associations</b></td><td>mergjson</td></tr><tr><td><b>Summary</b></td><td><p>The function encodes an array as JSON.</p></td></tr><tr><td><b>Introduced</b></td><td>8.0</td></tr><tr><td><b>OS</b></td><td>ios, android, linux, mac, windows</td></tr><tr><td><b>Platforms</b></td><td>mobile, desktop, server</td></tr><tr><td><b>Parameters</b></td><td><table class="inner"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>pVariableName</td><td></td><td><p>The name of the variable to encode as JSON. All stringsmust be UTF8 encoded.</p></td></tr><tr><td>pForceRootType</td><td></td><td><p>The root type for JSON conversion may be forced usingthis optional parameter. In the case of a numerically and sequentially keyedarray starting from 1 the array will be encoded as an ordered list in JSON. Use <code>object</code> as the parameter value to force the array to be encoded as anobject instead. In some cases when encoding scalar variables a number (or something that looks like a number) might need to be encoded as a string.Use <code>string</code> as the parameter value to force the number to be encoded as a string instead.</p></td></tr><tr><td>pPretty</td><td></td><td><p>Use this optional parameter which defaults to false topretty print the JSON. If true the JSON will formatted with whitespace and object names will be alphabetically sorted. </p></td></tr></table></td></tr><tr><td><b>Example</b></td><td><pre><b><span class="normal">function</span></b><span class="normal"> ArrayToJSON pArray,pForceRootType,pPretty</span><span class="normal">    <b>repeat</b> </span><span class="function">for</span><span class="normal"> </span><span class="function">each</span><span class="normal"> </span><span class="function">key</span><span class="normal"> tKey </span><span class="function">in</span><span class="normal"> pArray</span><span class="normal">        <b>if</b> pArray[tKey] </span><span class="function">is</span><span class="normal"> </span><span class="function">an</span><span class="normal"> </span><span class="function">array</span><span class="normal"> <b>then</b></span><span class="normal">            </span><b><span class="command">put</span></b><span class="normal"> </span><span class="normal">"}"</span><span class="normal">&ArrayToJSON(pArray[tKey]) </span><span class="function">into</span><span class="normal"> pArray[tKey]</span><span class="normal">        <b>end</b> <b>if</b></span><span class="normal">    <b>end</b> <b>repeat</b></span><span class="normal">    </span><b><span class="command">return</span></b><span class="normal">(mergJSONEncode(</span><span class="normal">"pArray"</span><span class="normal">,pForceRootType,pPretty))</span><b><span class="normal">end</span></b><span class="normal"> ArrayToJSON</span></pre></td></tr><tr><td><b>Values</b></td><td><table class="inner"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>return</td><td></td><td><p>The array encoded as JSON.</p></td></tr></table></td></tr><tr><td><b>Description</b></td><td><p>If the external encounters } as the first char of an array element it will assume the string is already encoded. This is how the recursive function is able to translate a multi-dimensional array into JSON. It&#39;s also the only way toget an empty array or object into your JSON by setting the element value to }[] or }{}.</p><p>If a value looks like a real number it is encoded as an IEEE 754 double. In order to represent the number uniquely a double may need a precision of 15 to 17decimal places. What this means is that any encoded then decoded doubles may need to be formatted or rounded to the precision you require before displaying it to a user because something like 0.657679 when converted to a double will become 0.65767900000000001.</p></td></tr></table></body></html>