<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>OAuth2</title><link rel="stylesheet" type="text/css" href="userguide.css" /></head><body><table><tr><td colspan="2"><h1>OAuth2</h1></td></tr><tr><td><b>Type</b></td><td>command</td></tr><tr><td><b>Dictionary</b></td><td>library.oauth2</td></tr><tr><td><b>Library</b></td><td>OAuth2 Library</td></tr><tr><td><b>Syntax</b></td><td><pre>OAuth2 &lt;pAuthURL&gt;,&lt;pTokenURL&gt;,&lt;pClientID&gt;,&lt;pClientSecret&gt;,&lt;pScopes&gt;,&lt;pPort&gt;,&lt;pParams&gt;</pre></td></tr><tr><td><b>Associations</b></td><td>com.livecode.library.oauth2</td></tr><tr><td><b>Summary</b></td><td><p>Present an authorization dialog for any web service that supports OAuth2 Authorization Code Flow</p></td></tr><tr><td><b>Parameters</b></td><td><table class="inner"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>pAuthURL</td><td></td><td><p>The URL to present for the authorization page. This can be obtained from theAPI documentation of the service being authorized.</p></td></tr><tr><td>pTokenURL</td><td></td><td><p>The URL to obtain the authorization token from once an authorization code issent to the redirect uri. This can be obtained from the API documentation of the service beingauthorized.</p></td></tr><tr><td>pClientID</td><td></td><td><p>The application client ID obtained when setting up your application withthe web service.</p></td></tr><tr><td>pClientSecret</td><td></td><td><p>The application client secret obtained when setting up your application withthe web service.</p></td></tr><tr><td>pScopes</td><td></td><td><p>A comma delimited list of authorization scopes. Valid scopes will be foundin the API documentation of the service being authorized. If empty the scope parameter will beomitted.</p></td></tr><tr><td>pPort</td><td></td><td><p>The port to use for the redirect uri. It is recommended to use the range 49152-65535.</p></td></tr><tr><td>pParams</td><td></td><td><p>An array of additional key - value pairs of extra parameters to be sent tothe authorization url. Some services implement additional options that require extra parameters.</p></td></tr></table></td></tr><tr><td><b>Example</b></td><td><pre>constant kAuthURL = "https://slack.com/oauth/authorize"constant kTokenURL = "https://slack.com/api/oauth.access"constant kClientID = "XXXXXXXXX.XXXXXXXX"constant kClientSecret = "XXXXXXXXXXXXXXXXXXXXX"constant kScopes = "incoming-webhook"<p></p>OAuth2 kAuthURL, kTokenURL, kClientID, kClientSecret, kScopes, 54303if the result is not empty then   answer error "Not authorized!" else   local tAuth   put it into tAuth   local tMessage   ask question "What do you want to send?"   if it is empty then      exit mouseUp   end if<p></p>   put it into tMessage["text"]   put ArrayToJSON(tMessage) into tMessage<p></p>   set the httpHeaders to "Content-type: application/json" & \         return & "Authorization: token " & sAuth["access_token"]   post tMessage to url tAuth["incoming_webhook"]["url"]end if</pre></td></tr><tr><td><b>Values</b></td><td><table class="inner"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>It</td><td></td><td><p>An array containing the parsed JSON data returned by the token url</p></td></tr><tr><td>The result</td><td></td><td><p>An error string if an error occurred during authorization</p></td></tr></table></td></tr><tr><td><b>Description</b></td><td><p>In order to handle the redirect the library accepts socket connections on localhost on aconfigurable port. The redirect uri configured when setting up your application with theweb service should be <code>http://127.0.0.1:port</code> where <code>port</code> is the port that can beconfigured with the port parameter. It is recommended to use the range 49152-65535.</p><p><strong>Warning:</strong> The client secret should be kept securely when distributing an application inorder to protect your application from malicious use. The recommended way to do this is toinclude the client secret into a script in a password protected stack. If that is not possibleallow users to configure their own application with the web service and enter their ownclient id and secret into a preference instead of distributing your client id and  secret.</p></td></tr></table></body></html>