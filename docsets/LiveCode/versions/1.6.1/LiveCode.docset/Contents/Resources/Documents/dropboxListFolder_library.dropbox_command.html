<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>dropboxListFolder</title><link rel="stylesheet" type="text/css" href="userguide.css" /></head><body><table><tr><td colspan="2"><h1>dropboxListFolder</h1></td></tr><tr><td><b>Type</b></td><td>command</td></tr><tr><td><b>Dictionary</b></td><td>library.dropbox</td></tr><tr><td><b>Library</b></td><td>Dropbox Library</td></tr><tr><td><b>Syntax</b></td><td><pre>dropboxListFolder &lt;pAccessToken&gt;, &lt;pPath&gt;, &lt;pRecursive&gt;, &lt;pIncludeMediaInfo&gt;, [&lt;pCallback&gt;]</pre></td></tr><tr><td><b>Associations</b></td><td>com.livecode.library.dropbox</td></tr><tr><td><b>Summary</b></td><td><p>Starts returning the contents of a folder.</p></td></tr><tr><td><b>Parameters</b></td><td><table class="inner"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>pAccessToken</td><td></td><td><p>An OAuth2 Access token to access the user&#39;s account</p></td></tr><tr><td>pPath</td><td></td><td><p>Path in the user&#39;s Dropbox to be deleted.</p></td></tr><tr><td>pRecursive</td><td></td><td><p>If true, the list folder operation will be applied recursively to all subfolders andthe response will contain contents of all subfolders. The default for this field is False.</p></td></tr><tr><td>pIncludeMediaInfo</td><td></td><td><p>If true, FileMetadata.media_info is set for photo andvideo. The default for this field is False.</p></td></tr><tr><td>pCallback</td><td></td><td><p>The handler to call when the request is complete. If empty the commandwill block until complete. Requires tsNet with LiveCode Indy License.</p></td></tr></table></td></tr><tr><td><b>Values</b></td><td><table class="inner"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>It</td><td></td><td><p>For asynchronous requests it will contain a request ID. This may be used withtsNet&#39;s tsNetGetStatus function. If the request is synchronous and successful the itvariable will be a UTF-8 encoded JSON string in the form:</p><pre><code>{&quot;entries&quot;: [{&quot;.tag&quot;: &quot;file&quot;,&quot;name&quot;: &quot;Prime_Numbers.txt&quot;,&quot;id&quot;: &quot;id:a4ayc_80_OEAAAAAAAAAXw&quot;,&quot;client_modified&quot;: &quot;2015-05-12T15:50:38Z&quot;,&quot;server_modified&quot;: &quot;2015-05-12T15:50:38Z&quot;,&quot;rev&quot;: &quot;a1c10ce0dd78&quot;,&quot;size&quot;: 7212,&quot;path_lower&quot;: &quot;/homework/math/prime_numbers.txt&quot;,&quot;path_display&quot;: &quot;/Homework/math/Prime_Numbers.txt&quot;,&quot;sharing_info&quot;: {&quot;read_only&quot;: true,&quot;parent_shared_folder_id&quot;: &quot;84528192421&quot;,&quot;modified_by&quot;: &quot;dbid:AAH4f99T0taONIb-OurWxbNQ6ywGRopQngc&quot;},&quot;property_groups&quot;: [{&quot;template_id&quot;: &quot;ptid:1a5n2i6d3OYEAAAAAAAAAYa&quot;,&quot;fields&quot;: [{&quot;name&quot;: &quot;Security Policy&quot;,&quot;value&quot;: &quot;Confidential&quot;}]}],&quot;has_explicit_shared_members&quot;: false},{&quot;.tag&quot;: &quot;folder&quot;,&quot;name&quot;: &quot;math&quot;,&quot;id&quot;: &quot;id:a4ayc_80_OEAAAAAAAAAXz&quot;,&quot;path_lower&quot;: &quot;/homework/math&quot;,&quot;path_display&quot;: &quot;/Homework/math&quot;,&quot;sharing_info&quot;: {&quot;read_only&quot;: false,&quot;parent_shared_folder_id&quot;: &quot;84528192421&quot;,&quot;traverse_only&quot;: false,&quot;no_access&quot;: false},&quot;property_groups&quot;: [{&quot;template_id&quot;: &quot;ptid:1a5n2i6d3OYEAAAAAAAAAYa&quot;,&quot;fields&quot;: [{&quot;name&quot;: &quot;Security Policy&quot;,&quot;value&quot;: &quot;Confidential&quot;}]}]}],&quot;cursor&quot;: &quot;ZtkX9_EHj3x7PMkVuFIhwKYXEpwpLwyxp9vMKomUhllil9q7eWiAu&quot;,&quot;has_more&quot;: false}</code></pre><p>If an error occurred the JSON string will be in the following form:</p><pre><code>{&quot;error_summary&quot;: string,&quot;error&quot;: {&quot;.tag&quot;: string}}</code></pre></td></tr><tr><td>The result</td><td></td><td><p>An error if the HTTP request failed</p></td></tr></table></td></tr><tr><td><b>Description</b></td><td><p>If the result&#39;s ListFolderResult.has_more field is true, call list_folder/continue with the returned ListFolderResult.cursor to retrieve more entries.</p><p>If you&#39;re using ListFolderArg.recursive set to true to keep a local cache of the contentsof a Dropbox account, iterate through each entry in order and process them as follows tokeep your local state in sync:</p><ul><li>For each FileMetadata, store the new entry at the given path in your local state. If the required parent folders don&#39;t exist yet, create them. If there&#39;s already somethingelse at the given path, replace it and remove all its children.</li><li>For each FolderMetadata, store the new entry at the given path in your local state. If therequired parent folders don&#39;t exist yet, create them. If there&#39;s already something else at the given path, replace it but leave the children as they are. Check the new entry&#39;s FolderSharingInfo.read_only and set all its children&#39;s read-only statuses to match.</li><li>For each DeletedMetadata, if your local state has something at the given path, remove it and all its children. If there&#39;s nothing at the given path, ignore this entry.</li></ul><p>If the callback parameter is not empty the request will be asynchronus andwhen complete the callback will be sent to the object that accessed the API.The callback will be sent with three parameters:</p><ul><li>The request ID which will be the value of the it variable after calling the command</li><li>The HTTP response code</li><li>The data returned which will be the same data as documented for the it variable in a synchronous request.</li></ul></td></tr></table></body></html>