<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>libURLSetStatusCallback</title><link rel="stylesheet" type="text/css" href="userguide.css" /></head><body><table><tr><td colspan="2"><h1>libURLSetStatusCallback</h1></td></tr><tr><td><b>Type</b></td><td>command</td></tr><tr><td><b>Dictionary</b></td><td>LCS</td></tr><tr><td><b>Library</b></td><td>LiveCode Script</td></tr><tr><td><b>Syntax</b></td><td><pre>libURLSetStatusCallback [&lt;messageName&gt;[, &lt;objectLongID&gt;]]</pre></td></tr><tr><td><b>Associations</b></td><td>internet library</td></tr><tr><td><b>Summary</b></td><td><p>Sets up a <a href="callback_LCS_glossary.html">callback message</a> to be sent periodically during<a href="upload_LCS_glossary.html">uploads</a> and <a href="download_LCS_glossary.html">downloads</a>.</p></td></tr><tr><td><b>Introduced</b></td><td>2.0</td></tr><tr><td><b>OS</b></td><td>mac, windows, linux, html5</td></tr><tr><td><b>Platforms</b></td><td>desktop, server</td></tr><tr><td><b>Parameters</b></td><td><table class="inner"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>messageName</td><td></td><td><p>The name of a message to be sent whenever the URLStatus function isupdated. </p></td></tr><tr><td>objectLongID</td><td></td><td><p>The long ID of the object to send the message to. If <b>messageName</b> is not empty and <b>objectLongID</b> is not specified then the message will be sent tothe revLibURL library stack. The message can be handled in a frontscript,backscript, or library stack.</p></td></tr></table></td></tr><tr><td><b>Example</b></td><td><pre>libURLSetStatusCallback "putPercentage",the long ID of me</pre><pre>libURLSetStatusCallback myAction,the long ID of button "Upload"</pre><pre>libURLSetStatusCallback "putPercentage" -- sends message to url library. Handle the message in a frontscript, backscript, or stack in use.</pre><pre>libURLSetStatusCallback -- turns off status callback messages</pre></td></tr><tr><td><b>Related</b></td><td><b>Message</b>: <a href="startup_LCS_message.html">startup</a>, <a href="openBackground_LCS_message.html">openBackground</a>, <a href="preOpenStack_LCS_message.html">preOpenStack</a>, <a href="openStack_LCS_message.html">openStack</a>, <a href="preOpenCard_LCS_message.html">preOpenCard</a><br><b>Library</b>: <a href="library_LCS_library.html">library</a>, <a href="Internet_library_LCS_library.html">Internet library</a><br><b>Keyword</b>: <a href="URL_LCS_keyword.html">URL</a>, <a href="ftp_LCS_keyword.html">ftp</a>, <a href="item_LCS_keyword.html">item</a>, <a href="http_LCS_keyword.html">http</a><br><b>Control Structure</b>: <a href="function_LCS_control_structure.html">function</a>, <a href="switch_LCS_control_structure.html">switch</a><br><b>Function</b>: <a href="URLStatus_LCS_function.html">URLStatus</a><br><b>Command</b>: <a href="libURLSetStatusCallback_LCS_command.html">libURLSetStatusCallback</a>, <a href="put_LCS_command.html">put</a>, <a href="load_LCS_command.html">load</a>, <a href="group_LCS_command.html">group</a>, <a href="libURLftpUploadFile_LCS_command.html">libURLftpUploadFile</a>, <a href="libURLftpUpload_LCS_command.html">libURLftpUpload</a>, <a href="libURLDownloadToFile_LCS_command.html">libURLDownloadToFile</a><br><b>Glossary</b>: <a href="LiveCode_custom_library_LCS_glossary.html">LiveCode custom library</a>, <a href="application_LCS_glossary.html">application</a>, <a href="standalone_application_LCS_glossary.html">standalone application</a>, <a href="evaluate_LCS_glossary.html">evaluate</a>, <a href="message_LCS_glossary.html">message</a>, <a href="URL_LCS_glossary.html">URL</a>, <a href="callback_LCS_glossary.html">callback</a>, <a href="command_LCS_glossary.html">command</a>, <a href="control_structure_LCS_glossary.html">control structure</a>, <a href="main_stack_LCS_glossary.html">main stack</a>, <a href="Standalone_Application_Settings_LCS_glossary.html">Standalone Application Settings</a>, <a href="upload_LCS_glossary.html">upload</a>, <a href="download_LCS_glossary.html">download</a>, <a href="server_LCS_glossary.html">server</a>, <a href="HTTP_LCS_glossary.html">HTTP</a>, <a href="handler_LCS_glossary.html">handler</a><br></td></tr><tr><td><b>Security</b></td><td>network</td></tr><tr><td><b>Description</b></td><td><p>Use the <a href="libURLSetStatusCallback_LCS_command.html">libURLSetStatusCallback</a> <a href="command_LCS_glossary.html">command</a> if you want to do periodictasks (such as updating a progress bar) during a data transfer.</p><p>The Internet library periodically updates the URLStatus <a href="function_LCS_glossary.html">function</a>during <a href="upload_LCS_glossary.html">uploads</a> and <a href="download_LCS_glossary.html">downloads</a> made with the<a href="libURLDownloadToFile_LCS_command.html">libURLDownloadToFile</a>, <a href="libURLftpUpload_LCS_command.html">libURLftpUpload</a>, <a href="libURLftpUploadFile_LCS_command.html">libURLftpUploadFile</a>, <a href="put_LCS_command.html">put</a>,and <a href="load_LCS_glossary.html">load</a> commands, as well as <a href="download_LCS_glossary.html">downloads</a> triggered by<a href="evaluate_LCS_glossary.html">evaluating</a> an <a href="ftp_LCS_glossary.html">ftp</a> or <a href="http_LCS_glossary.html">http</a> <a href="URL_LCS_keyword.html">URL</a>. Whenever the<a href="Internet_library_LCS_library.html">Internet library</a> updates the <a href="URLStatus_LCS_function.html">URLStatus</a> <a href="function_LCS_glossary.html">function</a>, it also sends any<a href="callback_LCS_glossary.html">callback message</a> you&#39;ve set up with the<a href="libURLSetStatusCallback_LCS_command.html">libURLSetStatusCallback</a> <a href="command_LCS_glossary.html">command</a>.</p><p>Callback messages are sent even during blocking uploads and downloads(such as a download started with the put <a href="command_LCS_glossary.html">command</a>), so you can use thismethod to monitor progress for all file transfers.</p><p>The callback message is sent with two parameters: the URL and the URL&#39;scurrent status. For example, suppose you execute the following statementto set up a callback message:</p><pre><code>libURLSetStatusCallback &quot;myProgress&quot;,the long ID of button &quot;Monitor&quot;</code></pre><p>Then suppose you begin an upload with the following command:</p><pre><code>put field &quot;Data&quot; into URL &quot;ftp://me:mypass@ftp.example.org/myfile&quot;</code></pre><p>Periodically while the text of the field is being uploaded to the file,a &quot;myProgress&quot; message is sent to button &quot;Monitor&quot;. The first parametersent with &quot;myProgress&quot; is the URL (in this case, the URL is&quot;ftp://me:mypass@ftp.example.org/myfile&quot;), and the second parameter isthe current status of that URL. The &quot;myProgress&quot; handler might look like<b>this:</b> </p><pre><code>on myProgress pURL, pStatus    put pStatus into field pURL of stack &quot;Status Monitor&quot;end myProgress</code></pre><p>The URL status parameter is similar to the status returned by theURLStatus <a href="function_LCS_glossary.html">function</a>, and is one of the following:</p><ul><b><li>&quot;queued&quot;:</b> on hold until a previous request to the same site is completed</li><b><li>&quot;contacted&quot;:</b> the site has been contacted but no data has been sent orreceived yet</li><b><li>&quot;requested&quot;:</b> the URL has been requested</li><b><li>&quot;loading,bytesReceived,bytesTotal&quot;:</b> the <a href="URL_LCS_keyword.html">URL</a> data is beingreceived</li><b><li>&quot;uploading,bytesReceived,bytesTotal&quot;:</b> the file is being<a href="upload_LCS_glossary.html">uploaded</a> to the URL </li><b><li>&quot;downloaded&quot;:</b> the application has finisheddownloading the URL</li><b><li>&quot;uploaded&quot;:</b> the application has finished uploadingthe file to the URL</li><b><li>&quot;error&quot;:</b> an error occurred and the <a href="URL_LCS_keyword.html">URL</a>was not transferred</li><b><li>&quot;timeout&quot;:</b> the application timed out when attemptingto transfer the URL</li><b><li>empty:</b> the URL was not loaded, or has been unloaded</li></ul><Blockquote><p><b>Note:</b> The third <a href="item_LCS_glossary.html">item</a> (bytesTotal) in the &quot;loading&quot; or &quot;uploading&quot;status report is empty if it is not possible to determine the totalfile size. (For example, if an <a href="ftp_LCS_glossary.html">ftp</a> <a href="server_LCS_glossary.html">server</a> does not support theSIZE command, it&#39;s not possible to determine the file size when<a href="download_LCS_glossary.html">downloading</a> a file from that <a href="server_LCS_glossary.html">server</a>.)</p></Blockquote><p>If multiple file transfers are occurring at the same time, a separatecallback message is sent for each URL. If you want your callback handlerto treat URLs differently (for example, if you want to display separateprogress bars for different URLs, or do one thing with <a href="http_LCS_glossary.html">http</a><a href="URL_LCS_glossary.html">URLs</a> and something else with <a href="ftp_LCS_glossary.html">ftp</a><a href="URL_LCS_glossary.html">URLs</a>), use a <a href="switch_LCS_control_structure.html">switch</a> <a href="control_structure_LCS_glossary.html">control structure</a> in the<a href="handler_LCS_glossary.html">handler</a>. </p><p>You cannot have two callback messages set up at the same time foruploads and downloads. If you use the <a href="libURLSetStatusCallback_LCS_command.html">libURLSetStatusCallback</a><a href="command_LCS_glossary.html">command</a> to set up a <a href="callback_LCS_glossary.html">callback message</a>, the <b>Internetlibrary</b> forgets any <a href="callback_LCS_glossary.html">callback message</a> you previously set upwith the <a href="command_LCS_glossary.html">command</a>.</p><p>To turn off the callback message, use the following statement:</p><pre><code>libURLSetStatusCallback -- no parameters: turns off the message</code></pre><p>If you don&#39;t include the <b>messageName</b> and <b>objectLongID</b> parameters,the <a href="libURLSetStatusCallback_LCS_command.html">libURLSetStatusCallback</a> <a href="command_LCS_glossary.html">command</a> turns off the <a href="callback_LCS_glossary.html">callbackmessages</a> so that updating the <a href="URLStatus_LCS_function.html">URLStatus</a> <a href="function_LCS_glossary.html">function</a> does not send any<a href="message_LCS_glossary.html">messages</a>. </p><Blockquote><p><b>Important:</b> The <a href="libURLSetStatusCallback_LCS_command.html">libURLSetStatusCallback</a> <a href="command_LCS_glossary.html">command</a> is part of the <a href="Internet_library_LCS_library.html">Internet library</a>. To ensure that the <a href="command_LCS_glossary.html">command</a> works in a <a href="standalone_application_LCS_glossary.html">standalone application</a>, you must include this <a href="LiveCode_custom_library_LCS_glossary.html">custom library</a> when you create your <a href="standalone_application_LCS_glossary.html">standalone</a>. In the Inclusions pane of the <a href="Standalone_Application_Settings_LCS_glossary.html">Standalone Application Settings</a> window, make sure the &quot;Internet&quot; script library is selected.</p></Blockquote></td></tr><tr><td><b>Tags</b></td><td>networking</td></tr></table></body></html>