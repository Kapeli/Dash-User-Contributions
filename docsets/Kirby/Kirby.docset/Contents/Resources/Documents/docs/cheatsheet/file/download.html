<html lang="en"><head><title>$file->download()</title></head><body><h1>$file->download()</h1><p>Sends all needed headers and the content to force the browser to download the file.</p><p>type:<br />
text:</p><h2>Example</h2>
<p>The download method makes most sense with a custom route. You could easily build a nice download archive with a beautiful URL that way.</p>
<p>Let's assume you build a software and you want to provide a download link for the latest version at: <code>http://yoursoftware.com/downloads/latest</code></p>
<p>There is a <code>/content/downloads</code> folder, which contains the text file for the downloads page together with all releases of your software:</p>
<pre><code>/content/downloads
/content/downloads/downloads.txt
/content/downloads/yoursoftware-1.0.zip
/content/downloads/yoursoftware-1.1.zip
/content/downloads/yoursoftware-1.2.zip</code></pre>
<p>There's no <code>latest</code> subpage and thus the URL <code>http://yoursoftware.com/downloads/latest</code> does not really exist. We will build that with the router:</p>
<h5>/site/config/config.php</h5>
<pre><code class="language-php">c::set('routes', array(
  array(
    'pattern' =&gt; 'downloads/latest',
    'action'  =&gt; function() {

      page('downloads')
        -&gt;files()
        -&gt;filterBy('extension', 'zip')
        -&gt;last()
        -&gt;download();

    }
  )
));
</code></pre>
<p>The code above is very easy to explain. We are adding a new route for the URL <code>http://yoursoftware.com/downloads/latest</code>. Route patterns are always relative to the base URL of your site. In the action callback we simply fetch the <code>downloads</code> page, go through all the files and filter out those with the zip extension, take the last one of them and call the download method.</p>
<p>This will take care of sending the appropriate headers and echoing the content of the zip file to start the download in the browser.</p>
<p>This could easily be extended with a simple download counter for example to make it even more useful.</p></body></html>