<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What&#39;s New In Pyramid 1.1 &mdash; The Pyramid Web Framework v1.5</title>
    
    <link rel="stylesheet" href="_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="The Pyramid Web Framework v1.5" href="index.html" />
    <link rel="next" title="What&#39;s New In Pyramid 1.0" href="whatsnew-1.0.html" />
    <link rel="prev" title="What&#39;s New In Pyramid 1.2" href="whatsnew-1.2.html" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="_static/pyramid.ico"/>

  </head>
  <body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="index.html">
      		<img class="logo" src="_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.0.html" title="What&#39;s New In Pyramid 1.0"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.2.html" title="What&#39;s New In Pyramid 1.2"
             accesskey="P">previous</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="what-s-new-in-pyramid-1-1">
<h1>What's New In Pyramid 1.1<a class="headerlink" href="#what-s-new-in-pyramid-1-1" title="Permalink to this headline">¶</a></h1>
<p>This article explains the new features in Pyramid version 1.1 as compared to
its predecessor, <span>Pyramid</span> 1.0.  It also documents backwards
incompatibilities between the two versions and deprecations added to Pyramid
1.1, as well as software dependency changes and notable documentation
additions.</p>
<div class="section" id="terminology-changes">
<h2>Terminology Changes<a class="headerlink" href="#terminology-changes" title="Permalink to this headline">¶</a></h2>
<p>The term &quot;template&quot; used by the Pyramid documentation used to refer to both
&quot;paster templates&quot; and &quot;rendered templates&quot; (templates created by a rendering
engine.  i.e. Mako, Chameleon, Jinja, etc.).  &quot;Paster templates&quot; will now be
referred to as &quot;scaffolds&quot;, whereas the name for &quot;rendered templates&quot; will
remain as &quot;templates.&quot;</p>
</div>
<div class="section" id="major-feature-additions">
<h2>Major Feature Additions<a class="headerlink" href="#major-feature-additions" title="Permalink to this headline">¶</a></h2>
<p>The major feature additions in Pyramid 1.1 are:</p>
<ul class="simple">
<li>Support for the <tt class="docutils literal"><span class="pre">request.response</span></tt> attribute.</li>
<li>New views introspection feature: <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt>.</li>
<li>Support for &quot;static&quot; routes.</li>
<li>Default HTTP exception view.</li>
<li><tt class="docutils literal"><span class="pre">http_cache</span></tt> view configuration parameter causes Pyramid to set HTTP
caching headers.</li>
<li>Features that make it easier to write scripts that work in a <span>Pyramid</span>
environment.</li>
</ul>
<div class="section" id="request-response">
<h3><tt class="docutils literal"><span class="pre">request.response</span></tt><a class="headerlink" href="#request-response" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Instances of the <a class="reference internal" href="api/request.html#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a> class now have a
<tt class="docutils literal"><span class="pre">response</span></tt> attribute.</p>
<p>The object passed to a view callable as <tt class="docutils literal"><span class="pre">request</span></tt> is an instance of
<a class="reference internal" href="api/request.html#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a>. <tt class="docutils literal"><span class="pre">request.response</span></tt> is an instance of
the class <a class="reference internal" href="api/response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a>.  View callables that are
configured with a <a class="reference internal" href="glossary.html#term-renderer"><em class="xref std std-term">renderer</em></a> will return this response object to the
Pyramid router.  Therefore, code in a renderer-using view callable can set
response attributes such as <tt class="docutils literal"><span class="pre">request.response.content_type</span></tt> (before they
return, e.g. a dictionary to the renderer) and this will influence the HTTP
return value of the view callable.</p>
<p><tt class="docutils literal"><span class="pre">request.response</span></tt> can also be used in view callable code that is not
configured to use a renderer.  For example, a view callable might do
<tt class="docutils literal"><span class="pre">request.response.body</span> <span class="pre">=</span> <span class="pre">'123';</span> <span class="pre">return</span> <span class="pre">request.response</span></tt>.  However, the
response object that is produced by <tt class="docutils literal"><span class="pre">request.response</span></tt> must be <em>returned</em>
when a renderer is not in play in order to have any effect on the HTTP
response (it is not a &quot;global&quot; response, and modifications to it are not
somehow merged into a separately returned response object).</p>
<p>The <tt class="docutils literal"><span class="pre">request.response</span></tt> object is lazily created, so its introduction does
not negatively impact performance.</p>
</li>
</ul>
</div>
<div class="section" id="paster-pviews">
<h3><tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt><a class="headerlink" href="#paster-pviews" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A new paster command named <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt> was added.  This command
prints a summary of potentially matching views for a given path.  See
the section entitled <a class="reference internal" href="narr/commandline.html#displaying-matching-views"><em>Displaying Matching Views for a Given URL</em></a> for more
information.</li>
</ul>
</div>
<div class="section" id="static-routes">
<h3>Static Routes<a class="headerlink" href="#static-routes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">add_route</span></tt> method of the Configurator now accepts a <tt class="docutils literal"><span class="pre">static</span></tt>
argument.  If this argument is <tt class="docutils literal"><span class="pre">True</span></tt>, the added route will never be
considered for matching when a request is handled.  Instead, it will only
be useful for URL generation via <tt class="docutils literal"><span class="pre">route_url</span></tt> and <tt class="docutils literal"><span class="pre">route_path</span></tt>.  See the
section entitled <a class="reference internal" href="narr/urldispatch.html#static-route-narr"><em>Static Routes</em></a> for more information.</li>
</ul>
</div>
<div class="section" id="default-http-exception-view">
<h3>Default HTTP Exception View<a class="headerlink" href="#default-http-exception-view" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">A default exception view for the interface
<a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IExceptionResponse" title="pyramid.interfaces.IExceptionResponse"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IExceptionResponse</span></tt></a> is now registered by
default.  This means that an instance of any exception class imported from
<a class="reference internal" href="api/httpexceptions.html#module-pyramid.httpexceptions" title="pyramid.httpexceptions"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.httpexceptions</span></tt></a> (such as <tt class="docutils literal"><span class="pre">HTTPFound</span></tt>) can now be raised
from within view code; when raised, this exception view will render the
exception to a response.</p>
<p>To allow for configuration of this feature, the <a class="reference internal" href="glossary.html#term-configurator"><em class="xref std std-term">Configurator</em></a> now
accepts an additional keyword argument named <tt class="docutils literal"><span class="pre">exceptionresponse_view</span></tt>.
By default, this argument is populated with a default exception view
function that will be used when an HTTP exception is raised.  When <tt class="docutils literal"><span class="pre">None</span></tt>
is passed for this value, an exception view for HTTP exceptions will not be
registered.  Passing <tt class="docutils literal"><span class="pre">None</span></tt> returns the behavior of raising an HTTP
exception to that of Pyramid 1.0 (the exception will propagate to
<a class="reference internal" href="glossary.html#term-middleware"><em class="xref std std-term">middleware</em></a> and to the WSGI server).</p>
</li>
</ul>
</div>
<div class="section" id="http-cache">
<h3><tt class="docutils literal"><span class="pre">http_cache</span></tt><a class="headerlink" href="#http-cache" title="Permalink to this headline">¶</a></h3>
<p>A new value <tt class="docutils literal"><span class="pre">http_cache</span></tt> can be used as a <a class="reference internal" href="glossary.html#term-view-configuration"><em class="xref std std-term">view configuration</em></a>
parameter.</p>
<p>When you supply an <tt class="docutils literal"><span class="pre">http_cache</span></tt> value to a view configuration, the
<tt class="docutils literal"><span class="pre">Expires</span></tt> and <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> headers of a response generated by the
associated view callable are modified.  The value for <tt class="docutils literal"><span class="pre">http_cache</span></tt> may be
one of the following:</p>
<ul class="simple">
<li>A nonzero integer.  If it's a nonzero integer, it's treated as a number
of seconds.  This number of seconds will be used to compute the
<tt class="docutils literal"><span class="pre">Expires</span></tt> header and the <tt class="docutils literal"><span class="pre">Cache-Control:</span> <span class="pre">max-age</span></tt> parameter of
responses to requests which call this view.  For example:
<tt class="docutils literal"><span class="pre">http_cache=3600</span></tt> instructs the requesting browser to 'cache this
response for an hour, please'.</li>
<li>A <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt> instance.  If it's a <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt>
instance, it will be converted into a number of seconds, and that number
of seconds will be used to compute the <tt class="docutils literal"><span class="pre">Expires</span></tt> header and the
<tt class="docutils literal"><span class="pre">Cache-Control:</span> <span class="pre">max-age</span></tt> parameter of responses to requests which call
this view.  For example: <tt class="docutils literal"><span class="pre">http_cache=datetime.timedelta(days=1)</span></tt>
instructs the requesting browser to 'cache this response for a day,
please'.</li>
<li>Zero (<tt class="docutils literal"><span class="pre">0</span></tt>).  If the value is zero, the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> and
<tt class="docutils literal"><span class="pre">Expires</span></tt> headers present in all responses from this view will be
composed such that client browser cache (and any intermediate caches) are
instructed to never cache the response.</li>
<li>A two-tuple.  If it's a two tuple (e.g. <tt class="docutils literal"><span class="pre">http_cache=(1,</span>
<span class="pre">{'public':True})</span></tt>), the first value in the tuple may be a nonzero
integer or a <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt> instance; in either case this value
will be used as the number of seconds to cache the response.  The second
value in the tuple must be a dictionary.  The values present in the
dictionary will be used as input to the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> response
header.  For example: <tt class="docutils literal"><span class="pre">http_cache=(3600,</span> <span class="pre">{'public':True})</span></tt> means 'cache
for an hour, and add <tt class="docutils literal"><span class="pre">public</span></tt> to the Cache-Control header of the
response'.  All keys and values supported by the
<tt class="docutils literal"><span class="pre">webob.cachecontrol.CacheControl</span></tt> interface may be added to the
dictionary.  Supplying <tt class="docutils literal"><span class="pre">{'public':True}</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_control.public</span> <span class="pre">=</span> <span class="pre">True</span></tt>.</li>
</ul>
<p>Providing a non-tuple value as <tt class="docutils literal"><span class="pre">http_cache</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_expires(value)</span></tt> within your view's body.</p>
<p>Providing a two-tuple value as <tt class="docutils literal"><span class="pre">http_cache</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_expires(value[0],</span> <span class="pre">**value[1])</span></tt> within your view's body.</p>
<p>If you wish to avoid influencing, the <tt class="docutils literal"><span class="pre">Expires</span></tt> header, and instead wish
to only influence <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> headers, pass a tuple as <tt class="docutils literal"><span class="pre">http_cache</span></tt>
with the first element of <tt class="docutils literal"><span class="pre">None</span></tt>, e.g.: <tt class="docutils literal"><span class="pre">(None,</span> <span class="pre">{'public':True})</span></tt>.</p>
<p>The environment setting <tt class="docutils literal"><span class="pre">PYRAMID_PREVENT_HTTP_CACHE</span></tt> and configuration
file value <tt class="docutils literal"><span class="pre">prevent_http_cache</span></tt> are synonymous and allow you to prevent
HTTP cache headers from being set by Pyramid's <tt class="docutils literal"><span class="pre">http_cache</span></tt> machinery
globally in a process.  see <a class="reference internal" href="narr/viewconfig.html#influencing-http-caching"><em>Influencing HTTP Caching</em></a> and
<a class="reference internal" href="narr/environment.html#preventing-http-caching"><em>Preventing HTTP Caching</em></a>.</p>
</div>
<div class="section" id="easier-scripting-writing">
<h3>Easier Scripting Writing<a class="headerlink" href="#easier-scripting-writing" title="Permalink to this headline">¶</a></h3>
<p>A new API function <a class="reference internal" href="api/paster.html#pyramid.paster.bootstrap" title="pyramid.paster.bootstrap"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.paster.bootstrap()</span></tt></a> has been added to make
writing scripts that need to work under Pyramid environment easier, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.paster</span> <span class="kn">import</span> <span class="n">bootstrap</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">bootstrap</span><span class="p">(</span><span class="s">&#39;/path/to/my/development.ini&#39;</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;request&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">request</span><span class="o">.</span><span class="n">route_url</span><span class="p">(</span><span class="s">&#39;myroute&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="narr/commandline.html#writing-a-script"><em>Writing a Script</em></a> for more details.</p>
</div>
</div>
<div class="section" id="minor-feature-additions">
<h2>Minor Feature Additions<a class="headerlink" href="#minor-feature-additions" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">It is now possible to invoke <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt> even if the paste ini file
section name pointed to in its argument is not actually a Pyramid WSGI
application.  The shell will work in a degraded mode, and will warn the
user.  See &quot;The Interactive Shell&quot; in the &quot;Creating a Pyramid Project&quot;
narrative documentation section.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt>, and <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">proutes</span></tt> commands
each now under the hood uses <a class="reference internal" href="api/paster.html#pyramid.paster.bootstrap" title="pyramid.paster.bootstrap"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.paster.bootstrap()</span></tt></a>, which makes
it possible to supply an <tt class="docutils literal"><span class="pre">.ini</span></tt> file without naming the &quot;right&quot; section
in the file that points at the actual Pyramid application.  Instead, you
can generally just run <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">{pshell|proutes|pviews}</span> <span class="pre">development.ini</span></tt>
and it will do mostly the right thing.</p>
</li>
<li><p class="first">It is now possible to add a <tt class="docutils literal"><span class="pre">[pshell]</span></tt> section to your application's .ini
configuration file, which influences the global names available to a pshell
session.  See <a class="reference internal" href="narr/commandline.html#extending-pshell"><em>Extending the Shell</em></a>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/config.html#pyramid.config.Configurator.scan" title="pyramid.config.Configurator.scan"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.scan()</span></tt></a> method has grown a <tt class="docutils literal"><span class="pre">**kw</span></tt>
argument.  <tt class="docutils literal"><span class="pre">kw</span></tt> argument represents a set of keyword arguments to pass to
the Venusian <tt class="docutils literal"><span class="pre">Scanner</span></tt> object created by Pyramid.  (See the
<a class="reference internal" href="glossary.html#term-venusian"><em class="xref std std-term">Venusian</em></a> documentation for more information about <tt class="docutils literal"><span class="pre">Scanner</span></tt>).</p>
</li>
<li><p class="first">New request property: <tt class="docutils literal"><span class="pre">json_body</span></tt>. This property will return the
JSON-decoded variant of the request body.  If the request body is not
well-formed JSON, this property will raise an exception.</p>
</li>
<li><p class="first">A <a class="reference external" href="http://en.wikipedia.org/wiki/JSONP">JSONP</a> renderer.  See
<a class="reference internal" href="narr/renderers.html#jsonp-renderer"><em>JSONP Renderer</em></a> for more details.</p>
</li>
<li><p class="first">New authentication policy:
<a class="reference internal" href="api/authentication.html#pyramid.authentication.SessionAuthenticationPolicy" title="pyramid.authentication.SessionAuthenticationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.authentication.SessionAuthenticationPolicy</span></tt></a>, which uses a
session to store credentials.</p>
</li>
<li><p class="first">A function named <a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.exception_response" title="pyramid.httpexceptions.exception_response"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.httpexceptions.exception_response()</span></tt></a> is a
shortcut that can be used to create HTTP exception response objects using
an HTTP integer status code.</p>
</li>
<li><p class="first">Integers and longs passed as <tt class="docutils literal"><span class="pre">elements</span></tt> to
<a class="reference internal" href="api/url.html#pyramid.url.resource_url" title="pyramid.url.resource_url"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.url.resource_url()</span></tt></a> or
<a class="reference internal" href="api/request.html#pyramid.request.Request.resource_url" title="pyramid.request.Request.resource_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.resource_url()</span></tt></a> e.g. <tt class="docutils literal"><span class="pre">resource_url(context,</span>
<span class="pre">request,</span> <span class="pre">1,</span> <span class="pre">2)</span></tt> (<tt class="docutils literal"><span class="pre">1</span></tt> and <tt class="docutils literal"><span class="pre">2</span></tt> are the <tt class="docutils literal"><span class="pre">elements</span></tt>) will now be
converted implicitly to strings in the result.  Previously passing integers
or longs as elements would cause a TypeError.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt> scaffold now uses <tt class="docutils literal"><span class="pre">query.get</span></tt> rather than
<tt class="docutils literal"><span class="pre">query.filter_by</span></tt> to take better advantage of identity map caching.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt> scaffold now has unit tests.</p>
</li>
<li><p class="first">Added a <a class="reference internal" href="api/i18n.html#pyramid.i18n.make_localizer" title="pyramid.i18n.make_localizer"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.i18n.make_localizer()</span></tt></a> API.</p>
</li>
<li><p class="first">An exception raised by a <a class="reference internal" href="api/events.html#pyramid.events.NewRequest" title="pyramid.events.NewRequest"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.events.NewRequest</span></tt></a> event
subscriber can now be caught by an exception view.</p>
</li>
<li><p class="first">It is now possible to get information about why Pyramid raised a Forbidden
exception from within an exception view.  The <tt class="docutils literal"><span class="pre">ACLDenied</span></tt> object returned
by the <tt class="docutils literal"><span class="pre">permits</span></tt> method of each stock authorization policy
(<a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IAuthorizationPolicy.permits" title="pyramid.interfaces.IAuthorizationPolicy.permits"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.interfaces.IAuthorizationPolicy.permits()</span></tt></a>) is now attached
to the Forbidden exception as its <tt class="docutils literal"><span class="pre">result</span></tt> attribute.  Therefore, if
you've created a Forbidden exception view, you can see the ACE, ACL,
permission, and principals involved in the request as
eg. <tt class="docutils literal"><span class="pre">context.result.permission</span></tt>, <tt class="docutils literal"><span class="pre">context.result.acl</span></tt>, etc within the
logic of the Forbidden exception view.</p>
</li>
<li><p class="first">Don't explicitly prevent the <tt class="docutils literal"><span class="pre">timeout</span></tt> from being lower than the
<tt class="docutils literal"><span class="pre">reissue_time</span></tt> when setting up an
<a class="reference internal" href="api/authentication.html#pyramid.authentication.AuthTktAuthenticationPolicy" title="pyramid.authentication.AuthTktAuthenticationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></tt></a> (previously
such a configuration would raise a <tt class="docutils literal"><span class="pre">ValueError</span></tt>, now it's allowed,
although typically nonsensical).  Allowing the nonsensical configuration
made the code more understandable and required fewer tests.</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/request.html#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a> class now has a <tt class="docutils literal"><span class="pre">ResponseClass</span></tt>
attribute which points at <a class="reference internal" href="api/response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a> class now has a <tt class="docutils literal"><span class="pre">RequestClass</span></tt>
interface which points at <a class="reference internal" href="api/request.html#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a>.</p>
</li>
<li><p class="first">It is now possible to return an arbitrary object from a Pyramid view
callable even if a renderer is not used, as long as a suitable adapter to
<a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IResponse" title="pyramid.interfaces.IResponse"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IResponse</span></tt></a> is registered for the type of the
returned object by using the new
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_response_adapter" title="pyramid.config.Configurator.add_response_adapter"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_response_adapter()</span></tt></a> API.  See the
section in the Hooks chapter of the documentation entitled
<a class="reference internal" href="narr/hooks.html#using-iresponse"><em>Changing How Pyramid Treats View Responses</em></a>.</p>
</li>
<li><p class="first">The Pyramid router will now, by default, call the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of
response objects when returning a WSGI response.  This means that, among
other things, the <tt class="docutils literal"><span class="pre">conditional_response</span></tt> feature response objects
inherited from WebOb will now behave properly.</p>
</li>
<li><p class="first">New method named <a class="reference internal" href="api/request.html#pyramid.request.Request.is_response" title="pyramid.request.Request.is_response"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.is_response()</span></tt></a>.  This method
should be used instead of the <tt class="xref py py-func docutils literal"><span class="pre">pyramid.view.is_response()</span></tt> function,
which has been deprecated.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/exceptions.html#pyramid.exceptions.NotFound" title="pyramid.exceptions.NotFound"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.exceptions.NotFound</span></tt></a> is now just an alias for
<a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.HTTPNotFound" title="pyramid.httpexceptions.HTTPNotFound"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.httpexceptions.HTTPNotFound</span></tt></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/exceptions.html#pyramid.exceptions.Forbidden" title="pyramid.exceptions.Forbidden"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.exceptions.Forbidden</span></tt></a> is now just an alias for
<a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.HTTPForbidden" title="pyramid.httpexceptions.HTTPForbidden"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.httpexceptions.HTTPForbidden</span></tt></a>.</p>
</li>
<li><p class="first">Added <tt class="docutils literal"><span class="pre">mako.preprocessor</span></tt> config file parameter; allows for a Mako
preprocessor to be specified as a Python callable or Python dotted name.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/183">https://github.com/Pylons/pyramid/pull/183</a> for rationale.</p>
</li>
<li><p class="first">New API class: <a class="reference internal" href="api/static.html#pyramid.static.static_view" title="pyramid.static.static_view"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.static.static_view</span></tt></a>.  This supersedes the
(now deprecated) <tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.static</span></tt> class.
<a class="reference internal" href="api/static.html#pyramid.static.static_view" title="pyramid.static.static_view"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.static.static_view</span></tt></a>, by default, serves up documents as the
result of the request's <tt class="docutils literal"><span class="pre">path_info</span></tt>, attribute rather than it's
<tt class="docutils literal"><span class="pre">subpath</span></tt> attribute (the inverse was true of
<tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.static</span></tt>, and still is).
<a class="reference internal" href="api/static.html#pyramid.static.static_view" title="pyramid.static.static_view"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.static.static_view</span></tt></a> exposes a <tt class="docutils literal"><span class="pre">use_subpath</span></tt> flag for use
when you want the static view to behave like the older deprecated version.</p>
</li>
<li><p class="first">A new api function <a class="reference internal" href="api/scripting.html#pyramid.scripting.prepare" title="pyramid.scripting.prepare"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.scripting.prepare()</span></tt></a> has been added.  It is
a lower-level analogue of <a class="reference internal" href="api/paster.html#pyramid.paster.bootstrap" title="pyramid.paster.bootstrap"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.paster.bootstrap()</span></tt></a> that accepts a
request and a registry instead of a config file argument, and is used for
the same purpose:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.scripting</span> <span class="kn">import</span> <span class="n">prepare</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">prepare</span><span class="p">(</span><span class="n">registry</span><span class="o">=</span><span class="n">myregistry</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;request&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">request</span><span class="o">.</span><span class="n">route_url</span><span class="p">(</span><span class="s">&#39;myroute&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">A new API function <tt class="xref py py-func docutils literal"><span class="pre">pyramid.scripting.make_request()</span></tt> has been added.
The resulting request will have a <tt class="docutils literal"><span class="pre">registry</span></tt> attribute.  It is meant to
be used in conjunction with <a class="reference internal" href="api/scripting.html#pyramid.scripting.prepare" title="pyramid.scripting.prepare"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.scripting.prepare()</span></tt></a> and/or
<a class="reference internal" href="api/paster.html#pyramid.paster.bootstrap" title="pyramid.paster.bootstrap"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.paster.bootstrap()</span></tt></a> (both of which accept a request as an
argument):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.scripting</span> <span class="kn">import</span> <span class="n">make_request</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">make_request</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">New API attribute <a class="reference internal" href="api/config.html#pyramid.config.global_registries" title="pyramid.config.global_registries"><tt class="xref py py-attr docutils literal"><span class="pre">pyramid.config.global_registries</span></tt></a> is an iterable
object that contains references to every Pyramid registry loaded into the
current process via <a class="reference internal" href="api/config.html#pyramid.config.Configurator.make_wsgi_app" title="pyramid.config.Configurator.make_wsgi_app"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.make_wsgi_app()</span></tt></a>.  It also
has a <tt class="docutils literal"><span class="pre">last</span></tt> attribute containing the last registry loaded.  This is used
by the scripting machinery, and is available for introspection.</p>
</li>
<li><p class="first">Added the <a class="reference internal" href="api/renderers.html#pyramid.renderers.null_renderer" title="pyramid.renderers.null_renderer"><tt class="xref py py-attr docutils literal"><span class="pre">pyramid.renderers.null_renderer</span></tt></a> object as an API.  The
null renderer is an object that can be used in advanced integration cases
as input to the view configuration <tt class="docutils literal"><span class="pre">renderer=</span></tt> argument.  When the null
renderer is used as a view renderer argument, Pyramid avoids converting the
view callable result into a Response object.  This is useful if you want to
reuse the view configuration and lookup machinery outside the context of
its use by the Pyramid router.  (This feature was added for consumption by
the <tt class="docutils literal"><span class="pre">pyramid_rpc</span></tt> package, which uses view configuration and lookup
outside the context of a router in exactly this way.)</p>
</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilities">
<h2>Backwards Incompatibilities<a class="headerlink" href="#backwards-incompatibilities" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Pyramid no longer supports Python 2.4.  Python 2.5 or better is required to
run Pyramid 1.1+.  Pyramid, however, does not work under any version of
Python 3 yet.</p>
</li>
<li><p class="first">The Pyramid router now, by default, expects response objects returned from
view callables to implement the <a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IResponse" title="pyramid.interfaces.IResponse"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IResponse</span></tt></a>
interface.  Unlike the Pyramid 1.0 version of this interface, objects which
implement IResponse now must define a <tt class="docutils literal"><span class="pre">__call__</span></tt> method that accepts
<tt class="docutils literal"><span class="pre">environ</span></tt> and <tt class="docutils literal"><span class="pre">start_response</span></tt>, and which returns an <tt class="docutils literal"><span class="pre">app_iter</span></tt>
iterable, among other things.  Previously, it was possible to return any
object which had the three WebOb <tt class="docutils literal"><span class="pre">app_iter</span></tt>, <tt class="docutils literal"><span class="pre">headerlist</span></tt>, and
<tt class="docutils literal"><span class="pre">status</span></tt> attributes as a response, so this is a backwards
incompatibility.  It is possible to get backwards compatibility back by
registering an adapter to IResponse from the type of object you're now
returning from view callables.  See the section in the Hooks chapter of the
documentation entitled <a class="reference internal" href="narr/hooks.html#using-iresponse"><em>Changing How Pyramid Treats View Responses</em></a>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IResponse" title="pyramid.interfaces.IResponse"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IResponse</span></tt></a> interface is now much more
extensive.  Previously it defined only <tt class="docutils literal"><span class="pre">app_iter</span></tt>, <tt class="docutils literal"><span class="pre">status</span></tt> and
<tt class="docutils literal"><span class="pre">headerlist</span></tt>; now it is basically intended to directly mirror the
<tt class="docutils literal"><span class="pre">webob.Response</span></tt> API, which has many methods and attributes.</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/httpexceptions.html#module-pyramid.httpexceptions" title="pyramid.httpexceptions"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.httpexceptions</span></tt></a> classes named <tt class="docutils literal"><span class="pre">HTTPFound</span></tt>,
<tt class="docutils literal"><span class="pre">HTTPMultipleChoices</span></tt>, <tt class="docutils literal"><span class="pre">HTTPMovedPermanently</span></tt>, <tt class="docutils literal"><span class="pre">HTTPSeeOther</span></tt>,
<tt class="docutils literal"><span class="pre">HTTPUseProxy</span></tt>, and <tt class="docutils literal"><span class="pre">HTTPTemporaryRedirect</span></tt> now accept <tt class="docutils literal"><span class="pre">location</span></tt> as
their first positional argument rather than <tt class="docutils literal"><span class="pre">detail</span></tt>.  This means that
you can do, e.g. <tt class="docutils literal"><span class="pre">return</span> <span class="pre">pyramid.httpexceptions.HTTPFound('http://foo')</span></tt>
rather than <tt class="docutils literal"><span class="pre">return</span>
<span class="pre">pyramid.httpexceptions.HTTPFound(location='http//foo')</span></tt> (the latter will
of course continue to work).</p>
</li>
<li><p class="first">The pyramid Router attempted to set a value into the key
<tt class="docutils literal"><span class="pre">environ['repoze.bfg.message']</span></tt> when it caught a view-related exception
for backwards compatibility with applications written for <tt class="xref py py-mod docutils literal"><span class="pre">repoze.bfg</span></tt>
during error handling.  It did this by using code that looked like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># &quot;why&quot; is an exception object</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">why</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

<span class="n">environ</span><span class="p">[</span><span class="s">&#39;repoze.bfg.message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">msg</span>
</pre></div>
</div>
<p>Use of the value <tt class="docutils literal"><span class="pre">environ['repoze.bfg.message']</span></tt> was docs-deprecated in
Pyramid 1.0.  Our standing policy is to not remove features after a
deprecation for two full major releases, so this code was originally slated
to be removed in Pyramid 1.2.  However, computing the
<tt class="docutils literal"><span class="pre">repoze.bfg.message</span></tt> value was the source of at least one bug found in
the wild (<a class="reference external" href="https://github.com/Pylons/pyramid/issues/199">https://github.com/Pylons/pyramid/issues/199</a>), and there isn't a
foolproof way to both preserve backwards compatibility and to fix the bug.
Therefore, the code which sets the value has been removed in this release.
Code in exception views which relies on this value's presence in the
environment should now use the <tt class="docutils literal"><span class="pre">exception</span></tt> attribute of the request
(e.g. <tt class="docutils literal"><span class="pre">request.exception[0]</span></tt>) to retrieve the message instead of relying
on <tt class="docutils literal"><span class="pre">request.environ['repoze.bfg.message']</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="deprecations-and-behavior-differences">
<h2>Deprecations and Behavior Differences<a class="headerlink" href="#deprecations-and-behavior-differences" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Under Python 2.7+, it's necessary to pass the Python interpreter
the correct warning flags to see deprecation warnings emitted by Pyramid
when porting your application from an older version of Pyramid.  Use the
<tt class="docutils literal"><span class="pre">PYTHONWARNINGS</span></tt> environment variable with the value <tt class="docutils literal"><span class="pre">all</span></tt> in the
shell you use to invoke <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">serve</span></tt> to see these warnings, e.g. on
UNIX, <tt class="docutils literal"><span class="pre">PYTHONWARNINGS=all</span> <span class="pre">$VENV/bin/paster</span> <span class="pre">serve</span> <span class="pre">development.ini</span></tt>.
Python 2.5 and 2.6 show deprecation warnings by default,
so this is unnecessary there.
All deprecation warnings are emitted to the console.</p>
</div>
<ul>
<li><p class="first">The <tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.static</span></tt> class has been deprecated in favor of the
newer <a class="reference internal" href="api/static.html#pyramid.static.static_view" title="pyramid.static.static_view"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.static.static_view</span></tt></a> class.  A deprecation warning is
raised when it is used.  You should replace it with a reference to
<a class="reference internal" href="api/static.html#pyramid.static.static_view" title="pyramid.static.static_view"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.static.static_view</span></tt></a> with the <tt class="docutils literal"><span class="pre">use_subpath=True</span></tt> argument.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">proutes</span></tt>, and <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt> commands
now take a single argument in the form <tt class="docutils literal"><span class="pre">/path/to/config.ini#sectionname</span></tt>
rather than the previous 2-argument spelling <tt class="docutils literal"><span class="pre">/path/to/config.ini</span>
<span class="pre">sectionname</span></tt>.  <tt class="docutils literal"><span class="pre">#sectionname</span></tt> may be omitted, in which case <tt class="docutils literal"><span class="pre">#main</span></tt> is
assumed.</p>
</li>
<li><p class="first">The default Mako renderer is now configured to escape all HTML in
expression tags. This is intended to help prevent XSS attacks caused by
rendering unsanitized input from users. To revert this behavior in user's
templates, they need to filter the expression through the 'n' filter:</p>
<div class="highlight-python"><div class="highlight"><pre>${ myhtml | n }.
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/193">https://github.com/Pylons/pyramid/issues/193</a>.</p>
</li>
<li><p class="first">Deprecated all assignments to <tt class="docutils literal"><span class="pre">request.response_*</span></tt> attributes (for
example <tt class="docutils literal"><span class="pre">request.response_content_type</span> <span class="pre">=</span> <span class="pre">'foo'</span></tt> is now deprecated).
Assignments and mutations of assignable request attributes that were
considered by the framework for response influence are now deprecated:
<tt class="docutils literal"><span class="pre">response_content_type</span></tt>, <tt class="docutils literal"><span class="pre">response_headerlist</span></tt>, <tt class="docutils literal"><span class="pre">response_status</span></tt>,
<tt class="docutils literal"><span class="pre">response_charset</span></tt>, and <tt class="docutils literal"><span class="pre">response_cache_for</span></tt>.  Instead of assigning
these to the request object for later detection by the rendering machinery,
users should use the appropriate API of the Response object created by
accessing <tt class="docutils literal"><span class="pre">request.response</span></tt> (e.g. code which does
<tt class="docutils literal"><span class="pre">request.response_content_type</span> <span class="pre">=</span> <span class="pre">'abc'</span></tt> should be changed to
<tt class="docutils literal"><span class="pre">request.response.content_type</span> <span class="pre">=</span> <span class="pre">'abc'</span></tt>).</p>
</li>
<li><p class="first">Passing view-related parameters to
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_route()</span></tt></a> is now deprecated.
Previously, a view was permitted to be connected to a route using a set of
<tt class="docutils literal"><span class="pre">view*</span></tt> parameters passed to the <tt class="docutils literal"><span class="pre">add_route</span></tt> method of the
Configurator.  This was a shorthand which replaced the need to perform a
subsequent call to <tt class="docutils literal"><span class="pre">add_view</span></tt>. For example, it was valid (and often
recommended) to do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;home&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;mypackage.views.myview&#39;</span><span class="p">,</span>
                  <span class="n">view_renderer</span><span class="o">=</span><span class="s">&#39;some/renderer.pt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Passing <tt class="docutils literal"><span class="pre">view*</span></tt> arguments to <tt class="docutils literal"><span class="pre">add_route</span></tt> is now deprecated in favor of
connecting a view to a predefined route via
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a> using the route's
<tt class="docutils literal"><span class="pre">route_name</span></tt> parameter.  As a result, the above example should now be
spelled:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;home&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s">&#39;mypackage.views.myview&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;home&#39;</span><span class="p">,</span>
                <span class="n">renderer</span><span class="o">=</span><span class="s">&#39;some/renderer.pt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This deprecation was done to reduce confusion observed in IRC, as well as
to (eventually) reduce documentation burden.  A deprecation warning is
now issued when any view-related parameter is passed to <tt class="docutils literal"><span class="pre">add_route</span></tt>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference external" href="https://github.com/Pylons/pyramid/issues/164">issue #164 on GitHub</a>.</p>
</div>
</li>
<li><p class="first">Passing an <tt class="docutils literal"><span class="pre">environ</span></tt> dictionary to the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of a
&quot;traverser&quot; (e.g. an object that implements
<tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.ITraverser</span></tt> such as an instance of
<tt class="xref py py-class docutils literal"><span class="pre">pyramid.traversal.ResourceTreeTraverser</span></tt>) as its <tt class="docutils literal"><span class="pre">request</span></tt>
argument now causes a deprecation warning to be emitted.  Consumer code
should pass a <tt class="docutils literal"><span class="pre">request</span></tt> object instead.  The fact that passing an environ
dict is permitted has been documentation-deprecated since <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>
1.1, and this capability will be removed entirely in a future version.</p>
</li>
<li><p class="first">The following (undocumented, dictionary-like) methods of the
<a class="reference internal" href="api/request.html#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a> object have been deprecated:
<tt class="docutils literal"><span class="pre">__contains__</span></tt>, <tt class="docutils literal"><span class="pre">__delitem__</span></tt>, <tt class="docutils literal"><span class="pre">__getitem__</span></tt>, <tt class="docutils literal"><span class="pre">__iter__</span></tt>,
<tt class="docutils literal"><span class="pre">__setitem__</span></tt>, <tt class="docutils literal"><span class="pre">get</span></tt>, <tt class="docutils literal"><span class="pre">has_key</span></tt>, <tt class="docutils literal"><span class="pre">items</span></tt>, <tt class="docutils literal"><span class="pre">iteritems</span></tt>,
<tt class="docutils literal"><span class="pre">itervalues</span></tt>, <tt class="docutils literal"><span class="pre">keys</span></tt>, <tt class="docutils literal"><span class="pre">pop</span></tt>, <tt class="docutils literal"><span class="pre">popitem</span></tt>, <tt class="docutils literal"><span class="pre">setdefault</span></tt>, <tt class="docutils literal"><span class="pre">update</span></tt>,
and <tt class="docutils literal"><span class="pre">values</span></tt>.  Usage of any of these methods will cause a deprecation
warning to be emitted.  These methods were added for internal compatibility
in <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> 1.1 (code that currently expects a request object
expected an environ object in BFG 1.0 and before).  In a future version,
these methods will be removed entirely.</p>
</li>
<li><p class="first">A custom request factory is now required to return a request object that
has a <tt class="docutils literal"><span class="pre">response</span></tt> attribute (or &quot;reified&quot;/lazy property) if the
request is meant to be used in a view that uses a renderer.  This
<tt class="docutils literal"><span class="pre">response</span></tt> attribute should be an instance of the class
<a class="reference internal" href="api/response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a>.</p>
</li>
<li><p class="first">The JSON and string renderer factories now assign to
<tt class="docutils literal"><span class="pre">request.response.content_type</span></tt> rather than
<tt class="docutils literal"><span class="pre">request.response_content_type</span></tt>.</p>
</li>
<li><p class="first">Each built-in renderer factory now determines whether it should change the
content type of the response by comparing the response's content type
against the response's default content type; if the content type is the
default content type (usually <tt class="docutils literal"><span class="pre">text/html</span></tt>), the renderer changes the
content type (to <tt class="docutils literal"><span class="pre">application/json</span></tt> or <tt class="docutils literal"><span class="pre">text/plain</span></tt> for JSON and string
renderers respectively).</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/wsgi.html#pyramid.wsgi.wsgiapp2" title="pyramid.wsgi.wsgiapp2"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.wsgi.wsgiapp2()</span></tt></a> now uses a slightly different method of
figuring out how to &quot;fix&quot; <tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt> and <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> for the
downstream application.  As a result, those values may differ slightly from
the perspective of the downstream application (for example, <tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt>
will now never possess a trailing slash).</p>
</li>
<li><p class="first">Previously, <a class="reference internal" href="api/request.html#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a> inherited from
<tt class="xref py py-class docutils literal"><span class="pre">webob.request.Request</span></tt> and implemented <tt class="docutils literal"><span class="pre">__getattr__</span></tt>,
<tt class="docutils literal"><span class="pre">__setattr__</span></tt> and <tt class="docutils literal"><span class="pre">__delattr__</span></tt> itself in order to override &quot;adhoc
attr&quot; WebOb behavior where attributes of the request are stored in the
environ.  Now, <a class="reference internal" href="api/request.html#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a> inherits from (the more
recent) <a class="reference external" href="http://docs.webob.org/en/latest/modules/webob.html#webob.request.BaseRequest" title="(in WebOb v1.4.1dev)"><tt class="xref py py-class docutils literal"><span class="pre">webob.request.BaseRequest</span></tt></a> instead of
<tt class="xref py py-class docutils literal"><span class="pre">webob.request.Request</span></tt>, which provides the same behavior.
<a class="reference internal" href="api/request.html#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a> no longer implements its own
<tt class="docutils literal"><span class="pre">__getattr__</span></tt>, <tt class="docutils literal"><span class="pre">__setattr__</span></tt> or <tt class="docutils literal"><span class="pre">__delattr__</span></tt> as a result.</p>
</li>
<li><p class="first">Deprecated <tt class="xref py py-func docutils literal"><span class="pre">pyramid.view.is_response()</span></tt> function in favor of
(newly-added) <a class="reference internal" href="api/request.html#pyramid.request.Request.is_response" title="pyramid.request.Request.is_response"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.is_response()</span></tt></a> method.
Determining if an object is truly a valid response object now requires
access to the registry, which is only easily available as a request
attribute.  The <tt class="xref py py-func docutils literal"><span class="pre">pyramid.view.is_response()</span></tt> function will still work
until it is removed, but now may return an incorrect answer under some
(very uncommon) circumstances.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a> is now a <em>subclass</em> of
<tt class="docutils literal"><span class="pre">webob.response.Response</span></tt> (in order to directly implement the
<a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IResponse" title="pyramid.interfaces.IResponse"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IResponse</span></tt></a> interface, to speed up response
generation).</p>
</li>
<li><p class="first">The &quot;exception response&quot; objects importable from <tt class="docutils literal"><span class="pre">pyramid.httpexceptions</span></tt>
(e.g. <tt class="docutils literal"><span class="pre">HTTPNotFound</span></tt>) are no longer just import aliases for classes that
actually live in <tt class="docutils literal"><span class="pre">webob.exc</span></tt>.  Instead, we've defined our own exception
classes within the module that mirror and emulate the <tt class="docutils literal"><span class="pre">webob.exc</span></tt>
exception response objects almost entirely.  See
<a class="reference internal" href="designdefense.html#http-exception-hierarchy"><em>Pyramid Uses its Own HTTP Exception Class Hierarchy Rather Than webob.exc</em></a> in the Design Defense chapter for more
information.</p>
</li>
<li><p class="first">When visiting a URL that represented a static view which resolved to a
subdirectory, the <tt class="docutils literal"><span class="pre">index.html</span></tt> of that subdirectory would not be served
properly.  Instead, a redirect to <tt class="docutils literal"><span class="pre">/subdir</span></tt> would be issued.  This has
been fixed, and now visiting a subdirectory that contains an <tt class="docutils literal"><span class="pre">index.html</span></tt>
within a static view returns the index.html properly.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference external" href="https://github.com/Pylons/pyramid/issues/67">issue #67 on GitHub</a>.</p>
</div>
</li>
<li><p class="first">Deprecated the <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.set_renderer_globals_factory</span></tt>
method and the <tt class="docutils literal"><span class="pre">renderer_globals</span></tt> Configurator constructor parameter.
Users should convert code using this feature to use a BeforeRender event. See
the section <a class="reference internal" href="narr/hooks.html#beforerender-event"><em>Using The Before Render Event</em></a> in the Hooks chapter.</p>
</li>
<li><p class="first">In Pyramid 1.0, the <a class="reference internal" href="api/events.html#pyramid.events.subscriber" title="pyramid.events.subscriber"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.events.subscriber</span></tt></a> directive behaved
contrary to the documentation when passed more than one interface object to
its constructor.  For example, when the following listener was registered:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@subscriber</span><span class="p">(</span><span class="n">IFoo</span><span class="p">,</span> <span class="n">IBar</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">expects_ifoo_events_and_ibar_events</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">event</span>
</pre></div>
</div>
<p>The Events chapter docs claimed that the listener would be registered and
listening for both <tt class="docutils literal"><span class="pre">IFoo</span></tt> and <tt class="docutils literal"><span class="pre">IBar</span></tt> events.  Instead, it registered an
&quot;object event&quot; subscriber which would only be called if an IObjectEvent was
emitted where the object interface was <tt class="docutils literal"><span class="pre">IFoo</span></tt> and the event interface was
<tt class="docutils literal"><span class="pre">IBar</span></tt>.</p>
<p>The behavior now matches the documentation. If you were relying on the
buggy behavior of the 1.0 <tt class="docutils literal"><span class="pre">subscriber</span></tt> directive in order to register an
object event subscriber, you must now pass a sequence to indicate you'd
like to register a subscriber for an object event. e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@subscriber</span><span class="p">([</span><span class="n">IFoo</span><span class="p">,</span> <span class="n">IBar</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">expects_object_event</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">print</span> <span class="nb">object</span><span class="p">,</span> <span class="n">event</span>
</pre></div>
</div>
</li>
<li><p class="first">In 1.0, if a <a class="reference internal" href="api/events.html#pyramid.events.BeforeRender" title="pyramid.events.BeforeRender"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.events.BeforeRender</span></tt></a> event subscriber added a
value via the <tt class="docutils literal"><span class="pre">__setitem__</span></tt> or <tt class="docutils literal"><span class="pre">update</span></tt> methods of the event object
with a key that already existed in the renderer globals dictionary, a
<tt class="docutils literal"><span class="pre">KeyError</span></tt> was raised.  With the deprecation of the
&quot;add_renderer_globals&quot; feature of the configurator, there was no way to
override an existing value in the renderer globals dictionary that already
existed.  Now, the event object will overwrite an older value that is
already in the globals dictionary when its <tt class="docutils literal"><span class="pre">__setitem__</span></tt> or <tt class="docutils literal"><span class="pre">update</span></tt> is
called (as well as the new <tt class="docutils literal"><span class="pre">setdefault</span></tt> method), just like a plain old
dictionary.  As a result, for maximum interoperability with other
third-party subscribers, if you write an event subscriber meant to be used
as a BeforeRender subscriber, your subscriber code will now need to (using
<tt class="docutils literal"><span class="pre">.get</span></tt> or <tt class="docutils literal"><span class="pre">__contains__</span></tt> of the event object) ensure no value already
exists in the renderer globals dictionary before setting an overriding
value.</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_route()</span></tt></a> method allowed two routes
with the same route to be added without an intermediate call to
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.commit()</span></tt></a>.  If you now receive a
<tt class="docutils literal"><span class="pre">ConfigurationError</span></tt> at startup time that appears to be <tt class="docutils literal"><span class="pre">add_route</span></tt>
related, you'll need to either a) ensure that all of your route names are
unique or b) call <tt class="docutils literal"><span class="pre">config.commit()</span></tt> before adding a second route with the
name of a previously added name or c) use a Configurator that works in
<tt class="docutils literal"><span class="pre">autocommit</span></tt> mode.</p>
</li>
</ul>
</div>
<div class="section" id="dependency-changes">
<h2>Dependency Changes<a class="headerlink" href="#dependency-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Pyramid now depends on <a class="reference internal" href="glossary.html#term-webob"><em class="xref std std-term">WebOb</em></a> &gt;= 1.0.2 as tests depend on the bugfix
in that release: &quot;Fix handling of WSGI environs with missing
<tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt>&quot;.  (Note that in reality, everyone should probably be using
1.0.4 or better though, as WebOb 1.0.2 and 1.0.3 were effectively brownbag
releases.)</li>
</ul>
</div>
<div class="section" id="documentation-enhancements">
<h2>Documentation Enhancements<a class="headerlink" href="#documentation-enhancements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added a section entitled <a class="reference internal" href="narr/commandline.html#writing-a-script"><em>Writing a Script</em></a> to the &quot;Command-Line
Pyramid&quot; chapter.</li>
<li>The <a class="reference internal" href="tutorials/wiki/index.html#bfg-wiki-tutorial"><em>ZODB + Traversal Wiki Tutorial</em></a> was updated slightly.</li>
<li>The <a class="reference internal" href="tutorials/wiki2/index.html#bfg-sql-wiki-tutorial"><em>SQLAlchemy + URL Dispatch Wiki Tutorial</em></a> was updated slightly.</li>
<li>Made <a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IAuthenticationPolicy" title="pyramid.interfaces.IAuthenticationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></tt></a> and
<a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IAuthorizationPolicy" title="pyramid.interfaces.IAuthorizationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IAuthorizationPolicy</span></tt></a> public interfaces, and
they are now referred to within the <a class="reference internal" href="api/authentication.html#module-pyramid.authentication" title="pyramid.authentication"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.authentication</span></tt></a> and
<a class="reference internal" href="api/authorization.html#module-pyramid.authorization" title="pyramid.authorization"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.authorization</span></tt></a> API docs.</li>
<li>Render the function definitions for each exposed interface in
<a class="reference internal" href="api/interfaces.html#module-pyramid.interfaces" title="pyramid.interfaces"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.interfaces</span></tt></a>.</li>
<li>Add missing docs reference to
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_view_mapper" title="pyramid.config.Configurator.set_view_mapper"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.set_view_mapper()</span></tt></a> and refer to it within
the documentation section entitled <a class="reference internal" href="narr/hooks.html#using-a-view-mapper"><em>Using a View Mapper</em></a>.</li>
<li>Added section to the &quot;Environment Variables and <tt class="docutils literal"><span class="pre">.ini</span></tt> File Settings&quot;
chapter in the narrative documentation section entitled
<a class="reference internal" href="narr/environment.html#adding-a-custom-setting"><em>Adding A Custom Setting</em></a>.</li>
<li>Added documentation for a <a class="reference internal" href="glossary.html#term-multidict"><em class="xref std std-term">multidict</em></a> as
<a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IMultiDict" title="pyramid.interfaces.IMultiDict"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IMultiDict</span></tt></a>.</li>
<li>Added a section to the &quot;URL Dispatch&quot; narrative chapter regarding the new
&quot;static&quot; route feature entitled <a class="reference internal" href="narr/urldispatch.html#static-route-narr"><em>Static Routes</em></a>.</li>
<li>Added API docs for <a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.exception_response" title="pyramid.httpexceptions.exception_response"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.httpexceptions.exception_response()</span></tt></a>.</li>
<li>Added <a class="reference internal" href="narr/views.html#http-exceptions"><em>HTTP Exceptions</em></a> section to Views narrative chapter including a
description of <a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.exception_response" title="pyramid.httpexceptions.exception_response"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.httpexceptions.exception_response()</span></tt></a>.</li>
<li>Added API docs for
<a class="reference internal" href="api/authentication.html#pyramid.authentication.SessionAuthenticationPolicy" title="pyramid.authentication.SessionAuthenticationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.authentication.SessionAuthenticationPolicy</span></tt></a>.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What's New In Pyramid 1.1</a><ul>
<li><a class="reference internal" href="#terminology-changes">Terminology Changes</a></li>
<li><a class="reference internal" href="#major-feature-additions">Major Feature Additions</a><ul>
<li><a class="reference internal" href="#request-response"><tt class="docutils literal"><span class="pre">request.response</span></tt></a></li>
<li><a class="reference internal" href="#paster-pviews"><tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt></a></li>
<li><a class="reference internal" href="#static-routes">Static Routes</a></li>
<li><a class="reference internal" href="#default-http-exception-view">Default HTTP Exception View</a></li>
<li><a class="reference internal" href="#http-cache"><tt class="docutils literal"><span class="pre">http_cache</span></tt></a></li>
<li><a class="reference internal" href="#easier-scripting-writing">Easier Scripting Writing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#minor-feature-additions">Minor Feature Additions</a></li>
<li><a class="reference internal" href="#backwards-incompatibilities">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#deprecations-and-behavior-differences">Deprecations and Behavior Differences</a></li>
<li><a class="reference internal" href="#dependency-changes">Dependency Changes</a></li>
<li><a class="reference internal" href="#documentation-enhancements">Documentation Enhancements</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="whatsnew-1.2.html"
                        title="previous chapter">What's New In Pyramid 1.2</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="whatsnew-1.0.html"
                        title="next chapter">What's New In Pyramid 1.0</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.0.html" title="What&#39;s New In Pyramid 1.0"
             >next</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.2.html" title="What&#39;s New In Pyramid 1.2"
             >previous</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>