<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What&#39;s New In Pyramid 1.4 &mdash; The Pyramid Web Framework v1.5</title>
    
    <link rel="stylesheet" href="_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="The Pyramid Web Framework v1.5" href="index.html" />
    <link rel="next" title="What&#39;s New In Pyramid 1.3" href="whatsnew-1.3.html" />
    <link rel="prev" title="What&#39;s New In Pyramid 1.5" href="whatsnew-1.5.html" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="_static/pyramid.ico"/>

  </head>
  <body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="index.html">
      		<img class="logo" src="_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.3.html" title="What&#39;s New In Pyramid 1.3"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.5.html" title="What&#39;s New In Pyramid 1.5"
             accesskey="P">previous</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="what-s-new-in-pyramid-1-4">
<h1>What's New In Pyramid 1.4<a class="headerlink" href="#what-s-new-in-pyramid-1-4" title="Permalink to this headline">¶</a></h1>
<p>This article explains the new features in <span>Pyramid</span> version 1.4 as
compared to its predecessor, <span>Pyramid</span> 1.3.  It also documents backwards
incompatibilities between the two versions and deprecations added to
<span>Pyramid</span> 1.4, as well as software dependency changes and notable
documentation additions.</p>
<div class="section" id="major-feature-additions">
<h2>Major Feature Additions<a class="headerlink" href="#major-feature-additions" title="Permalink to this headline">¶</a></h2>
<p>The major feature additions in Pyramid 1.4 follow.</p>
<div class="section" id="third-party-predicates">
<h3>Third-Party Predicates<a class="headerlink" href="#third-party-predicates" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Third-party custom view, route, and subscriber predicates can now be added
for use by view authors via
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view_predicate" title="pyramid.config.Configurator.add_view_predicate"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view_predicate()</span></tt></a>,
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_route_predicate" title="pyramid.config.Configurator.add_route_predicate"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_route_predicate()</span></tt></a> and
<tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_subscriber_predicate()</span></tt>.  So, for
example, doing this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_view_predicate</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">my</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">ABCPredicate</span><span class="p">)</span>
</pre></div>
</div>
<p>Might allow a view author to do this in an application that configured that
predicate:</p>
<div class="highlight-python"><div class="highlight"><pre>@view_config(abc=1)
</pre></div>
</div>
<p>Similar features exist for <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_route()</span></tt></a>,
and <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_subscriber" title="pyramid.config.Configurator.add_subscriber"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_subscriber()</span></tt></a>.  See
<a class="reference internal" href="narr/hooks.html#registering-thirdparty-predicates"><em>Adding A Third Party View, Route, or Subscriber Predicate</em></a> for more information.</p>
</li>
</ul>
</div>
<div class="section" id="easy-custom-json-serialization">
<h3>Easy Custom JSON Serialization<a class="headerlink" href="#easy-custom-json-serialization" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Views can now return custom objects which will be serialized to JSON by a
JSON renderer by defining a <tt class="docutils literal"><span class="pre">__json__</span></tt> method on the object's class. This
method should return values natively serializable by <tt class="docutils literal"><span class="pre">json.dumps</span></tt> (such
as ints, lists, dictionaries, strings, and so forth).  See
<a class="reference internal" href="narr/renderers.html#json-serializing-custom-objects"><em>Serializing Custom Objects</em></a> for more information.  The JSON
renderer now also allows for the definition of custom type adapters to
convert unknown objects to JSON serializations, in case you can't add a
<tt class="docutils literal"><span class="pre">__json__</span></tt> method to returned objects.</li>
</ul>
</div>
<div class="section" id="partial-mako-and-chameleon-template-renderings">
<h3>Partial Mako and Chameleon Template Renderings<a class="headerlink" href="#partial-mako-and-chameleon-template-renderings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The Mako renderer now supports using a def name in an asset spec.  When the
def name is present in the asset spec, the system will render the template
named def within the template instead of rendering the entire template. An
example asset spec which names a def is
<tt class="docutils literal"><span class="pre">package:path/to/template#defname.mako</span></tt>. This will render the def named
<tt class="docutils literal"><span class="pre">defname</span></tt> inside the <tt class="docutils literal"><span class="pre">template.mako</span></tt> template instead of rendering the
entire template.  The old way of returning a tuple in the form
<tt class="docutils literal"><span class="pre">('defname',</span> <span class="pre">{})</span></tt> from the view is supported for backward compatibility.</li>
<li>The Chameleon ZPT renderer now supports using a macro name in an asset
spec.  When the macro name is present in the asset spec, the system will
render the macro listed as a <tt class="docutils literal"><span class="pre">define-macro</span></tt> and return the result instead
of rendering the entire template.  An example asset spec:
<tt class="docutils literal"><span class="pre">package:path/to/template#macroname.pt</span></tt>.  This will render the macro
defined as <tt class="docutils literal"><span class="pre">macroname</span></tt> within the <tt class="docutils literal"><span class="pre">template.pt</span></tt> template instead of the
entire template.</li>
</ul>
</div>
<div class="section" id="subrequest-support">
<h3>Subrequest Support<a class="headerlink" href="#subrequest-support" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Developers may invoke a subrequest by using the
<a class="reference internal" href="api/request.html#pyramid.request.Request.invoke_subrequest" title="pyramid.request.Request.invoke_subrequest"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.invoke_subrequest()</span></tt></a> API.  This allows a
developer to obtain a response from one view callable by issuing a subrequest
from within a different view callable.  See <a class="reference internal" href="narr/subrequest.html#subrequest-chapter"><em>Invoking a Subrequest</em></a> for
more information.</li>
</ul>
</div>
</div>
<div class="section" id="minor-feature-additions">
<h2>Minor Feature Additions<a class="headerlink" href="#minor-feature-additions" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><a class="reference internal" href="api/authentication.html#pyramid.authentication.AuthTktAuthenticationPolicy" title="pyramid.authentication.AuthTktAuthenticationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></tt></a> has been updated
to support newer hashing algorithms such as <tt class="docutils literal"><span class="pre">sha512</span></tt>. Existing applications
should consider updating if possible for improved security over the default
md5 hashing.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_directive" title="pyramid.config.Configurator.add_directive"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_directive()</span></tt></a> now accepts arbitrary
callables like partials or objects implementing <tt class="docutils literal"><span class="pre">__call__</span></tt> which don't
have <tt class="docutils literal"><span class="pre">__name__</span></tt> and <tt class="docutils literal"><span class="pre">__doc__</span></tt> attributes.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/621">https://github.com/Pylons/pyramid/issues/621</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/647">https://github.com/Pylons/pyramid/pull/647</a>.</p>
</li>
<li><p class="first">As of this release, the <tt class="docutils literal"><span class="pre">request_method</span></tt> view/route predicate, when used,
will also imply that <tt class="docutils literal"><span class="pre">HEAD</span></tt> is implied when you use <tt class="docutils literal"><span class="pre">GET</span></tt>.  For
example, using <tt class="docutils literal"><span class="pre">&#64;view_config(request_method='GET')</span></tt> is equivalent to
using <tt class="docutils literal"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'HEAD'))</span></tt>.  Using
<tt class="docutils literal"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'POST')</span></tt> is equivalent to using
<tt class="docutils literal"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'HEAD',</span> <span class="pre">'POST')</span></tt>.  This is because
HEAD is a variant of GET that omits the body, and WebOb has special support
to return an empty body when a HEAD is used.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_request_method()</span></tt></a> has been introduced
to support extending request objects with arbitrary callables. This method
expands on the now documentation-deprecated
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.set_request_property()</span></tt></a> by supporting
methods as well as properties. This method also causes less code to be
executed at request construction time than
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><tt class="xref py py-meth docutils literal"><span class="pre">set_request_property()</span></tt></a>.</p>
</li>
<li><p class="first">The static view machinery now raises rather than returns
<a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.HTTPNotFound" title="pyramid.httpexceptions.HTTPNotFound"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.httpexceptions.HTTPNotFound</span></tt></a> and
<a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.HTTPMovedPermanently" title="pyramid.httpexceptions.HTTPMovedPermanently"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.httpexceptions.HTTPMovedPermanently</span></tt></a> exceptions, so these can
be caught by the Not Found View (and other exception views).</p>
</li>
<li><p class="first">When there is a predicate mismatch exception (seen when no view matches for
a given request due to predicates not working), the exception now contains
a textual description of the predicate which didn't match.</p>
</li>
<li><p class="first">An <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_permission" title="pyramid.config.Configurator.add_permission"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_permission()</span></tt></a> directive method was
added to the Configurator.  This directive registers a free-standing
permission introspectable into the Pyramid introspection system.
Frameworks built atop Pyramid can thus use the <tt class="docutils literal"><span class="pre">permissions</span></tt>
introspectable category data to build a comprehensive list of permissions
supported by a running system.  Before this method was added, permissions
were already registered in this introspectable category as a side effect of
naming them in an <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a> call, this
method just makes it possible to arrange for a permission to be put into
the <tt class="docutils literal"><span class="pre">permissions</span></tt> introspectable category without naming it along with an
associated view.  Here's an example of usage of <tt class="docutils literal"><span class="pre">add_permission</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_permission</span><span class="p">(</span><span class="s">&#39;view&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The <a class="reference internal" href="api/session.html#pyramid.session.UnencryptedCookieSessionFactoryConfig" title="pyramid.session.UnencryptedCookieSessionFactoryConfig"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.session.UnencryptedCookieSessionFactoryConfig()</span></tt></a> function
now accepts <tt class="docutils literal"><span class="pre">signed_serialize</span></tt> and <tt class="docutils literal"><span class="pre">signed_deserialize</span></tt> hooks which may
be used to influence how the sessions are marshalled (by default this is
done with HMAC+pickle).</p>
</li>
<li><p class="first"><a class="reference internal" href="api/testing.html#pyramid.testing.DummyRequest" title="pyramid.testing.DummyRequest"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt></a> now supports methods supplied by the
<tt class="docutils literal"><span class="pre">pyramid.util.InstancePropertyMixin</span></tt> class such as <tt class="docutils literal"><span class="pre">set_property</span></tt>.</p>
</li>
<li><p class="first">Request properties and methods added via
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_request_method()</span></tt></a> or
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.set_request_property()</span></tt></a> are now available to
tweens.</p>
</li>
<li><p class="first">Request properties and methods added via
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_request_method()</span></tt></a> or
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.set_request_property()</span></tt></a> are now available
in the request object returned from <a class="reference internal" href="api/paster.html#pyramid.paster.bootstrap" title="pyramid.paster.bootstrap"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.paster.bootstrap()</span></tt></a>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">request.context</span></tt> of environment request during
<a class="reference internal" href="api/paster.html#pyramid.paster.bootstrap" title="pyramid.paster.bootstrap"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.paster.bootstrap()</span></tt></a> is now the root object if a context isn't
already set on a provided request.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/decorator.html#pyramid.decorator.reify" title="pyramid.decorator.reify"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.decorator.reify</span></tt></a>  is now an API, and was added to
the API documentation.</p>
</li>
<li><p class="first">Added the <a class="reference internal" href="api/testing.html#pyramid.testing.testConfig" title="pyramid.testing.testConfig"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.testing.testConfig()</span></tt></a> context manager, which can be
used to generate a configurator in a test, e.g. <tt class="docutils literal"><span class="pre">with</span>
<span class="pre">testing.testConfig(...):</span></tt>.</p>
</li>
<li><p class="first">A new <a class="reference internal" href="api/session.html#pyramid.session.check_csrf_token" title="pyramid.session.check_csrf_token"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.session.check_csrf_token()</span></tt></a> convenience API function was
added.</p>
</li>
<li><p class="first">A <tt class="docutils literal"><span class="pre">check_csrf</span></tt> view predicate was added.  For example, you can now do
<tt class="docutils literal"><span class="pre">config.add_view(someview,</span> <span class="pre">check_csrf=True)</span></tt>.  When the predicate is
checked, if the <tt class="docutils literal"><span class="pre">csrf_token</span></tt> value in <tt class="docutils literal"><span class="pre">request.params</span></tt> matches the csrf
token in the request's session, the view will be permitted to execute.
Otherwise, it will not be permitted to execute.</p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">Base.metadata.bind</span> <span class="pre">=</span> <span class="pre">engine</span></tt> to <tt class="docutils literal"><span class="pre">alchemy</span></tt> scaffold, so that tables
defined imperatively will work.</p>
</li>
<li><p class="first">Comments with references to documentation sections placed in scaffold
<tt class="docutils literal"><span class="pre">.ini</span></tt> files.</p>
</li>
<li><p class="first">Allow multiple values to be specified to the <tt class="docutils literal"><span class="pre">request_param</span></tt> view/route
predicate as a sequence.  Previously only a single string value was allowed.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/705">https://github.com/Pylons/pyramid/pull/705</a></p>
</li>
<li><p class="first">Added an HTTP Basic authentication policy
at <a class="reference internal" href="api/authentication.html#pyramid.authentication.BasicAuthAuthenticationPolicy" title="pyramid.authentication.BasicAuthAuthenticationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.authentication.BasicAuthAuthenticationPolicy</span></tt></a>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_securitypolicy" title="pyramid.config.Configurator.testing_securitypolicy"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.testing_securitypolicy()</span></tt></a> method now
returns the policy object it creates.</p>
</li>
<li><p class="first">The DummySecurityPolicy created by
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_securitypolicy" title="pyramid.config.Configurator.testing_securitypolicy"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.testing_securitypolicy()</span></tt></a> now sets a
<tt class="docutils literal"><span class="pre">forgotten</span></tt> value  on the policy (the value <tt class="docutils literal"><span class="pre">True</span></tt>) when its <tt class="docutils literal"><span class="pre">forget</span></tt>
method is called.</p>
</li>
<li><p class="first">The DummySecurityPolicy created by
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_securitypolicy" title="pyramid.config.Configurator.testing_securitypolicy"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.testing_securitypolicy()</span></tt></a> now sets a
<tt class="docutils literal"><span class="pre">remembered</span></tt> value on the policy, which is the value of the <tt class="docutils literal"><span class="pre">principal</span></tt>
argument it's called with when its <tt class="docutils literal"><span class="pre">remember</span></tt> method is called.</p>
</li>
<li><p class="first">New <tt class="docutils literal"><span class="pre">physical_path</span></tt> view predicate.  If specified, this value should be a
string or a tuple representing the physical traversal path of the context
found via traversal for this predicate to match as true.  For example:
<tt class="docutils literal"><span class="pre">physical_path='/'</span></tt> or <tt class="docutils literal"><span class="pre">physical_path='/a/b/c'</span></tt> or <tt class="docutils literal"><span class="pre">physical_path=('',</span>
<span class="pre">'a',</span> <span class="pre">'b',</span> <span class="pre">'c')</span></tt>.  It's useful when you want to always potentially show a
view when some object is traversed to, but you can't be sure about what kind
of object it will be, so you can't use the <tt class="docutils literal"><span class="pre">context</span></tt> predicate.</p>
</li>
<li><p class="first">Added an <tt class="docutils literal"><span class="pre">effective_principals</span></tt> route and view predicate.</p>
</li>
<li><p class="first">Do not allow the userid returned from the
<a class="reference internal" href="api/security.html#pyramid.security.authenticated_userid" title="pyramid.security.authenticated_userid"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.security.authenticated_userid()</span></tt></a> or the userid that is one of the
list of principals returned by <a class="reference internal" href="api/security.html#pyramid.security.effective_principals" title="pyramid.security.effective_principals"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.security.effective_principals()</span></tt></a>
to be either of the strings <tt class="docutils literal"><span class="pre">system.Everyone</span></tt> or <tt class="docutils literal"><span class="pre">system.Authenticated</span></tt>
when any of the built-in authorization policies that live in
<a class="reference internal" href="api/authentication.html#module-pyramid.authentication" title="pyramid.authentication"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.authentication</span></tt></a> are in use.  These two strings are reserved for
internal usage by Pyramid and they will no longer be accepted as valid
userids.</p>
</li>
<li><p class="first">Allow a <tt class="docutils literal"><span class="pre">_depth</span></tt> argument to <a class="reference internal" href="api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.view_config</span></tt></a>, which will
permit limited composition reuse of the decorator by other software that
wants to provide custom decorators that are much like view_config.</p>
</li>
<li><p class="first">Allow an iterable of decorators to be passed to
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a>. This allows views to be wrapped
by more than one decorator without requiring combining the decorators
yourself.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/security.html#pyramid.security.view_execution_permitted" title="pyramid.security.view_execution_permitted"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.security.view_execution_permitted()</span></tt></a> used to return <cite>True</cite> if no
view could be found. It now raises a <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">TypeError</span></tt></a> exception in that case,
as it doesn't make sense to assert that a nonexistent view is
execution-permitted. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/299">https://github.com/Pylons/pyramid/issues/299</a>.</p>
</li>
<li><p class="first">Small microspeed enhancement which anticipates that a
<a class="reference internal" href="api/response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a> object is likely to be returned from a
view.  Some code is shortcut if the class of the object returned by a view is
this class.  A similar microoptimization was done to
<a class="reference internal" href="api/request.html#pyramid.request.Request.is_response" title="pyramid.request.Request.is_response"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.request.Request.is_response()</span></tt></a>.</p>
</li>
<li><p class="first">Make it possible to use variable arguments on all <tt class="docutils literal"><span class="pre">p*</span></tt> commands
(<tt class="docutils literal"><span class="pre">pserve</span></tt>, <tt class="docutils literal"><span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">pviews</span></tt>, etc) in the form <tt class="docutils literal"><span class="pre">a=1</span> <span class="pre">b=2</span></tt> so you can
fill in values in parameterized <tt class="docutils literal"><span class="pre">.ini</span></tt> file, e.g. <tt class="docutils literal"><span class="pre">pshell</span>
<span class="pre">etc/development.ini</span> <span class="pre">http_port=8080</span></tt>.</p>
</li>
<li><p class="first">In order to allow people to ignore unused arguments to subscriber callables
and to normalize the relationship between event subscribers and subscriber
predicates, we now allow both subscribers and subscriber predicates to accept
only a single <tt class="docutils literal"><span class="pre">event</span></tt> argument even if they've been subscribed for
notifications that involve multiple interfaces.</p>
</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilities">
<h2>Backwards Incompatibilities<a class="headerlink" href="#backwards-incompatibilities" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The Pyramid router no longer adds the values <tt class="docutils literal"><span class="pre">bfg.routes.route</span></tt> or
<tt class="docutils literal"><span class="pre">bfg.routes.matchdict</span></tt> to the request's WSGI environment dictionary.
These values were docs-deprecated in <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> 1.0 (effectively seven
minor releases ago).  If your code depended on these values, use
<tt class="docutils literal"><span class="pre">request.matched_route</span></tt> and <tt class="docutils literal"><span class="pre">request.matchdict</span></tt> instead.</li>
<li>It is no longer possible to pass an environ dictionary directly to
<tt class="docutils literal"><span class="pre">pyramid.traversal.ResourceTreeTraverser.__call__</span></tt> (aka
<tt class="docutils literal"><span class="pre">ModelGraphTraverser.__call__</span></tt>).  Instead, you must pass a request
object.  Passing an environment instead of a request has generated a
deprecation warning since Pyramid 1.1.</li>
<li>Pyramid will no longer work properly if you use the
<tt class="docutils literal"><span class="pre">webob.request.LegacyRequest</span></tt> as a request factory.  Instances of the
LegacyRequest class have a <tt class="docutils literal"><span class="pre">request.path_info</span></tt> which return a string.
This Pyramid release assumes that <tt class="docutils literal"><span class="pre">request.path_info</span></tt> will
unconditionally be Unicode.</li>
<li>The functions from <tt class="docutils literal"><span class="pre">pyramid.chameleon_zpt</span></tt> and <tt class="docutils literal"><span class="pre">pyramid.chameleon_text</span></tt>
named <tt class="docutils literal"><span class="pre">get_renderer</span></tt>, <tt class="docutils literal"><span class="pre">get_template</span></tt>, <tt class="docutils literal"><span class="pre">render_template</span></tt>, and
<tt class="docutils literal"><span class="pre">render_template_to_response</span></tt> have been removed.  These have issued a
deprecation warning upon import since Pyramid 1.0.  Use
<a class="reference internal" href="api/renderers.html#pyramid.renderers.get_renderer" title="pyramid.renderers.get_renderer"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.renderers.get_renderer()</span></tt></a>,
<tt class="docutils literal"><span class="pre">pyramid.renderers.get_renderer().implementation()</span></tt>,
<a class="reference internal" href="api/renderers.html#pyramid.renderers.render" title="pyramid.renderers.render"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.renderers.render()</span></tt></a> or
<a class="reference internal" href="api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.renderers.render_to_response()</span></tt></a> respectively instead of these
functions.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.configuration</span></tt> module was removed.  It had been deprecated
since Pyramid 1.0 and printed a deprecation warning upon its use.  Use
<a class="reference internal" href="api/config.html#module-pyramid.config" title="pyramid.config"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.config</span></tt></a> instead.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.paster.PyramidTemplate</span></tt> API was removed.  It had been
deprecated since Pyramid 1.1 and issued a warning on import.  If your code
depended on this, adjust your code to import
<a class="reference internal" href="api/scaffolds.html#pyramid.scaffolds.PyramidTemplate" title="pyramid.scaffolds.PyramidTemplate"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.scaffolds.PyramidTemplate</span></tt></a> instead.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.settings.get_settings()</span></tt> API was removed.  It had been
printing a deprecation warning since Pyramid 1.0.  If your code depended on
this API, use <tt class="docutils literal"><span class="pre">pyramid.threadlocal.get_current_registry().settings</span></tt>
instead or use the <tt class="docutils literal"><span class="pre">settings</span></tt> attribute of the registry available from
the request (<tt class="docutils literal"><span class="pre">request.registry.settings</span></tt>).</li>
<li>These APIs from the <tt class="docutils literal"><span class="pre">pyramid.testing</span></tt> module were removed.  They have
been printing deprecation warnings since Pyramid 1.0:<ul>
<li><tt class="docutils literal"><span class="pre">registerDummySecurityPolicy</span></tt>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_securitypolicy" title="pyramid.config.Configurator.testing_securitypolicy"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.testing_securitypolicy()</span></tt></a> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerResources</span></tt> (aka <tt class="docutils literal"><span class="pre">registerModels</span></tt>), use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_resources" title="pyramid.config.Configurator.testing_resources"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.testing_resources()</span></tt></a> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerEventListener</span></tt>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_add_subscriber" title="pyramid.config.Configurator.testing_add_subscriber"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.testing_add_subscriber()</span></tt></a> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerTemplateRenderer</span></tt> (aka <tt class="docutils literal"><span class="pre">registerDummyRenderer</span></tt>), use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_add_renderer" title="pyramid.config.Configurator.testing_add_renderer"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.testing_add_renderer()</span></tt></a> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerView</span></tt>, use <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerUtility</span></tt>, use
<tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.registry.registerUtility()</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerAdapter</span></tt>, use
<tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.registry.registerAdapter()</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerSubscriber</span></tt>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_subscriber" title="pyramid.config.Configurator.add_subscriber"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_subscriber()</span></tt></a> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerRoute</span></tt>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_route()</span></tt></a> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerSettings</span></tt>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_settings" title="pyramid.config.Configurator.add_settings"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_settings()</span></tt></a> instead.</li>
</ul>
</li>
<li>In Pyramid 1.3 and previous, the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of a Response object
returned by a view was invoked before any finished callbacks were executed.
As of this release, the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of a Response object is invoked
<em>after</em> finished callbacks are executed.  This is in support of the
<a class="reference internal" href="api/request.html#pyramid.request.Request.invoke_subrequest" title="pyramid.request.Request.invoke_subrequest"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.invoke_subrequest()</span></tt></a> feature.</li>
</ul>
</div>
<div class="section" id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.set_request_property()</span></tt></a> directive has
been documentation-deprecated.  The method remains usable but the more
featureful <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_request_method()</span></tt></a> should be
used in its place (it has all of the same capabilities but can also extend
the request object with methods).</li>
<li><a class="reference internal" href="api/authentication.html#pyramid.authentication.AuthTktAuthenticationPolicy" title="pyramid.authentication.AuthTktAuthenticationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></tt></a> will emit a
deprecation warning if an application is using the policy without explicitly
passing a <tt class="docutils literal"><span class="pre">hashalg</span></tt> argument. This is because the default is &quot;md5&quot; which is
considered theoretically subject to collision attacks. If you really want
&quot;md5&quot; then you must specify it explicitly to get rid of the warning.</li>
</ul>
</div>
<div class="section" id="documentation-enhancements">
<h2>Documentation Enhancements<a class="headerlink" href="#documentation-enhancements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added an <a class="reference internal" href="narr/upgrading.html#upgrading-chapter"><em>Upgrading Pyramid</em></a> chapter to the narrative documentation.
It describes how to cope with deprecations and removals of Pyramid APIs and
how to show Pyramid-generated deprecation warnings while running tests and
while running a server.</li>
<li>Added a <a class="reference internal" href="narr/subrequest.html#subrequest-chapter"><em>Invoking a Subrequest</em></a> chapter to the narrative documentation.</li>
<li>All of the tutorials that use
<a class="reference internal" href="api/authentication.html#pyramid.authentication.AuthTktAuthenticationPolicy" title="pyramid.authentication.AuthTktAuthenticationPolicy"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></tt></a> now explicitly
pass <tt class="docutils literal"><span class="pre">sha512</span></tt> as a <tt class="docutils literal"><span class="pre">hashalg</span></tt> argument.</li>
<li>Many cleanups and improvements to narrative and API docs.</li>
</ul>
</div>
<div class="section" id="dependency-changes">
<h2>Dependency Changes<a class="headerlink" href="#dependency-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Pyramid now requires WebOb 1.2b3+ (the prior Pyramid release only relied on
1.2dev+).  This is to ensure that we obtain a version of WebOb that returns
<tt class="docutils literal"><span class="pre">request.path_info</span></tt> as text.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What's New In Pyramid 1.4</a><ul>
<li><a class="reference internal" href="#major-feature-additions">Major Feature Additions</a><ul>
<li><a class="reference internal" href="#third-party-predicates">Third-Party Predicates</a></li>
<li><a class="reference internal" href="#easy-custom-json-serialization">Easy Custom JSON Serialization</a></li>
<li><a class="reference internal" href="#partial-mako-and-chameleon-template-renderings">Partial Mako and Chameleon Template Renderings</a></li>
<li><a class="reference internal" href="#subrequest-support">Subrequest Support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#minor-feature-additions">Minor Feature Additions</a></li>
<li><a class="reference internal" href="#backwards-incompatibilities">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#documentation-enhancements">Documentation Enhancements</a></li>
<li><a class="reference internal" href="#dependency-changes">Dependency Changes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="whatsnew-1.5.html"
                        title="previous chapter">What's New In Pyramid 1.5</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="whatsnew-1.3.html"
                        title="next chapter">What's New In Pyramid 1.3</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.3.html" title="What&#39;s New In Pyramid 1.3"
             >next</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.5.html" title="What&#39;s New In Pyramid 1.5"
             >previous</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>