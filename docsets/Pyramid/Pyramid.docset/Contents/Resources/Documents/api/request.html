<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>pyramid.request — The Pyramid Web Framework v1.5</title><link href="../_static/pylons.css" rel="stylesheet" type="text/css"/><link href="../_static/pygments.css" rel="stylesheet" type="text/css"/><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script><script src="../_static/jquery.js" type="text/javascript"></script><script src="../_static/underscore.js" type="text/javascript"></script><script src="../_static/doctools.js" type="text/javascript"></script><link href="../copyright.html" rel="copyright" title="Copyright"/><link href="../index.html" rel="top" title="The Pyramid Web Framework v1.5"/><link href="response.html" rel="next" title="pyramid.response"/><link href="renderers.html" rel="prev" title="pyramid.renderers"/><link charset="utf-8" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" media="screen" rel="stylesheet" type="text/css"/><link charset="utf-8" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" media="screen" rel="stylesheet" type="text/css"/><!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]--><link href="../_static/pyramid.ico" rel="shortcut icon"/></head><body>
<div class="header-small">
<div class="logo-small">
<a href="../index.html">
<img alt="Logo" class="logo" src="../_static/pyramid-small.png"/>
</a>
</div>
</div>
<div class="related">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a accesskey="N" href="response.html" title="pyramid.response">next</a> |</li>
<li class="right">
<a accesskey="P" href="renderers.html" title="pyramid.renderers">previous</a> |</li>
<li><a href="../index.html">The Pyramid Web Framework v1.5</a> »</li>
</ul>
</div>
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body">
<div class="section" id="module-pyramid.request">
<span id="pyramid-request"></span><span id="request-module"></span><h1><a name="//apple_ref/cpp/Module/pyramid.request"></a><a class="reference internal" href="#module-pyramid.request" title="pyramid.request"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.request</span></tt></a><a class="headerlink" href="#module-pyramid.request" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pyramid.request.Request"><a name="//apple_ref/cpp/cl/pyramid.request.Request"></a>
<em class="property">class </em><tt class="descname">Request</tt><big>(</big><em>environ</em>, <em>charset=None</em>, <em>unicode_errors=None</em>, <em>decode_param_names=None</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../_modules/pyramid/request.html#Request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid.request.Request" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of the <a class="reference internal" href="../glossary.html#term-webob"><em class="xref std std-term">WebOb</em></a> Request class.  An instance of
this class is created by the <a class="reference internal" href="../glossary.html#term-router"><em class="xref std std-term">router</em></a> and is provided to a
view callable (and to other subsystems) as the <tt class="docutils literal"><span class="pre">request</span></tt>
argument.</p>
<p>The documentation below (save for the <tt class="docutils literal"><span class="pre">add_response_callback</span></tt> and
<tt class="docutils literal"><span class="pre">add_finished_callback</span></tt> methods, which are defined in this subclass
itself, and the attributes <tt class="docutils literal"><span class="pre">context</span></tt>, <tt class="docutils literal"><span class="pre">registry</span></tt>, <tt class="docutils literal"><span class="pre">root</span></tt>,
<tt class="docutils literal"><span class="pre">subpath</span></tt>, <tt class="docutils literal"><span class="pre">traversed</span></tt>, <tt class="docutils literal"><span class="pre">view_name</span></tt>, <tt class="docutils literal"><span class="pre">virtual_root</span></tt> , and
<tt class="docutils literal"><span class="pre">virtual_root_path</span></tt>, each of which is added to the request by the
<a class="reference internal" href="../glossary.html#term-router"><em class="xref std std-term">router</em></a> at request ingress time) are autogenerated from the WebOb
source code used when this documentation was generated.</p>
<p>Due to technical constraints, we can't yet display the WebOb
version number from which this documentation is autogenerated, but
it will be the 'prevailing WebOb version' at the time of the
release of this <span>Pyramid</span> version.  See
<a class="reference external" href="http://webob.org/">http://webob.org/</a> for further information.</p>
<dl class="attribute">
<dt id="pyramid.request.Request.context"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.context"></a>
<tt class="descname">context</tt><a class="headerlink" href="#pyramid.request.Request.context" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a> will be available as the <tt class="docutils literal"><span class="pre">context</span></tt>
attribute of the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> object.  It will be the context
object implied by the current request.  See
<a class="reference internal" href="../narr/traversal.html#traversal-chapter"><em>Traversal</em></a> for information about context objects.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.registry"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.registry"></a>
<tt class="descname">registry</tt><a class="headerlink" href="#pyramid.request.Request.registry" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../glossary.html#term-application-registry"><em class="xref std std-term">application registry</em></a> will be available as the
<tt class="docutils literal"><span class="pre">registry</span></tt> attribute of the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> object.  See
<a class="reference internal" href="../narr/zca.html#zca-chapter"><em>Using the Zope Component Architecture in Pyramid</em></a> for more information about the application
registry.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.root"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.root"></a>
<tt class="descname">root</tt><a class="headerlink" href="#pyramid.request.Request.root" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../glossary.html#term-root"><em class="xref std std-term">root</em></a> object will be available as the <tt class="docutils literal"><span class="pre">root</span></tt>
attribute of the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> object.  It will be the resource
object at which traversal started (the root).  See
<a class="reference internal" href="../narr/traversal.html#traversal-chapter"><em>Traversal</em></a> for information about root objects.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.subpath"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.subpath"></a>
<tt class="descname">subpath</tt><a class="headerlink" href="#pyramid.request.Request.subpath" title="Permalink to this definition">¶</a></dt>
<dd><p>The traversal <a class="reference internal" href="../glossary.html#term-subpath"><em class="xref std std-term">subpath</em></a> will be available as the
<tt class="docutils literal"><span class="pre">subpath</span></tt> attribute of the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> object.  It will
be a sequence containing zero or more elements (which will be
Unicode objects).  See <a class="reference internal" href="../narr/traversal.html#traversal-chapter"><em>Traversal</em></a> for information
about the subpath.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.traversed"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.traversed"></a>
<tt class="descname">traversed</tt><a class="headerlink" href="#pyramid.request.Request.traversed" title="Permalink to this definition">¶</a></dt>
<dd><p>The "traversal path" will be available as the <tt class="docutils literal"><span class="pre">traversed</span></tt>
attribute of the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> object.  It will be a sequence
representing the ordered set of names that were used to
traverse to the <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a>, not including the view name or
subpath.  If there is a virtual root associated with the
request, the virtual root path is included within the traversal
path.  See <a class="reference internal" href="../narr/traversal.html#traversal-chapter"><em>Traversal</em></a> for more information.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.view_name"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.view_name"></a>
<tt class="descname">view_name</tt><a class="headerlink" href="#pyramid.request.Request.view_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../glossary.html#term-view-name"><em class="xref std std-term">view name</em></a> will be available as the <tt class="docutils literal"><span class="pre">view_name</span></tt>
attribute of the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> object.  It will be a single
string (possibly the empty string if we're rendering a default
view).  See <a class="reference internal" href="../narr/traversal.html#traversal-chapter"><em>Traversal</em></a> for information about view
names.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.virtual_root"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.virtual_root"></a>
<tt class="descname">virtual_root</tt><a class="headerlink" href="#pyramid.request.Request.virtual_root" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../glossary.html#term-virtual-root"><em class="xref std std-term">virtual root</em></a> will be available as the
<tt class="docutils literal"><span class="pre">virtual_root</span></tt> attribute of the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> object.  It
will be the virtual root object implied by the current request.
See <a class="reference internal" href="../narr/vhosting.html#vhosting-chapter"><em>Virtual Hosting</em></a> for more information about virtual
roots.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.virtual_root_path"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.virtual_root_path"></a>
<tt class="descname">virtual_root_path</tt><a class="headerlink" href="#pyramid.request.Request.virtual_root_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The  <a class="reference internal" href="../glossary.html#term-virtual-root"><em class="xref std std-term">virtual  root</em></a> <em>path</em>  will be  available  as  the
<tt class="docutils literal"><span class="pre">virtual_root_path</span></tt> attribute  of the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> object.
It will  be a  sequence representing the  ordered set  of names
that were  used to  traverse to the  virtual root  object.  See
<a class="reference internal" href="../narr/vhosting.html#vhosting-chapter"><em>Virtual Hosting</em></a>  for  more  information  about  virtual
roots.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.exception"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.exception"></a>
<tt class="descname">exception</tt><a class="headerlink" href="#pyramid.request.Request.exception" title="Permalink to this definition">¶</a></dt>
<dd><p>If an exception was raised by a <a class="reference internal" href="../glossary.html#term-root-factory"><em class="xref std std-term">root factory</em></a> or a
<a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a>, or at various other points where
<span>Pyramid</span> executes user-defined code during the
processing of a request, the exception object which was caught
will be available as the <tt class="docutils literal"><span class="pre">exception</span></tt> attribute of the request
within a <a class="reference internal" href="../glossary.html#term-exception-view"><em class="xref std std-term">exception view</em></a>, a <a class="reference internal" href="../glossary.html#term-response-callback"><em class="xref std std-term">response callback</em></a> or a
<a class="reference internal" href="../glossary.html#term-finished-callback"><em class="xref std std-term">finished callback</em></a>.  If no exception occurred, the value
of <tt class="docutils literal"><span class="pre">request.exception</span></tt> will be <tt class="docutils literal"><span class="pre">None</span></tt> within response and
finished callbacks.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.exc_info"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.exc_info"></a>
<tt class="descname">exc_info</tt><a class="headerlink" href="#pyramid.request.Request.exc_info" title="Permalink to this definition">¶</a></dt>
<dd><p>If an exception was raised by a <a class="reference internal" href="../glossary.html#term-root-factory"><em class="xref std std-term">root factory</em></a> or a <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view
callable</em></a>, or at various other points where <span>Pyramid</span> executes
user-defined code during the processing of a request, result of
<tt class="docutils literal"><span class="pre">sys.exc_info()</span></tt> will be available as the <tt class="docutils literal"><span class="pre">exc_info</span></tt> attribute of
the request within a <a class="reference internal" href="../glossary.html#term-exception-view"><em class="xref std std-term">exception view</em></a>, a <a class="reference internal" href="../glossary.html#term-response-callback"><em class="xref std std-term">response callback</em></a>
or a <a class="reference internal" href="../glossary.html#term-finished-callback"><em class="xref std std-term">finished callback</em></a>.  If no exception occurred, the value of
<tt class="docutils literal"><span class="pre">request.exc_info</span></tt> will be <tt class="docutils literal"><span class="pre">None</span></tt> within response and finished
callbacks.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.response">
<tt class="descname">response</tt><a class="reference internal" href="../_modules/pyramid/request.html#Request.response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid.request.Request.response" title="Permalink to this definition">¶</a></dt>
<dd><p>This attribute is actually a "reified" property which returns an
instance of the <a class="reference internal" href="response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a> class.  The response
object returned does not exist until this attribute is accessed.  Once
it is accessed, subsequent accesses to this request object will return
the same <a class="reference internal" href="response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">Response</span></tt></a> object.</p>
<p>The <tt class="docutils literal"><span class="pre">request.response</span></tt> API can is used by renderers.  A render obtains
the response object it will return from a view that uses that renderer
by accessing <tt class="docutils literal"><span class="pre">request.response</span></tt>.  Therefore, it's possible to use the
<tt class="docutils literal"><span class="pre">request.response</span></tt> API to set up a response object with "the right"
attributes (e.g. by calling <tt class="docutils literal"><span class="pre">request.response.set_cookie(...)</span></tt> or
<tt class="docutils literal"><span class="pre">request.response.content_type</span> <span class="pre">=</span> <span class="pre">'text/plain'</span></tt>, etc) within a view
that uses a renderer.  For example, within a view that uses a
<a class="reference internal" href="../glossary.html#term-renderer"><em class="xref std std-term">renderer</em></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">response</span>
<span class="n">response</span><span class="o">.</span><span class="n">set_cookie</span><span class="p">(</span><span class="s">'mycookie'</span><span class="p">,</span> <span class="s">'mine, all mine!'</span><span class="p">)</span>
<span class="k">return</span> <span class="p">{</span><span class="s">'text'</span><span class="p">:</span><span class="s">'Value that will be used by the renderer'</span><span class="p">}</span>
</pre></div>
</div>
<p>Mutations to this response object will be preserved in the response sent
to the client after rendering.  For more information about using
<tt class="docutils literal"><span class="pre">request.response</span></tt> in conjunction with a renderer, see
<a class="reference internal" href="../narr/renderers.html#request-response-attr"><em>Varying Attributes of Rendered Responses</em></a>.</p>
<p>Non-renderer code can also make use of request.response instead of
creating a response "by hand".  For example, in view code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">response</span>
<span class="n">response</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="s">'Hello!'</span>
<span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">=</span> <span class="s">'text/plain'</span>
<span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
<p>Note that the response in this circumstance is not "global"; it still
must be returned from the view code if a renderer is not used.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.session">
<tt class="descname">session</tt><a class="reference internal" href="../_modules/pyramid/request.html#Request.session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid.request.Request.session" title="Permalink to this definition">¶</a></dt>
<dd><p>If a <a class="reference internal" href="../glossary.html#term-session-factory"><em class="xref std std-term">session factory</em></a> has been configured, this attribute
will represent the current user's <a class="reference internal" href="../glossary.html#term-session"><em class="xref std std-term">session</em></a> object.  If a
session factory <em>has not</em> been configured, requesting the
<tt class="docutils literal"><span class="pre">request.session</span></tt> attribute will cause a
<a class="reference internal" href="exceptions.html#pyramid.exceptions.ConfigurationError" title="pyramid.exceptions.ConfigurationError"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.exceptions.ConfigurationError</span></tt></a> to be raised.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.matchdict"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.matchdict"></a>
<tt class="descname">matchdict</tt><a class="headerlink" href="#pyramid.request.Request.matchdict" title="Permalink to this definition">¶</a></dt>
<dd><p>If a <a class="reference internal" href="../glossary.html#term-route"><em class="xref std std-term">route</em></a> has matched during this request, this attribute will
be a dictionary containing the values matched by the URL pattern
associated with the route.  If a route has not matched during this
request, the value of this attribute will be <tt class="docutils literal"><span class="pre">None</span></tt>. See
<a class="reference internal" href="../narr/urldispatch.html#matchdict"><em>The Matchdict</em></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.matched_route"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.matched_route"></a>
<tt class="descname">matched_route</tt><a class="headerlink" href="#pyramid.request.Request.matched_route" title="Permalink to this definition">¶</a></dt>
<dd><p>If a <a class="reference internal" href="../glossary.html#term-route"><em class="xref std std-term">route</em></a> has matched during this request, this attribute will
be an object representing the route matched by the URL pattern
associated with the route.  If a route has not matched during this
request, the value of this attribute will be <tt class="docutils literal"><span class="pre">None</span></tt>. See
<a class="reference internal" href="../narr/urldispatch.html#matched-route"><em>The Matched Route</em></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.authenticated_userid"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.authenticated_userid"></a>
<tt class="descname">authenticated_userid</tt><a class="headerlink" href="#pyramid.request.Request.authenticated_userid" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 1.5.</span></p>
</div>
<p>A property which returns the userid of the currently authenticated user
or <tt class="docutils literal"><span class="pre">None</span></tt> if there is no <a class="reference internal" href="../glossary.html#term-authentication-policy"><em class="xref std std-term">authentication policy</em></a> in effect or
there is no currently authenticated user.  This differs from
<a class="reference internal" href="#pyramid.request.Request.unauthenticated_userid" title="pyramid.request.Request.unauthenticated_userid"><tt class="xref py py-attr docutils literal"><span class="pre">unauthenticated_userid</span></tt></a>, because the
effective authentication policy will have ensured that a record
associated with the userid exists in persistent storage; if it has
not, this value will be <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.unauthenticated_userid"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.unauthenticated_userid"></a>
<tt class="descname">unauthenticated_userid</tt><a class="headerlink" href="#pyramid.request.Request.unauthenticated_userid" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 1.5.</span></p>
</div>
<p>A property which returns a value which represents the <em>claimed</em> (not
verified) user id of the credentials present in the request. <tt class="docutils literal"><span class="pre">None</span></tt> if
there is no <a class="reference internal" href="../glossary.html#term-authentication-policy"><em class="xref std std-term">authentication policy</em></a> in effect or there is no user
data associated with the current request.  This differs from
<a class="reference internal" href="#pyramid.request.Request.authenticated_userid" title="pyramid.request.Request.authenticated_userid"><tt class="xref py py-attr docutils literal"><span class="pre">authenticated_userid</span></tt></a>, because the
effective authentication policy will not ensure that a record associated
with the userid exists in persistent storage.  Even if the userid
does not exist in persistent storage, this value will be the value
of the userid <em>claimed</em> by the request data.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.effective_principals"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.effective_principals"></a>
<tt class="descname">effective_principals</tt><a class="headerlink" href="#pyramid.request.Request.effective_principals" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 1.5.</span></p>
</div>
<p>A property which returns the list of 'effective' <a class="reference internal" href="../glossary.html#term-principal"><em class="xref std std-term">principal</em></a>
identifiers for this request.  This will include the userid of the
currently authenticated user if a user is currently authenticated. If no
<a class="reference internal" href="../glossary.html#term-authentication-policy"><em class="xref std std-term">authentication policy</em></a> is in effect, this will return a sequence
containing only the <a class="reference internal" href="security.html#pyramid.security.Everyone" title="pyramid.security.Everyone"><tt class="xref py py-attr docutils literal"><span class="pre">pyramid.security.Everyone</span></tt></a> principal.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.invoke_subrequest"><a name="//apple_ref/cpp/clm/pyramid.request.Request.invoke_subrequest"></a>
<tt class="descname">invoke_subrequest</tt><big>(</big><em>request</em>, <em>use_tweens=False</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.invoke_subrequest" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 1.4a1.</span></p>
</div>
<p>Obtain a response object from the Pyramid application based on
information in the <tt class="docutils literal"><span class="pre">request</span></tt> object provided.  The <tt class="docutils literal"><span class="pre">request</span></tt> object
must be an object that implements the Pyramid request interface (such
as a <a class="reference internal" href="#pyramid.request.Request" title="pyramid.request.Request"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.request.Request</span></tt></a> instance).  If <tt class="docutils literal"><span class="pre">use_tweens</span></tt> is
<tt class="docutils literal"><span class="pre">True</span></tt>, the request will be sent to the <a class="reference internal" href="../glossary.html#term-tween"><em class="xref std std-term">tween</em></a> in the tween
stack closest to the request ingress.  If <tt class="docutils literal"><span class="pre">use_tweens</span></tt> is <tt class="docutils literal"><span class="pre">False</span></tt>,
the request will be sent to the main router handler, and no tweens will
be invoked.</p>
<p>This function also:</p>
<ul class="simple">
<li>manages the threadlocal stack (so that
<a class="reference internal" href="threadlocal.html#pyramid.threadlocal.get_current_request" title="pyramid.threadlocal.get_current_request"><tt class="xref py py-func docutils literal"><span class="pre">get_current_request()</span></tt></a> and
<a class="reference internal" href="threadlocal.html#pyramid.threadlocal.get_current_registry" title="pyramid.threadlocal.get_current_registry"><tt class="xref py py-func docutils literal"><span class="pre">get_current_registry()</span></tt></a> work during a
request)</li>
<li>Adds a <tt class="docutils literal"><span class="pre">registry</span></tt> attribute (the current Pyramid registry) and a
<tt class="docutils literal"><span class="pre">invoke_subrequest</span></tt> attribute (a callable) to the request object it's
handed.</li>
<li>sets request extensions (such as those added via
<a class="reference internal" href="config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><tt class="xref py py-meth docutils literal"><span class="pre">add_request_method()</span></tt></a> or
<a class="reference internal" href="config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><tt class="xref py py-meth docutils literal"><span class="pre">set_request_property()</span></tt></a>) on the
request it's passed.</li>
<li>causes a <a class="reference internal" href="events.html#pyramid.events.NewRequest" title="pyramid.events.NewRequest"><tt class="xref py py-class docutils literal"><span class="pre">NewRequest</span></tt></a> event to be sent at the
beginning of request processing.</li>
<li>causes a <a class="reference internal" href="events.html#pyramid.events.ContextFound" title="pyramid.events.ContextFound"><tt class="xref py py-class docutils literal"><span class="pre">ContextFound</span></tt></a> event to be sent
when a context resource is found.</li>
<li>Ensures that the user implied by the request passed has the necessary
authorization to invoke view callable before calling it.</li>
<li>Calls any <a class="reference internal" href="../glossary.html#term-response-callback"><em class="xref std std-term">response callback</em></a> functions defined within the
request's lifetime if a response is obtained from the Pyramid
application.</li>
<li>causes a <a class="reference internal" href="events.html#pyramid.events.NewResponse" title="pyramid.events.NewResponse"><tt class="xref py py-class docutils literal"><span class="pre">NewResponse</span></tt></a> event to be sent if a
response is obtained.</li>
<li>Calls any <a class="reference internal" href="../glossary.html#term-finished-callback"><em class="xref std std-term">finished callback</em></a> functions defined within the
request's lifetime.</li>
</ul>
<p><tt class="docutils literal"><span class="pre">invoke_subrequest</span></tt> isn't <em>actually</em> a method of the Request object;
it's a callable added when the Pyramid router is invoked, or when a
subrequest is invoked.  This means that it's not available for use on a
request provided by e.g. the <tt class="docutils literal"><span class="pre">pshell</span></tt> environment.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference internal" href="../narr/subrequest.html#subrequest-chapter"><em>Invoking a Subrequest</em></a>.</p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.has_permission"><a name="//apple_ref/cpp/clm/pyramid.request.Request.has_permission"></a>
<tt class="descname">has_permission</tt><big>(</big><em>permission</em>, <em>context=None</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.has_permission" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a permission and an optional context, returns an instance of
<a class="reference internal" href="security.html#pyramid.security.Allowed" title="pyramid.security.Allowed"><tt class="xref py py-data docutils literal"><span class="pre">pyramid.security.Allowed</span></tt></a> if the permission is granted to this
request with the provided context, or the context already associated
with the request.  Otherwise, returns an instance of
<a class="reference internal" href="security.html#pyramid.security.Denied" title="pyramid.security.Denied"><tt class="xref py py-data docutils literal"><span class="pre">pyramid.security.Denied</span></tt></a>.  This method delegates to the current
authentication and authorization policies.  Returns
<a class="reference internal" href="security.html#pyramid.security.Allowed" title="pyramid.security.Allowed"><tt class="xref py py-data docutils literal"><span class="pre">pyramid.security.Allowed</span></tt></a> unconditionally if no authentication
policy has been registered for this request.  If <tt class="docutils literal"><span class="pre">context</span></tt> is not
supplied or is supplied as <tt class="docutils literal"><span class="pre">None</span></tt>, the context used is the
<tt class="docutils literal"><span class="pre">request.context</span></tt> attribute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>permission</strong> (<em>unicode, str</em>) -- Does this request have the given permission?</li>
<li><strong>context</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#object" title="(in Python v3.4)"><em>object</em></a>) -- A resource object or <tt class="docutils literal"><span class="pre">None</span></tt></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><cite>pyramid.security.PermitsResult</cite></p>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.</span></p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.add_response_callback"><a name="//apple_ref/cpp/clm/pyramid.request.Request.add_response_callback"></a>
<tt class="descname">add_response_callback</tt><big>(</big><em>callback</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.add_response_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callback to the set of callbacks to be called by the
<a class="reference internal" href="../glossary.html#term-router"><em class="xref std std-term">router</em></a> at a point after a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a> object is
successfully created.  <span>Pyramid</span> does not have a
global response object: this functionality allows an
application to register an action to be performed against the
response once one is created.</p>
<p>A 'callback' is a callable which accepts two positional
parameters: <tt class="docutils literal"><span class="pre">request</span></tt> and <tt class="docutils literal"><span class="pre">response</span></tt>.  For example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">cache_callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
    <span class="s">'Set the cache_control max_age for the response'</span>
    <span class="n">response</span><span class="o">.</span><span class="n">cache_control</span><span class="o">.</span><span class="n">max_age</span> <span class="o">=</span> <span class="mi">360</span>
<span class="n">request</span><span class="o">.</span><span class="n">add_response_callback</span><span class="p">(</span><span class="n">cache_callback</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Response callbacks are called in the order they're added
(first-to-most-recently-added).  No response callback is
called if an exception happens in application code, or if the
response object returned by <a class="reference internal" href="../glossary.html#term-view"><em class="xref std std-term">view</em></a> code is invalid.</p>
<p>All response callbacks are called <em>after</em> the tweens and 
<em>before</em> the <a class="reference internal" href="events.html#pyramid.events.NewResponse" title="pyramid.events.NewResponse"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.events.NewResponse</span></tt></a> event is sent.</p>
<p>Errors raised by callbacks are not handled specially.  They
will be propagated to the caller of the <span>Pyramid</span>
router application.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference internal" href="../narr/hooks.html#using-response-callbacks"><em>Using Response Callbacks</em></a>.</p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.add_finished_callback"><a name="//apple_ref/cpp/clm/pyramid.request.Request.add_finished_callback"></a>
<tt class="descname">add_finished_callback</tt><big>(</big><em>callback</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.add_finished_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callback to the set of callbacks to be called
unconditionally by the <a class="reference internal" href="../glossary.html#term-router"><em class="xref std std-term">router</em></a> at the very end of
request processing.</p>
<p><tt class="docutils literal"><span class="pre">callback</span></tt> is a callable which accepts a single positional
parameter: <tt class="docutils literal"><span class="pre">request</span></tt>.  For example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">transaction</span>

<span class="k">def</span> <span class="nf">commit_callback</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="sd">'''commit or abort the transaction associated with request'''</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">abort</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="n">request</span><span class="o">.</span><span class="n">add_finished_callback</span><span class="p">(</span><span class="n">commit_callback</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Finished callbacks are called in the order they're added (
first- to most-recently- added).  Finished callbacks (unlike
response callbacks) are <em>always</em> called, even if an exception
happens in application code that prevents a response from
being generated.</p>
<p>The set of finished callbacks associated with a request are
called <em>very late</em> in the processing of that request; they are
essentially the last thing called by the <a class="reference internal" href="../glossary.html#term-router"><em class="xref std std-term">router</em></a>. They
are called after response processing has already occurred in a
top-level <tt class="docutils literal"><span class="pre">finally:</span></tt> block within the router request
processing code.  As a result, mutations performed to the
<tt class="docutils literal"><span class="pre">request</span></tt> provided to a finished callback will have no
meaningful effect, because response processing will have
already occurred, and the request's scope will expire almost
immediately after all finished callbacks have been processed.</p>
<p>Errors raised by finished callbacks are not handled specially.
They will be propagated to the caller of the <span>Pyramid</span>
router application.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference internal" href="../narr/hooks.html#using-finished-callbacks"><em>Using Finished Callbacks</em></a>.</p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.route_url"><a name="//apple_ref/cpp/clm/pyramid.request.Request.route_url"></a>
<tt class="descname">route_url</tt><big>(</big><em>route_name</em>, <em>*elements</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.route_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a fully qualified URL for a named <span>Pyramid</span>
<a class="reference internal" href="../glossary.html#term-route-configuration"><em class="xref std std-term">route configuration</em></a>.</p>
<p>Use the route's <tt class="docutils literal"><span class="pre">name</span></tt> as the first positional argument.
Additional positional arguments (<tt class="docutils literal"><span class="pre">*elements</span></tt>) are appended to the
URL as path segments after it is generated.</p>
<p>Use keyword arguments to supply values which match any dynamic
path elements in the route definition.  Raises a <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">KeyError</span></tt></a>
exception if the URL cannot be generated for any reason (not
enough arguments, for example).</p>
<p>For example, if you've defined a route named "foobar" with the path
<tt class="docutils literal"><span class="pre">{foo}/{bar}/*traverse</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>request.route_url('foobar',
                   foo='1')             =&gt; &lt;KeyError exception&gt;
request.route_url('foobar',
                   foo='1',
                   bar='2')             =&gt; &lt;KeyError exception&gt;
request.route_url('foobar',
                   foo='1',
                   bar='2',
                   traverse=('a','b'))  =&gt; http://e.com/1/2/a/b
request.route_url('foobar',
                   foo='1',
                   bar='2',
                   traverse='/a/b')     =&gt; http://e.com/1/2/a/b
</pre></div>
</div>
<p>Values replacing <tt class="docutils literal"><span class="pre">:segment</span></tt> arguments can be passed as strings
or Unicode objects.  They will be encoded to UTF-8 and URL-quoted
before being placed into the generated URL.</p>
<p>Values replacing <tt class="docutils literal"><span class="pre">*remainder</span></tt> arguments can be passed as strings
<em>or</em> tuples of Unicode/string values.  If a tuple is passed as a
<tt class="docutils literal"><span class="pre">*remainder</span></tt> replacement value, its values are URL-quoted and
encoded to UTF-8.  The resulting strings are joined with slashes
and rendered into the URL.  If a string is passed as a
<tt class="docutils literal"><span class="pre">*remainder</span></tt> replacement value, it is tacked on to the URL
after being URL-quoted-except-for-embedded-slashes.</p>
<p>If no <tt class="docutils literal"><span class="pre">_query</span></tt> keyword argument is provided, the request query string
will be returned in the URL. If it is present, it will be used to
compose a query string that will be tacked on to the end of the URL,
replacing any request query string.  The value of <tt class="docutils literal"><span class="pre">_query</span></tt> may be a
sequence of two-tuples <em>or</em> a data structure with an <tt class="docutils literal"><span class="pre">.items()</span></tt>
method that returns a sequence of two-tuples (presumably a dictionary).
This data structure will be turned into a query string per the
documentation of <a class="reference internal" href="url.html#pyramid.url.urlencode" title="pyramid.url.urlencode"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.url.urlencode()</span></tt></a> function.  This will
produce a query string in the <tt class="docutils literal"><span class="pre">x-www-form-urlencoded</span></tt> format.  A
non-<tt class="docutils literal"><span class="pre">x-www-form-urlencoded</span></tt> query string may be used by passing a
<em>string</em> value as <tt class="docutils literal"><span class="pre">_query</span></tt> in which case it will be URL-quoted
(e.g. query="foo bar" will become "foo%20bar").  However, the result
will not need to be in <tt class="docutils literal"><span class="pre">k=v</span></tt> form as required by
<tt class="docutils literal"><span class="pre">x-www-form-urlencoded</span></tt>.  After the query data is turned into a query
string, a leading <tt class="docutils literal"><span class="pre">?</span></tt> is prepended, and the resulting string is
appended to the generated URL.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Python data structures that are passed as <tt class="docutils literal"><span class="pre">_query</span></tt> which are
sequences or dictionaries are turned into a string under the same
rules as when run through <a class="reference external" href="http://docs.python.org/library/urllib.html#urllib.urlencode" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">urllib.urlencode()</span></tt></a> with the <tt class="docutils literal"><span class="pre">doseq</span></tt>
argument equal to <tt class="docutils literal"><span class="pre">True</span></tt>.  This means that sequences can be passed
as values, and a k=v pair will be placed into the query string for
each value.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.5: </span>Allow the <tt class="docutils literal"><span class="pre">_query</span></tt> option to be a string to enable alternative
encodings.</p>
</div>
<p>If a keyword argument <tt class="docutils literal"><span class="pre">_anchor</span></tt> is present, its string
representation will be quoted per <span class="target" id="index-0"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc3986.html#section-3.5"><strong>RFC 3986</strong></a> and used as
a named anchor in the generated URL
(e.g. if <tt class="docutils literal"><span class="pre">_anchor</span></tt> is passed as <tt class="docutils literal"><span class="pre">foo</span></tt> and the route URL is
<tt class="docutils literal"><span class="pre">http://example.com/route/url</span></tt>, the resulting generated URL will
be <tt class="docutils literal"><span class="pre">http://example.com/route/url#foo</span></tt>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <tt class="docutils literal"><span class="pre">_anchor</span></tt> is passed as a string, it should be UTF-8 encoded. If
<tt class="docutils literal"><span class="pre">_anchor</span></tt> is passed as a Unicode object, it will be converted to
UTF-8 before being appended to the URL.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.5: </span>The <tt class="docutils literal"><span class="pre">_anchor</span></tt> option will be escaped instead of using
its raw string representation.</p>
</div>
<p>If both <tt class="docutils literal"><span class="pre">_anchor</span></tt> and <tt class="docutils literal"><span class="pre">_query</span></tt> are specified, the anchor
element will always follow the query element,
e.g. <tt class="docutils literal"><span class="pre">http://example.com?foo=1#bar</span></tt>.</p>
<p>If any of the keyword arguments <tt class="docutils literal"><span class="pre">_scheme</span></tt>, <tt class="docutils literal"><span class="pre">_host</span></tt>, or <tt class="docutils literal"><span class="pre">_port</span></tt>
is passed and is non-<tt class="docutils literal"><span class="pre">None</span></tt>, the provided value will replace the
named portion in the generated URL.  For example, if you pass
<tt class="docutils literal"><span class="pre">_host='foo.com'</span></tt>, and the URL that would have been generated
without the host replacement is <tt class="docutils literal"><span class="pre">http://example.com/a</span></tt>, the result
will be <tt class="docutils literal"><span class="pre">https://foo.com/a</span></tt>.</p>
<p>Note that if <tt class="docutils literal"><span class="pre">_scheme</span></tt> is passed as <tt class="docutils literal"><span class="pre">https</span></tt>, and <tt class="docutils literal"><span class="pre">_port</span></tt> is not
passed, the <tt class="docutils literal"><span class="pre">_port</span></tt> value is assumed to have been passed as
<tt class="docutils literal"><span class="pre">443</span></tt>.  Likewise, if <tt class="docutils literal"><span class="pre">_scheme</span></tt> is passed as <tt class="docutils literal"><span class="pre">http</span></tt> and
<tt class="docutils literal"><span class="pre">_port</span></tt> is not passed, the <tt class="docutils literal"><span class="pre">_port</span></tt> value is assumed to have been
passed as <tt class="docutils literal"><span class="pre">80</span></tt>. To avoid this behavior, always explicitly pass
<tt class="docutils literal"><span class="pre">_port</span></tt> whenever you pass <tt class="docutils literal"><span class="pre">_scheme</span></tt>.</p>
<p>If a keyword <tt class="docutils literal"><span class="pre">_app_url</span></tt> is present, it will be used as the
protocol/hostname/port/leading path prefix of the generated URL.
For example, using an <tt class="docutils literal"><span class="pre">_app_url</span></tt> of
<tt class="docutils literal"><span class="pre">http://example.com:8080/foo</span></tt> would cause the URL
<tt class="docutils literal"><span class="pre">http://example.com:8080/foo/fleeb/flub</span></tt> to be returned from
this function if the expansion of the route pattern associated
with the <tt class="docutils literal"><span class="pre">route_name</span></tt> expanded to <tt class="docutils literal"><span class="pre">/fleeb/flub</span></tt>.  If
<tt class="docutils literal"><span class="pre">_app_url</span></tt> is not specified, the result of
<tt class="docutils literal"><span class="pre">request.application_url</span></tt> will be used as the prefix (the
default).</p>
<p>If both <tt class="docutils literal"><span class="pre">_app_url</span></tt> and any of <tt class="docutils literal"><span class="pre">_scheme</span></tt>, <tt class="docutils literal"><span class="pre">_host</span></tt>, or <tt class="docutils literal"><span class="pre">_port</span></tt>
are passed, <tt class="docutils literal"><span class="pre">_app_url</span></tt> takes precedence and any values passed for
<tt class="docutils literal"><span class="pre">_scheme</span></tt>, <tt class="docutils literal"><span class="pre">_host</span></tt>, and <tt class="docutils literal"><span class="pre">_port</span></tt> will be ignored.</p>
<p>This function raises a <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">KeyError</span></tt></a> if the URL cannot be
generated due to missing replacement names.  Extra replacement
names are ignored.</p>
<p>If the route object which matches the <tt class="docutils literal"><span class="pre">route_name</span></tt> argument has
a <a class="reference internal" href="../glossary.html#term-pregenerator"><em class="xref std std-term">pregenerator</em></a>, the <tt class="docutils literal"><span class="pre">*elements</span></tt> and <tt class="docutils literal"><span class="pre">**kw</span></tt>
arguments passed to this function might be augmented or changed.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.route_path"><a name="//apple_ref/cpp/clm/pyramid.request.Request.route_path"></a>
<tt class="descname">route_path</tt><big>(</big><em>route_name</em>, <em>*elements</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.route_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a path (aka a 'relative URL', a URL minus the host, scheme,
and port) for a named <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-route-configuration"><em class="xref std std-term">route configuration</em></a>.</p>
<p>This function accepts the same argument as
<a class="reference internal" href="#pyramid.request.Request.route_url" title="pyramid.request.Request.route_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.route_url()</span></tt></a> and performs the same duty.
It just omits the host, port, and scheme information in the return
value; only the script_name, path, query parameters, and anchor data
are present in the returned string.</p>
<p>For example, if you've defined a route named 'foobar' with the path
<tt class="docutils literal"><span class="pre">/{foo}/{bar}</span></tt>, this call to <tt class="docutils literal"><span class="pre">route_path</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">request</span><span class="o">.</span><span class="n">route_path</span><span class="p">(</span><span class="s">'foobar'</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="s">'1'</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">'2'</span><span class="p">)</span>
</pre></div>
</div>
<p>Will return the string <tt class="docutils literal"><span class="pre">/1/2</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calling <tt class="docutils literal"><span class="pre">request.route_path('route')</span></tt> is the same as calling
<tt class="docutils literal"><span class="pre">request.route_url('route',</span> <span class="pre">_app_url=request.script_name)</span></tt>.
<a class="reference internal" href="#pyramid.request.Request.route_path" title="pyramid.request.Request.route_path"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.route_path()</span></tt></a> is, in fact,
implemented in terms of <a class="reference internal" href="#pyramid.request.Request.route_url" title="pyramid.request.Request.route_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.route_url()</span></tt></a>
in just this way. As a result, any <tt class="docutils literal"><span class="pre">_app_url</span></tt> passed within the
<tt class="docutils literal"><span class="pre">**kw</span></tt> values to <tt class="docutils literal"><span class="pre">route_path</span></tt> will be ignored.</p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.current_route_url"><a name="//apple_ref/cpp/clm/pyramid.request.Request.current_route_url"></a>
<tt class="descname">current_route_url</tt><big>(</big><em>*elements</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.current_route_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a fully qualified URL for a named <span>Pyramid</span>
<a class="reference internal" href="../glossary.html#term-route-configuration"><em class="xref std std-term">route configuration</em></a> based on the 'current route'.</p>
<p>This function supplements
<a class="reference internal" href="#pyramid.request.Request.route_url" title="pyramid.request.Request.route_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.route_url()</span></tt></a>. It presents an easy way to
generate a URL for the 'current route' (defined as the route which
matched when the request was generated).</p>
<p>The arguments to this method have the same meaning as those with the
same names passed to <a class="reference internal" href="#pyramid.request.Request.route_url" title="pyramid.request.Request.route_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.route_url()</span></tt></a>.  It
also understands an extra argument which <tt class="docutils literal"><span class="pre">route_url</span></tt> does not named
<tt class="docutils literal"><span class="pre">_route_name</span></tt>.</p>
<p>The route name used to generate a URL is taken from either the
<tt class="docutils literal"><span class="pre">_route_name</span></tt> keyword argument or the name of the route which is
currently associated with the request if <tt class="docutils literal"><span class="pre">_route_name</span></tt> was not
passed.  Keys and values from the current request <a class="reference internal" href="../glossary.html#term-matchdict"><em class="xref std std-term">matchdict</em></a>
are combined with the <tt class="docutils literal"><span class="pre">kw</span></tt> arguments to form a set of defaults
named <tt class="docutils literal"><span class="pre">newkw</span></tt>.  Then <tt class="docutils literal"><span class="pre">request.route_url(route_name,</span> <span class="pre">*elements,</span>
<span class="pre">**newkw)</span></tt> is called, returning a URL.</p>
<p>Examples follow.</p>
<p>If the 'current route' has the route pattern <tt class="docutils literal"><span class="pre">/foo/{page}</span></tt> and the
current url path is <tt class="docutils literal"><span class="pre">/foo/1</span></tt> , the matchdict will be
<tt class="docutils literal"><span class="pre">{'page':'1'}</span></tt>.  The result of <tt class="docutils literal"><span class="pre">request.current_route_url()</span></tt> in
this situation will be <tt class="docutils literal"><span class="pre">/foo/1</span></tt>.</p>
<p>If the 'current route' has the route pattern <tt class="docutils literal"><span class="pre">/foo/{page}</span></tt> and the
current url path is <tt class="docutils literal"><span class="pre">/foo/1</span></tt>, the matchdict will be
<tt class="docutils literal"><span class="pre">{'page':'1'}</span></tt>.  The result of
<tt class="docutils literal"><span class="pre">request.current_route_url(page='2')</span></tt> in this situation will be
<tt class="docutils literal"><span class="pre">/foo/2</span></tt>.</p>
<p>Usage of the <tt class="docutils literal"><span class="pre">_route_name</span></tt> keyword argument: if our routing table
defines routes <tt class="docutils literal"><span class="pre">/foo/{action}</span></tt> named 'foo' and
<tt class="docutils literal"><span class="pre">/foo/{action}/{page}</span></tt> named <tt class="docutils literal"><span class="pre">fooaction</span></tt>, and the current url
pattern is <tt class="docutils literal"><span class="pre">/foo/view</span></tt> (which has matched the <tt class="docutils literal"><span class="pre">/foo/{action}</span></tt>
route), we may want to use the matchdict args to generate a URL to
the <tt class="docutils literal"><span class="pre">fooaction</span></tt> route.  In this scenario,
<tt class="docutils literal"><span class="pre">request.current_route_url(_route_name='fooaction',</span> <span class="pre">page='5')</span></tt>
Will return string like: <tt class="docutils literal"><span class="pre">/foo/view/5</span></tt>.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.current_route_path"><a name="//apple_ref/cpp/clm/pyramid.request.Request.current_route_path"></a>
<tt class="descname">current_route_path</tt><big>(</big><em>*elements</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.current_route_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a path (aka a 'relative URL', a URL minus the host, scheme,
and port) for the <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-route-configuration"><em class="xref std std-term">route configuration</em></a> matched
by the current request.</p>
<p>This function accepts the same argument as
<a class="reference internal" href="#pyramid.request.Request.current_route_url" title="pyramid.request.Request.current_route_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.current_route_url()</span></tt></a> and performs the
same duty.  It just omits the host, port, and scheme information in
the return value; only the script_name, path, query parameters, and
anchor data are present in the returned string.</p>
<p>For example, if the route matched by the current request has the
pattern <tt class="docutils literal"><span class="pre">/{foo}/{bar}</span></tt>, this call to <tt class="docutils literal"><span class="pre">current_route_path</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">request</span><span class="o">.</span><span class="n">current_route_path</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">'1'</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">'2'</span><span class="p">)</span>
</pre></div>
</div>
<p>Will return the string <tt class="docutils literal"><span class="pre">/1/2</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calling <tt class="docutils literal"><span class="pre">request.current_route_path('route')</span></tt> is the same
as calling <tt class="docutils literal"><span class="pre">request.current_route_url('route',</span>
<span class="pre">_app_url=request.script_name)</span></tt>.
<a class="reference internal" href="#pyramid.request.Request.current_route_path" title="pyramid.request.Request.current_route_path"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.current_route_path()</span></tt></a> is, in fact,
implemented in terms of
<a class="reference internal" href="#pyramid.request.Request.current_route_url" title="pyramid.request.Request.current_route_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.current_route_url()</span></tt></a> in just this
way. As a result, any <tt class="docutils literal"><span class="pre">_app_url</span></tt> passed within the <tt class="docutils literal"><span class="pre">**kw</span></tt>
values to <tt class="docutils literal"><span class="pre">current_route_path</span></tt> will be ignored.</p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.static_url"><a name="//apple_ref/cpp/clm/pyramid.request.Request.static_url"></a>
<tt class="descname">static_url</tt><big>(</big><em>path</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.static_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a fully qualified URL for a static <a class="reference internal" href="../glossary.html#term-asset"><em class="xref std std-term">asset</em></a>.
The asset must live within a location defined via the
<a class="reference internal" href="config.html#pyramid.config.Configurator.add_static_view" title="pyramid.config.Configurator.add_static_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_static_view()</span></tt></a>
<a class="reference internal" href="../glossary.html#term-configuration-declaration"><em class="xref std std-term">configuration declaration</em></a> (see <a class="reference internal" href="../narr/assets.html#static-assets-section"><em>Serving Static Assets</em></a>).</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>request.static_url('mypackage:static/foo.css') =&gt;

                        http://example.com/static/foo.css
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">path</span></tt> argument points at a file or directory on disk which
a URL should be generated for.  The <tt class="docutils literal"><span class="pre">path</span></tt> may be either a
relative path (e.g. <tt class="docutils literal"><span class="pre">static/foo.css</span></tt>) or an absolute path (e.g.
<tt class="docutils literal"><span class="pre">/abspath/to/static/foo.css</span></tt>) or a <a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset specification</em></a>
(e.g. <tt class="docutils literal"><span class="pre">mypackage:static/foo.css</span></tt>).</p>
<p>The purpose of the <tt class="docutils literal"><span class="pre">**kw</span></tt> argument is the same as the purpose of
the <a class="reference internal" href="#pyramid.request.Request.route_url" title="pyramid.request.Request.route_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.route_url()</span></tt></a> <tt class="docutils literal"><span class="pre">**kw</span></tt> argument.  See
the documentation for that function to understand the arguments which
you can provide to it.  However, typically, you don't need to pass
anything as <tt class="docutils literal"><span class="pre">*kw</span></tt> when generating a static asset URL.</p>
<p>This function raises a <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt></a> if a static view
definition cannot be found which matches the path specification.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.static_path"><a name="//apple_ref/cpp/clm/pyramid.request.Request.static_path"></a>
<tt class="descname">static_path</tt><big>(</big><em>path</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.static_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a path (aka a 'relative URL', a URL minus the host, scheme,
and port) for a static resource.</p>
<p>This function accepts the same argument as
<a class="reference internal" href="#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.static_url()</span></tt></a> and performs the
same duty.  It just omits the host, port, and scheme information in
the return value; only the script_name, path, query parameters, and
anchor data are present in the returned string.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>request.static_path('mypackage:static/foo.css') =&gt;

                        /static/foo.css
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calling <tt class="docutils literal"><span class="pre">request.static_path(apath)</span></tt> is the same as calling
<tt class="docutils literal"><span class="pre">request.static_url(apath,</span> <span class="pre">_app_url=request.script_name)</span></tt>.
<a class="reference internal" href="#pyramid.request.Request.static_path" title="pyramid.request.Request.static_path"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.static_path()</span></tt></a> is, in fact, implemented
in terms of <cite>:meth:`pyramid.request.Request.static_url</cite> in just this
way. As a result, any <tt class="docutils literal"><span class="pre">_app_url</span></tt> passed within the <tt class="docutils literal"><span class="pre">**kw</span></tt> values
to <tt class="docutils literal"><span class="pre">static_path</span></tt> will be ignored.</p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.resource_url"><a name="//apple_ref/cpp/clm/pyramid.request.Request.resource_url"></a>
<tt class="descname">resource_url</tt><big>(</big><em>resource</em>, <em>*elements</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.resource_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a string representing the absolute URL of the
<a class="reference internal" href="../glossary.html#term-resource"><em class="xref std std-term">resource</em></a> object based on the <tt class="docutils literal"><span class="pre">wsgi.url_scheme</span></tt>,
<tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt> or <tt class="docutils literal"><span class="pre">SERVER_NAME</span></tt> in the request, plus any
<tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt>.  The overall result of this method is always a
UTF-8 encoded string.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre>request.resource_url(resource) =&gt;

                           http://example.com/

request.resource_url(resource, 'a.html') =&gt;

                           http://example.com/a.html

request.resource_url(resource, 'a.html', query={'q':'1'}) =&gt;

                           http://example.com/a.html?q=1

request.resource_url(resource, 'a.html', anchor='abc') =&gt;

                           http://example.com/a.html#abc

request.resource_url(resource, app_url='') =&gt;

                           /
</pre></div>
</div>
<p>Any positional arguments passed in as <tt class="docutils literal"><span class="pre">elements</span></tt> must be strings
Unicode objects, or integer objects.  These will be joined by slashes
and appended to the generated resource URL.  Each of the elements
passed in is URL-quoted before being appended; if any element is
Unicode, it will converted to a UTF-8 bytestring before being
URL-quoted. If any element is an integer, it will be converted to its
string representation before being URL-quoted.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">if no <tt class="docutils literal"><span class="pre">elements</span></tt> arguments are specified, the resource
URL will end with a trailing slash.  If any
<tt class="docutils literal"><span class="pre">elements</span></tt> are used, the generated URL will <em>not</em>
end in a trailing slash.</p>
</div>
<p>If a keyword argument <tt class="docutils literal"><span class="pre">query</span></tt> is present, it will be used to compose
a query string that will be tacked on to the end of the URL.  The value
of <tt class="docutils literal"><span class="pre">query</span></tt> may be a sequence of two-tuples <em>or</em> a data structure with
an <tt class="docutils literal"><span class="pre">.items()</span></tt> method that returns a sequence of two-tuples
(presumably a dictionary).  This data structure will be turned into a
query string per the documentation of :func:<tt class="docutils literal"><span class="pre">pyramid.url.urlencode</span></tt>
function.  This will produce a query string in the
<tt class="docutils literal"><span class="pre">x-www-form-urlencoded</span></tt> encoding.  A non-<tt class="docutils literal"><span class="pre">x-www-form-urlencoded</span></tt>
query string may be used by passing a <em>string</em> value as <tt class="docutils literal"><span class="pre">query</span></tt> in
which case it will be URL-quoted (e.g. query="foo bar" will become
"foo%20bar").  However, the result will not need to be in <tt class="docutils literal"><span class="pre">k=v</span></tt> form
as required by <tt class="docutils literal"><span class="pre">x-www-form-urlencoded</span></tt>.  After the query data is
turned into a query string, a leading <tt class="docutils literal"><span class="pre">?</span></tt> is prepended, and the
resulting string is appended to the generated URL.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Python data structures that are passed as <tt class="docutils literal"><span class="pre">query</span></tt> which are
sequences or dictionaries are turned into a string under the same
rules as when run through <a class="reference external" href="http://docs.python.org/library/urllib.html#urllib.urlencode" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">urllib.urlencode()</span></tt></a> with the <tt class="docutils literal"><span class="pre">doseq</span></tt>
argument equal to <tt class="docutils literal"><span class="pre">True</span></tt>.  This means that sequences can be passed
as values, and a k=v pair will be placed into the query string for
each value.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.5: </span>Allow the <tt class="docutils literal"><span class="pre">query</span></tt> option to be a string to enable alternative
encodings.</p>
</div>
<p>If a keyword argument <tt class="docutils literal"><span class="pre">anchor</span></tt> is present, its string
representation will be used as a named anchor in the generated URL
(e.g. if <tt class="docutils literal"><span class="pre">anchor</span></tt> is passed as <tt class="docutils literal"><span class="pre">foo</span></tt> and the resource URL is
<tt class="docutils literal"><span class="pre">http://example.com/resource/url</span></tt>, the resulting generated URL will
be <tt class="docutils literal"><span class="pre">http://example.com/resource/url#foo</span></tt>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <tt class="docutils literal"><span class="pre">anchor</span></tt> is passed as a string, it should be UTF-8 encoded. If
<tt class="docutils literal"><span class="pre">anchor</span></tt> is passed as a Unicode object, it will be converted to
UTF-8 before being appended to the URL.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.5: </span>The <tt class="docutils literal"><span class="pre">anchor</span></tt> option will be escaped instead of using
its raw string representation.</p>
</div>
<p>If both <tt class="docutils literal"><span class="pre">anchor</span></tt> and <tt class="docutils literal"><span class="pre">query</span></tt> are specified, the anchor element
will always follow the query element,
e.g. <tt class="docutils literal"><span class="pre">http://example.com?foo=1#bar</span></tt>.</p>
<p>If any of the keyword arguments <tt class="docutils literal"><span class="pre">scheme</span></tt>, <tt class="docutils literal"><span class="pre">host</span></tt>, or <tt class="docutils literal"><span class="pre">port</span></tt> is
passed and is non-<tt class="docutils literal"><span class="pre">None</span></tt>, the provided value will replace the named
portion in the generated URL.  For example, if you pass
<tt class="docutils literal"><span class="pre">host='foo.com'</span></tt>, and the URL that would have been generated
without the host replacement is <tt class="docutils literal"><span class="pre">http://example.com/a</span></tt>, the result
will be <tt class="docutils literal"><span class="pre">https://foo.com/a</span></tt>.</p>
<p>If <tt class="docutils literal"><span class="pre">scheme</span></tt> is passed as <tt class="docutils literal"><span class="pre">https</span></tt>, and an explicit <tt class="docutils literal"><span class="pre">port</span></tt> is not
passed, the <tt class="docutils literal"><span class="pre">port</span></tt> value is assumed to have been passed as <tt class="docutils literal"><span class="pre">443</span></tt>.
Likewise, if <tt class="docutils literal"><span class="pre">scheme</span></tt> is passed as <tt class="docutils literal"><span class="pre">http</span></tt> and <tt class="docutils literal"><span class="pre">port</span></tt> is not
passed, the <tt class="docutils literal"><span class="pre">port</span></tt> value is assumed to have been passed as
<tt class="docutils literal"><span class="pre">80</span></tt>. To avoid this behavior, always explicitly pass <tt class="docutils literal"><span class="pre">port</span></tt>
whenever you pass <tt class="docutils literal"><span class="pre">scheme</span></tt>.</p>
<p>If a keyword argument <tt class="docutils literal"><span class="pre">app_url</span></tt> is passed and is not <tt class="docutils literal"><span class="pre">None</span></tt>, it
should be a string that will be used as the port/hostname/initial
path portion of the generated URL instead of the default request
application URL.  For example, if <tt class="docutils literal"><span class="pre">app_url='http://foo'</span></tt>, then the
resulting url of a resource that has a path of <tt class="docutils literal"><span class="pre">/baz/bar</span></tt> will be
<tt class="docutils literal"><span class="pre">http://foo/baz/bar</span></tt>.  If you want to generate completely relative
URLs with no leading scheme, host, port, or initial path, you can
pass <tt class="docutils literal"><span class="pre">app_url=''</span></tt>.  Passing <tt class="docutils literal"><span class="pre">app_url=''</span></tt> when the resource path is
<tt class="docutils literal"><span class="pre">/baz/bar</span></tt> will return <tt class="docutils literal"><span class="pre">/baz/bar</span></tt>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.3: </span><tt class="docutils literal"><span class="pre">app_url</span></tt></p>
</div>
<p>If <tt class="docutils literal"><span class="pre">app_url</span></tt> is passed and any of <tt class="docutils literal"><span class="pre">scheme</span></tt>, <tt class="docutils literal"><span class="pre">port</span></tt>, or <tt class="docutils literal"><span class="pre">host</span></tt>
are also passed, <tt class="docutils literal"><span class="pre">app_url</span></tt> will take precedence and the values
passed for <tt class="docutils literal"><span class="pre">scheme</span></tt>, <tt class="docutils literal"><span class="pre">host</span></tt>, and/or <tt class="docutils literal"><span class="pre">port</span></tt> will be ignored.</p>
<p>If the <tt class="docutils literal"><span class="pre">resource</span></tt> passed in has a <tt class="docutils literal"><span class="pre">__resource_url__</span></tt> method, it
will be used to generate the URL (scheme, host, port, path) for the
base resource which is operated upon by this function.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference internal" href="../narr/resources.html#overriding-resource-url-generation"><em>Overriding Resource URL Generation</em></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5: </span><tt class="docutils literal"><span class="pre">route_name</span></tt>, <tt class="docutils literal"><span class="pre">route_kw</span></tt>, and <tt class="docutils literal"><span class="pre">route_remainder_name</span></tt></p>
</div>
<p>If <tt class="docutils literal"><span class="pre">route_name</span></tt> is passed, this function will delegate its URL
production to the <tt class="docutils literal"><span class="pre">route_url</span></tt> function.  Calling
<tt class="docutils literal"><span class="pre">resource_url(someresource,</span> <span class="pre">'element1',</span> <span class="pre">'element2',</span> <span class="pre">query={'a':1},</span>
<span class="pre">route_name='blogentry')</span></tt> is roughly equivalent to doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">remainder_path</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">resource_path</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">route_url</span><span class="p">(</span>
          <span class="s">'blogentry'</span><span class="p">,</span>
          <span class="s">'element1'</span><span class="p">,</span>
          <span class="s">'element2'</span><span class="p">,</span>
          <span class="n">_query</span><span class="o">=</span><span class="p">{</span><span class="s">'a'</span><span class="p">:</span><span class="s">'1'</span><span class="p">},</span>
          <span class="n">traverse</span><span class="o">=</span><span class="n">traversal_path</span><span class="p">,</span>
          <span class="p">)</span>
</pre></div>
</div>
<p>It is only sensible to pass <tt class="docutils literal"><span class="pre">route_name</span></tt> if the route being named has
a <tt class="docutils literal"><span class="pre">*remainder</span></tt> stararg value such as <tt class="docutils literal"><span class="pre">*traverse</span></tt>.  The remainder
value will be ignored in the output otherwise.</p>
<p>By default, the resource path value will be passed as the name
<tt class="docutils literal"><span class="pre">traverse</span></tt> when <tt class="docutils literal"><span class="pre">route_url</span></tt> is called.  You can influence this by
passing a different <tt class="docutils literal"><span class="pre">route_remainder_name</span></tt> value if the route has a
different <tt class="docutils literal"><span class="pre">*stararg</span></tt> value at its end.  For example if the route
pattern you want to replace has a <tt class="docutils literal"><span class="pre">*subpath</span></tt> stararg ala
<tt class="docutils literal"><span class="pre">/foo*subpath</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">request</span><span class="o">.</span><span class="n">resource_url</span><span class="p">(</span>
               <span class="n">resource</span><span class="p">,</span>
               <span class="n">route_name</span><span class="o">=</span><span class="s">'myroute'</span><span class="p">,</span>
               <span class="n">route_remainder_name</span><span class="o">=</span><span class="s">'subpath'</span>
               <span class="p">)</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">route_name</span></tt> is passed, it is also permissible to pass
<tt class="docutils literal"><span class="pre">route_kw</span></tt>, which will passed as additional keyword arguments to
<tt class="docutils literal"><span class="pre">route_url</span></tt>.  Saying <tt class="docutils literal"><span class="pre">resource_url(someresource,</span> <span class="pre">'element1',</span>
<span class="pre">'element2',</span> <span class="pre">route_name='blogentry',</span> <span class="pre">route_kw={'id':'4'},</span>
<span class="pre">_query={'a':'1'})</span></tt> is roughly equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre>remainder_path = request.resource_path_tuple(someobject)
kw = {'id':'4', '_query':{'a':'1'}, 'traverse':traversal_path}
url = request.route_url(
          'blogentry',
          'element1',
          'element2',
          **kw,
          )
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">route_kw</span></tt> or <tt class="docutils literal"><span class="pre">route_remainder_name</span></tt> is passed, but
<tt class="docutils literal"><span class="pre">route_name</span></tt> is not passed, both <tt class="docutils literal"><span class="pre">route_kw</span></tt> and
<tt class="docutils literal"><span class="pre">route_remainder_name</span></tt> will be ignored.  If <tt class="docutils literal"><span class="pre">route_name</span></tt>
is passed, the <tt class="docutils literal"><span class="pre">__resource_url__</span></tt> method of the resource passed is
ignored unconditionally.  This feature is incompatible with
resources which generate their own URLs.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <a class="reference internal" href="../glossary.html#term-resource"><em class="xref std std-term">resource</em></a> used is the result of a <a class="reference internal" href="../glossary.html#term-traversal"><em class="xref std std-term">traversal</em></a>, it
must be <a class="reference internal" href="../glossary.html#term-location"><em class="xref std std-term">location</em></a>-aware.  The resource can also be the context
of a <a class="reference internal" href="../glossary.html#term-url-dispatch"><em class="xref std std-term">URL dispatch</em></a>; contexts found this way do not need to be
location-aware.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a 'virtual root path' is present in the request environment (the
value of the WSGI environ key <tt class="docutils literal"><span class="pre">HTTP_X_VHM_ROOT</span></tt>), and the resource
was obtained via <a class="reference internal" href="../glossary.html#term-traversal"><em class="xref std std-term">traversal</em></a>, the URL path will not include the
virtual root prefix (it will be stripped off the left hand side of
the generated URL).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For backwards compatibility purposes, this method is also
aliased as the <tt class="docutils literal"><span class="pre">model_url</span></tt> method of request.</p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.resource_path">
<tt class="descname">resource_path</tt><big>(</big><em>resource</em>, <em>*elements</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.resource_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a path (aka a 'relative URL', a URL minus the host, scheme,
and port) for a <a class="reference internal" href="../glossary.html#term-resource"><em class="xref std std-term">resource</em></a>.</p>
<p>This function accepts the same argument as
<a class="reference internal" href="#pyramid.request.Request.resource_url" title="pyramid.request.Request.resource_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.resource_url()</span></tt></a> and performs the same
duty.  It just omits the host, port, and scheme information in the
return value; only the script_name, path, query parameters, and
anchor data are present in the returned string.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calling <tt class="docutils literal"><span class="pre">request.resource_path(resource)</span></tt> is the same as calling
<tt class="docutils literal"><span class="pre">request.resource_path(resource,</span> <span class="pre">app_url=request.script_name)</span></tt>.
<a class="reference internal" href="#pyramid.request.Request.resource_path" title="pyramid.request.Request.resource_path"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.resource_path()</span></tt></a> is, in fact,
implemented in terms of
<a class="reference internal" href="#pyramid.request.Request.resource_url" title="pyramid.request.Request.resource_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.resource_url()</span></tt></a> in just this way. As
a result, any <tt class="docutils literal"><span class="pre">app_url</span></tt> passed within the <tt class="docutils literal"><span class="pre">**kw</span></tt> values to
<tt class="docutils literal"><span class="pre">route_path</span></tt> will be ignored.  <tt class="docutils literal"><span class="pre">scheme</span></tt>, <tt class="docutils literal"><span class="pre">host</span></tt>, and
<tt class="docutils literal"><span class="pre">port</span></tt> are also ignored.</p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.json_body"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.json_body"></a>
<tt class="descname">json_body</tt><a class="reference internal" href="../_modules/pyramid/request.html#Request.json_body"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid.request.Request.json_body" title="Permalink to this definition">¶</a></dt>
<dd><p>This property will return the JSON-decoded variant of the request
body.  If the request body is not well-formed JSON, or there is no
body associated with this request, this property will raise an
exception.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference internal" href="../narr/webob.html#request-json-body"><em>Dealing With A JSON-Encoded Request Body</em></a>.</p>
</div>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.set_property"><a name="//apple_ref/cpp/clm/pyramid.request.Request.set_property"></a>
<tt class="descname">set_property</tt><big>(</big><em>callable</em>, <em>name=None</em>, <em>reify=False</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.set_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callable or a property descriptor to the request instance.</p>
<p>Properties, unlike attributes, are lazily evaluated by executing
an underlying callable when accessed. They can be useful for
adding features to an object without any cost if those features
go unused.</p>
<p>A property may also be reified via the
<a class="reference internal" href="decorator.html#pyramid.decorator.reify" title="pyramid.decorator.reify"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.decorator.reify</span></tt></a> decorator by setting
<tt class="docutils literal"><span class="pre">reify=True</span></tt>, allowing the result of the evaluation to be
cached. Thus the value of the property is only computed once for
the lifetime of the object.</p>
<p><tt class="docutils literal"><span class="pre">callable</span></tt> can either be a callable that accepts the request as
its single positional parameter, or it can be a property
descriptor.</p>
<p>If the <tt class="docutils literal"><span class="pre">callable</span></tt> is a property descriptor a <tt class="docutils literal"><span class="pre">ValueError</span></tt>
will be raised if <tt class="docutils literal"><span class="pre">name</span></tt> is <tt class="docutils literal"><span class="pre">None</span></tt> or <tt class="docutils literal"><span class="pre">reify</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
<p>If <tt class="docutils literal"><span class="pre">name</span></tt> is None, the name of the property will be computed
from the name of the <tt class="docutils literal"><span class="pre">callable</span></tt>.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">_connect</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">dbsession</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">cleanup</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
        <span class="c"># since version 1.5, request.exception is no</span>
        <span class="c"># longer eagerly cleared</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">request</span><span class="o">.</span><span class="n">add_finished_callback</span><span class="p">(</span><span class="n">cleanup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">conn</span>

<span class="nd">@subscriber</span><span class="p">(</span><span class="n">NewRequest</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">new_request</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">request</span>
    <span class="n">request</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="n">_connect</span><span class="p">,</span> <span class="s">'db'</span><span class="p">,</span> <span class="n">reify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The subscriber doesn't actually connect to the database, it just
provides the API which, when accessed via <tt class="docutils literal"><span class="pre">request.db</span></tt>, will
create the connection. Thanks to reify, only one connection is
made per-request even if <tt class="docutils literal"><span class="pre">request.db</span></tt> is accessed many times.</p>
<p>This pattern provides a way to augment the <tt class="docutils literal"><span class="pre">request</span></tt> object
without having to subclass it, which can be useful for extension
authors.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.3.</span></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.localizer"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.localizer"></a>
<tt class="descname">localizer</tt><a class="headerlink" href="#pyramid.request.Request.localizer" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="../glossary.html#term-localizer"><em class="xref std std-term">localizer</em></a> which will use the current locale name to
translate values.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.</span></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.locale_name"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.locale_name"></a>
<tt class="descname">locale_name</tt><a class="headerlink" href="#pyramid.request.Request.locale_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The locale name of the current request as computed by the
<a class="reference internal" href="../glossary.html#term-locale-negotiator"><em class="xref std std-term">locale negotiator</em></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.</span></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.GET"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.GET"></a>
<tt class="descname">GET</tt><a class="headerlink" href="#pyramid.request.Request.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a MultiDict containing all the variables from the
QUERY_STRING.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.POST"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.POST"></a>
<tt class="descname">POST</tt><a class="headerlink" href="#pyramid.request.Request.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a MultiDict containing all the variables from a form
request. Returns an empty dict-like object for non-form requests.</p>
<p>Form requests are typically POST requests, however PUT &amp; PATCH requests
with an appropriate Content-Type are also supported.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.accept"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.accept"></a>
<tt class="descname">accept</tt><a class="headerlink" href="#pyramid.request.Request.accept" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Accept</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1">HTTP spec section 14.1</a>).</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.accept_charset"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.accept_charset"></a>
<tt class="descname">accept_charset</tt><a class="headerlink" href="#pyramid.request.Request.accept_charset" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Accept-Charset</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2">HTTP spec section 14.2</a>).</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.accept_encoding"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.accept_encoding"></a>
<tt class="descname">accept_encoding</tt><a class="headerlink" href="#pyramid.request.Request.accept_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Accept-Encoding</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3">HTTP spec section 14.3</a>).</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.accept_language"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.accept_language"></a>
<tt class="descname">accept_language</tt><a class="headerlink" href="#pyramid.request.Request.accept_language" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Accept-Language</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4">HTTP spec section 14.4</a>).</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.application_url"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.application_url"></a>
<tt class="descname">application_url</tt><a class="headerlink" href="#pyramid.request.Request.application_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL including SCRIPT_NAME (no PATH_INFO or query string)</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.as_bytes"><a name="//apple_ref/cpp/clm/pyramid.request.Request.as_bytes"></a>
<tt class="descname">as_bytes</tt><big>(</big><em>skip_body=False</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.as_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return HTTP bytes representing this request.
If skip_body is True, exclude the body.
If skip_body is an integer larger than one, skip body
only if its length is bigger than that number.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.authorization"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.authorization"></a>
<tt class="descname">authorization</tt><a class="headerlink" href="#pyramid.request.Request.authorization" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Authorization</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">HTTP spec section 14.8</a>).  Converts it using <tt class="docutils literal"><span class="pre">parse_auth</span></tt> and <tt class="docutils literal"><span class="pre">serialize_auth</span></tt>.</p>
</dd></dl>
<dl class="classmethod">
<dt id="pyramid.request.Request.blank">
<em class="property">classmethod </em><tt class="descname">blank</tt><big>(</big><em>path</em>, <em>environ=None</em>, <em>base_url=None</em>, <em>headers=None</em>, <em>POST=None</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.blank" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a blank request environ (and Request wrapper) with the
given path (path should be urlencoded), and any keys from
environ.</p>
<p>The path will become path_info, with any query string split
off and used.</p>
<p>All necessary keys will be added to the environ, but the
values you pass in will take precedence.  If you pass in
base_url then wsgi.url_scheme, HTTP_HOST, and SCRIPT_NAME will
be filled in from that value.</p>
<p>Any extra keyword will be passed to <tt class="docutils literal"><span class="pre">__init__</span></tt>.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.body"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.body"></a>
<tt class="descname">body</tt><a class="headerlink" href="#pyramid.request.Request.body" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the content of the request body.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.body_file"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.body_file"></a>
<tt class="descname">body_file</tt><a class="headerlink" href="#pyramid.request.Request.body_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Input stream of the request (wsgi.input).
Setting this property resets the content_length and seekable flag
(unlike setting req.body_file_raw).</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.body_file_raw"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.body_file_raw"></a>
<tt class="descname">body_file_raw</tt><a class="headerlink" href="#pyramid.request.Request.body_file_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">wsgi.input</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.body_file_seekable"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.body_file_seekable"></a>
<tt class="descname">body_file_seekable</tt><a class="headerlink" href="#pyramid.request.Request.body_file_seekable" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the body of the request (wsgi.input) as a seekable file-like
object. Middleware and routing applications should use this
attribute over .body_file.</p>
<p>If you access this value, CONTENT_LENGTH will also be updated.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.cache_control"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.cache_control"></a>
<tt class="descname">cache_control</tt><a class="headerlink" href="#pyramid.request.Request.cache_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Get/set/modify the Cache-Control header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9">HTTP spec section 14.9</a>)</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.call_application"><a name="//apple_ref/cpp/clm/pyramid.request.Request.call_application"></a>
<tt class="descname">call_application</tt><big>(</big><em>application</em>, <em>catch_exc_info=False</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.call_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the given WSGI application, returning <tt class="docutils literal"><span class="pre">(status_string,</span>
<span class="pre">headerlist,</span> <span class="pre">app_iter)</span></tt></p>
<p>Be sure to call <tt class="docutils literal"><span class="pre">app_iter.close()</span></tt> if it's there.</p>
<p>If catch_exc_info is true, then returns <tt class="docutils literal"><span class="pre">(status_string,</span>
<span class="pre">headerlist,</span> <span class="pre">app_iter,</span> <span class="pre">exc_info)</span></tt>, where the fourth item may
be None, but won't be if there was an exception.  If you don't
do this and there was an exception, the exception will be
raised directly.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.client_addr"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.client_addr"></a>
<tt class="descname">client_addr</tt><a class="headerlink" href="#pyramid.request.Request.client_addr" title="Permalink to this definition">¶</a></dt>
<dd><p>The effective client IP address as a string.  If the
<tt class="docutils literal"><span class="pre">HTTP_X_FORWARDED_FOR</span></tt> header exists in the WSGI environ, this
attribute returns the client IP address present in that header
(e.g. if the header value is <tt class="docutils literal"><span class="pre">192.168.1.1,</span> <span class="pre">192.168.1.2</span></tt>, the value
will be <tt class="docutils literal"><span class="pre">192.168.1.1</span></tt>). If no <tt class="docutils literal"><span class="pre">HTTP_X_FORWARDED_FOR</span></tt> header is
present in the environ at all, this attribute will return the value
of the <tt class="docutils literal"><span class="pre">REMOTE_ADDR</span></tt> header.  If the <tt class="docutils literal"><span class="pre">REMOTE_ADDR</span></tt> header is
unset, this attribute will return the value <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is possible for user agents to put someone else's IP or just
any string in <tt class="docutils literal"><span class="pre">HTTP_X_FORWARDED_FOR</span></tt> as it is a normal HTTP
header. Forward proxies can also provide incorrect values (private
IP addresses etc).  You cannot "blindly" trust the result of this
method to provide you with valid data unless you're certain that
<tt class="docutils literal"><span class="pre">HTTP_X_FORWARDED_FOR</span></tt> has the correct values.  The WSGI server
must be behind a trusted proxy for this to be true.</p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.content_length"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.content_length"></a>
<tt class="descname">content_length</tt><a class="headerlink" href="#pyramid.request.Request.content_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Content-Length</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13">HTTP spec section 14.13</a>).  Converts it using int.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.content_type"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.content_type"></a>
<tt class="descname">content_type</tt><a class="headerlink" href="#pyramid.request.Request.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the content type, but leaving off any parameters (like
charset, but also things like the type in <tt class="docutils literal"><span class="pre">application/atom+xml;</span>
<span class="pre">type=entry</span></tt>)</p>
<p>If you set this property, you can include parameters, or if
you don't include any parameters in the value then existing
parameters will be preserved.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.cookies"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.cookies"></a>
<tt class="descname">cookies</tt><a class="headerlink" href="#pyramid.request.Request.cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of cookies as found in the request.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.copy"><a name="//apple_ref/cpp/clm/pyramid.request.Request.copy"></a>
<tt class="descname">copy</tt><big>(</big><big>)</big><a class="headerlink" href="#pyramid.request.Request.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the request and environment object.</p>
<p>This only does a shallow copy, except of wsgi.input</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.copy_body"><a name="//apple_ref/cpp/clm/pyramid.request.Request.copy_body"></a>
<tt class="descname">copy_body</tt><big>(</big><big>)</big><a class="headerlink" href="#pyramid.request.Request.copy_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the body, in cases where it might be shared with
another request object and that is not desired.</p>
<p>This copies the body in-place, either into a BytesIO object
or a temporary file.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.copy_get"><a name="//apple_ref/cpp/clm/pyramid.request.Request.copy_get"></a>
<tt class="descname">copy_get</tt><big>(</big><big>)</big><a class="headerlink" href="#pyramid.request.Request.copy_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the request and environment object, but turning this request
into a GET along the way.  If this was a POST request (or any other
verb) then it becomes GET, and the request body is thrown away.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.date"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.date"></a>
<tt class="descname">date</tt><a class="headerlink" href="#pyramid.request.Request.date" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Date</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">HTTP spec section 14.8</a>).  Converts it using HTTP date.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.domain"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.domain"></a>
<tt class="descname">domain</tt><a class="headerlink" href="#pyramid.request.Request.domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the domain portion of the host value.  Equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">domain</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host</span>
<span class="k">if</span> <span class="s">':'</span> <span class="ow">in</span> <span class="n">domain</span><span class="p">:</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">':'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>This will be equivalent to the domain portion of the <tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt>
value in the environment if it exists, or the <tt class="docutils literal"><span class="pre">SERVER_NAME</span></tt> value in
the environment if it doesn't.  For example, if the environment
contains an <tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt> value of <tt class="docutils literal"><span class="pre">foo.example.com:8000</span></tt>,
<tt class="docutils literal"><span class="pre">request.domain</span></tt> will return <tt class="docutils literal"><span class="pre">foo.example.com</span></tt>.</p>
<p>Note that this value cannot be <em>set</em> on the request.  To set the host
value use <tt class="xref py py-meth docutils literal"><span class="pre">webob.request.Request.host()</span></tt> instead.</p>
</dd></dl>
<dl class="classmethod">
<dt id="pyramid.request.Request.from_bytes">
<em class="property">classmethod </em><tt class="descname">from_bytes</tt><big>(</big><em>b</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.from_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a request from HTTP bytes data. If the bytes contain
extra data after the request, raise a ValueError.</p>
</dd></dl>
<dl class="classmethod">
<dt id="pyramid.request.Request.from_file">
<em class="property">classmethod </em><tt class="descname">from_file</tt><big>(</big><em>fp</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a request from a file-like object (it must implement
<tt class="docutils literal"><span class="pre">.read(size)</span></tt> and <tt class="docutils literal"><span class="pre">.readline()</span></tt>).</p>
<p>It will read up to the end of the request, not the end of the
file (unless the request is a POST or PUT and has no
Content-Length, in that case, the entire file is read).</p>
<p>This reads the request as represented by <tt class="docutils literal"><span class="pre">str(req)</span></tt>; it may
not read every valid HTTP request properly.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.get_response"><a name="//apple_ref/cpp/clm/pyramid.request.Request.get_response"></a>
<tt class="descname">get_response</tt><big>(</big><em>application=None</em>, <em>catch_exc_info=False</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.get_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <tt class="docutils literal"><span class="pre">.call_application(application)</span></tt>, except returns a
response object with <tt class="docutils literal"><span class="pre">.status</span></tt>, <tt class="docutils literal"><span class="pre">.headers</span></tt>, and <tt class="docutils literal"><span class="pre">.body</span></tt>
attributes.</p>
<p>This will use <tt class="docutils literal"><span class="pre">self.ResponseClass</span></tt> to figure out the class
of the response object to return.</p>
<p>If <tt class="docutils literal"><span class="pre">application</span></tt> is not given, this will send the request to
<tt class="docutils literal"><span class="pre">self.make_default_send_app()</span></tt></p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.headers"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.headers"></a>
<tt class="descname">headers</tt><a class="headerlink" href="#pyramid.request.Request.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>All the request headers as a case-insensitive dictionary-like
object.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.host"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.host"></a>
<tt class="descname">host</tt><a class="headerlink" href="#pyramid.request.Request.host" title="Permalink to this definition">¶</a></dt>
<dd><p>Host name provided in HTTP_HOST, with fall-back to SERVER_NAME</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.host_port"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.host_port"></a>
<tt class="descname">host_port</tt><a class="headerlink" href="#pyramid.request.Request.host_port" title="Permalink to this definition">¶</a></dt>
<dd><p>The effective server port number as a string.  If the <tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt>
header exists in the WSGI environ, this attribute returns the port
number present in that header. If the <tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt> header exists but
contains no explicit port number: if the WSGI url scheme is "https" ,
this attribute returns "443", if the WSGI url scheme is "http", this
attribute returns "80" .  If no <tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt> header is present in
the environ at all, this attribute will return the value of the
<tt class="docutils literal"><span class="pre">SERVER_PORT</span></tt> header (which is guaranteed to be present).</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.host_url"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.host_url"></a>
<tt class="descname">host_url</tt><a class="headerlink" href="#pyramid.request.Request.host_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL through the host (no path)</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.http_version"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.http_version"></a>
<tt class="descname">http_version</tt><a class="headerlink" href="#pyramid.request.Request.http_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">SERVER_PROTOCOL</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.if_match"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.if_match"></a>
<tt class="descname">if_match</tt><a class="headerlink" href="#pyramid.request.Request.if_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">If-Match</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24">HTTP spec section 14.24</a>).  Converts it as a Etag.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.if_modified_since"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.if_modified_since"></a>
<tt class="descname">if_modified_since</tt><a class="headerlink" href="#pyramid.request.Request.if_modified_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">If-Modified-Since</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25">HTTP spec section 14.25</a>).  Converts it using HTTP date.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.if_none_match"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.if_none_match"></a>
<tt class="descname">if_none_match</tt><a class="headerlink" href="#pyramid.request.Request.if_none_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">If-None-Match</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26">HTTP spec section 14.26</a>).  Converts it as a Etag.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.if_range"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.if_range"></a>
<tt class="descname">if_range</tt><a class="headerlink" href="#pyramid.request.Request.if_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">If-Range</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.27">HTTP spec section 14.27</a>).  Converts it using IfRange object.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.if_unmodified_since"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.if_unmodified_since"></a>
<tt class="descname">if_unmodified_since</tt><a class="headerlink" href="#pyramid.request.Request.if_unmodified_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">If-Unmodified-Since</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.28">HTTP spec section 14.28</a>).  Converts it using HTTP date.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.is_body_readable"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.is_body_readable"></a>
<tt class="descname">is_body_readable</tt><a class="headerlink" href="#pyramid.request.Request.is_body_readable" title="Permalink to this definition">¶</a></dt>
<dd><p>webob.is_body_readable is a flag that tells us
that we can read the input stream even though
CONTENT_LENGTH is missing. This allows FakeCGIBody
to work and can be used by servers to support
chunked encoding in requests.
For background see <a class="reference external" href="https://bitbucket.org/ianb/webob/issue/6">https://bitbucket.org/ianb/webob/issue/6</a></p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.is_body_seekable"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.is_body_seekable"></a>
<tt class="descname">is_body_seekable</tt><a class="headerlink" href="#pyramid.request.Request.is_body_seekable" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">webob.is_body_seekable</span></tt> key in the environment.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.is_response"><a name="//apple_ref/cpp/clm/pyramid.request.Request.is_response"></a>
<tt class="descname">is_response</tt><big>(</big><em>ob</em><big>)</big><a class="reference internal" href="../_modules/pyramid/request.html#Request.is_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid.request.Request.is_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if the object passed as <tt class="docutils literal"><span class="pre">ob</span></tt> is a valid
response object, <tt class="docutils literal"><span class="pre">False</span></tt> otherwise.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.is_xhr"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.is_xhr"></a>
<tt class="descname">is_xhr</tt><a class="headerlink" href="#pyramid.request.Request.is_xhr" title="Permalink to this definition">¶</a></dt>
<dd><p>Is X-Requested-With header present and equal to <tt class="docutils literal"><span class="pre">XMLHttpRequest</span></tt>?</p>
<p>Note: this isn't set by every XMLHttpRequest request, it is
only set if you are using a Javascript library that sets it
(or you set the header yourself manually).  Currently
Prototype and jQuery are known to set this header.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.json"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.json"></a>
<tt class="descname">json</tt><a class="headerlink" href="#pyramid.request.Request.json" title="Permalink to this definition">¶</a></dt>
<dd><p>Access the body of the request as JSON</p>
</dd></dl>
<dl class="attribute">
<dt>
<tt class="descname">localizer</tt></dt>
<dd><p>Convenience property to return a localizer</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.make_body_seekable"><a name="//apple_ref/cpp/clm/pyramid.request.Request.make_body_seekable"></a>
<tt class="descname">make_body_seekable</tt><big>(</big><big>)</big><a class="headerlink" href="#pyramid.request.Request.make_body_seekable" title="Permalink to this definition">¶</a></dt>
<dd><p>This forces <tt class="docutils literal"><span class="pre">environ['wsgi.input']</span></tt> to be seekable.
That means that, the content is copied into a BytesIO or temporary
file and flagged as seekable, so that it will not be unnecessarily
copied again.</p>
<p>After calling this method the .body_file is always seeked to the
start of file and .content_length is not None.</p>
<p>The choice to copy to BytesIO is made from
<tt class="docutils literal"><span class="pre">self.request_body_tempfile_limit</span></tt></p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.make_tempfile"><a name="//apple_ref/cpp/clm/pyramid.request.Request.make_tempfile"></a>
<tt class="descname">make_tempfile</tt><big>(</big><big>)</big><a class="headerlink" href="#pyramid.request.Request.make_tempfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a tempfile to store big request body.
This API is not stable yet. A 'size' argument might be added.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.max_forwards"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.max_forwards"></a>
<tt class="descname">max_forwards</tt><a class="headerlink" href="#pyramid.request.Request.max_forwards" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Max-Forwards</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.31">HTTP spec section 14.31</a>).  Converts it using int.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.method"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.method"></a>
<tt class="descname">method</tt><a class="headerlink" href="#pyramid.request.Request.method" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">REQUEST_METHOD</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.params"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.params"></a>
<tt class="descname">params</tt><a class="headerlink" href="#pyramid.request.Request.params" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary-like object containing both the parameters from
the query string and request body.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.path"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.path"></a>
<tt class="descname">path</tt><a class="headerlink" href="#pyramid.request.Request.path" title="Permalink to this definition">¶</a></dt>
<dd><p>The path of the request, without host or query string</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.path_info"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.path_info"></a>
<tt class="descname">path_info</tt><a class="headerlink" href="#pyramid.request.Request.path_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> key in the environment.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.path_info_peek"><a name="//apple_ref/cpp/clm/pyramid.request.Request.path_info_peek"></a>
<tt class="descname">path_info_peek</tt><big>(</big><big>)</big><a class="headerlink" href="#pyramid.request.Request.path_info_peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the next segment on PATH_INFO, or None if there is no
next segment.  Doesn't modify the environment.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.path_info_pop"><a name="//apple_ref/cpp/clm/pyramid.request.Request.path_info_pop"></a>
<tt class="descname">path_info_pop</tt><big>(</big><em>pattern=None</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.path_info_pop" title="Permalink to this definition">¶</a></dt>
<dd><p>'Pops' off the next segment of PATH_INFO, pushing it onto
SCRIPT_NAME, and returning the popped segment.  Returns None if
there is nothing left on PATH_INFO.</p>
<p>Does not return <tt class="docutils literal"><span class="pre">''</span></tt> when there's an empty segment (like
<tt class="docutils literal"><span class="pre">/path//path</span></tt>); these segments are just ignored.</p>
<p>Optional <tt class="docutils literal"><span class="pre">pattern</span></tt> argument is a regexp to match the return value
before returning. If there is no match, no changes are made to the
request and None is returned.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.path_qs"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.path_qs"></a>
<tt class="descname">path_qs</tt><a class="headerlink" href="#pyramid.request.Request.path_qs" title="Permalink to this definition">¶</a></dt>
<dd><p>The path of the request, without host but with query string</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.path_url"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.path_url"></a>
<tt class="descname">path_url</tt><a class="headerlink" href="#pyramid.request.Request.path_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL including SCRIPT_NAME and PATH_INFO, but not QUERY_STRING</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.pragma"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.pragma"></a>
<tt class="descname">pragma</tt><a class="headerlink" href="#pyramid.request.Request.pragma" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Pragma</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.32">HTTP spec section 14.32</a>).</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.query_string"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.query_string"></a>
<tt class="descname">query_string</tt><a class="headerlink" href="#pyramid.request.Request.query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">QUERY_STRING</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.range"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.range"></a>
<tt class="descname">range</tt><a class="headerlink" href="#pyramid.request.Request.range" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Range</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35">HTTP spec section 14.35</a>).  Converts it using Range object.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.referer"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.referer"></a>
<tt class="descname">referer</tt><a class="headerlink" href="#pyramid.request.Request.referer" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Referer</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.36">HTTP spec section 14.36</a>).</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.referrer"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.referrer"></a>
<tt class="descname">referrer</tt><a class="headerlink" href="#pyramid.request.Request.referrer" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">Referer</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.36">HTTP spec section 14.36</a>).</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.relative_url"><a name="//apple_ref/cpp/clm/pyramid.request.Request.relative_url"></a>
<tt class="descname">relative_url</tt><big>(</big><em>other_url</em>, <em>to_application=False</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.relative_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve other_url relative to the request URL.</p>
<p>If <tt class="docutils literal"><span class="pre">to_application</span></tt> is True, then resolve it relative to the
URL with only SCRIPT_NAME</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.remote_addr"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.remote_addr"></a>
<tt class="descname">remote_addr</tt><a class="headerlink" href="#pyramid.request.Request.remote_addr" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">REMOTE_ADDR</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.remote_user"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.remote_user"></a>
<tt class="descname">remote_user</tt><a class="headerlink" href="#pyramid.request.Request.remote_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">REMOTE_USER</span></tt> key in the environment.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.remove_conditional_headers"><a name="//apple_ref/cpp/clm/pyramid.request.Request.remove_conditional_headers"></a>
<tt class="descname">remove_conditional_headers</tt><big>(</big><em>remove_encoding=True</em>, <em>remove_range=True</em>, <em>remove_match=True</em>, <em>remove_modified=True</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.remove_conditional_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove headers that make the request conditional.</p>
<p>These headers can cause the response to be 304 Not Modified,
which in some cases you may not want to be possible.</p>
<p>This does not remove headers like If-Match, which are used for
conflict detection.</p>
</dd></dl>
<dl class="method">
<dt>
<tt class="descname">resource_path</tt><big>(</big><em>resource</em>, <em>*elements</em>, <em>**kw</em><big>)</big></dt>
<dd><p>Generates a path (aka a 'relative URL', a URL minus the host, scheme,
and port) for a <a class="reference internal" href="../glossary.html#term-resource"><em class="xref std std-term">resource</em></a>.</p>
<p>This function accepts the same argument as
<a class="reference internal" href="#pyramid.request.Request.resource_url" title="pyramid.request.Request.resource_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.resource_url()</span></tt></a> and performs the same
duty.  It just omits the host, port, and scheme information in the
return value; only the script_name, path, query parameters, and
anchor data are present in the returned string.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calling <tt class="docutils literal"><span class="pre">request.resource_path(resource)</span></tt> is the same as calling
<tt class="docutils literal"><span class="pre">request.resource_path(resource,</span> <span class="pre">app_url=request.script_name)</span></tt>.
<a class="reference internal" href="#pyramid.request.Request.resource_path" title="pyramid.request.Request.resource_path"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.resource_path()</span></tt></a> is, in fact,
implemented in terms of
<a class="reference internal" href="#pyramid.request.Request.resource_url" title="pyramid.request.Request.resource_url"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.resource_url()</span></tt></a> in just this way. As
a result, any <tt class="docutils literal"><span class="pre">app_url</span></tt> passed within the <tt class="docutils literal"><span class="pre">**kw</span></tt> values to
<tt class="docutils literal"><span class="pre">route_path</span></tt> will be ignored.  <tt class="docutils literal"><span class="pre">scheme</span></tt>, <tt class="docutils literal"><span class="pre">host</span></tt>, and
<tt class="docutils literal"><span class="pre">port</span></tt> are also ignored.</p>
</div>
</dd></dl>
<dl class="attribute">
<dt>
<tt class="descname">response</tt><a class="reference internal" href="../_modules/pyramid/request.html#Request.response"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This attribute is actually a "reified" property which returns an
instance of the <a class="reference internal" href="response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a>. class.  The
response object returned does not exist until this attribute is
accessed.  Subsequent accesses will return the same Response object.</p>
<p>The <tt class="docutils literal"><span class="pre">request.response</span></tt> API is used by renderers.  A render obtains
the response object it will return from a view that uses that renderer
by accessing <tt class="docutils literal"><span class="pre">request.response</span></tt>.  Therefore, it's possible to use the
<tt class="docutils literal"><span class="pre">request.response</span></tt> API to set up a response object with "the
right" attributes (e.g. by calling <tt class="docutils literal"><span class="pre">request.response.set_cookie()</span></tt>)
within a view that uses a renderer.  Mutations to this response object
will be preserved in the response sent to the client.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.scheme"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.scheme"></a>
<tt class="descname">scheme</tt><a class="headerlink" href="#pyramid.request.Request.scheme" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">wsgi.url_scheme</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.script_name"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.script_name"></a>
<tt class="descname">script_name</tt><a class="headerlink" href="#pyramid.request.Request.script_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt> key in the environment.</p>
</dd></dl>
<dl class="method">
<dt id="pyramid.request.Request.send"><a name="//apple_ref/cpp/clm/pyramid.request.Request.send"></a>
<tt class="descname">send</tt><big>(</big><em>application=None</em>, <em>catch_exc_info=False</em><big>)</big><a class="headerlink" href="#pyramid.request.Request.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <tt class="docutils literal"><span class="pre">.call_application(application)</span></tt>, except returns a
response object with <tt class="docutils literal"><span class="pre">.status</span></tt>, <tt class="docutils literal"><span class="pre">.headers</span></tt>, and <tt class="docutils literal"><span class="pre">.body</span></tt>
attributes.</p>
<p>This will use <tt class="docutils literal"><span class="pre">self.ResponseClass</span></tt> to figure out the class
of the response object to return.</p>
<p>If <tt class="docutils literal"><span class="pre">application</span></tt> is not given, this will send the request to
<tt class="docutils literal"><span class="pre">self.make_default_send_app()</span></tt></p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.server_name"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.server_name"></a>
<tt class="descname">server_name</tt><a class="headerlink" href="#pyramid.request.Request.server_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">SERVER_NAME</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.server_port"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.server_port"></a>
<tt class="descname">server_port</tt><a class="headerlink" href="#pyramid.request.Request.server_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">SERVER_PORT</span></tt> key in the environment.  Converts it using int.</p>
</dd></dl>
<dl class="attribute">
<dt>
<tt class="descname">session</tt><a class="reference internal" href="../_modules/pyramid/request.html#Request.session"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Obtain the <a class="reference internal" href="../glossary.html#term-session"><em class="xref std std-term">session</em></a> object associated with this
request.  If a <a class="reference internal" href="../glossary.html#term-session-factory"><em class="xref std std-term">session factory</em></a> has not been registered
during application configuration, a
<a class="reference internal" href="exceptions.html#pyramid.exceptions.ConfigurationError" title="pyramid.exceptions.ConfigurationError"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.exceptions.ConfigurationError</span></tt></a> will be raised</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.str_GET"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.str_GET"></a>
<tt class="descname">str_GET</tt><a class="headerlink" href="#pyramid.request.Request.str_GET" title="Permalink to this definition">¶</a></dt>
<dd><p>&lt;Deprecated attribute None&gt;</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.str_POST"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.str_POST"></a>
<tt class="descname">str_POST</tt><a class="headerlink" href="#pyramid.request.Request.str_POST" title="Permalink to this definition">¶</a></dt>
<dd><p>&lt;Deprecated attribute None&gt;</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.str_cookies"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.str_cookies"></a>
<tt class="descname">str_cookies</tt><a class="headerlink" href="#pyramid.request.Request.str_cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>&lt;Deprecated attribute None&gt;</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.str_params"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.str_params"></a>
<tt class="descname">str_params</tt><a class="headerlink" href="#pyramid.request.Request.str_params" title="Permalink to this definition">¶</a></dt>
<dd><p>&lt;Deprecated attribute None&gt;</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.text"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.text"></a>
<tt class="descname">text</tt><a class="headerlink" href="#pyramid.request.Request.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Get/set the text value of the body</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.upath_info"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.upath_info"></a>
<tt class="descname">upath_info</tt><a class="headerlink" href="#pyramid.request.Request.upath_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.url"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.url"></a>
<tt class="descname">url</tt><a class="headerlink" href="#pyramid.request.Request.url" title="Permalink to this definition">¶</a></dt>
<dd><p>The full request URL, including QUERY_STRING</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.url_encoding"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.url_encoding"></a>
<tt class="descname">url_encoding</tt><a class="headerlink" href="#pyramid.request.Request.url_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">webob.url_encoding</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.urlargs"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.urlargs"></a>
<tt class="descname">urlargs</tt><a class="headerlink" href="#pyramid.request.Request.urlargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return any <em>positional</em> variables matched in the URL.</p>
<p>Takes values from <tt class="docutils literal"><span class="pre">environ['wsgiorg.routing_args']</span></tt>.
Systems like <tt class="docutils literal"><span class="pre">routes</span></tt> set this value.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.urlvars"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.urlvars"></a>
<tt class="descname">urlvars</tt><a class="headerlink" href="#pyramid.request.Request.urlvars" title="Permalink to this definition">¶</a></dt>
<dd><p>Return any <em>named</em> variables matched in the URL.</p>
<p>Takes values from <tt class="docutils literal"><span class="pre">environ['wsgiorg.routing_args']</span></tt>.
Systems like <tt class="docutils literal"><span class="pre">routes</span></tt> set this value.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.uscript_name"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.uscript_name"></a>
<tt class="descname">uscript_name</tt><a class="headerlink" href="#pyramid.request.Request.uscript_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt> key in the environment.</p>
</dd></dl>
<dl class="attribute">
<dt id="pyramid.request.Request.user_agent"><a name="//apple_ref/cpp/Attribute/pyramid.request.Request.user_agent"></a>
<tt class="descname">user_agent</tt><a class="headerlink" href="#pyramid.request.Request.user_agent" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and sets the <tt class="docutils literal"><span class="pre">User-Agent</span></tt> header (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43">HTTP spec section 14.43</a>).</p>
</dd></dl>
</dd></dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For information about the API of a <a class="reference internal" href="../glossary.html#term-multidict"><em class="xref std std-term">multidict</em></a> structure (such as
that used as <tt class="docutils literal"><span class="pre">request.GET</span></tt>, <tt class="docutils literal"><span class="pre">request.POST</span></tt>, and <tt class="docutils literal"><span class="pre">request.params</span></tt>),
see <a class="reference internal" href="interfaces.html#pyramid.interfaces.IMultiDict" title="pyramid.interfaces.IMultiDict"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IMultiDict</span></tt></a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<h4>Previous topic</h4>
<p class="topless"><a href="renderers.html" title="previous chapter"><tt class="docutils literal"><span class="pre">pyramid.renderers</span></tt></a></p>
<h4>Next topic</h4>
<p class="topless"><a href="response.html" title="next chapter"><tt class="docutils literal"><span class="pre">pyramid.response</span></tt></a></p>
<div id="searchbox" style="display: none">
<h3>Quick search</h3>
<form action="../search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
<p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<div class="clearer"></div>
</div>
<div class="related">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a href="../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a href="response.html" title="pyramid.response">next</a> |</li>
<li class="right">
<a href="renderers.html" title="pyramid.renderers">previous</a> |</li>
<li><a href="../index.html">The Pyramid Web Framework v1.5</a> »</li>
</ul>
</div>
<div class="footer">
        © <a href="../copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
</body></html>