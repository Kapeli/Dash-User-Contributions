<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating Pyramid Scaffolds &mdash; The Pyramid Web Framework v1.5</title>
    
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="The Pyramid Web Framework v1.5" href="../index.html" />
    <link rel="next" title="Upgrading Pyramid" href="upgrading.html" />
    <link rel="prev" title="Extending Pyramid Configuration" href="extconfig.html" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head>
  <body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="upgrading.html" title="Upgrading Pyramid"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="extconfig.html" title="Extending Pyramid Configuration"
             accesskey="P">previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-pyramid-scaffolds">
<span id="scaffolding-chapter"></span><h1>Creating Pyramid Scaffolds<a class="headerlink" href="#creating-pyramid-scaffolds" title="Permalink to this headline">¶</a></h1>
<p>You can extend Pyramid by creating a <a class="reference internal" href="../glossary.html#term-scaffold"><em class="xref std std-term">scaffold</em></a> template.  A scaffold
template is useful if you'd like to distribute a customizable configuration
of Pyramid to other users.  Once you've created a scaffold, and someone has
installed the distribution that houses the scaffold, they can use the
<tt class="docutils literal"><span class="pre">pcreate</span></tt> script to create a custom version of your scaffold's template.
Pyramid itself uses scaffolds to allow people to bootstrap new projects.  For
example, <tt class="docutils literal"><span class="pre">pcreate</span> <span class="pre">-s</span> <span class="pre">alchemy</span> <span class="pre">MyStuff</span></tt> causes Pyramid to render the
<tt class="docutils literal"><span class="pre">alchemy</span></tt> scaffold template to the <tt class="docutils literal"><span class="pre">MyStuff</span></tt> directory.</p>
<div class="section" id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>A scaffold template is just a bunch of source files and directories on disk.
A small definition class points at this directory; it is in turn pointed at
by a <a class="reference internal" href="../glossary.html#term-setuptools"><em class="xref std std-term">setuptools</em></a> &quot;entry point&quot; which registers the scaffold so it can
be found by the <tt class="docutils literal"><span class="pre">pcreate</span></tt> command.</p>
<p>To create a scaffold template, create a Python <a class="reference internal" href="../glossary.html#term-distribution"><em class="xref std std-term">distribution</em></a> to house
the scaffold which includes a <tt class="docutils literal"><span class="pre">setup.py</span></tt> that relies on the <tt class="docutils literal"><span class="pre">setuptools</span></tt>
package.  See <a class="reference external" href="http://guide.python-distribute.org/creation.html">Creating a Package</a> for more information
about how to do this.  For the sake of example, we'll pretend the
distribution you create is named <tt class="docutils literal"><span class="pre">CoolExtension</span></tt>, and it has a package
directory within it named <tt class="docutils literal"><span class="pre">coolextension</span></tt></p>
<p>Once you've created the distribution put a &quot;scaffolds&quot; directory within your
distribution's package directory, and create a file within that directory
named <tt class="docutils literal"><span class="pre">__init__.py</span></tt> with something like the following:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># CoolExtension/coolextension/scaffolds/__init__.py</span>

<span class="kn">from</span> <span class="nn">pyramid.scaffolds</span> <span class="kn">import</span> <span class="n">PyramidTemplate</span>

<span class="k">class</span> <span class="nc">CoolExtensionTemplate</span><span class="p">(</span><span class="n">PyramidTemplate</span><span class="p">):</span>
    <span class="n">_template_dir</span> <span class="o">=</span> <span class="s">&#39;coolextension_scaffold&#39;</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="s">&#39;My cool extension&#39;</span>
</pre></div>
</td></tr></table></div>
<p>Once this is done, within the <tt class="docutils literal"><span class="pre">scaffolds</span></tt> directory, create a template
directory.  Our example used a template directory named
<tt class="docutils literal"><span class="pre">coolextension_scaffold</span></tt>.</p>
<p>As you create files and directories within the template directory, note that:</p>
<ul class="simple">
<li>Files which have a name which are suffixed with the value <tt class="docutils literal"><span class="pre">_tmpl</span></tt> will be
rendered, and replacing any instance of the literal string <tt class="docutils literal"><span class="pre">{{var}}</span></tt> with
the string value of the variable named <tt class="docutils literal"><span class="pre">var</span></tt> provided to the scaffold.</li>
<li>Files and directories with filenames that contain the string <tt class="docutils literal"><span class="pre">+var+</span></tt> will
have that string replaced with the value of the <tt class="docutils literal"><span class="pre">var</span></tt> variable provided
to the scaffold.</li>
</ul>
<p>Otherwise, files and directories which live in the template directory will be
copied directly without modification to the <tt class="docutils literal"><span class="pre">pcreate</span></tt> output location.</p>
<p>The variables provided by the default <tt class="docutils literal"><span class="pre">PyramidTemplate</span></tt> include <tt class="docutils literal"><span class="pre">project</span></tt>
(the project name provided by the user as an argument to <tt class="docutils literal"><span class="pre">pcreate</span></tt>),
<tt class="docutils literal"><span class="pre">package</span></tt> (a lowercasing and normalizing of the project name provided by
the user), <tt class="docutils literal"><span class="pre">random_string</span></tt> (a long random string), and <tt class="docutils literal"><span class="pre">package_logger</span></tt>
(the name of the package's logger).</p>
<p>See Pyramid's &quot;scaffolds&quot; package
(<a class="reference external" href="https://github.com/Pylons/pyramid/tree/master/pyramid/scaffolds">https://github.com/Pylons/pyramid/tree/master/pyramid/scaffolds</a>) for
concrete examples of scaffold directories (<tt class="docutils literal"><span class="pre">zodb</span></tt>, <tt class="docutils literal"><span class="pre">alchemy</span></tt>, and
<tt class="docutils literal"><span class="pre">starter</span></tt>, for example).</p>
<p>After you've created the template directory, add the following to the
<tt class="docutils literal"><span class="pre">entry_points</span></tt> value of your distribution's <tt class="docutils literal"><span class="pre">setup.py</span></tt>:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[pyramid.scaffold]</span>
<span class="na">coolextension</span><span class="o">=</span><span class="s">coolextension.scaffolds:CoolExtensionTemplate</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">setup</span><span class="p">(</span>
      <span class="o">...</span><span class="p">,</span>
      <span class="n">entry_points</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s">        [pyramid.scaffold]</span>
<span class="s">        coolextension=coolextension.scaffolds:CoolExtensionTemplate</span>
<span class="s">      &quot;&quot;&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Run your distribution's <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span></tt> or <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">install</span></tt>
command. After that, you should be able to see your scaffolding template
listed when you run <tt class="docutils literal"><span class="pre">pcreate</span> <span class="pre">-l</span></tt>.  It will be named <tt class="docutils literal"><span class="pre">coolextension</span></tt>
because that's the name we gave it in the entry point setup.  Running
<tt class="docutils literal"><span class="pre">pcreate</span> <span class="pre">-s</span> <span class="pre">coolextension</span> <span class="pre">MyStuff</span></tt> will then render your scaffold to an
output directory named <tt class="docutils literal"><span class="pre">MyStuff</span></tt>.</p>
<p>See the module documentation for <a class="reference internal" href="../api/scaffolds.html#module-pyramid.scaffolds" title="pyramid.scaffolds"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.scaffolds</span></tt></a> for information
about the API of the <a class="reference internal" href="../api/scaffolds.html#pyramid.scaffolds.Template" title="pyramid.scaffolds.Template"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.scaffolds.Template</span></tt></a> class and
related classes.  You can override methods of this class to get special
behavior.</p>
</div>
<div class="section" id="supporting-older-pyramid-versions">
<h2>Supporting Older Pyramid Versions<a class="headerlink" href="#supporting-older-pyramid-versions" title="Permalink to this headline">¶</a></h2>
<p>Because different versions of Pyramid handled scaffolding differently, if you
want to have extension scaffolds that can work across Pyramid 1.0.X, 1.1.X,
1.2.X and 1.3.X, you'll need to use something like this bit of horror while
defining your scaffold template:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span> <span class="c"># pyramid 1.0.X</span>
    <span class="c"># &quot;pyramid.paster.paste_script...&quot; doesn&#39;t exist past 1.0.X</span>
    <span class="kn">from</span> <span class="nn">pyramid.paster</span> <span class="kn">import</span> <span class="n">paste_script_template_renderer</span>
    <span class="kn">from</span> <span class="nn">pyramid.paster</span> <span class="kn">import</span> <span class="n">PyramidTemplate</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span> <span class="c"># pyramid 1.1.X, 1.2.X</span>
        <span class="c"># trying to import &quot;paste_script_template_renderer&quot; fails on 1.3.X</span>
        <span class="kn">from</span> <span class="nn">pyramid.scaffolds</span> <span class="kn">import</span> <span class="n">paste_script_template_renderer</span>
        <span class="kn">from</span> <span class="nn">pyramid.scaffolds</span> <span class="kn">import</span> <span class="n">PyramidTemplate</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span> <span class="c"># pyramid &gt;=1.3a2</span>
        <span class="n">paste_script_template_renderer</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="kn">from</span> <span class="nn">pyramid.scaffolds</span> <span class="kn">import</span> <span class="n">PyramidTemplate</span>

<span class="k">class</span> <span class="nc">CoolExtensionTemplate</span><span class="p">(</span><span class="n">PyramidTemplate</span><span class="p">):</span>
    <span class="n">_template_dir</span> <span class="o">=</span> <span class="s">&#39;coolextension_scaffold&#39;</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="s">&#39;My cool extension&#39;</span>
    <span class="n">template_renderer</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="n">paste_script_template_renderer</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>And then in the setup.py of the package that contains your scaffold, define
the template as a target of both <tt class="docutils literal"><span class="pre">paste.paster_create_template</span></tt> (for
<tt class="docutils literal"><span class="pre">paster</span> <span class="pre">create</span></tt>) and <tt class="docutils literal"><span class="pre">pyramid.scaffold</span></tt> (for <tt class="docutils literal"><span class="pre">pcreate</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre>[paste.paster_create_template]
coolextension=coolextension.scaffolds:CoolExtensionTemplate
[pyramid.scaffold]
coolextension=coolextension.scaffolds:CoolExtensionTemplate
</pre></div>
</div>
<p>Doing this hideousness will allow your scaffold to work as a <tt class="docutils literal"><span class="pre">paster</span>
<span class="pre">create</span></tt> target (under 1.0, 1.1, or 1.2) or as a <tt class="docutils literal"><span class="pre">pcreate</span></tt> target (under
1.3).  If an invoker tries to run <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">create</span></tt> against a scaffold
defined this way under 1.3, an error is raised instructing them to use
<tt class="docutils literal"><span class="pre">pcreate</span></tt> instead.</p>
<p>If you want only to support Pyramid 1.3 only, it's much cleaner, and the API
is stable:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.scaffolds</span> <span class="kn">import</span> <span class="n">PyramidTemplate</span>

<span class="k">class</span> <span class="nc">CoolExtensionTemplate</span><span class="p">(</span><span class="n">PyramidTemplate</span><span class="p">):</span>
    <span class="n">_template_dir</span> <span class="o">=</span> <span class="s">&#39;coolextension_scaffold&#39;</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="s">&#39;My cool_extension&#39;</span>
</pre></div>
</td></tr></table></div>
<p>You only need to specify a <tt class="docutils literal"><span class="pre">paste.paster_create_template</span></tt> entry point
target in your <tt class="docutils literal"><span class="pre">setup.py</span></tt> if you want your scaffold to be consumable by
users of Pyramid 1.0, 1.1, or 1.2.  To support only 1.3, specifying only the
<tt class="docutils literal"><span class="pre">pyramid.scaffold</span></tt> entry point is good enough.  If you want to support both
<tt class="docutils literal"><span class="pre">paster</span> <span class="pre">create</span></tt> and <tt class="docutils literal"><span class="pre">pcreate</span></tt> (meaning you want to support Pyramid 1.2
and some older version), you'll need to define both.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Existing third-party distributions which house scaffolding are available via
<a class="reference internal" href="../glossary.html#term-pypi"><em class="xref std std-term">PyPI</em></a>.  The <tt class="docutils literal"><span class="pre">pyramid_jqm</span></tt>, <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt> and <tt class="docutils literal"><span class="pre">pyramid_jinja2</span></tt>
packages house scaffolds.  You can install and examine these packages to see
how they work in the quest to develop your own scaffolding.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Creating Pyramid Scaffolds</a><ul>
<li><a class="reference internal" href="#basics">Basics</a></li>
<li><a class="reference internal" href="#supporting-older-pyramid-versions">Supporting Older Pyramid Versions</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="extconfig.html"
                        title="previous chapter">Extending Pyramid Configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="upgrading.html"
                        title="next chapter">Upgrading Pyramid</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="upgrading.html" title="Upgrading Pyramid"
             >next</a> |</li>
        <li class="right" >
          <a href="extconfig.html" title="Extending Pyramid Configuration"
             >previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>