<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Templates &mdash; The Pyramid Web Framework v1.5</title>
    
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="The Pyramid Web Framework v1.5" href="../index.html" />
    <link rel="next" title="View Configuration" href="viewconfig.html" />
    <link rel="prev" title="Renderers" href="renderers.html" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head>
  <body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="viewconfig.html" title="View Configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="renderers.html" title="Renderers"
             accesskey="P">previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="templates">
<span id="templates-chapter"></span><h1>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h1>
<p>A <a class="reference internal" href="../glossary.html#term-template"><em class="xref std std-term">template</em></a> is a file on disk which can be used to render
dynamic data provided by a <a class="reference internal" href="../glossary.html#term-view"><em class="xref std std-term">view</em></a>.  <span>Pyramid</span> offers a
number of ways to perform templating tasks out of the box, and
provides add-on templating support through a set of bindings packages.</p>
<p>Before discussing how built-in templates are used in
detail, we'll discuss two ways to render templates within
<span>Pyramid</span> in general: directly, and via renderer
configuration.</p>
<div class="section" id="using-templates-directly">
<span id="templates-used-directly"></span><span id="index-0"></span><h2>Using Templates Directly<a class="headerlink" href="#using-templates-directly" title="Permalink to this headline">¶</a></h2>
<p>The most straightforward way to use a template within
<span>Pyramid</span> is to cause it to be rendered directly within a
<a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a>.  You may use whatever API is supplied by a
given templating engine to do so.</p>
<p><span>Pyramid</span> provides various APIs that allow you to render templates
directly from within a view callable.  For example, if there is a
<a class="reference internal" href="../glossary.html#term-chameleon"><em class="xref std std-term">Chameleon</em></a> ZPT template named <tt class="docutils literal"><span class="pre">foo.pt</span></tt> in a directory named
<tt class="docutils literal"><span class="pre">templates</span></tt> in your application, you can render the template from
within the body of a view callable like so:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.renderers</span> <span class="kn">import</span> <span class="n">render_to_response</span>

<span class="k">def</span> <span class="nf">sample_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;templates/foo.pt&#39;</span><span class="p">,</span>
                              <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span>
                              <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The <tt class="docutils literal"><span class="pre">sample_view</span></tt> <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a> function above returns a
<a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a> object which contains the body of the
<tt class="docutils literal"><span class="pre">templates/foo.pt</span></tt> template.  In this case, the <tt class="docutils literal"><span class="pre">templates</span></tt>
directory should live in the same directory as the module containing
the <tt class="docutils literal"><span class="pre">sample_view</span></tt> function.  The template author will have the names
<tt class="docutils literal"><span class="pre">foo</span></tt> and <tt class="docutils literal"><span class="pre">bar</span></tt> available as top-level names for replacement or
comparison purposes.</p>
<p>In the example above, the path <tt class="docutils literal"><span class="pre">templates/foo.pt</span></tt> is relative to the
directory containing the file which defines the view configuration.
In this case, this is the directory containing the file that
defines the <tt class="docutils literal"><span class="pre">sample_view</span></tt> function.  Although a renderer path is
usually just a simple relative pathname, a path named as a renderer
can be absolute, starting with a slash on UNIX or a drive letter
prefix on Windows. The path can alternately be an
<a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset specification</em></a> in the form
<tt class="docutils literal"><span class="pre">some.dotted.package_name:relative/path</span></tt>. This makes it possible to
address template assets which live in another package.  For example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.renderers</span> <span class="kn">import</span> <span class="n">render_to_response</span>

<span class="k">def</span> <span class="nf">sample_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;mypackage:templates/foo.pt&#39;</span><span class="p">,</span>
                              <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span>
                              <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>An asset specification points at a file within a Python <em>package</em>.
In this case, it points at a file named <tt class="docutils literal"><span class="pre">foo.pt</span></tt> within the
<tt class="docutils literal"><span class="pre">templates</span></tt> directory of the <tt class="docutils literal"><span class="pre">mypackage</span></tt> package.  Using an
asset specification instead of a relative template name is usually
a good idea, because calls to <a class="reference internal" href="../api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></tt></a>
using asset specifications will continue to work properly if you move the
code containing them to another location.</p>
<p>In the examples above we pass in a keyword argument named <tt class="docutils literal"><span class="pre">request</span></tt>
representing the current <span>Pyramid</span> request. Passing a request
keyword argument will cause the <tt class="docutils literal"><span class="pre">render_to_response</span></tt> function to
supply the renderer with more correct system values (see
<a class="reference internal" href="#renderer-system-values"><em>System Values Used During Rendering</em></a>), because most of the information required
to compose proper system values is present in the request.  If your
template relies on the name <tt class="docutils literal"><span class="pre">request</span></tt> or <tt class="docutils literal"><span class="pre">context</span></tt>, or if you've
configured special <a class="reference internal" href="../glossary.html#term-renderer-globals"><em class="xref std std-term">renderer globals</em></a>, make sure to pass
<tt class="docutils literal"><span class="pre">request</span></tt> as a keyword argument in every call to a
<tt class="docutils literal"><span class="pre">pyramid.renderers.render_*</span></tt> function.</p>
<p>Every view must return a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a> object, except for views
which use a <a class="reference internal" href="../glossary.html#term-renderer"><em class="xref std std-term">renderer</em></a> named via view configuration (which we'll
see shortly).  The <a class="reference internal" href="../api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.renderers.render_to_response()</span></tt></a>
function is a shortcut function that actually returns a response
object. This allows the example view above to simply return the result
of its call to <tt class="docutils literal"><span class="pre">render_to_response()</span></tt> directly.</p>
<p>Obviously not all APIs you might call to get response data will return a
response object. For example, you might render one or more templates to
a string that you want to use as response data.  The
<a class="reference internal" href="../api/renderers.html#pyramid.renderers.render" title="pyramid.renderers.render"><tt class="xref py py-func docutils literal"><span class="pre">pyramid.renderers.render()</span></tt></a> API renders a template to a string. We
can manufacture a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a> object directly, and use that string
as the body of the response:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.renderers</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">def</span> <span class="nf">sample_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="s">&#39;mypackage:templates/foo.pt&#39;</span><span class="p">,</span>
                    <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</td></tr></table></div>
<p>Because <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a> functions are typically the only code in
<span>Pyramid</span> that need to know anything about templates, and because view
functions are very simple Python, you can use whatever templating system you're
most comfortable with within <span>Pyramid</span>.  Install the templating system,
import its API functions into your views module, use those APIs to generate a
string, then return that string as the body of a <span>Pyramid</span>
<a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">Response</em></a> object.</p>
<p>For example, here's an example of using &quot;raw&quot; <a class="reference external" href="http://www.makotemplates.org/">Mako</a> from within a
<span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-view"><em class="xref std std-term">view</em></a>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mako.template</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">def</span> <span class="nf">make_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&#39;/templates/template.mak&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">])</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</td></tr></table></div>
<p>You probably wouldn't use this particular snippet in a project, because it's
easier to use the supported
<a class="reference internal" href="#available-template-system-bindings"><em>Mako bindings</em></a>. But if your
favorite templating system is not supported as a renderer extension for
<span>Pyramid</span>, you can create your own simple combination as shown above.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you use third-party templating languages without cooperating
<span>Pyramid</span> bindings directly within view callables, the
auto-template-reload strategy explained in
<a class="reference internal" href="#reload-templates-section"><em>Automatically Reloading Templates</em></a> will not be available, nor will the
template asset overriding capability explained in
<a class="reference internal" href="assets.html#overriding-assets-section"><em>Overriding Assets</em></a> be available, nor will it be
possible to use any template using that language as a
<a class="reference internal" href="../glossary.html#term-renderer"><em class="xref std std-term">renderer</em></a>.  However, it's reasonably easy to write custom
templating system binding packages for use under <span>Pyramid</span> so
that templates written in the language can be used as renderers.
See <a class="reference internal" href="renderers.html#adding-and-overriding-renderers"><em>Adding and Changing Renderers</em></a> for instructions on how
to create your own template renderer and
<a class="reference internal" href="#available-template-system-bindings"><em>Available Add-On Template System Bindings</em></a> for example packages.</p>
</div>
<p>If you need more control over the status code and content-type, or
other response attributes from views that use direct templating, you
may set attributes on the response that influence these values.</p>
<p>Here's an example of changing the content-type and status of the
response object returned by
<a class="reference internal" href="../api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></tt></a>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.renderers</span> <span class="kn">import</span> <span class="n">render_to_response</span>

<span class="k">def</span> <span class="nf">sample_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;templates/foo.pt&#39;</span><span class="p">,</span>
                                  <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span>
                                  <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">=</span> <span class="s">&#39;text/plain&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">status_int</span> <span class="o">=</span> <span class="mi">204</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</td></tr></table></div>
<p>Here's an example of manufacturing a response object using the result
of <a class="reference internal" href="../api/renderers.html#pyramid.renderers.render" title="pyramid.renderers.render"><tt class="xref py py-func docutils literal"><span class="pre">render()</span></tt></a> (a string):</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.renderers</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">def</span> <span class="nf">sample_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="s">&#39;mypackage:templates/foo.pt&#39;</span><span class="p">,</span>
                    <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">=</span> <span class="s">&#39;text/plain&#39;</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</td></tr></table></div>
<span class="target" id="index-1"></span></div>
<div class="section" id="system-values-used-during-rendering">
<span id="renderer-system-values"></span><span id="index-2"></span><h2>System Values Used During Rendering<a class="headerlink" href="#system-values-used-during-rendering" title="Permalink to this headline">¶</a></h2>
<p>When a template is rendered using
<a class="reference internal" href="../api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></tt></a> or
<a class="reference internal" href="../api/renderers.html#pyramid.renderers.render" title="pyramid.renderers.render"><tt class="xref py py-func docutils literal"><span class="pre">render()</span></tt></a>, or a <tt class="docutils literal"><span class="pre">renderer=</span></tt> argument to view
configuration (see <a class="reference internal" href="#templates-used-as-renderers"><em>Templates Used as Renderers via Configuration</em></a>), the renderer
representing the template will be provided with a number of <em>system</em> values.
These values are provided to the template:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">request</span></tt></dt>
<dd>The value provided as the <tt class="docutils literal"><span class="pre">request</span></tt> keyword argument to
<tt class="docutils literal"><span class="pre">render_to_response</span></tt> or <tt class="docutils literal"><span class="pre">render</span></tt> <em>or</em> the request object passed to the
view when the <tt class="docutils literal"><span class="pre">renderer=</span></tt> argument to view configuration is being used to
render the template.</dd>
<dt><tt class="docutils literal"><span class="pre">req</span></tt></dt>
<dd>An alias for <tt class="docutils literal"><span class="pre">request</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">context</span></tt></dt>
<dd>The current <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a> if <tt class="docutils literal"><span class="pre">request</span></tt> was provided as a
keyword argument to <tt class="docutils literal"><span class="pre">render_to_response</span></tt> or <tt class="docutils literal"><span class="pre">render</span></tt>, or <tt class="docutils literal"><span class="pre">None</span></tt> if
the <tt class="docutils literal"><span class="pre">request</span></tt> keyword argument was not provided.  This value will always
be provided if the template is rendered as the result of a <tt class="docutils literal"><span class="pre">renderer=</span></tt>
argument to view configuration being used.</dd>
<dt><tt class="docutils literal"><span class="pre">renderer_name</span></tt></dt>
<dd>The renderer name used to perform the rendering,
e.g. <tt class="docutils literal"><span class="pre">mypackage:templates/foo.pt</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">renderer_info</span></tt></dt>
<dd>An object implementing the <a class="reference internal" href="../api/interfaces.html#pyramid.interfaces.IRendererInfo" title="pyramid.interfaces.IRendererInfo"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.interfaces.IRendererInfo</span></tt></a>
interface.  Basically, an object with the following attributes: <tt class="docutils literal"><span class="pre">name</span></tt>,
<tt class="docutils literal"><span class="pre">package</span></tt> and <tt class="docutils literal"><span class="pre">type</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">view</span></tt></dt>
<dd>The view callable object that was used to render this template.  If the
view callable is a method of a class-based view, this will be an instance
of the class that the method was defined on.  If the view callable is a
function or instance, it will be that function or instance.  Note that this
value will only be automatically present when a template is rendered as a
result of a <tt class="docutils literal"><span class="pre">renderer=</span></tt> argument; it will be <tt class="docutils literal"><span class="pre">None</span></tt> when the
<tt class="docutils literal"><span class="pre">render_to_response</span></tt> or <tt class="docutils literal"><span class="pre">render</span></tt> APIs are used.</dd>
</dl>
<p>You can define more values which will be passed to every template executed as
a result of rendering by defining <a class="reference internal" href="../glossary.html#term-renderer-globals"><em class="xref std std-term">renderer globals</em></a>.</p>
<p>What any particular renderer does with these system values is up to the
renderer itself, but most template renderers make these names available as
top-level template variables.</p>
</div>
<div class="section" id="templates-used-as-renderers-via-configuration">
<span id="templates-used-as-renderers"></span><span id="index-3"></span><h2>Templates Used as Renderers via Configuration<a class="headerlink" href="#templates-used-as-renderers-via-configuration" title="Permalink to this headline">¶</a></h2>
<p>An alternative to using <a class="reference internal" href="../api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></tt></a>
to render templates manually in your view callable code, is
to specify the template as a <a class="reference internal" href="../glossary.html#term-renderer"><em class="xref std std-term">renderer</em></a> in your
<em>view configuration</em>. This can be done with any of the
templating languages supported by <span>Pyramid</span>.</p>
<p>To use a renderer via view configuration, specify a template
<a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset specification</em></a> as the <tt class="docutils literal"><span class="pre">renderer</span></tt> argument, or
attribute to the <a class="reference internal" href="../glossary.html#term-view-configuration"><em class="xref std std-term">view configuration</em></a> of a <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view
callable</em></a>.  Then return a <em>dictionary</em> from that view callable.  The
dictionary items returned by the view callable will be made available
to the renderer template as top-level names.</p>
<p>The association of a template as a renderer for a <a class="reference internal" href="../glossary.html#term-view-configuration"><em class="xref std std-term">view
configuration</em></a> makes it possible to replace code within a <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view
callable</em></a> that handles the rendering of a template.</p>
<p>Here's an example of using a <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a>
decorator to specify a <a class="reference internal" href="../glossary.html#term-view-configuration"><em class="xref std std-term">view configuration</em></a> that names a
template renderer:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="s">&#39;templates/foo.pt&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You do not need to supply the <tt class="docutils literal"><span class="pre">request</span></tt> value as a key
in the dictionary result returned from a renderer-configured view
callable. <span>Pyramid</span> automatically supplies this value for
you so that the &quot;most correct&quot; system values are provided to
the renderer.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">renderer</span></tt> argument to the <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> configuration decorator
shown above is the template <em>path</em>.  In the example above, the path
<tt class="docutils literal"><span class="pre">templates/foo.pt</span></tt> is <em>relative</em>.  Relative to what, you ask?  Because
we're using a Chameleon renderer, it means &quot;relative to the directory in
which the file which defines the view configuration lives&quot;.  In this case,
this is the directory containing the file that defines the <tt class="docutils literal"><span class="pre">my_view</span></tt>
function.  View-configuration-relative asset specifications work only
in Chameleon, not in Mako templates.</p>
</div>
<p>Similar renderer configuration can be done imperatively.  See
<a class="reference internal" href="renderers.html#views-which-use-a-renderer"><em>Writing View Callables Which Use a Renderer</em></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference internal" href="renderers.html#built-in-renderers"><em>Built-In Renderers</em></a>.</p>
</div>
<p>Although a renderer path is usually just a simple relative pathname, a path
named as a renderer can be absolute, starting with a slash on UNIX or a drive
letter prefix on Windows.  The path can alternately be an <a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset
specification</em></a> in the form <tt class="docutils literal"><span class="pre">some.dotted.package_name:relative/path</span></tt>, making
it possible to address template assets which live in another package.</p>
<p>Not just any template from any arbitrary templating system may be used as a
renderer.  Bindings must exist specifically for <span>Pyramid</span> to use a
templating language template as a renderer.</p>
<div class="sidebar">
<p class="first sidebar-title">Why Use A Renderer via View Configuration</p>
<p class="last">Using a renderer in view configuration is usually a better way to
render templates than using any rendering API directly from within a
<a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a> because it makes the view callable more
unit-testable.  Views which use templating or rendering APIs directly
must return a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">Response</em></a> object.  Making testing assertions
about response objects is typically an indirect process, because it
means that your test code often needs to somehow parse information
out of the response body (often HTML).  View callables configured
with renderers externally via view configuration typically return a
dictionary, as above.  Making assertions about results returned in a
dictionary is almost always more direct and straightforward than
needing to parse HTML.</p>
</div>
<p>By default, views rendered via a template renderer return a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">Response</em></a>
object which has a <em>status code</em> of <tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt>, and a <em>content-type</em> of
<tt class="docutils literal"><span class="pre">text/html</span></tt>.  To vary attributes of the response of a view that uses a
renderer, such as the content-type, headers, or status attributes, you must
use the API of the <a class="reference internal" href="../api/response.html#pyramid.response.Response" title="pyramid.response.Response"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.response.Response</span></tt></a> object exposed as
<tt class="docutils literal"><span class="pre">request.response</span></tt> within the view before returning the dictionary.  See
<a class="reference internal" href="renderers.html#request-response-attr"><em>Varying Attributes of Rendered Responses</em></a> for more information.</p>
<p>The same set of system values are provided to templates rendered via a
renderer view configuration as those provided to templates rendered
imperatively.  See <a class="reference internal" href="#renderer-system-values"><em>System Values Used During Rendering</em></a>.</p>
</div>
<div class="section" id="debugging-templates">
<span id="index-4"></span><span id="id1"></span><h2>Debugging Templates<a class="headerlink" href="#debugging-templates" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#NameError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">NameError</span></tt></a> exception resulting from rendering a template with an
undefined variable (e.g. <tt class="docutils literal"><span class="pre">${wrong}</span></tt>) might end up looking like this:</p>
<div class="highlight-text"><div class="highlight"><pre>RuntimeError: Caught exception rendering template.
 - Expression: ``wrong``
 - Filename:   /home/fred/env/proj/proj/templates/mytemplate.pt
 - Arguments:  renderer_name: proj:templates/mytemplate.pt
               template: &lt;PageTemplateFile - at 0x1d2ecf0&gt;
               xincludes: &lt;XIncludes - at 0x1d3a130&gt;
               request: &lt;Request - at 0x1d2ecd0&gt;
               project: proj
               macros: &lt;Macros - at 0x1d3aed0&gt;
               context: &lt;MyResource None at 0x1d39130&gt;
               view: &lt;function my_view at 0x1d23570&gt;

NameError: wrong
</pre></div>
</div>
<p>The output tells you which template the error occurred in, as well as
displaying the arguments passed to the template itself.</p>
</div>
<div class="section" id="automatically-reloading-templates">
<span id="reload-templates-section"></span><span id="index-5"></span><h2>Automatically Reloading Templates<a class="headerlink" href="#automatically-reloading-templates" title="Permalink to this headline">¶</a></h2>
<p>It's often convenient to see changes you make to a template file
appear immediately without needing to restart the application process.
<span>Pyramid</span> allows you to configure your application development
environment so that a change to a template will be automatically
detected, and the template will be reloaded on the next rendering.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Auto-template-reload behavior is not recommended for
production sites as it slows rendering slightly; it's
usually only desirable during development.</p>
</div>
<p>In order to turn on automatic reloading of templates, you can use an
environment variable, or a configuration file setting.</p>
<p>To use an environment variable, start your application under a shell
using the <tt class="docutils literal"><span class="pre">PYRAMID_RELOAD_TEMPLATES</span></tt> operating system environment
variable set to <tt class="docutils literal"><span class="pre">1</span></tt>, For example:</p>
<div class="highlight-text"><div class="highlight"><pre>$ PYRAMID_RELOAD_TEMPLATES=1 $VENV/bin/pserve myproject.ini
</pre></div>
</div>
<p>To use a setting in the application <tt class="docutils literal"><span class="pre">.ini</span></tt> file for the same
purpose, set the <tt class="docutils literal"><span class="pre">pyramid.reload_templates</span></tt> key to <tt class="docutils literal"><span class="pre">true</span></tt> within the
application's configuration section, e.g.:</p>
<div class="highlight-ini"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">[app:main]</span>
<span class="na">use</span> <span class="o">=</span> <span class="s">egg:MyProject</span>
<span class="na">pyramid.reload_templates</span> <span class="o">=</span> <span class="s">true</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="available-add-on-template-system-bindings">
<span id="available-template-system-bindings"></span><span id="index-6"></span><h2>Available Add-On Template System Bindings<a class="headerlink" href="#available-add-on-template-system-bindings" title="Permalink to this headline">¶</a></h2>
<p>The Pylons Project maintains several packages providing bindings to different
templating languages including the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="37%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Template Language</th>
<th class="head">Pyramid Bindings</th>
<th class="head">Default Extensions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="http://chameleon.readthedocs.org/en/latest/">Chameleon</a></td>
<td><a class="reference external" href="https://pypi.python.org/pypi/pyramid_chameleon">pyramid_chameleon</a></td>
<td>.pt, .txt</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="http://jinja.pocoo.org/docs/">Jinja2</a></td>
<td><a class="reference external" href="https://pypi.python.org/pypi/pyramid_jinja2">pyramid_jinja2</a></td>
<td>.jinja2</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="http://www.makotemplates.org/">Mako</a></td>
<td><a class="reference external" href="https://pypi.python.org/pypi/pyramid_mako">pyramid_mako</a></td>
<td>.mak, .mako</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Templates</a><ul>
<li><a class="reference internal" href="#using-templates-directly">Using Templates Directly</a></li>
<li><a class="reference internal" href="#system-values-used-during-rendering">System Values Used During Rendering</a></li>
<li><a class="reference internal" href="#templates-used-as-renderers-via-configuration">Templates Used as Renderers via Configuration</a></li>
<li><a class="reference internal" href="#debugging-templates">Debugging Templates</a></li>
<li><a class="reference internal" href="#automatically-reloading-templates">Automatically Reloading Templates</a></li>
<li><a class="reference internal" href="#available-add-on-template-system-bindings">Available Add-On Template System Bindings</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="renderers.html"
                        title="previous chapter">Renderers</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="viewconfig.html"
                        title="next chapter">View Configuration</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="viewconfig.html" title="View Configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="renderers.html" title="Renderers"
             >previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>