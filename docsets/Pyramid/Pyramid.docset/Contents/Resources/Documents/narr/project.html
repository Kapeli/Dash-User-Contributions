<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating a Pyramid Project &mdash; The Pyramid Web Framework v1.5</title>
    
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="The Pyramid Web Framework v1.5" href="../index.html" />
    <link rel="next" title="Startup" href="startup.html" />
    <link rel="prev" title="Application Configuration" href="configuration.html" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head>
  <body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="startup.html" title="Startup"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Application Configuration"
             accesskey="P">previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-a-pyramid-project">
<span id="project-narr"></span><h1>Creating a <span>Pyramid</span> Project<a class="headerlink" href="#creating-a-pyramid-project" title="Permalink to this headline">¶</a></h1>
<p>As we saw in <a class="reference internal" href="firstapp.html#firstapp-chapter"><em>Creating Your First Pyramid Application</em></a>, it's possible to create a
<span>Pyramid</span> application completely manually.  However, it's usually more
convenient to use a <a class="reference internal" href="../glossary.html#term-scaffold"><em class="xref std std-term">scaffold</em></a> to generate a basic <span>Pyramid</span>
<a class="reference internal" href="../glossary.html#term-project"><em class="xref std std-term">project</em></a>.</p>
<p>A project is a directory that contains at least one Python <a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">package</em></a>.
You'll use a scaffold to create a project, and you'll create your application
logic within a package that lives inside the project.  Even if your
application is extremely simple, it is useful to place code that drives the
application within a package, because: 1) a package is more easily extended
with new code and 2) an application that lives inside a package can also be
distributed more easily than one which does not live within a package.</p>
<p><span>Pyramid</span> comes with a variety of scaffolds that you can use to generate
a project.  Each scaffold makes different configuration assumptions about
what type of application you're trying to construct.</p>
<p>These scaffolds are rendered using the <tt class="docutils literal"><span class="pre">pcreate</span></tt> command that is installed
as part of Pyramid.</p>
<div class="section" id="scaffolds-included-with-pyramid">
<span id="additional-paster-scaffolds"></span><span id="index-0"></span><h2>Scaffolds Included with <span>Pyramid</span><a class="headerlink" href="#scaffolds-included-with-pyramid" title="Permalink to this headline">¶</a></h2>
<p>The convenience scaffolds included with <span>Pyramid</span> differ from
each other on a number of axes:</p>
<ul class="simple">
<li>the persistence mechanism they offer (no persistence mechanism,
<a class="reference internal" href="../glossary.html#term-zodb"><em class="xref std std-term">ZODB</em></a>, or <a class="reference internal" href="../glossary.html#term-sqlalchemy"><em class="xref std std-term">SQLAlchemy</em></a>).</li>
<li>the mechanism they use to map URLs to code (<a class="reference internal" href="../glossary.html#term-traversal"><em class="xref std std-term">traversal</em></a> or <a class="reference internal" href="../glossary.html#term-url-dispatch"><em class="xref std std-term">URL
dispatch</em></a>).</li>
</ul>
<p>The included scaffolds are these:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">starter</span></tt></dt>
<dd>URL mapping via <a class="reference internal" href="../glossary.html#term-url-dispatch"><em class="xref std std-term">URL dispatch</em></a> and no persistence mechanism.</dd>
<dt><tt class="docutils literal"><span class="pre">zodb</span></tt></dt>
<dd>URL mapping via <a class="reference internal" href="../glossary.html#term-traversal"><em class="xref std std-term">traversal</em></a> and persistence via <a class="reference internal" href="../glossary.html#term-zodb"><em class="xref std std-term">ZODB</em></a>.</dd>
<dt><tt class="docutils literal"><span class="pre">alchemy</span></tt></dt>
<dd>URL mapping via <a class="reference internal" href="../glossary.html#term-url-dispatch"><em class="xref std std-term">URL dispatch</em></a> and persistence via
<a class="reference internal" href="../glossary.html#term-sqlalchemy"><em class="xref std std-term">SQLAlchemy</em></a></dd>
</dl>
</div>
<div class="section" id="creating-the-project">
<span id="creating-a-project"></span><span id="index-1"></span><h2>Creating the Project<a class="headerlink" href="#creating-the-project" title="Permalink to this headline">¶</a></h2>
<p>In <a class="reference internal" href="install.html#installing-chapter"><em>Installing Pyramid</em></a>, you created a virtual Python environment via
the <tt class="docutils literal"><span class="pre">virtualenv</span></tt> command.  To start a <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-project"><em class="xref std std-term">project</em></a>, use
the <tt class="docutils literal"><span class="pre">pcreate</span></tt> command installed within the virtualenv.  We'll choose the
<tt class="docutils literal"><span class="pre">starter</span></tt> scaffold for this purpose.  When we invoke <tt class="docutils literal"><span class="pre">pcreate</span></tt>, it will
create a directory that represents our project.</p>
<p>In <a class="reference internal" href="install.html#installing-chapter"><em>Installing Pyramid</em></a> we called the virtualenv directory <tt class="docutils literal"><span class="pre">env</span></tt>; the
following commands assume that our current working directory is the <tt class="docutils literal"><span class="pre">env</span></tt>
directory.</p>
<p>The below example uses the <tt class="docutils literal"><span class="pre">pcreate</span></tt> command to create a project with the
<tt class="docutils literal"><span class="pre">starter</span></tt> scaffold.</p>
<p>On UNIX:</p>
<div class="highlight-text"><div class="highlight"><pre>$ $VENV/bin/pcreate -s starter MyProject
</pre></div>
</div>
<p>Or on Windows:</p>
<div class="highlight-text"><div class="highlight"><pre>&gt; %VENV%\Scripts\pcreate -s starter MyProject
</pre></div>
</div>
<p>Here's sample output from a run of <tt class="docutils literal"><span class="pre">pcreate</span></tt> on UNIX for a project we name
<tt class="docutils literal"><span class="pre">MyProject</span></tt>:</p>
<div class="highlight-text"><div class="highlight"><pre>$ $VENV/bin/pcreate -s starter MyProject
Creating template pyramid
Creating directory ./MyProject
# ... more output ...
Running /Users/chrism/projects/pyramid/bin/python setup.py egg_info
</pre></div>
</div>
<p>As a result of invoking the <tt class="docutils literal"><span class="pre">pcreate</span></tt> command, a directory named
<tt class="docutils literal"><span class="pre">MyProject</span></tt> is created.  That directory is a <a class="reference internal" href="../glossary.html#term-project"><em class="xref std std-term">project</em></a> directory.
The <tt class="docutils literal"><span class="pre">setup.py</span></tt> file in that directory can be used to distribute your
application, or install your application for deployment or development.</p>
<p>A <tt class="docutils literal"><span class="pre">.ini</span></tt> file named <tt class="docutils literal"><span class="pre">development.ini</span></tt> will be created in the project
directory.  You will use this <tt class="docutils literal"><span class="pre">.ini</span></tt> file to configure a server, to run
your application, and to debug your application.  It contains configuration
that enables an interactive debugger and settings optimized for development.</p>
<p>Another <tt class="docutils literal"><span class="pre">.ini</span></tt> file named <tt class="docutils literal"><span class="pre">production.ini</span></tt> will also be created in the
project directory.  It contains configuration that disables any interactive
debugger (to prevent inappropriate access and disclosure), and turns off a
number of debugging settings.  You can use this file to put your application
into production.</p>
<p>The <tt class="docutils literal"><span class="pre">MyProject</span></tt> project directory contains an additional subdirectory named
<tt class="docutils literal"><span class="pre">myproject</span></tt> (note the case difference) representing a Python
<a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">package</em></a> which holds very simple <span>Pyramid</span> sample code.  This is
where you'll edit your application's Python code and templates.</p>
<p>We created this project within an <tt class="docutils literal"><span class="pre">env</span></tt> virtualenv directory.  However,
note that this is not mandatory.  The project directory can go more or less
anywhere on your filesystem.  You don't need to put it in a special &quot;web
server&quot; directory, and you don't need to put it within a virtualenv
directory.  The author uses Linux mainly, and tends to put project
directories which he creates within his <tt class="docutils literal"><span class="pre">~/projects</span></tt> directory.  On
Windows, it's a good idea to put project directories within a directory that
contains no space characters, so it's wise to <em>avoid</em> a path that contains
i.e. <tt class="docutils literal"><span class="pre">My</span> <span class="pre">Documents</span></tt>.  As a result, the author, when he uses Windows, just
puts his projects in <tt class="docutils literal"><span class="pre">C:\projects</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You'll need to avoid using <tt class="docutils literal"><span class="pre">pcreate</span></tt> to create a project with the same
name as a Python standard library component. In particular, this means you
should avoid using the names <tt class="docutils literal"><span class="pre">site</span></tt> or <tt class="docutils literal"><span class="pre">test</span></tt>, both of which
conflict with Python standard library packages.  You should also avoid
using the name <tt class="docutils literal"><span class="pre">pyramid</span></tt>, which will conflict with Pyramid itself.</p>
</div>
</div>
<div class="section" id="installing-your-newly-created-project-for-development">
<span id="index-2"></span><h2>Installing your Newly Created Project for Development<a class="headerlink" href="#installing-your-newly-created-project-for-development" title="Permalink to this headline">¶</a></h2>
<p>To install a newly created project for development, you should <tt class="docutils literal"><span class="pre">cd</span></tt> to the
newly created project directory and use the Python interpreter from the
<a class="reference internal" href="../glossary.html#term-virtualenv"><em class="xref std std-term">virtualenv</em></a> you created during <a class="reference internal" href="install.html#installing-chapter"><em>Installing Pyramid</em></a> to invoke the
command <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></tt></p>
<p>The file named <tt class="docutils literal"><span class="pre">setup.py</span></tt> will be in the root of the pcreate-generated
project directory.  The <tt class="docutils literal"><span class="pre">python</span></tt> you're invoking should be the one that
lives in the <tt class="docutils literal"><span class="pre">bin</span></tt> (or <tt class="docutils literal"><span class="pre">Scripts</span></tt> on Windows) directory of your virtual
Python environment.  Your terminal's current working directory <em>must</em> be the
newly created project directory.</p>
<p>On UNIX:</p>
<div class="highlight-text"><div class="highlight"><pre>$ cd MyProject
$ $VENV/bin/python setup.py develop
</pre></div>
</div>
<p>Or on Windows:</p>
<div class="highlight-text"><div class="highlight"><pre>&gt; cd MyProject
&gt; %VENV%\Scripts\python.exe setup.py develop
</pre></div>
</div>
<p>Elided output from a run of this command on UNIX is shown below:</p>
<div class="highlight-text"><div class="highlight"><pre>$ cd MyProject
$ $VENV/bin/python setup.py develop
...
Finished processing dependencies for MyProject==0.0
</pre></div>
</div>
<p>This will install a <a class="reference internal" href="../glossary.html#term-distribution"><em class="xref std std-term">distribution</em></a> representing your project
into the virtual environment interpreter's library set so it can be
found by <tt class="docutils literal"><span class="pre">import</span></tt> statements and by other console scripts such as
<tt class="docutils literal"><span class="pre">pserve</span></tt>, <tt class="docutils literal"><span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">proutes</span></tt> and <tt class="docutils literal"><span class="pre">pviews</span></tt>.</p>
</div>
<div class="section" id="running-the-tests-for-your-application">
<span id="index-3"></span><h2>Running The Tests For Your Application<a class="headerlink" href="#running-the-tests-for-your-application" title="Permalink to this headline">¶</a></h2>
<p>To run unit tests for your application, you should invoke them using the
Python interpreter from the <a class="reference internal" href="../glossary.html#term-virtualenv"><em class="xref std std-term">virtualenv</em></a> you created during
<a class="reference internal" href="install.html#installing-chapter"><em>Installing Pyramid</em></a> (the <tt class="docutils literal"><span class="pre">python</span></tt> command that lives in the <tt class="docutils literal"><span class="pre">bin</span></tt>
directory of your virtualenv).</p>
<p>On UNIX:</p>
<div class="highlight-text"><div class="highlight"><pre>$ $VENV/bin/python setup.py test -q
</pre></div>
</div>
<p>Or on Windows:</p>
<div class="highlight-text"><div class="highlight"><pre>&gt; %VENV%\Scripts\python.exe setup.py test -q
</pre></div>
</div>
<p>Here's sample output from a test run on UNIX:</p>
<div class="highlight-text"><div class="highlight"><pre>$ $VENV/bin/python setup.py test -q
running test
running egg_info
writing requirements to MyProject.egg-info/requires.txt
writing MyProject.egg-info/PKG-INFO
writing top-level names to MyProject.egg-info/top_level.txt
writing dependency_links to MyProject.egg-info/dependency_links.txt
writing entry points to MyProject.egg-info/entry_points.txt
reading manifest file &#39;MyProject.egg-info/SOURCES.txt&#39;
writing manifest file &#39;MyProject.egg-info/SOURCES.txt&#39;
running build_ext
..
----------------------------------------------------------------------
Ran 1 test in 0.108s

OK
</pre></div>
</div>
<p>The tests themselves are found in the <tt class="docutils literal"><span class="pre">tests.py</span></tt> module in your <tt class="docutils literal"><span class="pre">pcreate</span></tt>
generated project.  Within a project generated by the <tt class="docutils literal"><span class="pre">starter</span></tt> scaffold, a
single sample test exists.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">-q</span></tt> option is passed to the <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">test</span></tt> command to limit the
output to a stream of dots.  If you don't pass <tt class="docutils literal"><span class="pre">-q</span></tt>, you'll see more
verbose test result output (which normally isn't very useful).</p>
</div>
</div>
<div class="section" id="running-the-project-application">
<span id="index-4"></span><span id="id1"></span><h2>Running The Project Application<a class="headerlink" href="#running-the-project-application" title="Permalink to this headline">¶</a></h2>
<p>Once a project is installed for development, you can run the application it
represents using the <tt class="docutils literal"><span class="pre">pserve</span></tt> command against the generated configuration
file.  In our case, this file is named <tt class="docutils literal"><span class="pre">development.ini</span></tt>.</p>
<p>On UNIX:</p>
<div class="highlight-text"><div class="highlight"><pre>$ $VENV/bin/pserve development.ini
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-text"><div class="highlight"><pre>&gt; %VENV%\Scripts\pserve development.ini
</pre></div>
</div>
<p>Here's sample output from a run of <tt class="docutils literal"><span class="pre">pserve</span></tt> on UNIX:</p>
<div class="highlight-text"><div class="highlight"><pre>$ $VENV/bin/pserve development.ini
Starting server in PID 16601.
serving on http://0.0.0.0:6543
</pre></div>
</div>
<p>When you use <tt class="docutils literal"><span class="pre">pserve</span></tt> to start the application implied by the default
rendering of a scaffold, it will respond to requests on <em>all</em> IP addresses
possessed by your system, not just requests to <tt class="docutils literal"><span class="pre">localhost</span></tt>.  This is what
the <tt class="docutils literal"><span class="pre">0.0.0.0</span></tt> in <tt class="docutils literal"><span class="pre">serving</span> <span class="pre">on</span> <span class="pre">http://0.0.0.0:6543</span></tt> means.  The server will
respond to requests made to <tt class="docutils literal"><span class="pre">127.0.0.1</span></tt> and on any external IP address.
For example, your system might be configured to have an external IP address
<tt class="docutils literal"><span class="pre">192.168.1.50</span></tt>.  If that's the case, if you use a browser running on the
same system as Pyramid, it will be able to access the application via
<tt class="docutils literal"><span class="pre">http://127.0.0.1:6543/</span></tt> as well as via
<tt class="docutils literal"><span class="pre">http://192.168.1.50:6543/</span></tt>. However, <em>other people</em> on other computers on
the same network will also be able to visit your Pyramid application in their
browser by visiting <tt class="docutils literal"><span class="pre">http://192.168.1.50:6543/</span></tt>.</p>
<p>If you want to restrict access such that only a browser running on the same
machine as Pyramid will be able to access your Pyramid application, edit the
<tt class="docutils literal"><span class="pre">development.ini</span></tt> file, and replace the <tt class="docutils literal"><span class="pre">host</span></tt> value in the
<tt class="docutils literal"><span class="pre">[server:main]</span></tt> section.  Change it from <tt class="docutils literal"><span class="pre">0.0.0.0</span></tt> to <tt class="docutils literal"><span class="pre">127.0.0.1</span></tt>.  For
example:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[server:main]</span>
<span class="na">use</span> <span class="o">=</span> <span class="s">egg:waitress#main</span>
<span class="na">host</span> <span class="o">=</span> <span class="s">127.0.0.1</span>
<span class="na">port</span> <span class="o">=</span> <span class="s">6543</span>
</pre></div>
</div>
<p>You can change the port on which the server runs on by changing the same
portion of the <tt class="docutils literal"><span class="pre">development.ini</span></tt> file.  For example, you can change the
<tt class="docutils literal"><span class="pre">port</span> <span class="pre">=</span> <span class="pre">6543</span></tt> line in the <tt class="docutils literal"><span class="pre">development.ini</span></tt> file's <tt class="docutils literal"><span class="pre">[server:main]</span></tt>
section to <tt class="docutils literal"><span class="pre">port</span> <span class="pre">=</span> <span class="pre">8080</span></tt> to run the server on port 8080 instead of
port 6543.</p>
<p>You can shut down a server started this way by pressing <tt class="docutils literal"><span class="pre">Ctrl-C</span></tt>.</p>
<p>The default server used to run your Pyramid application when a project is
created from a scaffold is named <a class="reference internal" href="../glossary.html#term-waitress"><em class="xref std std-term">Waitress</em></a>.  This server is what
prints the <tt class="docutils literal"><span class="pre">serving</span> <span class="pre">on...</span></tt> line when you run <tt class="docutils literal"><span class="pre">pserve</span></tt>.  It's a good idea
to use this server during development, because it's very simple.  It can also
be used for light production.  Setting your application up under a different
server is not advised until you've done some development work under the
default server, particularly if you're not yet experienced with Python web
development.  Python web server setup can be complex, and you should get some
confidence that your application works in a default environment before trying
to optimize it or make it &quot;more like production&quot;.  It's awfully easy to get
sidetracked trying to set up a nondefault server for hours without actually
starting to do any development.  One of the nice things about Python web
servers is that they're largely interchangeable, so if your application works
under the default server, it will almost certainly work under any other
server in production if you eventually choose to use a different one.  Don't
worry about it right now.</p>
<p>For more detailed information about the startup process, see
<a class="reference internal" href="startup.html#startup-chapter"><em>Startup</em></a>.  For more information about environment variables and
configuration file settings that influence startup and runtime behavior, see
<a class="reference internal" href="environment.html#environment-chapter"><em>Environment Variables and .ini File Settings</em></a>.</p>
<div class="section" id="reloading-code">
<span id="id2"></span><h3>Reloading Code<a class="headerlink" href="#reloading-code" title="Permalink to this headline">¶</a></h3>
<p>During development, it's often useful to run <tt class="docutils literal"><span class="pre">pserve</span></tt> using its
<tt class="docutils literal"><span class="pre">--reload</span></tt> option.  When <tt class="docutils literal"><span class="pre">--reload</span></tt> is passed to <tt class="docutils literal"><span class="pre">pserve</span></tt>, changes to
any Python module your project uses will cause the server to restart.  This
typically makes development easier, as changes to Python code made within a
<span>Pyramid</span> application is not put into effect until the server restarts.</p>
<p>For example, on UNIX:</p>
<div class="highlight-text"><div class="highlight"><pre>$ $VENV/bin/pserve development.ini --reload
Starting subprocess with file monitor
Starting server in PID 16601.
serving on http://0.0.0.0:6543
</pre></div>
</div>
<p>Now if you make a change to any of your project's <tt class="docutils literal"><span class="pre">.py</span></tt> files or <tt class="docutils literal"><span class="pre">.ini</span></tt>
files, you'll see the server restart automatically:</p>
<div class="highlight-text"><div class="highlight"><pre>development.ini changed; reloading...
-------------------- Restarting --------------------
Starting server in PID 16602.
serving on http://0.0.0.0:6543
</pre></div>
</div>
<p>Changes to template files (such as <tt class="docutils literal"><span class="pre">.pt</span></tt> or <tt class="docutils literal"><span class="pre">.mak</span></tt> files) won't cause the
server to restart.  Changes to template files don't require a server restart
as long as the <tt class="docutils literal"><span class="pre">pyramid.reload_templates</span></tt> setting in the
<tt class="docutils literal"><span class="pre">development.ini</span></tt> file is <tt class="docutils literal"><span class="pre">true</span></tt>.  Changes made to template files when
this setting is true will take effect immediately without a server restart.</p>
</div>
</div>
<div class="section" id="viewing-the-application">
<span id="index-5"></span><h2>Viewing the Application<a class="headerlink" href="#viewing-the-application" title="Permalink to this headline">¶</a></h2>
<p>Once your application is running via <tt class="docutils literal"><span class="pre">pserve</span></tt>, you may visit
<tt class="docutils literal"><span class="pre">http://localhost:6543/</span></tt> in your browser.  You will see something in your
browser like what is displayed in the following image:</p>
<img alt="../_images/project.png" src="../_images/project.png" />
<p>This is the page shown by default when you visit an unmodified <tt class="docutils literal"><span class="pre">pcreate</span></tt>
generated <tt class="docutils literal"><span class="pre">starter</span></tt> application in a browser.</p>
<div class="section" id="the-debug-toolbar">
<span id="debug-toolbar"></span><span id="index-6"></span><h3>The Debug Toolbar<a class="headerlink" href="#the-debug-toolbar" title="Permalink to this headline">¶</a></h3>
<p>If you click on the image shown at the right hand top of the page (&quot;^DT&quot;),
you'll be presented with a debug toolbar that provides various niceties while
you're developing.  This image will float above every HTML page served by
<span>Pyramid</span> while you develop an application, and allows you show the
toolbar as necessary.  Click on <tt class="docutils literal"><span class="pre">Hide</span></tt> to hide the toolbar and show the
image again.</p>
<img alt="../_images/project-debug.png" src="../_images/project-debug.png" />
<p>If you don't see the debug toolbar image on the right hand top of the page,
it means you're browsing from a system that does not have debugging access.
By default, for security reasons, only a browser originating from
<tt class="docutils literal"><span class="pre">localhost</span></tt> (<tt class="docutils literal"><span class="pre">127.0.0.1</span></tt>) can see the debug toolbar.  To allow your
browser on a remote system to access the server, add a line within the
<tt class="docutils literal"><span class="pre">[app:main]</span></tt> section of the <tt class="docutils literal"><span class="pre">development.ini</span></tt> file in the form
<tt class="docutils literal"><span class="pre">debugtoolbar.hosts</span> <span class="pre">=</span> <span class="pre">X.X.X.X</span></tt>.  For example, if your Pyramid application
is running on a remote system, and you're browsing from a host with the IP
address <tt class="docutils literal"><span class="pre">192.168.1.1</span></tt>, you'd add something like this to enable the toolbar
when your system contacts Pyramid:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[app:main]</span>
<span class="c1"># .. other settings ...</span>
<span class="na">debugtoolbar.hosts</span> <span class="o">=</span> <span class="s">192.168.1.1</span>
</pre></div>
</div>
<p>For more information about what the debug toolbar allows you to do, see <a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_debugtoolbar/en/latest/">the
documentation for pyramid_debugtoolbar</a>.</p>
<p>The debug toolbar will not be shown (and all debugging will be turned off)
when you use the <tt class="docutils literal"><span class="pre">production.ini</span></tt> file instead of the <tt class="docutils literal"><span class="pre">development.ini</span></tt>
ini file to run the application.</p>
<p>You can also turn the debug toolbar off by editing <tt class="docutils literal"><span class="pre">development.ini</span></tt> and
commenting out a line.  For example, instead of:</p>
<div class="highlight-ini"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre>[app:main]
...
pyramid.includes =
    pyramid_debugtoolbar
</pre></div>
</td></tr></table></div>
<p>Put a hash mark at the beginning of the <tt class="docutils literal"><span class="pre">pyramid_debugtoolbar</span></tt> line:</p>
<div class="highlight-ini"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre>[app:main]
...
pyramid.includes =
#    pyramid_debugtoolbar
</pre></div>
</td></tr></table></div>
<p>Then restart the application to see that the toolbar has been turned off.</p>
<p>Note that if you comment out the <tt class="docutils literal"><span class="pre">pyramid_debugtoolbar</span></tt> line, the <tt class="docutils literal"><span class="pre">#</span></tt>
<em>must</em> be in the first column.  If you put it anywhere else,
and then attempt to restart the application,
you'll receive an error that ends something like this:</p>
<div class="highlight-text"><div class="highlight"><pre>ImportError: No module named #pyramid_debugtoolbar
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-project-structure">
<span id="index-7"></span><h2>The Project Structure<a class="headerlink" href="#the-project-structure" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">starter</span></tt> scaffold generated a <a class="reference internal" href="../glossary.html#term-project"><em class="xref std std-term">project</em></a> (named <tt class="docutils literal"><span class="pre">MyProject</span></tt>),
which contains a Python <a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">package</em></a>.  The package is <em>also</em> named
<tt class="docutils literal"><span class="pre">myproject</span></tt>, but it's lowercased; the scaffold generates a project which
contains a package that shares its name except for case.</p>
<p>All <span>Pyramid</span> <tt class="docutils literal"><span class="pre">pcreate</span></tt> -generated projects share a similar structure.
The <tt class="docutils literal"><span class="pre">MyProject</span></tt> project we've generated has the following directory
structure:</p>
<div class="highlight-text"><div class="highlight"><pre>MyProject/
|-- CHANGES.txt
|-- development.ini
|-- MANIFEST.in
|-- myproject
|   |-- __init__.py
|   |-- static
|   |   |-- pyramid-16x16.png
|   |   |-- pyramid.png
|   |   |-- theme.css
|   |   `-- theme.min.css
|   |-- templates
|   |   `-- mytemplate.pt
|   |-- tests.py
|   `-- views.py
|-- production.ini
|-- README.txt
`-- setup.py
</pre></div>
</div>
</div>
<div class="section" id="the-myproject-project">
<h2>The <tt class="docutils literal"><span class="pre">MyProject</span></tt> <a class="reference internal" href="../glossary.html#term-project"><em class="xref std std-term">Project</em></a><a class="headerlink" href="#the-myproject-project" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">MyProject</span></tt> <a class="reference internal" href="../glossary.html#term-project"><em class="xref std std-term">project</em></a> directory is the distribution and
deployment wrapper for your application.  It contains both the <tt class="docutils literal"><span class="pre">myproject</span></tt>
<a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">package</em></a> representing your application as well as files used to
describe, run, and test your application.</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">CHANGES.txt</span></tt> describes the changes you've made to the application.  It
is conventionally written in <a class="reference internal" href="../glossary.html#term-restructuredtext"><em class="xref std std-term">ReStructuredText</em></a> format.</li>
<li><tt class="docutils literal"><span class="pre">README.txt</span></tt> describes the application in general.  It is conventionally
written in <a class="reference internal" href="../glossary.html#term-restructuredtext"><em class="xref std std-term">ReStructuredText</em></a> format.</li>
<li><tt class="docutils literal"><span class="pre">development.ini</span></tt> is a <a class="reference internal" href="../glossary.html#term-pastedeploy"><em class="xref std std-term">PasteDeploy</em></a> configuration file that can
be used to execute your application during development.</li>
<li><tt class="docutils literal"><span class="pre">production.ini</span></tt> is a <a class="reference internal" href="../glossary.html#term-pastedeploy"><em class="xref std std-term">PasteDeploy</em></a> configuration file that can
be used to execute your application in a production configuration.</li>
<li><tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> is a <a class="reference internal" href="../glossary.html#term-distutils"><em class="xref std std-term">distutils</em></a> &quot;manifest&quot; file, naming which files
should be included in a source distribution of the package when <tt class="docutils literal"><span class="pre">python</span>
<span class="pre">setup.py</span> <span class="pre">sdist</span></tt> is run.</li>
<li><tt class="docutils literal"><span class="pre">setup.py</span></tt> is the file you'll use to test and distribute your
application.  It is a standard <a class="reference internal" href="../glossary.html#term-setuptools"><em class="xref std std-term">setuptools</em></a> <tt class="docutils literal"><span class="pre">setup.py</span></tt> file.</li>
</ol>
<div class="section" id="development-ini">
<span id="myproject-ini"></span><span id="index-8"></span><h3><tt class="docutils literal"><span class="pre">development.ini</span></tt><a class="headerlink" href="#development-ini" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">development.ini</span></tt> file is a <a class="reference internal" href="../glossary.html#term-pastedeploy"><em class="xref std std-term">PasteDeploy</em></a> configuration file.
Its purpose is to specify an application to run when you invoke <tt class="docutils literal"><span class="pre">pserve</span></tt>,
as well as the deployment settings provided to that application.</p>
<p>The generated <tt class="docutils literal"><span class="pre">development.ini</span></tt> file looks like so:</p>
<div class="highlight-ini"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">###</span>
<span class="c1"># app configuration</span>
<span class="c1"># http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/environment.html</span>
<span class="c1">###</span>

<span class="k">[app:main]</span>
<span class="na">use</span> <span class="o">=</span> <span class="s">egg:MyProject</span>

<span class="na">pyramid.reload_templates</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">pyramid.debug_authorization</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">pyramid.debug_notfound</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">pyramid.debug_routematch</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">pyramid.default_locale_name</span> <span class="o">=</span> <span class="s">en</span>
<span class="na">pyramid.includes</span> <span class="o">=</span> <span class="s"></span>
<span class="s">    pyramid_debugtoolbar</span>

<span class="c1"># By default, the toolbar only appears for clients from IP addresses</span>
<span class="c1"># &#39;127.0.0.1&#39; and &#39;::1&#39;.</span>
<span class="c1"># debugtoolbar.hosts = 127.0.0.1 ::1</span>

<span class="c1">###</span>
<span class="c1"># wsgi server configuration</span>
<span class="c1">###</span>

<span class="k">[server:main]</span>
<span class="na">use</span> <span class="o">=</span> <span class="s">egg:waitress#main</span>
<span class="na">host</span> <span class="o">=</span> <span class="s">0.0.0.0</span>
<span class="na">port</span> <span class="o">=</span> <span class="s">6543</span>

<span class="c1">###</span>
<span class="c1"># logging configuration</span>
<span class="c1"># http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/logging.html</span>
<span class="c1">###</span>

<span class="k">[loggers]</span>
<span class="na">keys</span> <span class="o">=</span> <span class="s">root, myproject</span>

<span class="k">[handlers]</span>
<span class="na">keys</span> <span class="o">=</span> <span class="s">console</span>

<span class="k">[formatters]</span>
<span class="na">keys</span> <span class="o">=</span> <span class="s">generic</span>

<span class="k">[logger_root]</span>
<span class="na">level</span> <span class="o">=</span> <span class="s">INFO</span>
<span class="na">handlers</span> <span class="o">=</span> <span class="s">console</span>

<span class="k">[logger_myproject]</span>
<span class="na">level</span> <span class="o">=</span> <span class="s">DEBUG</span>
<span class="na">handlers</span> <span class="o">=</span>
<span class="na">qualname</span> <span class="o">=</span> <span class="s">myproject</span>

<span class="k">[handler_console]</span>
<span class="na">class</span> <span class="o">=</span> <span class="s">StreamHandler</span>
<span class="na">args</span> <span class="o">=</span> <span class="s">(sys.stderr,)</span>
<span class="na">level</span> <span class="o">=</span> <span class="s">NOTSET</span>
<span class="na">formatter</span> <span class="o">=</span> <span class="s">generic</span>

<span class="k">[formatter_generic]</span>
<span class="na">format</span> <span class="o">=</span> <span class="s">%(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s</span>
</pre></div>
</td></tr></table></div>
<p>This file contains several sections including <tt class="docutils literal"><span class="pre">[app:main]</span></tt>,
<tt class="docutils literal"><span class="pre">[server:main]</span></tt> and several other sections related to logging
configuration.</p>
<p>The <tt class="docutils literal"><span class="pre">[app:main]</span></tt> section represents configuration for your <span>Pyramid</span>
application.  The <tt class="docutils literal"><span class="pre">use</span></tt> setting is the only setting required to be present
in the <tt class="docutils literal"><span class="pre">[app:main]</span></tt> section.  Its default value, <tt class="docutils literal"><span class="pre">egg:MyProject</span></tt>,
indicates that our MyProject project contains the application that should be
served.  Other settings added to this section are passed as keyword arguments
to the function named <tt class="docutils literal"><span class="pre">main</span></tt> in our package's <tt class="docutils literal"><span class="pre">__init__.py</span></tt> module.  You
can provide startup-time configuration parameters to your application by
adding more settings to this section.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference internal" href="paste.html#pastedeploy-entry-points"><em>Entry Points and PasteDeploy .ini Files</em></a> for more information about the
meaning of the <tt class="docutils literal"><span class="pre">use</span> <span class="pre">=</span> <span class="pre">egg:MyProject</span></tt> value in this section.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">pyramid.reload_templates</span></tt> setting in the <tt class="docutils literal"><span class="pre">[app:main]</span></tt> section is a
<span>Pyramid</span> -specific setting which is passed into the framework.  If it
exists, and its value is <tt class="docutils literal"><span class="pre">true</span></tt>, supported template changes will not
require an application restart to be detected.  See
<a class="reference internal" href="templates.html#reload-templates-section"><em>Automatically Reloading Templates</em></a> for more information.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">pyramid.reload_templates</span></tt> option should be turned off for
production applications, as template rendering is slowed when it is turned
on.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">pyramid.includes</span></tt> setting in the <tt class="docutils literal"><span class="pre">[app:main]</span></tt> section tells Pyramid
to &quot;include&quot; configuration from another package.  In this case, the line
<tt class="docutils literal"><span class="pre">pyramid.includes</span> <span class="pre">=</span> <span class="pre">pyramid_debugtoolbar</span></tt> tells Pyramid to include
configuration from the <tt class="docutils literal"><span class="pre">pyramid_debugtoolbar</span></tt> package.  This turns on a
debugging panel in development mode which will be shown on the right hand
side of the screen.  Including the debug toolbar will also make it possible
to interactively debug exceptions when an error occurs.</p>
<p>Various other settings may exist in this section having to do with debugging
or influencing runtime behavior of a <span>Pyramid</span> application.  See
<a class="reference internal" href="environment.html#environment-chapter"><em>Environment Variables and .ini File Settings</em></a> for more information about these settings.</p>
<p>The name <tt class="docutils literal"><span class="pre">main</span></tt> in <tt class="docutils literal"><span class="pre">[app:main]</span></tt> signifies that this is the default
application run by <tt class="docutils literal"><span class="pre">pserve</span></tt> when it is invoked against this configuration
file.  The name <tt class="docutils literal"><span class="pre">main</span></tt> is a convention used by PasteDeploy signifying that
it is the default application.</p>
<p>The <tt class="docutils literal"><span class="pre">[server:main]</span></tt> section of the configuration file configures a WSGI
server which listens on TCP port 6543.  It is configured to listen on all
interfaces (<tt class="docutils literal"><span class="pre">0.0.0.0</span></tt>).  This means that any remote system which has TCP
access to your system can see your Pyramid application.</p>
<p id="myproject-ini-logging">The sections that live between the markers <tt class="docutils literal"><span class="pre">#</span> <span class="pre">Begin</span> <span class="pre">logging</span> <span class="pre">configuration</span></tt>
and <tt class="docutils literal"><span class="pre">#</span> <span class="pre">End</span> <span class="pre">logging</span> <span class="pre">configuration</span></tt> represent Python's standard library
<a class="reference external" href="http://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">logging</span></tt></a> module configuration for your application.  The sections
between these two markers are passed to the <a class="reference external" href="http://docs.python.org/howto/logging.html#configuring-logging">logging module's config file
configuration engine</a> when the
<tt class="docutils literal"><span class="pre">pserve</span></tt> or <tt class="docutils literal"><span class="pre">pshell</span></tt> commands are executed.  The default
configuration sends application logging output to the standard error output
of your terminal.  For more information about logging configuration, see
<a class="reference internal" href="logging.html#logging-chapter"><em>Logging</em></a>.</p>
<p>See the <a class="reference internal" href="../glossary.html#term-pastedeploy"><em class="xref std std-term">PasteDeploy</em></a> documentation for more information about other
types of things you can put into this <tt class="docutils literal"><span class="pre">.ini</span></tt> file, such as other
applications, <a class="reference internal" href="../glossary.html#term-middleware"><em class="xref std std-term">middleware</em></a> and alternate <a class="reference internal" href="../glossary.html#term-wsgi"><em class="xref std std-term">WSGI</em></a> server
implementations.</p>
</div>
<div class="section" id="production-ini">
<span id="index-9"></span><h3><tt class="docutils literal"><span class="pre">production.ini</span></tt><a class="headerlink" href="#production-ini" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">production.ini</span></tt> file is a <a class="reference internal" href="../glossary.html#term-pastedeploy"><em class="xref std std-term">PasteDeploy</em></a> configuration file with
a purpose much like that of <tt class="docutils literal"><span class="pre">development.ini</span></tt>.  However, it disables the
debug toolbar, and filters all log messages except those above the WARN
level.  It also turns off template development options such that templates
are not automatically reloaded when changed, and turns off all debugging
options.  This file is appropriate to use instead of <tt class="docutils literal"><span class="pre">development.ini</span></tt> when
you put your application into production.</p>
<p>It's important to use <tt class="docutils literal"><span class="pre">production.ini</span></tt> (and <em>not</em> <tt class="docutils literal"><span class="pre">development.ini</span></tt>) to
benchmark your application and put it into production.  <tt class="docutils literal"><span class="pre">development.ini</span></tt>
configures your system with a debug toolbar that helps development, but the
inclusion of this toolbar slows down page rendering times by over an order of
magnitude.  The debug toolbar is also a potential security risk if you have
it configured incorrectly.</p>
</div>
<div class="section" id="manifest-in">
<span id="index-10"></span><h3><tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt><a class="headerlink" href="#manifest-in" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> file is a <a class="reference internal" href="../glossary.html#term-distutils"><em class="xref std std-term">distutils</em></a> configuration file which
specifies the non-Python files that should be included when a
<a class="reference internal" href="../glossary.html#term-distribution"><em class="xref std std-term">distribution</em></a> of your Pyramid project is created when you run <tt class="docutils literal"><span class="pre">python</span>
<span class="pre">setup.py</span> <span class="pre">sdist</span></tt>.  Due to the information contained in the default
<tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt>, an sdist of your Pyramid project will include <tt class="docutils literal"><span class="pre">.txt</span></tt>
files, <tt class="docutils literal"><span class="pre">.ini</span></tt> files, <tt class="docutils literal"><span class="pre">.rst</span></tt> files, graphics files, and template files, as
well as <tt class="docutils literal"><span class="pre">.py</span></tt> files.  See
<a class="reference external" href="http://docs.python.org/distutils/sourcedist.html#the-manifest-in-template">http://docs.python.org/distutils/sourcedist.html#the-manifest-in-template</a> for
more information about the syntax and usage of <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt>.</p>
<p>Without the presence of a <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> file or without checking your
source code into a version control repository, <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">sdist</span></tt> places only
<em>Python source files</em> (files ending with a <tt class="docutils literal"><span class="pre">.py</span></tt> extension) into tarballs
generated by <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">sdist</span></tt>.  This means, for example, if your
project was not checked into a setuptools-compatible source control system,
and your project directory didn't contain a <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> file that told
the <tt class="docutils literal"><span class="pre">sdist</span></tt> machinery to include <tt class="docutils literal"><span class="pre">*.pt</span></tt> files, the
<tt class="docutils literal"><span class="pre">myproject/templates/mytemplate.pt</span></tt> file would not be included in the
generated tarball.</p>
<p>Projects generated by Pyramid scaffolds include a default <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt>
file.  The <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> file contains declarations which tell it to
include files like <tt class="docutils literal"><span class="pre">*.pt</span></tt>, <tt class="docutils literal"><span class="pre">*.css</span></tt> and <tt class="docutils literal"><span class="pre">*.js</span></tt> in the generated tarball.
If you include files with extensions other than the files named in the
project's <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> and you don't make use of a setuptools-compatible
version control system, you'll need to edit the <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> file and
include the statements necessary to include your new files.  See
<a class="reference external" href="http://docs.python.org/distutils/sourcedist.html#principle">http://docs.python.org/distutils/sourcedist.html#principle</a> for more
information about how to do this.</p>
<p>You can also delete <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> from your project and rely on a
setuptools feature which simply causes all files checked into a version
control system to be put into the generated tarball.  To allow this to
happen, check all the files that you'd like to be distributed along with your
application's Python files into Subversion.  After you do this, when you
rerun <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">sdist</span></tt>, all files checked into the version control system
will be included in the tarball.  If you don't use Subversion, and instead
use a different version control system, you may need to install a setuptools
add-on such as <tt class="docutils literal"><span class="pre">setuptools-git</span></tt> or <tt class="docutils literal"><span class="pre">setuptools-hg</span></tt> for this behavior to
work properly.</p>
</div>
<div class="section" id="setup-py">
<span id="index-11"></span><h3><tt class="docutils literal"><span class="pre">setup.py</span></tt><a class="headerlink" href="#setup-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">setup.py</span></tt> file is a <a class="reference internal" href="../glossary.html#term-setuptools"><em class="xref std std-term">setuptools</em></a> setup file.  It is meant to be
run directly from the command line to perform a variety of functions, such as
testing, packaging, and distributing your application.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">setup.py</span></tt> is the de facto standard which Python developers use to
distribute their reusable code.  You can read more about <tt class="docutils literal"><span class="pre">setup.py</span></tt> files
and their usage in the <a class="reference external" href="http://peak.telecommunity.com/DevCenter/setuptools">Setuptools documentation</a> and <a class="reference external" href="http://guide.python-distribute.org/">The
Hitchhiker's Guide to Packaging</a>.</p>
</div>
<p>Our generated <tt class="docutils literal"><span class="pre">setup.py</span></tt> looks like this:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="n">here</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s">&#39;README.txt&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">README</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s">&#39;CHANGES.txt&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">CHANGES</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">requires</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&#39;pyramid&#39;</span><span class="p">,</span>
    <span class="s">&#39;pyramid_chameleon&#39;</span><span class="p">,</span>
    <span class="s">&#39;pyramid_debugtoolbar&#39;</span><span class="p">,</span>
    <span class="s">&#39;waitress&#39;</span><span class="p">,</span>
    <span class="p">]</span>

<span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;MyProject&#39;</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="s">&#39;0.0&#39;</span><span class="p">,</span>
      <span class="n">description</span><span class="o">=</span><span class="s">&#39;MyProject&#39;</span><span class="p">,</span>
      <span class="n">long_description</span><span class="o">=</span><span class="n">README</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">CHANGES</span><span class="p">,</span>
      <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="s">&quot;Programming Language :: Python&quot;</span><span class="p">,</span>
        <span class="s">&quot;Framework :: Pyramid&quot;</span><span class="p">,</span>
        <span class="s">&quot;Topic :: Internet :: WWW/HTTP&quot;</span><span class="p">,</span>
        <span class="s">&quot;Topic :: Internet :: WWW/HTTP :: WSGI :: Application&quot;</span><span class="p">,</span>
        <span class="p">],</span>
      <span class="n">author</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
      <span class="n">author_email</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
      <span class="n">url</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
      <span class="n">keywords</span><span class="o">=</span><span class="s">&#39;web pyramid pylons&#39;</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
      <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">zip_safe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
      <span class="n">install_requires</span><span class="o">=</span><span class="n">requires</span><span class="p">,</span>
      <span class="n">tests_require</span><span class="o">=</span><span class="n">requires</span><span class="p">,</span>
      <span class="n">test_suite</span><span class="o">=</span><span class="s">&quot;myproject&quot;</span><span class="p">,</span>
      <span class="n">entry_points</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s">      [paste.app_factory]</span>
<span class="s">      main = myproject:main</span>
<span class="s">      &quot;&quot;&quot;</span><span class="p">,</span>
      <span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The <tt class="docutils literal"><span class="pre">setup.py</span></tt> file calls the setuptools <tt class="docutils literal"><span class="pre">setup</span></tt> function, which does
various things depending on the arguments passed to <tt class="docutils literal"><span class="pre">setup.py</span></tt> on the
command line.</p>
<p>Within the arguments to this function call, information about your
application is kept.  While it's beyond the scope of this documentation to
explain everything about setuptools setup files, we'll provide a whirlwind
tour of what exists in this file in this section.</p>
<p>Your application's name can be any string; it is specified in the <tt class="docutils literal"><span class="pre">name</span></tt>
field.  The version number is specified in the <tt class="docutils literal"><span class="pre">version</span></tt> value.  A short
description is provided in the <tt class="docutils literal"><span class="pre">description</span></tt> field.  The
<tt class="docutils literal"><span class="pre">long_description</span></tt> is conventionally the content of the README and CHANGES
file appended together.  The <tt class="docutils literal"><span class="pre">classifiers</span></tt> field is a list of <a class="reference external" href="http://pypi.python.org/pypi?%3Aaction=list_classifiers">Trove</a> classifiers
describing your application.  <tt class="docutils literal"><span class="pre">author</span></tt> and <tt class="docutils literal"><span class="pre">author_email</span></tt> are text fields
which probably don't need any description.  <tt class="docutils literal"><span class="pre">url</span></tt> is a field that should
point at your application project's URL (if any).
<tt class="docutils literal"><span class="pre">packages=find_packages()</span></tt> causes all packages within the project to be
found when packaging the application.  <tt class="docutils literal"><span class="pre">include_package_data</span></tt> will include
non-Python files when the application is packaged if those files are checked
into version control.  <tt class="docutils literal"><span class="pre">zip_safe</span></tt> indicates that this package is not safe
to use as a zipped egg; instead it will always unpack as a directory, which
is more convenient.  <tt class="docutils literal"><span class="pre">install_requires</span></tt> and <tt class="docutils literal"><span class="pre">tests_require</span></tt> indicate that
this package depends on the <tt class="docutils literal"><span class="pre">pyramid</span></tt> package.  <tt class="docutils literal"><span class="pre">test_suite</span></tt> points at
the package for our application, which means all tests found in the package
will be run when <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">test</span></tt> is invoked.  We examined <tt class="docutils literal"><span class="pre">entry_points</span></tt>
in our discussion of the <tt class="docutils literal"><span class="pre">development.ini</span></tt> file; this file defines the
<tt class="docutils literal"><span class="pre">main</span></tt> entry point that represents our project's application.</p>
<p>Usually you only need to think about the contents of the <tt class="docutils literal"><span class="pre">setup.py</span></tt> file
when distributing your application to other people, when adding Python
package dependencies, or when versioning your application for your own use.
For fun, you can try this command now:</p>
<div class="highlight-text"><div class="highlight"><pre>$ python setup.py sdist
</pre></div>
</div>
<p>This will create a tarball of your application in a <tt class="docutils literal"><span class="pre">dist</span></tt> subdirectory
named <tt class="docutils literal"><span class="pre">MyProject-0.1.tar.gz</span></tt>.  You can send this tarball to other people
who want to install and use your application.</p>
</div>
</div>
<div class="section" id="the-myproject-package">
<span id="index-12"></span><h2>The <tt class="docutils literal"><span class="pre">myproject</span></tt> <a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">Package</em></a><a class="headerlink" href="#the-myproject-package" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">myproject</span></tt> <a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">package</em></a> lives inside the <tt class="docutils literal"><span class="pre">MyProject</span></tt>
<a class="reference internal" href="../glossary.html#term-project"><em class="xref std std-term">project</em></a>.  It contains:</p>
<ol class="arabic simple">
<li>An <tt class="docutils literal"><span class="pre">__init__.py</span></tt> file signifies that this is a Python <a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">package</em></a>.
It also contains code that helps users run the application, including a
<tt class="docutils literal"><span class="pre">main</span></tt> function which is used as a entry point for commands such as
<tt class="docutils literal"><span class="pre">pserve</span></tt>, <tt class="docutils literal"><span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">pviews</span></tt>, and others.</li>
<li>A <tt class="docutils literal"><span class="pre">templates</span></tt> directory, which contains <a class="reference internal" href="../glossary.html#term-chameleon"><em class="xref std std-term">Chameleon</em></a> (or
other types of) templates.</li>
<li>A <tt class="docutils literal"><span class="pre">tests.py</span></tt> module, which contains unit test code for the
application.</li>
<li>A <tt class="docutils literal"><span class="pre">views.py</span></tt> module, which contains view code for the
application.</li>
</ol>
<p>These are purely conventions established by the scaffold:
<span>Pyramid</span> doesn't insist that you name things in any particular way.
However, it's generally a good idea to follow Pyramid standards for naming,
so that other Pyramid developers can get up to speed quickly on your code
when you need help.</p>
<div class="section" id="init-py">
<span id="index-13"></span><span id="id3"></span><h3><tt class="docutils literal"><span class="pre">__init__.py</span></tt><a class="headerlink" href="#init-py" title="Permalink to this headline">¶</a></h3>
<p>We need a small Python module that configures our application and which
advertises an entry point for use by our <a class="reference internal" href="../glossary.html#term-pastedeploy"><em class="xref std std-term">PasteDeploy</em></a> <tt class="docutils literal"><span class="pre">.ini</span></tt> file.
This is the file named <tt class="docutils literal"><span class="pre">__init__.py</span></tt>.  The presence of an <tt class="docutils literal"><span class="pre">__init__.py</span></tt>
also informs Python that the directory which contains it is a <em>package</em>.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This function returns a Pyramid WSGI application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s">&#39;pyramid_chameleon&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_static_view</span><span class="p">(</span><span class="s">&#39;static&#39;</span><span class="p">,</span> <span class="s">&#39;static&#39;</span><span class="p">,</span> <span class="n">cache_max_age</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;home&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic">
<li><p class="first">Line 1 imports the <a class="reference internal" href="../glossary.html#term-configurator"><em class="xref std std-term">Configurator</em></a> class from <a class="reference internal" href="../api/config.html#module-pyramid.config" title="pyramid.config"><tt class="xref py py-mod docutils literal"><span class="pre">pyramid.config</span></tt></a>
that we use later.</p>
</li>
<li><p class="first">Lines 4-12 define a function named <tt class="docutils literal"><span class="pre">main</span></tt> that returns a <span>Pyramid</span>
WSGI application.  This function is meant to be called by the
<a class="reference internal" href="../glossary.html#term-pastedeploy"><em class="xref std std-term">PasteDeploy</em></a> framework as a result of running <tt class="docutils literal"><span class="pre">pserve</span></tt>.</p>
<p>Within this function, application configuration is performed.</p>
<p>Line 7 creates an instance of a <a class="reference internal" href="../glossary.html#term-configurator"><em class="xref std std-term">Configurator</em></a>.</p>
<p>Line 8 adds support for Chameleon templating bindings, allowing us to
specify renderers with the <tt class="docutils literal"><span class="pre">.pt</span></tt> extension.</p>
<p>Line 9 registers a static view, which will serve up the files from the
<tt class="docutils literal"><span class="pre">myproject:static</span></tt> <a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset specification</em></a> (the <tt class="docutils literal"><span class="pre">static</span></tt>
directory of the <tt class="docutils literal"><span class="pre">myproject</span></tt> package).</p>
<p>Line 10 adds a <a class="reference internal" href="../glossary.html#term-route"><em class="xref std std-term">route</em></a> to the configuration.  This route is later
used by a view in the <tt class="docutils literal"><span class="pre">views</span></tt> module.</p>
<p>Line 11 calls <tt class="docutils literal"><span class="pre">config.scan()</span></tt>, which picks up view registrations declared
elsewhere in the package (in this case, in the <tt class="docutils literal"><span class="pre">views.py</span></tt> module).</p>
<p>Line 12 returns a <a class="reference internal" href="../glossary.html#term-wsgi"><em class="xref std std-term">WSGI</em></a> application to the caller of the function
(Pyramid's pserve).</p>
</li>
</ol>
</div>
<div class="section" id="views-py">
<span id="index-14"></span><h3><tt class="docutils literal"><span class="pre">views.py</span></tt><a class="headerlink" href="#views-py" title="Permalink to this headline">¶</a></h3>
<p>Much of the heavy lifting in a <span>Pyramid</span> application is done by <em>view
callables</em>.  A <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a> is the main tool of a <span>Pyramid</span> web
application developer; it is a bit of code which accepts a <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a>
and which returns a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a>.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>


<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;home&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s">&#39;templates/mytemplate.pt&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">&#39;project&#39;</span><span class="p">:</span> <span class="s">&#39;MyProject&#39;</span><span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Lines 4-6 define and register a <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a> named <tt class="docutils literal"><span class="pre">my_view</span></tt>.  The
function named <tt class="docutils literal"><span class="pre">my_view</span></tt> is decorated with a <tt class="docutils literal"><span class="pre">view_config</span></tt> decorator
(which is processed by the <tt class="docutils literal"><span class="pre">config.scan()</span></tt> line in our <tt class="docutils literal"><span class="pre">__init__.py</span></tt>).
The view_config decorator asserts that this view be found when a
<a class="reference internal" href="../glossary.html#term-route"><em class="xref std std-term">route</em></a> named <tt class="docutils literal"><span class="pre">home</span></tt> is matched.  In our case, because our
<tt class="docutils literal"><span class="pre">__init__.py</span></tt> maps the route named <tt class="docutils literal"><span class="pre">home</span></tt> to the URL pattern <tt class="docutils literal"><span class="pre">/</span></tt>, this
route will match when a visitor visits the root URL.  The view_config
decorator also names a <tt class="docutils literal"><span class="pre">renderer</span></tt>, which in this case is a template that
will be used to render the result of the view callable.  This particular view
declaration points at <tt class="docutils literal"><span class="pre">templates/mytemplate.pt</span></tt>, which is a <a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset
specification</em></a> that specifies the <tt class="docutils literal"><span class="pre">mytemplate.pt</span></tt> file within the
<tt class="docutils literal"><span class="pre">templates</span></tt> directory of the <tt class="docutils literal"><span class="pre">myproject</span></tt> package.  The asset
specification could have also been specified as
<tt class="docutils literal"><span class="pre">myproject:templates/mytemplate.pt</span></tt>; the leading package name and colon is
optional.  The template file pointed to is a <a class="reference internal" href="../glossary.html#term-chameleon"><em class="xref std std-term">Chameleon</em></a> ZPT
template file (<tt class="docutils literal"><span class="pre">templates/my_template.pt</span></tt>).</p>
<p>This view callable function is handed a single piece of information: the
<a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a>.  The <em>request</em> is an instance of the <a class="reference internal" href="../glossary.html#term-webob"><em class="xref std std-term">WebOb</em></a>
<tt class="docutils literal"><span class="pre">Request</span></tt> class representing the browser's request to our server.</p>
<p>This view is configured to invoke a <a class="reference internal" href="../glossary.html#term-renderer"><em class="xref std std-term">renderer</em></a> on a template.  The
dictionary the view returns (on line 6) provides the value the renderer
substitutes into the template when generating HTML.  The renderer then
returns the HTML in a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dictionaries provide values to <a class="reference internal" href="../glossary.html#term-template"><em class="xref std std-term">template</em></a>s.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When the application is run with the scaffold's <a class="reference internal" href="#myproject-ini"><em>default
development.ini</em></a> configuration <a class="reference internal" href="#myproject-ini-logging"><em>logging is set up</em></a> to aid debugging.  If an exception is raised,
uncaught tracebacks are displayed after the startup messages on <a class="reference internal" href="#running-the-project-application"><em>the
console running the server</em></a>. Also
<tt class="docutils literal"><span class="pre">print()</span></tt> statements may be inserted into the application for debugging
to send output to this console.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><tt class="docutils literal"><span class="pre">development.ini</span></tt> has a setting that controls how templates are
reloaded, <tt class="docutils literal"><span class="pre">pyramid.reload_templates</span></tt>.</p>
<ul class="last simple">
<li>When set to <tt class="docutils literal"><span class="pre">True</span></tt> (as in the scaffold <tt class="docutils literal"><span class="pre">development.ini</span></tt>) changed
templates automatically reload without a server restart.  This is
convenient while developing, but slows template rendering speed.</li>
<li>When set to <tt class="docutils literal"><span class="pre">False</span></tt> (the default value), changing templates requires
a server restart to reload them.  Production applications should use
<tt class="docutils literal"><span class="pre">pyramid.reload_templates</span> <span class="pre">=</span> <span class="pre">False</span></tt>.</li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference internal" href="renderers.html#views-which-use-a-renderer"><em>Writing View Callables Which Use a Renderer</em></a> for more information
about how views, renderers, and templates relate and cooperate.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Pyramid can also dynamically reload changed Python files.  See also
<a class="reference internal" href="#reloading-code"><em>Reloading Code</em></a>.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also the <a class="reference internal" href="#debug-toolbar"><em>The Debug Toolbar</em></a>, which provides interactive access to
your application's internals and, should an exception occur, allows
interactive access to traceback execution stack frames from the Python
interpreter.</p>
</div>
</div>
<div class="section" id="static">
<span id="index-15"></span><h3><tt class="docutils literal"><span class="pre">static</span></tt><a class="headerlink" href="#static" title="Permalink to this headline">¶</a></h3>
<p>This directory contains static assets which support the <tt class="docutils literal"><span class="pre">mytemplate.pt</span></tt>
template.  It includes CSS and images.</p>
</div>
<div class="section" id="templates-mytemplate-pt">
<h3><tt class="docutils literal"><span class="pre">templates/mytemplate.pt</span></tt><a class="headerlink" href="#templates-mytemplate-pt" title="Permalink to this headline">¶</a></h3>
<p>The single <a class="reference internal" href="../glossary.html#term-chameleon"><em class="xref std std-term">Chameleon</em></a> template that exists in the project.  Its
contents are too long to show here, but it displays a default page when
rendered.  It is referenced by the call to <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> as the
<tt class="docutils literal"><span class="pre">renderer</span></tt> of the <tt class="docutils literal"><span class="pre">my_view</span></tt> view callable in the <tt class="docutils literal"><span class="pre">views.py</span></tt> file.  See
<a class="reference internal" href="renderers.html#views-which-use-a-renderer"><em>Writing View Callables Which Use a Renderer</em></a> for more information about renderers.</p>
<p>Templates are accessed and used by view configurations and sometimes by view
functions themselves.  See <a class="reference internal" href="templates.html#templates-used-directly"><em>Using Templates Directly</em></a> and
<a class="reference internal" href="templates.html#templates-used-as-renderers"><em>Templates Used as Renderers via Configuration</em></a>.</p>
</div>
<div class="section" id="tests-py">
<span id="index-16"></span><h3><tt class="docutils literal"><span class="pre">tests.py</span></tt><a class="headerlink" href="#tests-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">tests.py</span></tt> module includes unit tests for your application.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">pyramid</span> <span class="kn">import</span> <span class="n">testing</span>


<span class="k">class</span> <span class="nc">ViewTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">testing</span><span class="o">.</span><span class="n">tearDown</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_my_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">my_view</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">testing</span><span class="o">.</span><span class="n">DummyRequest</span><span class="p">()</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s">&#39;project&#39;</span><span class="p">],</span> <span class="s">&#39;MyProject&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This sample <tt class="docutils literal"><span class="pre">tests.py</span></tt> file has a single unit test defined within it.  This
test is executed when you run <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></tt>.  You may add more
tests here as you build your application.  You are not required to write
tests to use <span>Pyramid</span>, this file is simply provided as convenience and
example.</p>
<p>See <a class="reference internal" href="testing.html#testing-chapter"><em>Unit, Integration, and Functional Testing</em></a> for more information about writing <span>Pyramid</span>
unit tests.</p>
</div>
</div>
<div class="section" id="modifying-package-structure">
<span id="index-17"></span><span id="id4"></span><h2>Modifying Package Structure<a class="headerlink" href="#modifying-package-structure" title="Permalink to this headline">¶</a></h2>
<p>It is best practice for your application's code layout to not stray too much
from accepted Pyramid scaffold defaults.  If you refrain from changing
things very much, other Pyramid coders will be able to more quickly
understand your application.  However, the code layout choices made for you
by a scaffold are in no way magical or required.  Despite the choices
made for you by any scaffold, you can decide to lay your code out any
way you see fit.</p>
<p>For example, the configuration method named
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">add_view()</span></tt></a> requires you to pass a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><em class="xref std std-term">dotted Python name</em></a> or a direct object reference as the class or
function to be used as a view.  By default, the <tt class="docutils literal"><span class="pre">starter</span></tt> scaffold would
have you add view functions to the <tt class="docutils literal"><span class="pre">views.py</span></tt> module in your package.
However, you might be more comfortable creating a <tt class="docutils literal"><span class="pre">views</span></tt> <em>directory</em>, and
adding a single file for each view.</p>
<p>If your project package name was <tt class="docutils literal"><span class="pre">myproject</span></tt> and you wanted to arrange all
your views in a Python subpackage within the <tt class="docutils literal"><span class="pre">myproject</span></tt> <a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">package</em></a>
named <tt class="docutils literal"><span class="pre">views</span></tt> instead of within a single <tt class="docutils literal"><span class="pre">views.py</span></tt> file, you might:</p>
<ul class="simple">
<li>Create a <tt class="docutils literal"><span class="pre">views</span></tt> directory inside your <tt class="docutils literal"><span class="pre">myproject</span></tt> package directory
(the same directory which holds <tt class="docutils literal"><span class="pre">views.py</span></tt>).</li>
<li>Create a file within the new <tt class="docutils literal"><span class="pre">views</span></tt> directory named <tt class="docutils literal"><span class="pre">__init__.py</span></tt>.  (It
can be empty.  This just tells Python that the <tt class="docutils literal"><span class="pre">views</span></tt> directory is a
<em>package</em>.)</li>
<li><em>Move</em> the content from the existing <tt class="docutils literal"><span class="pre">views.py</span></tt> file to a file inside the
new <tt class="docutils literal"><span class="pre">views</span></tt> directory named, say, <tt class="docutils literal"><span class="pre">blog.py</span></tt>.  Because the <tt class="docutils literal"><span class="pre">templates</span></tt>
directory remains in the <tt class="docutils literal"><span class="pre">myproject</span></tt> package, the template <a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset
specification</em></a> values in <tt class="docutils literal"><span class="pre">blog.py</span></tt> must now be fully qualified with the
project's package name (<tt class="docutils literal"><span class="pre">myproject:templates/blog.pt</span></tt>).</li>
</ul>
<p>You can then continue to add view callable functions to the <tt class="docutils literal"><span class="pre">blog.py</span></tt>
module, but you can also add other <tt class="docutils literal"><span class="pre">.py</span></tt> files which contain view callable
functions to the <tt class="docutils literal"><span class="pre">views</span></tt> directory.  As long as you use the
<tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> directive to register views in conjunction with
<tt class="docutils literal"><span class="pre">config.scan()</span></tt> they will be picked up automatically when the application
is restarted.</p>
</div>
<div class="section" id="using-the-interactive-shell">
<h2>Using the Interactive Shell<a class="headerlink" href="#using-the-interactive-shell" title="Permalink to this headline">¶</a></h2>
<p>It is possible to use the <tt class="docutils literal"><span class="pre">pshell</span></tt> command to load a Python interpreter
prompt with a similar configuration as would be loaded if you were running
your Pyramid application via <tt class="docutils literal"><span class="pre">pserve</span></tt>.  This can be a useful debugging tool.
See <a class="reference internal" href="commandline.html#interactive-shell"><em>The Interactive Shell</em></a> for more details.</p>
</div>
<div class="section" id="what-is-this-pserve-thing">
<span id="id5"></span><h2>What Is This <tt class="docutils literal"><span class="pre">pserve</span></tt> Thing<a class="headerlink" href="#what-is-this-pserve-thing" title="Permalink to this headline">¶</a></h2>
<p>The code generated by an <span>Pyramid</span> scaffold assumes that you will be
using the <tt class="docutils literal"><span class="pre">pserve</span></tt> command to start your application while you do
development.  <tt class="docutils literal"><span class="pre">pserve</span></tt> is a command that reads a <a class="reference internal" href="../glossary.html#term-pastedeploy"><em class="xref std std-term">PasteDeploy</em></a>
<tt class="docutils literal"><span class="pre">.ini</span></tt> file (e.g. <tt class="docutils literal"><span class="pre">development.ini</span></tt>) and configures a server to serve a
Pyramid application based on the data in the file.</p>
<p><tt class="docutils literal"><span class="pre">pserve</span></tt> is by no means the only way to start up and serve a <span>Pyramid</span>
application.  As we saw in <a class="reference internal" href="firstapp.html#firstapp-chapter"><em>Creating Your First Pyramid Application</em></a>, <tt class="docutils literal"><span class="pre">pserve</span></tt> needn't be
invoked at all to run a <span>Pyramid</span> application.  The use of <tt class="docutils literal"><span class="pre">pserve</span></tt> to
run a <span>Pyramid</span> application is purely conventional based on the output
of its scaffolding.  But we strongly recommend using <tt class="docutils literal"><span class="pre">pserve</span></tt> while
developing your application, because many other convenience introspection
commands (such as <tt class="docutils literal"><span class="pre">pviews</span></tt>, <tt class="docutils literal"><span class="pre">prequest</span></tt>, <tt class="docutils literal"><span class="pre">proutes</span></tt> and others) are also
implemented in terms of configuration availability of this <tt class="docutils literal"><span class="pre">.ini</span></tt> file
format.  It also configures Pyramid logging and provides the <tt class="docutils literal"><span class="pre">--reload</span></tt>
switch for convenient restarting of the server when code changes.</p>
</div>
<div class="section" id="using-an-alternate-wsgi-server">
<span id="alternate-wsgi-server"></span><h2>Using an Alternate WSGI Server<a class="headerlink" href="#using-an-alternate-wsgi-server" title="Permalink to this headline">¶</a></h2>
<p>Pyramid scaffolds generate projects which use the <a class="reference internal" href="../glossary.html#term-waitress"><em class="xref std std-term">Waitress</em></a> WSGI
server.  Waitress is a server that is suited for development and light
production usage.  It's not the fastest nor the most featureful WSGI server.
Instead, its main feature is that it works on all platforms that Pyramid
needs to run on, making it a good choice as a default server from the
perspective of Pyramid's developers.</p>
<p>Any WSGI server is capable of running a <span>Pyramid</span> application.  But we
suggest you stick with the default server for development, and that you wait
to investigate other server options until you're ready to deploy your
application to production.  Unless for some reason you need to develop on a
non-local system, investigating alternate server options is usually a
distraction until you're ready to deploy.  But we recommend developing using
the default configuration on a local system that you have complete control
over; it will provide the best development experience.</p>
<p>One popular production alternative to the default Waitress server is
<a class="reference internal" href="../glossary.html#term-mod-wsgi"><em class="xref std std-term">mod_wsgi</em></a>. You can use mod_wsgi to serve your <span>Pyramid</span>
application using the Apache web server rather than any &quot;pure-Python&quot; server
like Waitress.  It is fast and featureful.  See <a class="reference internal" href="../tutorials/modwsgi/index.html#modwsgi-tutorial"><em>Running a Pyramid Application under mod_wsgi</em></a> for
details.</p>
<p>Another good production alternative is <a class="reference internal" href="../glossary.html#term-green-unicorn"><em class="xref std std-term">Green Unicorn</em></a> (aka
<tt class="docutils literal"><span class="pre">gunicorn</span></tt>).  It's faster than Waitress and slightly easier to configure
than mod_wsgi, although it depends, in its default configuration, on having a
buffering HTTP proxy in front of it.  It does not, as of this writing, work
on Windows.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Creating a <span>Pyramid</span> Project</a><ul>
<li><a class="reference internal" href="#scaffolds-included-with-pyramid">Scaffolds Included with <span>Pyramid</span></a></li>
<li><a class="reference internal" href="#creating-the-project">Creating the Project</a></li>
<li><a class="reference internal" href="#installing-your-newly-created-project-for-development">Installing your Newly Created Project for Development</a></li>
<li><a class="reference internal" href="#running-the-tests-for-your-application">Running The Tests For Your Application</a></li>
<li><a class="reference internal" href="#running-the-project-application">Running The Project Application</a><ul>
<li><a class="reference internal" href="#reloading-code">Reloading Code</a></li>
</ul>
</li>
<li><a class="reference internal" href="#viewing-the-application">Viewing the Application</a><ul>
<li><a class="reference internal" href="#the-debug-toolbar">The Debug Toolbar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-project-structure">The Project Structure</a></li>
<li><a class="reference internal" href="#the-myproject-project">The <tt class="docutils literal"><span class="pre">MyProject</span></tt> <tt class="docutils literal"><span class="pre">Project</span></tt></a><ul>
<li><a class="reference internal" href="#development-ini"><tt class="docutils literal"><span class="pre">development.ini</span></tt></a></li>
<li><a class="reference internal" href="#production-ini"><tt class="docutils literal"><span class="pre">production.ini</span></tt></a></li>
<li><a class="reference internal" href="#manifest-in"><tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt></a></li>
<li><a class="reference internal" href="#setup-py"><tt class="docutils literal"><span class="pre">setup.py</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-myproject-package">The <tt class="docutils literal"><span class="pre">myproject</span></tt> <tt class="docutils literal"><span class="pre">Package</span></tt></a><ul>
<li><a class="reference internal" href="#init-py"><tt class="docutils literal"><span class="pre">__init__.py</span></tt></a></li>
<li><a class="reference internal" href="#views-py"><tt class="docutils literal"><span class="pre">views.py</span></tt></a></li>
<li><a class="reference internal" href="#static"><tt class="docutils literal"><span class="pre">static</span></tt></a></li>
<li><a class="reference internal" href="#templates-mytemplate-pt"><tt class="docutils literal"><span class="pre">templates/mytemplate.pt</span></tt></a></li>
<li><a class="reference internal" href="#tests-py"><tt class="docutils literal"><span class="pre">tests.py</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#modifying-package-structure">Modifying Package Structure</a></li>
<li><a class="reference internal" href="#using-the-interactive-shell">Using the Interactive Shell</a></li>
<li><a class="reference internal" href="#what-is-this-pserve-thing">What Is This <tt class="docutils literal"><span class="pre">pserve</span></tt> Thing</a></li>
<li><a class="reference internal" href="#using-an-alternate-wsgi-server">Using an Alternate WSGI Server</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="configuration.html"
                        title="previous chapter">Application Configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="startup.html"
                        title="next chapter">Startup</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="startup.html" title="Startup"
             >next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Application Configuration"
             >previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>