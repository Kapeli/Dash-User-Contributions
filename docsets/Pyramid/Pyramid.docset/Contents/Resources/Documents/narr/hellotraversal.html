<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Hello Traversal World &mdash; The Pyramid Web Framework v1.5</title>
    
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="The Pyramid Web Framework v1.5" href="../index.html" />
    <link rel="next" title="Much Ado About Traversal" href="muchadoabouttraversal.html" />
    <link rel="prev" title="Resources" href="resources.html" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head>
  <body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="muchadoabouttraversal.html" title="Much Ado About Traversal"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="resources.html" title="Resources"
             accesskey="P">previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="hello-traversal-world">
<span id="hello-traversal-chapter"></span><h1>Hello Traversal World<a class="headerlink" href="#hello-traversal-world" title="Permalink to this headline">¶</a></h1>
<p id="index-0">Traversal is an alternative to URL dispatch which allows Pyramid
applications to map URLs to code.</p>
<p>If code speaks louder than words, maybe this will help. Here is a
single-file Pyramid application that uses traversal:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">wsgiref.simple_server</span> <span class="kn">import</span> <span class="n">make_server</span>
<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">class</span> <span class="nc">Resource</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">get_root</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Resource</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="n">Resource</span><span class="p">({</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="n">Resource</span><span class="p">({</span><span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="n">Resource</span><span class="p">()})})})</span>

<span class="k">def</span> <span class="nf">hello_world_of_resources</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s">&quot;Here&#39;s a resource and its children: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">context</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">root_factory</span><span class="o">=</span><span class="n">get_root</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">hello_world_of_resources</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">Resource</span><span class="p">)</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">make_server</span><span class="p">(</span><span class="s">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>You may notice that this application is intentionally very similar to
the &quot;hello world&quot; app from <a class="reference internal" href="firstapp.html"><em>Creating Your First Pyramid Application</em></a>.</p>
<p>On lines 5-6, we create a trivial <a class="reference internal" href="../glossary.html#term-resource"><em class="xref std std-term">resource</em></a> class that's just a
dictionary subclass.</p>
<p>On lines 8-9, we hard-code a <a class="reference internal" href="../glossary.html#term-resource-tree"><em class="xref std std-term">resource tree</em></a> in our <a class="reference internal" href="../glossary.html#term-root-factory"><em class="xref std std-term">root
factory</em></a> function.</p>
<p>On lines 11-13 we define a single <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a> that can
display a single instance of our Resource class, passed as the
<tt class="docutils literal"><span class="pre">context</span></tt> argument.</p>
<p>The rest of the file sets up and serves our pyramid WSGI app.  Line 18
is where our view gets configured for use whenever the traversal ends
with an instance of our Resource class.</p>
<p>Interestingly, there are no URLs explicitly configured in this
application. Instead, the URL space is defined entirely by the keys in
the resource tree.</p>
<div class="section" id="example-requests">
<h2>Example requests<a class="headerlink" href="#example-requests" title="Permalink to this headline">¶</a></h2>
<p>If this example is running on <a class="reference external" href="http://localhost:8080">http://localhost:8080</a>, and the user
browses to <a class="reference external" href="http://localhost:8080/a/b">http://localhost:8080/a/b</a>, Pyramid will call
<tt class="docutils literal"><span class="pre">get_root(request)</span></tt> to get the root resource, then traverse the tree
from there by key; starting from the root, it will find the child with
key <tt class="docutils literal"><span class="pre">&quot;a&quot;</span></tt>, then its child with key <tt class="docutils literal"><span class="pre">&quot;b&quot;</span></tt>; then use that as the
<tt class="docutils literal"><span class="pre">context</span></tt> argument for calling <tt class="docutils literal"><span class="pre">hello_world_of_resources</span></tt>.</p>
<p>Or, if the user browses to <a class="reference external" href="http://localhost:8080/">http://localhost:8080/</a> , Pyramid will
stop at the root - the outermost Resource instance, in this case - and
use that as the <tt class="docutils literal"><span class="pre">context</span></tt> argument to the same view.</p>
<p>Or, if the user browses to a key that doesn't exist in this resource
tree, like <a class="reference external" href="http://localhost:8080/xyz">http://localhost:8080/xyz</a> or
<a class="reference external" href="http://localhost:8080/a/b/c/d">http://localhost:8080/a/b/c/d</a>, the traversal will end by raising a
KeyError, and Pyramid will turn that into a 404 HTTP response.</p>
<p>A more complicated application could have many types of resources,
with different view callables defined for each type, and even multiple
views for each type.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p>Full technical details may be found in <a class="reference internal" href="traversal.html"><em>Traversal</em></a>.</p>
<p class="last">For more about <em>why</em> you might use traversal, see
<a class="reference internal" href="muchadoabouttraversal.html"><em>Much Ado About Traversal</em></a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Hello Traversal World</a><ul>
<li><a class="reference internal" href="#example-requests">Example requests</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="resources.html"
                        title="previous chapter">Resources</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="muchadoabouttraversal.html"
                        title="next chapter">Much Ado About Traversal</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="muchadoabouttraversal.html" title="Much Ado About Traversal"
             >next</a> |</li>
        <li class="right" >
          <a href="resources.html" title="Resources"
             >previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>