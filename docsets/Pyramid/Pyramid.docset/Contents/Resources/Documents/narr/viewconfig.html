<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>View Configuration &mdash; The Pyramid Web Framework v1.5</title>
    
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="The Pyramid Web Framework v1.5" href="../index.html" />
    <link rel="next" title="Static Assets" href="assets.html" />
    <link rel="prev" title="Templates" href="templates.html" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head>
  <body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="assets.html" title="Static Assets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="templates.html" title="Templates"
             accesskey="P">previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="view-lookup">
<span id="view-configuration"></span><span id="view-config-chapter"></span><span id="id1"></span><h1>View Configuration<a class="headerlink" href="#view-lookup" title="Permalink to this headline">¶</a></h1>
<p id="index-0"><a class="reference internal" href="../glossary.html#term-view-lookup"><em class="xref std std-term">View lookup</em></a> is the <span>Pyramid</span> subsystem responsible for finding
and invoking a <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a>.  <a class="reference internal" href="../glossary.html#term-view-configuration"><em class="xref std std-term">View configuration</em></a> controls how
<a class="reference internal" href="../glossary.html#term-view-lookup"><em class="xref std std-term">view lookup</em></a> operates in your application.  During any given request,
view configuration information is compared against request data by the view
lookup subsystem in order to find the &quot;best&quot; view callable for that request.</p>
<p>In earlier chapters, you have been exposed to a few simple view configuration
declarations without much explanation. In this chapter we will explore the
subject in detail.</p>
<div class="section" id="mapping-a-resource-or-url-pattern-to-a-view-callable">
<span id="index-1"></span><h2>Mapping a Resource or URL Pattern to a View Callable<a class="headerlink" href="#mapping-a-resource-or-url-pattern-to-a-view-callable" title="Permalink to this headline">¶</a></h2>
<p>A developer makes a <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a> available for use within a
<span>Pyramid</span> application via <a class="reference internal" href="../glossary.html#term-view-configuration"><em class="xref std std-term">view configuration</em></a>.  A view
configuration associates a view callable with a set of statements that
determine the set of circumstances which must be true for the view callable
to be invoked.</p>
<p>A view configuration statement is made about information present in the
<a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a> resource and the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a>.</p>
<p>View configuration is performed in one of two ways:</p>
<ul class="simple">
<li>By running a <a class="reference internal" href="../glossary.html#term-scan"><em class="xref std std-term">scan</em></a> against application source code which has a
<a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.view_config</span></tt></a> decorator attached to a Python object as
per <a class="reference internal" href="#mapping-views-using-a-decorator-section"><em>Adding View Configuration Using the &#64;view_config Decorator</em></a>.</li>
<li>By using the <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a> method as per
<a class="reference internal" href="#mapping-views-using-imperative-config-section"><em>Adding View Configuration Using add_view()</em></a>.</li>
</ul>
<div class="section" id="view-configuration-parameters">
<span id="index-2"></span><span id="id2"></span><h3>View Configuration Parameters<a class="headerlink" href="#view-configuration-parameters" title="Permalink to this headline">¶</a></h3>
<p>All forms of view configuration accept the same general types of arguments.</p>
<p>Many arguments supplied during view configuration are <a class="reference internal" href="../glossary.html#term-view-predicate"><em class="xref std std-term">view predicate</em></a>
arguments.  View predicate arguments used during view configuration are used
to narrow the set of circumstances in which <a class="reference internal" href="../glossary.html#term-view-lookup"><em class="xref std std-term">view lookup</em></a> will find a
particular view callable.</p>
<p><a class="reference internal" href="../glossary.html#term-view-predicate"><em class="xref std std-term">View predicate</em></a> attributes are an important part of view configuration
that enables the <a class="reference internal" href="../glossary.html#term-view-lookup"><em class="xref std std-term">view lookup</em></a> subsystem to find and invoke the
appropriate view.  The greater the number of predicate attributes possessed by a
view's configuration, the more specific the circumstances need to be before
the registered view callable will be invoked.  The fewer the number of predicates
which are supplied to a particular view configuration, the more likely it is
that the associated view callable will be invoked.  A view with five
predicates will always be found and evaluated before a view with two, for
example.</p>
<p>This does not mean however, that <span>Pyramid</span> &quot;stops looking&quot; when it
finds a view registration with predicates that don't match.  If one set
of view predicates does not match, the &quot;next most specific&quot; view (if
any) is consulted for predicates, and so on, until a view is found, or
no view can be matched up with the request.  The first view with a set
of predicates all of which match the request environment will be
invoked.</p>
<p>If no view can be found with predicates which allow it to be matched up with
the request, <span>Pyramid</span> will return an error to the user's browser,
representing a &quot;not found&quot; (404) page.  See <a class="reference internal" href="hooks.html#changing-the-notfound-view"><em>Changing the Not Found View</em></a>
for more information about changing the default <a class="reference internal" href="../glossary.html#term-not-found-view"><em class="xref std std-term">Not Found View</em></a>.</p>
<p>Other view configuration arguments are non-predicate arguments.  These tend
to modify the response of the view callable or prevent the view callable from
being invoked due to an authorization policy.  The presence of non-predicate
arguments in a view configuration does not narrow the circumstances in which
the view callable will be invoked.</p>
<div class="section" id="non-predicate-arguments">
<span id="nonpredicate-view-args"></span><h4>Non-Predicate Arguments<a class="headerlink" href="#non-predicate-arguments" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">permission</span></tt></dt>
<dd><p class="first">The name of a <a class="reference internal" href="../glossary.html#term-permission"><em class="xref std std-term">permission</em></a> that the user must possess in order to
invoke the <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a>.  See <a class="reference internal" href="#view-security-section"><em>Configuring View Security</em></a> for
more information about view security and permissions.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">permission</span></tt> is not supplied, no permission is registered for this
view (it's accessible by any caller).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">attr</span></tt></dt>
<dd><p class="first">The view machinery defaults to using the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of the
<a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a> (or the function itself, if the view callable is a
function) to obtain a response.  The <tt class="docutils literal"><span class="pre">attr</span></tt> value allows you to vary the
method attribute used to obtain the response.  For example, if your view
was a class, and the class has a method named <tt class="docutils literal"><span class="pre">index</span></tt> and you wanted to
use this method instead of the class' <tt class="docutils literal"><span class="pre">__call__</span></tt> method to return the
response, you'd say <tt class="docutils literal"><span class="pre">attr=&quot;index&quot;</span></tt> in the view configuration for the
view.  This is most useful when the view definition is a class.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">attr</span></tt> is not supplied, <tt class="docutils literal"><span class="pre">None</span></tt> is used (implying the function itself
if the view is a function, or the <tt class="docutils literal"><span class="pre">__call__</span></tt> callable attribute if the
view is a class).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">renderer</span></tt></dt>
<dd><p class="first">Denotes the <a class="reference internal" href="../glossary.html#term-renderer"><em class="xref std std-term">renderer</em></a> implementation which will be used to construct
a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a> from the associated view callable's return value.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">See also <a class="reference internal" href="renderers.html#renderers-chapter"><em>Renderers</em></a>.</p>
</div>
<p>This is either a single string term (e.g. <tt class="docutils literal"><span class="pre">json</span></tt>) or a string implying a
path or <a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset specification</em></a> (e.g. <tt class="docutils literal"><span class="pre">templates/views.pt</span></tt>) naming a
<a class="reference internal" href="../glossary.html#term-renderer"><em class="xref std std-term">renderer</em></a> implementation.  If the <tt class="docutils literal"><span class="pre">renderer</span></tt> value does not
contain a dot (<tt class="docutils literal"><span class="pre">.</span></tt>), the specified string will be used to look up a
renderer implementation, and that renderer implementation will be used to
construct a response from the view return value.  If the <tt class="docutils literal"><span class="pre">renderer</span></tt> value
contains a dot (<tt class="docutils literal"><span class="pre">.</span></tt>), the specified term will be treated as a path, and
the filename extension of the last element in the path will be used to look
up the renderer implementation, which will be passed the full path.</p>
<p>When the renderer is a path, although a path is usually just a simple
relative pathname (e.g. <tt class="docutils literal"><span class="pre">templates/foo.pt</span></tt>, implying that a template
named &quot;foo.pt&quot; is in the &quot;templates&quot; directory relative to the directory of
the current <a class="reference internal" href="../glossary.html#term-package"><em class="xref std std-term">package</em></a>), a path can be absolute, starting with a slash
on UNIX or a drive letter prefix on Windows.  The path can alternately be a
<a class="reference internal" href="../glossary.html#term-asset-specification"><em class="xref std std-term">asset specification</em></a> in the form
<tt class="docutils literal"><span class="pre">some.dotted.package_name:relative/path</span></tt>, making it possible to address
template assets which live in a separate package.</p>
<p class="last">The <tt class="docutils literal"><span class="pre">renderer</span></tt> attribute is optional.  If it is not defined, the &quot;null&quot;
renderer is assumed (no rendering is performed and the value is passed back
to the upstream <span>Pyramid</span> machinery unchanged).  Note that if the
view callable itself returns a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a> (see <a class="reference internal" href="views.html#the-response"><em>View Callable Responses</em></a>),
the specified renderer implementation is never called.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">http_cache</span></tt></dt>
<dd><p class="first">When you supply an <tt class="docutils literal"><span class="pre">http_cache</span></tt> value to a view configuration, the
<tt class="docutils literal"><span class="pre">Expires</span></tt> and <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> headers of a response generated by the
associated view callable are modified.  The value for <tt class="docutils literal"><span class="pre">http_cache</span></tt> may be
one of the following:</p>
<ul class="simple">
<li>A nonzero integer.  If it's a nonzero integer, it's treated as a number
of seconds.  This number of seconds will be used to compute the
<tt class="docutils literal"><span class="pre">Expires</span></tt> header and the <tt class="docutils literal"><span class="pre">Cache-Control:</span> <span class="pre">max-age</span></tt> parameter of
responses to requests which call this view.  For example:
<tt class="docutils literal"><span class="pre">http_cache=3600</span></tt> instructs the requesting browser to 'cache this
response for an hour, please'.</li>
<li>A <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt> instance.  If it's a <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt>
instance, it will be converted into a number of seconds, and that number
of seconds will be used to compute the <tt class="docutils literal"><span class="pre">Expires</span></tt> header and the
<tt class="docutils literal"><span class="pre">Cache-Control:</span> <span class="pre">max-age</span></tt> parameter of responses to requests which call
this view.  For example: <tt class="docutils literal"><span class="pre">http_cache=datetime.timedelta(days=1)</span></tt>
instructs the requesting browser to 'cache this response for a day,
please'.</li>
<li>Zero (<tt class="docutils literal"><span class="pre">0</span></tt>).  If the value is zero, the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> and
<tt class="docutils literal"><span class="pre">Expires</span></tt> headers present in all responses from this view will be
composed such that client browser cache (and any intermediate caches) are
instructed to never cache the response.</li>
<li>A two-tuple.  If it's a two tuple (e.g. <tt class="docutils literal"><span class="pre">http_cache=(1,</span>
<span class="pre">{'public':True})</span></tt>), the first value in the tuple may be a nonzero
integer or a <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt> instance; in either case this value
will be used as the number of seconds to cache the response.  The second
value in the tuple must be a dictionary.  The values present in the
dictionary will be used as input to the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> response
header.  For example: <tt class="docutils literal"><span class="pre">http_cache=(3600,</span> <span class="pre">{'public':True})</span></tt> means 'cache
for an hour, and add <tt class="docutils literal"><span class="pre">public</span></tt> to the Cache-Control header of the
response'.  All keys and values supported by the
<tt class="docutils literal"><span class="pre">webob.cachecontrol.CacheControl</span></tt> interface may be added to the
dictionary.  Supplying <tt class="docutils literal"><span class="pre">{'public':True}</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_control.public</span> <span class="pre">=</span> <span class="pre">True</span></tt>.</li>
</ul>
<p>Providing a non-tuple value as <tt class="docutils literal"><span class="pre">http_cache</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_expires(value)</span></tt> within your view's body.</p>
<p>Providing a two-tuple value as <tt class="docutils literal"><span class="pre">http_cache</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_expires(value[0],</span> <span class="pre">**value[1])</span></tt> within your view's body.</p>
<p class="last">If you wish to avoid influencing, the <tt class="docutils literal"><span class="pre">Expires</span></tt> header, and instead wish
to only influence <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> headers, pass a tuple as <tt class="docutils literal"><span class="pre">http_cache</span></tt>
with the first element of <tt class="docutils literal"><span class="pre">None</span></tt>, e.g.: <tt class="docutils literal"><span class="pre">(None,</span> <span class="pre">{'public':True})</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">wrapper</span></tt></dt>
<dd><p class="first">The <a class="reference internal" href="../glossary.html#term-view-name"><em class="xref std std-term">view name</em></a> of a different <a class="reference internal" href="../glossary.html#term-view-configuration"><em class="xref std std-term">view configuration</em></a> which will
receive the response body of this view as the <tt class="docutils literal"><span class="pre">request.wrapped_body</span></tt>
attribute of its own <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a>, and the <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a> returned by
this view as the <tt class="docutils literal"><span class="pre">request.wrapped_response</span></tt> attribute of its own request.
Using a wrapper makes it possible to &quot;chain&quot; views together to form a
composite response.  The response of the outermost wrapper view will be
returned to the user.  The wrapper view will be found as any view is found:
see <a class="reference internal" href="#view-lookup"><em>View Configuration</em></a>.  The &quot;best&quot; wrapper view will be found based on the
lookup ordering: &quot;under the hood&quot; this wrapper view is looked up via
<tt class="docutils literal"><span class="pre">pyramid.view.render_view_to_response(context,</span> <span class="pre">request,</span>
<span class="pre">'wrapper_viewname')</span></tt>. The context and request of a wrapper view is the
same context and request of the inner view.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">wrapper</span></tt> is not supplied, no wrapper view is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">decorator</span></tt></dt>
<dd><p class="first">A <a class="reference internal" href="../glossary.html#term-dotted-python-name"><em class="xref std std-term">dotted Python name</em></a> to a function (or the function itself) which
will be used to decorate the registered <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a>.  The
decorator function will be called with the view callable as a single
argument.  The view callable it is passed will accept <tt class="docutils literal"><span class="pre">(context,</span>
<span class="pre">request)</span></tt>.  The decorator must return a replacement view callable which
also accepts <tt class="docutils literal"><span class="pre">(context,</span> <span class="pre">request)</span></tt>. The <tt class="docutils literal"><span class="pre">decorator</span></tt> may also be an
iterable of decorators, in which case they will be applied one after the
other to the view, in reverse order. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@view_config</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">decorator</span><span class="o">=</span><span class="p">(</span><span class="n">decorator2</span><span class="p">,</span> <span class="n">decorator1</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="o">...</span>
</pre></div>
</div>
<p>Is similar to doing:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="nd">@view_config</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="nd">@decorator2</span>
<span class="nd">@decorator1</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="o">...</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">mapper</span></tt></dt>
<dd>A Python object or <a class="reference internal" href="../glossary.html#term-dotted-python-name"><em class="xref std std-term">dotted Python name</em></a> which refers to a <a class="reference internal" href="../glossary.html#term-view-mapper"><em class="xref std std-term">view
mapper</em></a>, or <tt class="docutils literal"><span class="pre">None</span></tt>.  By default it is <tt class="docutils literal"><span class="pre">None</span></tt>, which indicates that the
view should use the default view mapper.  This plug-point is useful for
Pyramid extension developers, but it's not very useful for 'civilians' who
are just developing stock Pyramid applications. Pay no attention to the man
behind the curtain.</dd>
</dl>
</div>
<div class="section" id="predicate-arguments">
<h4>Predicate Arguments<a class="headerlink" href="#predicate-arguments" title="Permalink to this headline">¶</a></h4>
<p>These arguments modify view lookup behavior. In general, the more predicate
arguments that are supplied, the more specific, and narrower the usage of the
configured view.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">name</span></tt></dt>
<dd><p class="first">The <a class="reference internal" href="../glossary.html#term-view-name"><em class="xref std std-term">view name</em></a> required to match this view callable.  A <tt class="docutils literal"><span class="pre">name</span></tt>
argument is typically only used when your application uses
<a class="reference internal" href="../glossary.html#term-traversal"><em class="xref std std-term">traversal</em></a>. Read <a class="reference internal" href="traversal.html#traversal-chapter"><em>Traversal</em></a> to understand the concept
of a view name.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">name</span></tt> is not supplied, the empty string is used (implying the default
view).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">context</span></tt></dt>
<dd><p class="first">An object representing a Python class that the <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a> resource
must be an instance of <em>or</em> the <a class="reference internal" href="../glossary.html#term-interface"><em class="xref std std-term">interface</em></a> that the <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a>
resource must provide in order for this view to be found and called.  This
predicate is true when the <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a> resource is an instance of the
represented class or if the <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a> resource provides the
represented interface; it is otherwise false.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">context</span></tt> is not supplied, the value <tt class="docutils literal"><span class="pre">None</span></tt>, which matches any
resource, is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">route_name</span></tt></dt>
<dd><p class="first">If <tt class="docutils literal"><span class="pre">route_name</span></tt> is supplied, the view callable will be invoked only when
the named route has matched.</p>
<p>This value must match the <tt class="docutils literal"><span class="pre">name</span></tt> of a <a class="reference internal" href="../glossary.html#term-route-configuration"><em class="xref std std-term">route configuration</em></a>
declaration (see <a class="reference internal" href="urldispatch.html#urldispatch-chapter"><em>URL Dispatch</em></a>) that must match before this
view will be called.  Note that the <tt class="docutils literal"><span class="pre">route</span></tt> configuration referred to by
<tt class="docutils literal"><span class="pre">route_name</span></tt> will usually have a <tt class="docutils literal"><span class="pre">*traverse</span></tt> token in the value of its
<tt class="docutils literal"><span class="pre">pattern</span></tt>, representing a part of the path that will be used by
<a class="reference internal" href="../glossary.html#term-traversal"><em class="xref std std-term">traversal</em></a> against the result of the route's <a class="reference internal" href="../glossary.html#term-root-factory"><em class="xref std std-term">root factory</em></a>.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">route_name</span></tt> is not supplied, the view callable will only have a chance
of being invoked if no other route was matched. This is when the
request/context pair found via <a class="reference internal" href="../glossary.html#term-resource-location"><em class="xref std std-term">resource location</em></a> does not indicate
it matched any configured route.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">request_type</span></tt></dt>
<dd><p class="first">This value should be an <a class="reference internal" href="../glossary.html#term-interface"><em class="xref std std-term">interface</em></a> that the <a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> must
provide in order for this view to be found and called.</p>
<p>If <tt class="docutils literal"><span class="pre">request_type</span></tt> is not supplied, the value <tt class="docutils literal"><span class="pre">None</span></tt> is used, implying
any request type.</p>
<p class="last"><em>This is an advanced feature, not often used by &quot;civilians&quot;</em>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">request_method</span></tt></dt>
<dd><p class="first">This value can be a string (typically <tt class="docutils literal"><span class="pre">&quot;GET&quot;</span></tt>, <tt class="docutils literal"><span class="pre">&quot;POST&quot;</span></tt>, <tt class="docutils literal"><span class="pre">&quot;PUT&quot;</span></tt>,
<tt class="docutils literal"><span class="pre">&quot;DELETE&quot;</span></tt>, or <tt class="docutils literal"><span class="pre">&quot;HEAD&quot;</span></tt>) representing an HTTP <tt class="docutils literal"><span class="pre">REQUEST_METHOD</span></tt>.  A view
declaration with this argument ensures that the view will only be called
when the request's <tt class="docutils literal"><span class="pre">method</span></tt> attribute (aka the <tt class="docutils literal"><span class="pre">REQUEST_METHOD</span></tt> of the
WSGI environment) string matches the supplied value.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">request_method</span></tt> is not supplied, the view will be invoked regardless
of the <tt class="docutils literal"><span class="pre">REQUEST_METHOD</span></tt> of the <a class="reference internal" href="../glossary.html#term-wsgi"><em class="xref std std-term">WSGI</em></a> environment.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">request_param</span></tt></dt>
<dd><p class="first">This value can be any string or a sequence of strings.  A view declaration
with this argument ensures that the view will only be called when the
<a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> has a key in the <tt class="docutils literal"><span class="pre">request.params</span></tt> dictionary (an HTTP
<tt class="docutils literal"><span class="pre">GET</span></tt> or <tt class="docutils literal"><span class="pre">POST</span></tt> variable) that has a name which matches the
supplied value.</p>
<p>If any value supplied has a <tt class="docutils literal"><span class="pre">=</span></tt> sign in it,
e.g. <tt class="docutils literal"><span class="pre">request_param=&quot;foo=123&quot;</span></tt>, then the key (<tt class="docutils literal"><span class="pre">foo</span></tt>) must both exist
in the <tt class="docutils literal"><span class="pre">request.params</span></tt> dictionary, <em>and</em> the value must match the right
hand side of the expression (<tt class="docutils literal"><span class="pre">123</span></tt>) for the view to &quot;match&quot; the current
request.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">request_param</span></tt> is not supplied, the view will be invoked without
consideration of keys and values in the <tt class="docutils literal"><span class="pre">request.params</span></tt> dictionary.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">match_param</span></tt></dt>
<dd><p class="first">This param may be either a single string of the format &quot;key=value&quot; or a
dict of key/value pairs.</p>
<p>This argument ensures that the view will only be called when the
<a class="reference internal" href="../glossary.html#term-request"><em class="xref std std-term">request</em></a> has key/value pairs in its <a class="reference internal" href="../glossary.html#term-matchdict"><em class="xref std std-term">matchdict</em></a> that equal
those supplied in the predicate.  e.g. <tt class="docutils literal"><span class="pre">match_param=&quot;action=edit&quot;</span></tt> would
require the <tt class="docutils literal"><span class="pre">action</span></tt> parameter in the <a class="reference internal" href="../glossary.html#term-matchdict"><em class="xref std std-term">matchdict</em></a> match the right
hand side of the expression (<tt class="docutils literal"><span class="pre">edit</span></tt>) for the view to &quot;match&quot; the current
request.</p>
<p>If the <tt class="docutils literal"><span class="pre">match_param</span></tt> is a dict, every key/value pair must match for the
predicate to pass.</p>
<p>If <tt class="docutils literal"><span class="pre">match_param</span></tt> is not supplied, the view will be invoked without
consideration of the keys and values in <tt class="docutils literal"><span class="pre">request.matchdict</span></tt>.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 1.2.</span></p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">containment</span></tt></dt>
<dd><p class="first">This value should be a reference to a Python class or <a class="reference internal" href="../glossary.html#term-interface"><em class="xref std std-term">interface</em></a>
that a parent object in the context resource's <a class="reference internal" href="../glossary.html#term-lineage"><em class="xref std std-term">lineage</em></a> must provide
in order for this view to be found and called.  The resources in your
resource tree must be &quot;location-aware&quot; to use this feature.</p>
<p>If <tt class="docutils literal"><span class="pre">containment</span></tt> is not supplied, the interfaces and classes in the
lineage are not considered when deciding whether or not to invoke the view
callable.</p>
<p class="last">See <a class="reference internal" href="resources.html#location-aware"><em>Location-Aware Resources</em></a> for more information about location-awareness.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">xhr</span></tt></dt>
<dd><p class="first">This value should be either <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>.  If this value is
specified and is <tt class="docutils literal"><span class="pre">True</span></tt>, the <a class="reference internal" href="../glossary.html#term-wsgi"><em class="xref std std-term">WSGI</em></a> environment must possess an
<tt class="docutils literal"><span class="pre">HTTP_X_REQUESTED_WITH</span></tt> (aka <tt class="docutils literal"><span class="pre">X-Requested-With</span></tt>) header that has the
value <tt class="docutils literal"><span class="pre">XMLHttpRequest</span></tt> for the associated view callable to be found and
called.  This is useful for detecting AJAX requests issued from jQuery,
Prototype and other Javascript libraries.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">xhr</span></tt> is not specified, the <tt class="docutils literal"><span class="pre">HTTP_X_REQUESTED_WITH</span></tt> HTTP header is
not taken into consideration when deciding whether or not to invoke the
associated view callable.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">accept</span></tt></dt>
<dd><p class="first">The value of this argument represents a match query for one or more
mimetypes in the <tt class="docutils literal"><span class="pre">Accept</span></tt> HTTP request header.  If this value is
specified, it must be in one of the following forms: a mimetype match token
in the form <tt class="docutils literal"><span class="pre">text/plain</span></tt>, a wildcard mimetype match token in the form
<tt class="docutils literal"><span class="pre">text/*</span></tt> or a match-all wildcard mimetype match token in the form
<tt class="docutils literal"><span class="pre">*/*</span></tt>.  If any of the forms matches the <tt class="docutils literal"><span class="pre">Accept</span></tt> header of the request,
this predicate will be true.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">accept</span></tt> is not specified, the <tt class="docutils literal"><span class="pre">HTTP_ACCEPT</span></tt> HTTP header is not
taken into consideration when deciding whether or not to invoke the
associated view callable.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">header</span></tt></dt>
<dd><p class="first">This value represents an HTTP header name or a header name/value pair.</p>
<p>If <tt class="docutils literal"><span class="pre">header</span></tt> is specified, it must be a header name or a
<tt class="docutils literal"><span class="pre">headername:headervalue</span></tt> pair.</p>
<p>If <tt class="docutils literal"><span class="pre">header</span></tt> is specified without a value (a bare header name only,
e.g. <tt class="docutils literal"><span class="pre">If-Modified-Since</span></tt>), the view will only be invoked if the HTTP
header exists with any value in the request.</p>
<p>If <tt class="docutils literal"><span class="pre">header</span></tt> is specified, and possesses a name/value pair
(e.g. <tt class="docutils literal"><span class="pre">User-Agent:Mozilla/.*</span></tt>), the view will only be invoked if the HTTP
header exists <em>and</em> the HTTP header matches the value requested.  When the
<tt class="docutils literal"><span class="pre">headervalue</span></tt> contains a <tt class="docutils literal"><span class="pre">:</span></tt> (colon), it will be considered a
name/value pair (e.g. <tt class="docutils literal"><span class="pre">User-Agent:Mozilla/.*</span></tt> or <tt class="docutils literal"><span class="pre">Host:localhost</span></tt>).
The value portion should be a regular expression.</p>
<p>Whether or not the value represents a header name or a header name/value
pair, the case of the header name is not significant.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">header</span></tt> is not specified, the composition, presence or absence of
HTTP headers is not taken into consideration when deciding whether or not
to invoke the associated view callable.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">path_info</span></tt></dt>
<dd><p class="first">This value represents a regular expression pattern that will be tested
against the <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> WSGI environment variable to decide whether or
not to call the associated view callable.  If the regex matches, this
predicate will be <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">path_info</span></tt> is not specified, the WSGI <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> is not taken into
consideration when deciding whether or not to invoke the associated view
callable.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">check_csrf</span></tt></dt>
<dd><p class="first">If specified, this value should be one of <tt class="docutils literal"><span class="pre">None</span></tt>, <tt class="docutils literal"><span class="pre">True</span></tt>, <tt class="docutils literal"><span class="pre">False</span></tt>, or
a string representing the 'check name'.  If the value is <tt class="docutils literal"><span class="pre">True</span></tt> or a
string, CSRF checking will be performed.  If the value is <tt class="docutils literal"><span class="pre">False</span></tt> or
<tt class="docutils literal"><span class="pre">None</span></tt>, CSRF checking will not be performed.</p>
<p>If the value provided is a string, that string will be used as the 'check
name'.  If the value provided is <tt class="docutils literal"><span class="pre">True</span></tt>, <tt class="docutils literal"><span class="pre">csrf_token</span></tt> will be used as
the check name.</p>
<p>If CSRF checking is performed, the checked value will be the value of
<tt class="docutils literal"><span class="pre">request.params[check_name]</span></tt>.  This value will be compared against the
value of <tt class="docutils literal"><span class="pre">request.session.get_csrf_token()</span></tt>, and the check will pass if
these two values are the same.  If the check passes, the associated view
will be permitted to execute.  If the check fails, the associated view
will not be permitted to execute.</p>
<p>Note that using this feature requires a <a class="reference internal" href="../glossary.html#term-session-factory"><em class="xref std std-term">session factory</em></a> to have
been configured.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 1.4a2.</span></p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">physical_path</span></tt></dt>
<dd><p class="first">If specified, this value should be a string or a tuple representing the
<a class="reference internal" href="../glossary.html#term-physical-path"><em class="xref std std-term">physical path</em></a> of the context found via traversal for this predicate
to match as true.  For example: <tt class="docutils literal"><span class="pre">physical_path='/'</span></tt> or
<tt class="docutils literal"><span class="pre">physical_path='/a/b/c'</span></tt> or <tt class="docutils literal"><span class="pre">physical_path=('',</span> <span class="pre">'a',</span> <span class="pre">'b',</span> <span class="pre">'c')</span></tt>.  This is
not a path prefix match or a regex, it's a whole-path match.  It's useful
when you want to always potentially show a view when some object is traversed
to, but you can't be sure about what kind of object it will be, so you can't
use the <tt class="docutils literal"><span class="pre">context</span></tt> predicate.  The individual path elements inbetween slash
characters or in tuple elements should be the Unicode representation of the
name of the resource and should not be encoded in any way.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 1.4a3.</span></p>
</div>
</dd>
</dl>
<p><tt class="docutils literal"><span class="pre">effective_principals</span></tt></p>
<blockquote>
<div><p>If specified, this value should be a <a class="reference internal" href="../glossary.html#term-principal"><em class="xref std std-term">principal</em></a> identifier or a
sequence of principal identifiers.  If the
<a class="reference internal" href="../api/request.html#pyramid.request.Request.effective_principals" title="pyramid.request.Request.effective_principals"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.request.Request.effective_principals()</span></tt></a> method indicates that every
principal named in the argument list is present in the current request, this
predicate will return True; otherwise it will return False.  For example:
<tt class="docutils literal"><span class="pre">effective_principals=pyramid.security.Authenticated</span></tt> or
<tt class="docutils literal"><span class="pre">effective_principals=('fred',</span> <span class="pre">'group:admins')</span></tt>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.4a4.</span></p>
</div>
</div></blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">custom_predicates</span></tt></dt>
<dd><p class="first">If <tt class="docutils literal"><span class="pre">custom_predicates</span></tt> is specified, it must be a sequence of references
to custom predicate callables.  Use custom predicates when no set of
predefined predicates do what you need.  Custom predicates can be combined
with predefined predicates as necessary.  Each custom predicate callable
should accept two arguments: <tt class="docutils literal"><span class="pre">context</span></tt> and <tt class="docutils literal"><span class="pre">request</span></tt> and should return
either <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt> after doing arbitrary evaluation of the
context resource and/or the request.  If all callables return <tt class="docutils literal"><span class="pre">True</span></tt>, the
associated view callable will be considered viable for a given request.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">custom_predicates</span></tt> is not specified, no custom predicates are
used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">predicates</span></tt></dt>
<dd><p class="first">Pass a key/value pair here to use a third-party predicate registered via
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view_predicate" title="pyramid.config.Configurator.add_view_predicate"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view_predicate()</span></tt></a>.  More than one
key/value pair can be used at the same time.  See
<a class="reference internal" href="hooks.html#view-and-route-predicates"><em>View and Route Predicates</em></a> for more information about third-party
predicates.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 1.4a1.</span></p>
</div>
</dd>
</dl>
</div>
<div class="section" id="inverting-predicate-values">
<h4>Inverting Predicate Values<a class="headerlink" href="#inverting-predicate-values" title="Permalink to this headline">¶</a></h4>
<p>You can invert the meaning of any predicate value by wrapping it in a call to
<a class="reference internal" href="../api/config.html#pyramid.config.not_" title="pyramid.config.not_"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.config.not_</span></tt></a>.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">not_</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="s">&#39;mypackage.views.my_view&#39;</span><span class="p">,</span>
    <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;ok&#39;</span><span class="p">,</span>
    <span class="n">request_method</span><span class="o">=</span><span class="n">not_</span><span class="p">(</span><span class="s">&#39;POST&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The above example will ensure that the view is called if the request method
is <em>not</em> <tt class="docutils literal"><span class="pre">POST</span></tt>, at least if no other view is more specific.</p>
<p>This technique of wrapping a predicate value in <tt class="docutils literal"><span class="pre">not_</span></tt> can be used anywhere
predicate values are accepted:</p>
<ul class="simple">
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a></li>
<li><a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.view.view_config()</span></tt></a></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.</span></p>
</div>
</div>
</div>
<div class="section" id="adding-view-configuration-using-the-view-config-decorator">
<span id="mapping-views-using-a-decorator-section"></span><span id="index-3"></span><h3>Adding View Configuration Using the <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> Decorator<a class="headerlink" href="#adding-view-configuration-using-the-view-config-decorator" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Using this feature tends to slow down application startup slightly, as
more work is performed at application startup to scan for view
configuration declarations.  For maximum startup performance, use the view
configuration method described in
<a class="reference internal" href="#mapping-views-using-imperative-config-section"><em>Adding View Configuration Using add_view()</em></a> instead.</p>
</div>
<p>The <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a> decorator can be used to associate
<a class="reference internal" href="../glossary.html#term-view-configuration"><em class="xref std std-term">view configuration</em></a> information with a function, method, or class that
acts as a <span>Pyramid</span> view callable.</p>
<p>Here's an example of the <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a> decorator that
lives within a <span>Pyramid</span> application module <tt class="docutils literal"><span class="pre">views.py</span></tt>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">resources</span> <span class="kn">import</span> <span class="n">MyResource</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;ok&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;POST&#39;</span><span class="p">,</span> <span class="n">permission</span><span class="o">=</span><span class="s">&#39;read&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;OK&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Using this decorator as above replaces the need to add this imperative
configuration stanza:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s">&#39;mypackage.views.my_view&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;ok&#39;</span><span class="p">,</span>
                <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;POST&#39;</span><span class="p">,</span> <span class="n">permission</span><span class="o">=</span><span class="s">&#39;read&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>All arguments to <tt class="docutils literal"><span class="pre">view_config</span></tt> may be omitted.  For example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; My view &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Such a registration as the one directly above implies that the view name will
be <tt class="docutils literal"><span class="pre">my_view</span></tt>, registered with a <tt class="docutils literal"><span class="pre">context</span></tt> argument that matches any
resource type, using no permission, registered against requests with any
request method, request type, request param, route name, or containment.</p>
<p>The mere existence of a <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> decorator doesn't suffice to perform
view configuration.  All that the decorator does is &quot;annotate&quot; the function
with your configuration declarations, it doesn't process them. To make
<span>Pyramid</span> process your <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.view_config</span></tt></a> declarations,
you <em>must</em> use the <tt class="docutils literal"><span class="pre">scan</span></tt> method of a
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator" title="pyramid.config.Configurator"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.config.Configurator</span></tt></a>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># config is assumed to be an instance of the</span>
<span class="c"># pyramid.config.Configurator class</span>
<span class="n">config</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Please see <a class="reference internal" href="configuration.html#decorations-and-code-scanning"><em>Declarative Configuration</em></a> for detailed information
about what happens when code is scanned for configuration declarations
resulting from use of decorators like <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a>.</p>
<p>See <a class="reference internal" href="../api/config.html#configuration-module"><em>pyramid.config</em></a> for additional API arguments to the
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.scan" title="pyramid.config.Configurator.scan"><tt class="xref py py-meth docutils literal"><span class="pre">scan()</span></tt></a> method.  For example, the method
allows you to supply a <tt class="docutils literal"><span class="pre">package</span></tt> argument to better control exactly <em>which</em>
code will be scanned.</p>
<p>All arguments to the <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a> decorator mean
precisely the same thing as they would if they were passed as arguments to
the <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a> method save for the <tt class="docutils literal"><span class="pre">view</span></tt>
argument.  Usage of the <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a> decorator is a
form of <a class="reference internal" href="../glossary.html#term-declarative-configuration"><em class="xref std std-term">declarative configuration</em></a>, while
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a> is a form of <a class="reference internal" href="../glossary.html#term-imperative-configuration"><em class="xref std std-term">imperative
configuration</em></a>.  However, they both do the same thing.</p>
<div class="section" id="view-config-placement">
<span id="index-4"></span><span id="id3"></span><h4><tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> Placement<a class="headerlink" href="#view-config-placement" title="Permalink to this headline">¶</a></h4>
<p>A <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a> decorator can be placed in various points
in your application.</p>
<p>If your view callable is a function, it may be used as a function decorator:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;edit&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;edited!&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>If your view callable is a class, the decorator can also be used as a class
decorator. All the arguments to the decorator are the same when applied
against a class as when they are applied against a function.  For example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;hello&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>More than one <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a> decorator can be stacked on
top of any number of others.  Each decorator creates a separate view
registration.  For example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;edit&#39;</span><span class="p">)</span>
<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;change&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;edited!&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This registers the same view under two different names.</p>
<p>The decorator can also be used against a method of a class:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;hello&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">amethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>When the decorator is used against a method of a class, a view is registered
for the <em>class</em>, so the class constructor must accept an argument list in one
of two forms: either it must accept a single argument <tt class="docutils literal"><span class="pre">request</span></tt> or it must
accept two arguments, <tt class="docutils literal"><span class="pre">context,</span> <span class="pre">request</span></tt>.</p>
<p>The method which is decorated must return a <a class="reference internal" href="../glossary.html#term-response"><em class="xref std std-term">response</em></a>.</p>
<p>Using the decorator against a particular method of a class is equivalent to
using the <tt class="docutils literal"><span class="pre">attr</span></tt> parameter in a decorator attached to the class itself.
For example, the above registration implied by the decorator being used
against the <tt class="docutils literal"><span class="pre">amethod</span></tt> method could be spelled equivalently as the below:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">attr</span><span class="o">=</span><span class="s">&#39;amethod&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;hello&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="k">def</span> <span class="nf">amethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="adding-view-configuration-using-add-view">
<span id="mapping-views-using-imperative-config-section"></span><span id="index-5"></span><h3>Adding View Configuration Using <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">add_view()</span></tt></a><a class="headerlink" href="#adding-view-configuration-using-add-view" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a> method within
<a class="reference internal" href="../api/config.html#configuration-module"><em>pyramid.config</em></a> is used to configure a view &quot;imperatively&quot;
(without a <a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a> decorator).  The arguments to
this method are very similar to the arguments that you provide to the
<a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">view_config</span></tt></a> decorator.  For example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">def</span> <span class="nf">hello_world</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;hello!&#39;</span><span class="p">)</span>

<span class="c"># config is assumed to be an instance of the</span>
<span class="c"># pyramid.config.Configurator class</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">hello_world</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The first argument, a <a class="reference internal" href="../glossary.html#term-view-callable"><em class="xref std std-term">view callable</em></a>, is the only required argument.
It must either be a Python object which is the view itself or a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><em class="xref std std-term">dotted Python name</em></a> to such an object.
In the above example, the <tt class="docutils literal"><span class="pre">view</span> <span class="pre">callable</span></tt> is the <tt class="docutils literal"><span class="pre">hello_world</span></tt> function.</p>
<p>When you use only <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">add_view()</span></tt></a> to add view
configurations, you don't need to issue a <a class="reference internal" href="../glossary.html#term-scan"><em class="xref std std-term">scan</em></a> in order for the view
configuration to take effect.</p>
</div>
</div>
<div class="section" id="view-defaults-class-decorator">
<span id="view-defaults"></span><span id="index-6"></span><h2><tt class="docutils literal"><span class="pre">&#64;view_defaults</span></tt> Class Decorator<a class="headerlink" href="#view-defaults-class-decorator" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.3.</span></p>
</div>
<p>If you use a class as a view, you can use the
<a class="reference internal" href="../api/view.html#pyramid.view.view_defaults" title="pyramid.view.view_defaults"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.view_defaults</span></tt></a> class decorator on the class to provide
defaults to the view configuration information used by every <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt>
decorator that decorates a method of that class.</p>
<p>For instance, if you've got a class that has methods that represent &quot;REST
actions&quot;, all which are mapped to the same route, but different request
methods, instead of this:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;GET&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;get&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;POST&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;post&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;delete&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>You can do this:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_defaults</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s">&#39;GET&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;get&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s">&#39;POST&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;post&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;delete&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the above example, we were able to take the <tt class="docutils literal"><span class="pre">route_name='rest'</span></tt> argument
out of the call to each individual <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> statement, because we
used a <tt class="docutils literal"><span class="pre">&#64;view_defaults</span></tt> class decorator to provide the argument as a
default to each view method it possessed.</p>
<p>Arguments passed to <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> will override any default passed to
<tt class="docutils literal"><span class="pre">&#64;view_defaults</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">view_defaults</span></tt> class decorator can also provide defaults to the
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_view()</span></tt></a> directive when a decorated class
is passed to that directive as its <tt class="docutils literal"><span class="pre">view</span></tt> argument.  For example, instead
of this:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;get&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;post&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;delete&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;rest&#39;</span><span class="p">,</span> <span class="s">&#39;/rest&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
        <span class="n">RESTView</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s">&#39;get&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;GET&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
        <span class="n">RESTView</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s">&#39;post&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;POST&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
        <span class="n">RESTView</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s">&#39;delete&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>To reduce the amount of repetition in the <tt class="docutils literal"><span class="pre">config.add_view</span></tt> statements, we
can move the <tt class="docutils literal"><span class="pre">route_name='rest'</span></tt> argument to a <tt class="docutils literal"><span class="pre">&#64;view_defaults</span></tt> class
decorator on the RESTView class:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_defaults</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;get&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;post&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;delete&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;rest&#39;</span><span class="p">,</span> <span class="s">&#39;/rest&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">RESTView</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s">&#39;get&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;GET&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">RESTView</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s">&#39;post&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;POST&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">RESTView</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s">&#39;delete&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference internal" href="../api/view.html#pyramid.view.view_defaults" title="pyramid.view.view_defaults"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.view_defaults</span></tt></a> accepts the same set of arguments that
<a class="reference internal" href="../api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><tt class="xref py py-class docutils literal"><span class="pre">pyramid.view.view_config</span></tt></a> does, and they have the same meaning.  Each
argument passed to <tt class="docutils literal"><span class="pre">view_defaults</span></tt> provides a default for the view
configurations of methods of the class it's decorating.</p>
<p>Normal Python inheritance rules apply to defaults added via
<tt class="docutils literal"><span class="pre">view_defaults</span></tt>.  For example:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">Foo</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
<p>The <tt class="docutils literal"><span class="pre">Bar</span></tt> class above will inherit its view defaults from the arguments
passed to the <tt class="docutils literal"><span class="pre">view_defaults</span></tt> decorator of the <tt class="docutils literal"><span class="pre">Foo</span></tt> class.  To prevent
this from happening, use a <tt class="docutils literal"><span class="pre">view_defaults</span></tt> decorator without any arguments
on the subclass:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@view_defaults</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">Foo</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
<p>The <tt class="docutils literal"><span class="pre">view_defaults</span></tt> decorator only works as a class decorator; using it
against a function or a method will produce nonsensical results.</p>
<div class="section" id="configuring-view-security">
<span id="view-security-section"></span><span id="index-7"></span><h3>Configuring View Security<a class="headerlink" href="#configuring-view-security" title="Permalink to this headline">¶</a></h3>
<p>If an <a class="reference internal" href="../glossary.html#term-authorization-policy"><em class="xref std std-term">authorization policy</em></a> is active, any <a class="reference internal" href="../glossary.html#term-permission"><em class="xref std std-term">permission</em></a> attached
to a <a class="reference internal" href="../glossary.html#term-view-configuration"><em class="xref std std-term">view configuration</em></a> found during view lookup will be verified.
This will ensure that the currently authenticated user possesses that
permission against the <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a> resource before the view function is
actually called.  Here's an example of specifying a permission in a view
configuration using <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">add_view()</span></tt></a>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># config is an instance of pyramid.config.Configurator</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;add&#39;</span><span class="p">,</span> <span class="s">&#39;/add.html&#39;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s">&#39;mypackage.Blog&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s">&#39;myproject.views.add_entry&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;add&#39;</span><span class="p">,</span>
                <span class="n">permission</span><span class="o">=</span><span class="s">&#39;add&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>When an <a class="reference internal" href="../glossary.html#term-authorization-policy"><em class="xref std std-term">authorization policy</em></a> is enabled, this view will be protected
with the <tt class="docutils literal"><span class="pre">add</span></tt> permission.  The view will <em>not be called</em> if the user does
not possess the <tt class="docutils literal"><span class="pre">add</span></tt> permission relative to the current <a class="reference internal" href="../glossary.html#term-context"><em class="xref std std-term">context</em></a>.
Instead the <a class="reference internal" href="../glossary.html#term-forbidden-view"><em class="xref std std-term">forbidden view</em></a> result will be returned to the client as
per <a class="reference internal" href="security.html#protecting-views"><em>Protecting Views with Permissions</em></a>.</p>
</div>
<div class="section" id="notfound-errors">
<span id="debug-notfound-section"></span><span id="index-8"></span><h3><a class="reference internal" href="../api/exceptions.html#pyramid.exceptions.NotFound" title="pyramid.exceptions.NotFound"><tt class="xref py py-exc docutils literal"><span class="pre">NotFound</span></tt></a> Errors<a class="headerlink" href="#notfound-errors" title="Permalink to this headline">¶</a></h3>
<p>It's useful to be able to debug <a class="reference internal" href="../api/exceptions.html#pyramid.exceptions.NotFound" title="pyramid.exceptions.NotFound"><tt class="xref py py-exc docutils literal"><span class="pre">NotFound</span></tt></a>
error responses when they
occur unexpectedly due to an application registry misconfiguration.  To debug
these errors, use the <tt class="docutils literal"><span class="pre">PYRAMID_DEBUG_NOTFOUND</span></tt> environment variable or the
<tt class="docutils literal"><span class="pre">pyramid.debug_notfound</span></tt> configuration file setting.  Details of why a view
was not found will be printed to <tt class="docutils literal"><span class="pre">stderr</span></tt>, and the browser representation of
the error will include the same information.  See <a class="reference internal" href="environment.html#environment-chapter"><em>Environment Variables and .ini File Settings</em></a>
for more information about how, and where to set these values.</p>
</div>
</div>
<div class="section" id="influencing-http-caching">
<span id="index-9"></span><span id="id4"></span><h2>Influencing HTTP Caching<a class="headerlink" href="#influencing-http-caching" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>When a non-<tt class="docutils literal"><span class="pre">None</span></tt> <tt class="docutils literal"><span class="pre">http_cache</span></tt> argument is passed to a view
configuration, Pyramid will set <tt class="docutils literal"><span class="pre">Expires</span></tt> and <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> response
headers in the resulting response, causing browsers to cache the response
data for some time.  See <tt class="docutils literal"><span class="pre">http_cache</span></tt> in <a class="reference internal" href="#nonpredicate-view-args"><em>Non-Predicate Arguments</em></a> for
the allowable values and what they mean.</p>
<p>Sometimes it's undesirable to have these headers set as the result of
returning a response from a view, even though you'd like to decorate the view
with a view configuration decorator that has <tt class="docutils literal"><span class="pre">http_cache</span></tt>.  Perhaps there's
an alternate branch in your view code that returns a response that should
never be cacheable, while the &quot;normal&quot; branch returns something that should
always be cacheable.  If this is the case, set the <tt class="docutils literal"><span class="pre">prevent_auto</span></tt> attribute
of the <tt class="docutils literal"><span class="pre">response.cache_control</span></tt> object to a non-<tt class="docutils literal"><span class="pre">False</span></tt> value.  For
example, the below view callable is configured with a <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt>
decorator that indicates any response from the view should be cached for 3600
seconds.  However, the view itself prevents caching from taking place unless
there's a <tt class="docutils literal"><span class="pre">should_cache</span></tt> GET or POST variable:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">http_cache</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s">&#39;should_cache&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
        <span class="n">response</span><span class="o">.</span><span class="n">cache_control</span><span class="o">.</span><span class="n">prevent_auto</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
<p>Note that the <tt class="docutils literal"><span class="pre">http_cache</span></tt> machinery will overwrite or add to caching
headers you set within the view itself unless you use <tt class="docutils literal"><span class="pre">prevent_auto</span></tt>.</p>
<p>You can also turn off the effect of <tt class="docutils literal"><span class="pre">http_cache</span></tt> entirely for the duration
of a Pyramid application lifetime.  To do so, set the
<tt class="docutils literal"><span class="pre">PYRAMID_PREVENT_HTTP_CACHE</span></tt> environment variable or the
<tt class="docutils literal"><span class="pre">pyramid.prevent_http_cache</span></tt> configuration value setting to a true value.
For more information, see <a class="reference internal" href="environment.html#preventing-http-caching"><em>Preventing HTTP Caching</em></a>.</p>
<p>Note that setting <tt class="docutils literal"><span class="pre">pyramid.prevent_http_cache</span></tt> will have no effect on caching
headers that your application code itself sets.  It will only prevent caching
headers that would have been set by the Pyramid HTTP caching machinery
invoked as the result of the <tt class="docutils literal"><span class="pre">http_cache</span></tt> argument to view configuration.</p>
</div>
<div class="section" id="debugging-view-configuration">
<span id="index-10"></span><span id="id5"></span><h2>Debugging View Configuration<a class="headerlink" href="#debugging-view-configuration" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="commandline.html#displaying-matching-views"><em>Displaying Matching Views for a Given URL</em></a> for information about how to display
each of the view callables that might match for a given URL.  This can be an
effective way to figure out why a particular view callable is being called
instead of the one you'd like to be called.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">View Configuration</a><ul>
<li><a class="reference internal" href="#mapping-a-resource-or-url-pattern-to-a-view-callable">Mapping a Resource or URL Pattern to a View Callable</a><ul>
<li><a class="reference internal" href="#view-configuration-parameters">View Configuration Parameters</a><ul>
<li><a class="reference internal" href="#non-predicate-arguments">Non-Predicate Arguments</a></li>
<li><a class="reference internal" href="#predicate-arguments">Predicate Arguments</a></li>
<li><a class="reference internal" href="#inverting-predicate-values">Inverting Predicate Values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-view-configuration-using-the-view-config-decorator">Adding View Configuration Using the <tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> Decorator</a><ul>
<li><a class="reference internal" href="#view-config-placement"><tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> Placement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-view-configuration-using-add-view">Adding View Configuration Using <tt class="docutils literal"><span class="pre">add_view()</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#view-defaults-class-decorator"><tt class="docutils literal"><span class="pre">&#64;view_defaults</span></tt> Class Decorator</a><ul>
<li><a class="reference internal" href="#configuring-view-security">Configuring View Security</a></li>
<li><a class="reference internal" href="#notfound-errors"><tt class="docutils literal"><span class="pre">NotFound</span></tt> Errors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#influencing-http-caching">Influencing HTTP Caching</a></li>
<li><a class="reference internal" href="#debugging-view-configuration">Debugging View Configuration</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="templates.html"
                        title="previous chapter">Templates</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="assets.html"
                        title="next chapter">Static Assets</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="assets.html" title="Static Assets"
             >next</a> |</li>
        <li class="right" >
          <a href="templates.html" title="Templates"
             >previous</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>