<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Pyramid Change History &mdash; The Pyramid Web Framework v1.5</title>
    
    <link rel="stylesheet" href="_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="The Pyramid Web Framework v1.5" href="index.html" />
    <link rel="next" title="Defending Pyramid&#39;s Design" href="designdefense.html" />
    <link rel="prev" title="What&#39;s New In Pyramid 1.0" href="whatsnew-1.0.html" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="_static/pyramid.ico"/>

  </head>
  <body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="index.html">
      		<img class="logo" src="_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="designdefense.html" title="Defending Pyramid&#39;s Design"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.0.html" title="What&#39;s New In Pyramid 1.0"
             accesskey="P">previous</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pyramid-change-history">
<span id="changelog"></span><h1><span>Pyramid</span> Change History<a class="headerlink" href="#pyramid-change-history" title="Permalink to this headline">¶</a></h1>
<div class="section" id="next-release">
<h2>Next release<a class="headerlink" href="#next-release" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Work around a bug introduced in Python 2.7.7 on Windows where
<tt class="docutils literal"><span class="pre">mimetypes.guess_type</span></tt> returns Unicode rather than str for the content
type, unlike any previous version of Python.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1360">https://github.com/Pylons/pyramid/issues/1360</a> for more information.</li>
</ul>
</div>
<div class="section" id="id1">
<h2>1.5.1 (2014-05-31)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Update scaffold generating machinery to return the version of pyramid and
pyramid docs for use in scaffolds. Updated starter, alchemy and zodb
templates to have links to correctly versioned documentation and reflect
which pyramid was used to generate the scaffold.</li>
<li>Fix an issue whereby predicates would be resolved as maybe_dotted in the
introspectable but not when passed for registration. This would mean that
add_route_predicate for example can not take a string and turn it into the
actual callable function.</li>
<li>Fix <tt class="docutils literal"><span class="pre">pyramid.testing.setUp</span></tt> to return a <tt class="docutils literal"><span class="pre">Configurator</span></tt> with a proper
package. Previously it was not possible to do package-relative includes
using the returned <tt class="docutils literal"><span class="pre">Configurator</span></tt> during testing. There is now a
<tt class="docutils literal"><span class="pre">package</span></tt> argument that can override this behavior as well.</li>
<li>Removed non-ascii copyright symbol from templates, as this was
causing the scaffolds to fail for project generation on some systems.</li>
<li>Fix an issue where a <tt class="docutils literal"><span class="pre">pyramid.response.FileResponse</span></tt> may apply a charset
where it does not belong. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1251">https://github.com/Pylons/pyramid/pull/1251</a></li>
</ul>
</div>
<div class="section" id="id2">
<h2>1.5 (2014-04-08)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Avoid crash in <tt class="docutils literal"><span class="pre">pserve</span> <span class="pre">--reload</span></tt> under Py3k, when iterating over possibly
mutated <tt class="docutils literal"><span class="pre">sys.modules</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></tt> failed if the secret contained
higher order characters. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1246">https://github.com/Pylons/pyramid/issues/1246</a></li>
<li>Fixed a bug in <tt class="docutils literal"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></tt> and
<tt class="docutils literal"><span class="pre">SignedCookieSessionFactory</span></tt> where <tt class="docutils literal"><span class="pre">timeout=None</span></tt> would cause a new
session to always be created. Also in <tt class="docutils literal"><span class="pre">SignedCookieSessionFactory</span></tt> a
<tt class="docutils literal"><span class="pre">reissue_time=None</span></tt> would cause an exception when modifying the session.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1247">https://github.com/Pylons/pyramid/issues/1247</a></li>
<li>Updated docs and scaffolds to keep in step with new 2.0 release of
<tt class="docutils literal"><span class="pre">Lingua</span></tt>.  This included removing all <tt class="docutils literal"><span class="pre">setup.cfg</span></tt> files from scaffolds
and documentation environments.</li>
</ul>
</div>
<div class="section" id="b1-2014-02-08">
<h2>1.5b1 (2014-02-08)<a class="headerlink" href="#b1-2014-02-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We no longer eagerly clear <tt class="docutils literal"><span class="pre">request.exception</span></tt> and <tt class="docutils literal"><span class="pre">request.exc_info</span></tt> in
the exception view tween.  This makes it possible to inspect exception
information within a finished callback.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1223">https://github.com/Pylons/pyramid/issues/1223</a>.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2014-01-28">
<h2>1.5a4 (2014-01-28)<a class="headerlink" href="#a4-2014-01-28" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Features<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Updated scaffolds with new theme, fixed documentation and sample project.</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Depend on a newer version of WebOb so that we pull in some crucial bug-fixes
that were showstoppers for functionality in Pyramid.</li>
<li>Add a trailing semicolon to the JSONP response. This fixes JavaScript syntax
errors for old IE versions. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1205">https://github.com/Pylons/pyramid/pull/1205</a></li>
<li>Fix a memory leak when the configurator's <tt class="docutils literal"><span class="pre">set_request_property</span></tt> method was
used or when the configurator's <tt class="docutils literal"><span class="pre">add_request_method</span></tt> method was used with
the <tt class="docutils literal"><span class="pre">property=True</span></tt> attribute.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1212">https://github.com/Pylons/pyramid/issues/1212</a> .</li>
</ul>
</div>
</div>
<div class="section" id="a3-2013-12-10">
<h2>1.5a3 (2013-12-10)<a class="headerlink" href="#a3-2013-12-10" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3>Features<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">An authorization API has been added as a method of the
request: <tt class="docutils literal"><span class="pre">request.has_permission</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">request.has_permission</span></tt> is a method-based alternative to the
<tt class="docutils literal"><span class="pre">pyramid.security.has_permission</span></tt> API and works exactly the same.  The
older API is now deprecated.</p>
</li>
<li><p class="first">Property API attributes have been added to the request for easier access to
authentication data: <tt class="docutils literal"><span class="pre">request.authenticated_userid</span></tt>,
<tt class="docutils literal"><span class="pre">request.unauthenticated_userid</span></tt>, and <tt class="docutils literal"><span class="pre">request.effective_principals</span></tt>.</p>
<p>These are analogues, respectively, of
<tt class="docutils literal"><span class="pre">pyramid.security.authenticated_userid</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.security.unauthenticated_userid</span></tt>, and
<tt class="docutils literal"><span class="pre">pyramid.security.effective_principals</span></tt>.  They operate exactly the same,
except they are attributes of the request instead of functions accepting a
request.  They are properties, so they cannot be assigned to.  The older
function-based APIs are now deprecated.</p>
</li>
<li><p class="first">Pyramid's console scripts (<tt class="docutils literal"><span class="pre">pserve</span></tt>, <tt class="docutils literal"><span class="pre">pviews</span></tt>, etc) can now be run
directly, allowing custom arguments to be sent to the python interpreter
at runtime. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>python -3 -m pyramid.scripts.pserve development.ini
</pre></div>
</div>
</li>
<li><p class="first">Added a specific subclass of <tt class="docutils literal"><span class="pre">HTTPBadRequest</span></tt> named
<tt class="docutils literal"><span class="pre">pyramid.exceptions.BadCSRFToken</span></tt> which will now be raised in response
to failures in <tt class="docutils literal"><span class="pre">check_csrf_token</span></tt>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1149">https://github.com/Pylons/pyramid/pull/1149</a></p>
</li>
<li><p class="first">Added a new <tt class="docutils literal"><span class="pre">SignedCookieSessionFactory</span></tt> which is very similar to the
<tt class="docutils literal"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></tt> but with a clearer focus on signing
content. The custom serializer arguments to this function should only focus
on serializing, unlike its predecessor which required the serializer to also
perform signing.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1142">https://github.com/Pylons/pyramid/pull/1142</a> .  Note
that cookies generated using <tt class="docutils literal"><span class="pre">SignedCookieSessionFactory</span></tt> are not
compatible with cookies generated using <tt class="docutils literal"><span class="pre">UnencryptedCookieSessionFactory</span></tt>,
so existing user session data will be destroyed if you switch to it.</p>
</li>
<li><p class="first">Added a new <tt class="docutils literal"><span class="pre">BaseCookieSessionFactory</span></tt> which acts as a generic cookie
factory that can be used by framework implementors to create their own
session implementations. It provides a reusable API which focuses strictly
on providing a dictionary-like object that properly handles renewals,
timeouts, and conformance with the <tt class="docutils literal"><span class="pre">ISession</span></tt> API.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1142">https://github.com/Pylons/pyramid/pull/1142</a></p>
</li>
<li><p class="first">The anchor argument to <tt class="docutils literal"><span class="pre">pyramid.request.Request.route_url</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.request.Request.resource_url</span></tt> and their derivatives will now be
escaped via URL quoting to ensure minimal conformance.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1183">https://github.com/Pylons/pyramid/pull/1183</a></p>
</li>
<li><p class="first">Allow sending of <tt class="docutils literal"><span class="pre">_query</span></tt> and <tt class="docutils literal"><span class="pre">_anchor</span></tt> options to
<tt class="docutils literal"><span class="pre">pyramid.request.Request.static_url</span></tt> when an external URL is being
generated.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1183">https://github.com/Pylons/pyramid/pull/1183</a></p>
</li>
<li><p class="first">You can now send a string as the <tt class="docutils literal"><span class="pre">_query</span></tt> argument to
<tt class="docutils literal"><span class="pre">pyramid.request.Request.route_url</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.request.Request.resource_url</span></tt> and their derivatives.  When a
string is sent instead of a list or dictionary. it is URL-quoted however it
does not need to be in <tt class="docutils literal"><span class="pre">k=v</span></tt> form.  This is useful if you want to be able
to use a different query string format than <tt class="docutils literal"><span class="pre">x-www-form-urlencoded</span></tt>.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1183">https://github.com/Pylons/pyramid/pull/1183</a></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt> now has a <tt class="docutils literal"><span class="pre">domain</span></tt> attribute to match the
new WebOb 1.3 API.  Its value is <tt class="docutils literal"><span class="pre">example.com</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id5">
<h3>Bug Fixes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix the <tt class="docutils literal"><span class="pre">pcreate</span></tt> script so that when the target directory name ends with a
slash it does not produce a non-working project directory structure.
Previously saying <tt class="docutils literal"><span class="pre">pcreate</span> <span class="pre">-s</span> <span class="pre">starter</span> <span class="pre">/foo/bar/</span></tt> produced different output
than  saying <tt class="docutils literal"><span class="pre">pcreate</span> <span class="pre">-s</span> <span class="pre">starter</span> <span class="pre">/foo/bar</span></tt>.  The former did not work
properly.</li>
<li>Fix the <tt class="docutils literal"><span class="pre">principals_allowed_by_permission</span></tt> method of
<tt class="docutils literal"><span class="pre">ACLAuthorizationPolicy</span></tt> so it anticipates a callable <tt class="docutils literal"><span class="pre">__acl__</span></tt>
on resources.  Previously it did not try to call the <tt class="docutils literal"><span class="pre">__acl__</span></tt>
if it was callable.</li>
<li>The <tt class="docutils literal"><span class="pre">pviews</span></tt> script did not work when a url required custom request
methods in order to perform traversal. Custom methods and descriptors added
via <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_request_method</span></tt> will now be present,
allowing traversal to continue.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1104">https://github.com/Pylons/pyramid/issues/1104</a></li>
<li>Remove unused <tt class="docutils literal"><span class="pre">renderer</span></tt> argument from <tt class="docutils literal"><span class="pre">Configurator.add_route</span></tt>.</li>
<li>Allow the <tt class="docutils literal"><span class="pre">BasicAuthenticationPolicy</span></tt> to work with non-ascii usernames
and passwords. The charset is not passed as part of the header and different
browsers alternate between UTF-8 and Latin-1, so the policy now attempts
to decode with UTF-8 first, and will fallback to Latin-1.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1170">https://github.com/Pylons/pyramid/pull/1170</a></li>
<li>The <tt class="docutils literal"><span class="pre">&#64;view_defaults</span></tt> now apply to notfound and forbidden views
that are defined as methods of a decorated class.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1173">https://github.com/Pylons/pyramid/issues/1173</a></li>
</ul>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a &quot;Quick Tutorial&quot; to go with the Quick Tour</li>
<li>Removed mention of <tt class="docutils literal"><span class="pre">pyramid_beaker</span></tt> from docs.  Beaker is no longer
maintained.  Point people at <tt class="docutils literal"><span class="pre">pyramid_redis_sessions</span></tt> instead.</li>
<li>Add documentation for <tt class="docutils literal"><span class="pre">pyramid.interfaces.IRendererFactory</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IRenderer</span></tt>.</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilities">
<h3>Backwards Incompatibilities<a class="headerlink" href="#backwards-incompatibilities" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The key/values in the <tt class="docutils literal"><span class="pre">_query</span></tt> parameter of <tt class="docutils literal"><span class="pre">request.route_url</span></tt> and the
<tt class="docutils literal"><span class="pre">query</span></tt> parameter of <tt class="docutils literal"><span class="pre">request.resource_url</span></tt> (and their variants), used
to encode a value of <tt class="docutils literal"><span class="pre">None</span></tt> as the string <tt class="docutils literal"><span class="pre">'None'</span></tt>, leaving the resulting
query string to be <tt class="docutils literal"><span class="pre">a=b&amp;key=None</span></tt>. The value is now dropped in this
situation, leaving a query string of <tt class="docutils literal"><span class="pre">a=b&amp;key=</span></tt>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1119">https://github.com/Pylons/pyramid/issues/1119</a></li>
</ul>
</div>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deprecate the <tt class="docutils literal"><span class="pre">pyramid.interfaces.ITemplateRenderer</span></tt> interface. It was
ill-defined and became unused when Mako and Chameleon template bindings were
split into their own packages.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.session.UnencryptedCookieSessionFactoryConfig</span></tt> API has been
deprecated and is superseded by the
<tt class="docutils literal"><span class="pre">pyramid.session.SignedCookieSessionFactory</span></tt>.  Note that while the cookies
generated by the <tt class="docutils literal"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></tt>
are compatible with cookies generated by old releases, cookies generated by
the SignedCookieSessionFactory are not. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1142">https://github.com/Pylons/pyramid/pull/1142</a></li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.security.has_permission</span></tt> API is now deprecated.  Instead, use
the newly-added <tt class="docutils literal"><span class="pre">has_permission</span></tt> method of the request object.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.security.effective_principals</span></tt> API is now deprecated.
Instead, use the newly-added <tt class="docutils literal"><span class="pre">effective_principals</span></tt> attribute of the
request object.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.security.authenticated_userid</span></tt> API is now deprecated.
Instead, use the newly-added <tt class="docutils literal"><span class="pre">authenticated_userid</span></tt> attribute of the
request object.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.security.unauthenticated_userid</span></tt> API is now deprecated.
Instead, use the newly-added <tt class="docutils literal"><span class="pre">unauthenticated_userid</span></tt> attribute of the
request object.</li>
</ul>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid now depends on WebOb&gt;=1.3 (it uses <tt class="docutils literal"><span class="pre">webob.cookies.CookieProfile</span></tt>
from 1.3+).</li>
</ul>
</div>
</div>
<div class="section" id="a2-2013-09-22">
<h2>1.5a2 (2013-09-22)<a class="headerlink" href="#a2-2013-09-22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3>Features<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Users can now provide dotted Python names to as the <tt class="docutils literal"><span class="pre">factory</span></tt> argument
the Configurator methods named <tt class="docutils literal"><span class="pre">add_{view,route,subscriber}_predicate</span></tt>
(instead of passing the predicate factory directly, you can pass a
dotted name which refers to the factory).</li>
</ul>
</div>
<div class="section" id="id7">
<h3>Bug Fixes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix an exception in <tt class="docutils literal"><span class="pre">pyramid.path.package_name</span></tt> when resolving the package
name for namespace packages that had no <tt class="docutils literal"><span class="pre">__file__</span></tt> attribute.</li>
</ul>
</div>
<div class="section" id="id8">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Pyramid no longer depends on or configures the Mako and Chameleon templating
system renderers by default.  Disincluding these templating systems by
default means that the Pyramid core has fewer dependencies and can run on
future platforms without immediate concern for the compatibility of its
templating add-ons.  It also makes maintenance slightly more effective, as
different people can maintain the templating system add-ons that they
understand and care about without needing commit access to the Pyramid core,
and it allows users who just don't want to see any packages they don't use
come along for the ride when they install Pyramid.</p>
<p>This means that upon upgrading to Pyramid 1.5a2+, projects that use either
of these templating systems will see a traceback that ends something like
this when their application attempts to render a Chameleon or Mako template:</p>
<div class="highlight-python"><div class="highlight"><pre>ValueError: No such renderer factory .pt
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-python"><div class="highlight"><pre>ValueError: No such renderer factory .mako
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-python"><div class="highlight"><pre>ValueError: No such renderer factory .mak
</pre></div>
</div>
<p>Support for Mako templating has been moved into an add-on package named
<tt class="docutils literal"><span class="pre">pyramid_mako</span></tt>, and support for Chameleon templating has been moved into
an add-on package named <tt class="docutils literal"><span class="pre">pyramid_chameleon</span></tt>.  These packages are drop-in
replacements for the old built-in support for these templating langauges.
All you have to do is install them and make them active in your configuration
to register renderer factories for <tt class="docutils literal"><span class="pre">.pt</span></tt> and/or <tt class="docutils literal"><span class="pre">.mako</span></tt> (or <tt class="docutils literal"><span class="pre">.mak</span></tt>) to
make your application work again.</p>
<p>To re-add support for Chameleon and/or Mako template renderers into your
existing projects, follow the below steps.</p>
<p>If you depend on Mako templates:</p>
<ul>
<li><p class="first">Make sure the <tt class="docutils literal"><span class="pre">pyramid_mako</span></tt> package is installed.  One way to do this
is by adding <tt class="docutils literal"><span class="pre">pyramid_mako</span></tt> to the <tt class="docutils literal"><span class="pre">install_requires</span></tt> section of your
package's <tt class="docutils literal"><span class="pre">setup.py</span></tt> file and afterwards rerunning <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">setup</span><span class="p">(</span>
    <span class="c">#...</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s">&#39;pyramid_mako&#39;</span><span class="p">,</span>         <span class="c"># new dependency</span>
        <span class="s">&#39;pyramid&#39;</span><span class="p">,</span>
        <span class="c">#...</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Within the portion of your application which instantiates a Pyramid
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator</span></tt> (often the <tt class="docutils literal"><span class="pre">main()</span></tt> function in
your project's <tt class="docutils literal"><span class="pre">__init__.py</span></tt> file), tell Pyramid to include the
<tt class="docutils literal"><span class="pre">pyramid_mako</span></tt> includeme:</p>
<div class="highlight-python"><div class="highlight"><pre>config = Configurator(.....)
config.include(&#39;pyramid_mako&#39;)
</pre></div>
</div>
</li>
</ul>
<p>If you depend on Chameleon templates:</p>
<ul>
<li><p class="first">Make sure the <tt class="docutils literal"><span class="pre">pyramid_chameleon</span></tt> package is installed.  One way to do
this is by adding <tt class="docutils literal"><span class="pre">pyramid_chameleon</span></tt> to the <tt class="docutils literal"><span class="pre">install_requires</span></tt> section
of your package's <tt class="docutils literal"><span class="pre">setup.py</span></tt> file and afterwards rerunning
<tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">setup</span><span class="p">(</span>
    <span class="c">#...</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s">&#39;pyramid_chameleon&#39;</span><span class="p">,</span>         <span class="c"># new dependency</span>
        <span class="s">&#39;pyramid&#39;</span><span class="p">,</span>
        <span class="c">#...</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Within the portion of your application which instantiates a Pyramid
<tt class="docutils literal"><span class="pre">~pyramid.config.Configurator</span></tt> (often the <tt class="docutils literal"><span class="pre">main()</span></tt> function in
your project's <tt class="docutils literal"><span class="pre">__init__.py</span></tt> file), tell Pyramid to include the
<tt class="docutils literal"><span class="pre">pyramid_chameleon</span></tt> includeme:</p>
<div class="highlight-python"><div class="highlight"><pre>config = Configurator(.....)
config.include(&#39;pyramid_chameleon&#39;)
</pre></div>
</div>
</li>
</ul>
<p>Note that it's also fine to install these packages into <em>older</em> Pyramids for
forward compatibility purposes.  Even if you don't upgrade to Pyramid 1.5
immediately, performing the above steps in a Pyramid 1.4 installation is
perfectly fine, won't cause any difference, and will give you forward
compatibility when you eventually do upgrade to Pyramid 1.5.</p>
<p>With the removal of Mako and Chameleon support from the core, some
unit tests that use the <tt class="docutils literal"><span class="pre">pyramid.renderers.render*</span></tt> methods may begin to
fail.  If any of your unit tests are invoking either
<tt class="docutils literal"><span class="pre">pyramid.renderers.render()</span></tt>  or <tt class="docutils literal"><span class="pre">pyramid.renderers.render_to_response()</span></tt>
with either Mako or Chameleon templates then the
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator</span></tt> instance in effect during
the unit test should be also be updated to include the addons, as shown
above. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ATest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s">&#39;pyramid_mako&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_it</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">renderers</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;mypkg:templates/home.mako&#39;</span><span class="p">,</span> <span class="p">{})</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ATest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s">&#39;pyramid_chameleon&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_it</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">renderers</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;mypkg:templates/home.pt&#39;</span><span class="p">,</span> <span class="p">{})</span>
</pre></div>
</div>
</li>
<li><p class="first">If you're using the Pyramid debug toolbar, when you upgrade Pyramid to
1.5a2+, you'll also need to upgrade the <tt class="docutils literal"><span class="pre">pyramid_debugtoolbar</span></tt> package to
at least version 1.0.8, as older toolbar versions are not compatible with
Pyramid 1.5a2+ due to the removal of Mako support from the core.  It's
fine to use this newer version of the toolbar code with older Pyramids too.</p>
</li>
<li><p class="first">Removed the <tt class="docutils literal"><span class="pre">request.response_*</span></tt> varying attributes. These attributes
have been deprecated since Pyramid 1.1, and as per the deprecation policy,
have now been removed.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">request.response</span></tt> will no longer be mutated when using the
<tt class="docutils literal"><span class="pre">pyramid.renderers.render()</span></tt> API.  Almost all renderers mutate the
<tt class="docutils literal"><span class="pre">request.response</span></tt> response object (for example, the JSON renderer sets
<tt class="docutils literal"><span class="pre">request.response.content_type</span></tt> to <tt class="docutils literal"><span class="pre">application/json</span></tt>), but this is
only necessary when the renderer is generating a response; it was a bug
when it was done as a side effect of calling <tt class="docutils literal"><span class="pre">pyramid.renderers.render()</span></tt>.</p>
</li>
<li><p class="first">Removed the <tt class="docutils literal"><span class="pre">bfg2pyramid</span></tt> fixer script.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.events.NewResponse</span></tt> event is now sent <strong>after</strong> response
callbacks are executed.  It previously executed before response callbacks
were executed.  Rationale: it's more useful to be able to inspect the response
after response callbacks have done their jobs instead of before.</p>
</li>
<li><p class="first">Removed the class named <tt class="docutils literal"><span class="pre">pyramid.view.static</span></tt> that had been deprecated
since Pyramid 1.1.  Instead use <tt class="docutils literal"><span class="pre">pyramid.static.static_view</span></tt> with
<tt class="docutils literal"><span class="pre">use_subpath=True</span></tt> argument.</p>
</li>
<li><p class="first">Removed the <tt class="docutils literal"><span class="pre">pyramid.view.is_response</span></tt> function that had been deprecated
since Pyramid 1.1.  Use the <tt class="docutils literal"><span class="pre">pyramid.request.Request.is_response</span></tt> method
instead.</p>
</li>
<li><p class="first">Removed the ability to pass the following arguments to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_route</span></tt>: <tt class="docutils literal"><span class="pre">view</span></tt>, <tt class="docutils literal"><span class="pre">view_context</span></tt>.
<tt class="docutils literal"><span class="pre">view_for</span></tt>, <tt class="docutils literal"><span class="pre">view_permission</span></tt>, <tt class="docutils literal"><span class="pre">view_renderer</span></tt>, and <tt class="docutils literal"><span class="pre">view_attr</span></tt>.
Using these arguments had been deprecated since Pyramid 1.1.  Instead of
passing view-related arguments to <tt class="docutils literal"><span class="pre">add_route</span></tt>, use a separate call to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_view</span></tt> to associate a view with a route
using its <tt class="docutils literal"><span class="pre">route_name</span></tt> argument.  Note that this impacts the
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_static_view</span></tt> function too, because it
delegates to <tt class="docutils literal"><span class="pre">add_route</span></tt>.</p>
</li>
<li><p class="first">Removed the ability to influence and query a <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt>
object as if it were a dictionary.  Previously it was possible to use methods
like <tt class="docutils literal"><span class="pre">__getitem__</span></tt>, <tt class="docutils literal"><span class="pre">get</span></tt>, <tt class="docutils literal"><span class="pre">items</span></tt>, and other dictlike methods to
access values in the WSGI environment.  This behavior had been deprecated
since Pyramid 1.1.  Use methods of <tt class="docutils literal"><span class="pre">request.environ</span></tt> (a real dictionary)
instead.</p>
</li>
<li><p class="first">Removed ancient backwards compatibily hack in
<tt class="docutils literal"><span class="pre">pyramid.traversal.DefaultRootFactory</span></tt> which populated the <tt class="docutils literal"><span class="pre">__dict__</span></tt> of
the factory with the matchdict values for compatibility with BFG 0.9.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">renderer_globals_factory</span></tt> argument to the
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator`</span> <span class="pre">constructor</span> <span class="pre">and</span> <span class="pre">its</span> <span class="pre">``setup_registry</span></tt> method
has been removed.  The <tt class="docutils literal"><span class="pre">set_renderer_globals_factory</span></tt> method of
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator</span></tt> has also been removed.  The (internal)
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IRendererGlobals</span></tt> interface was also removed.  These
arguments, methods and interfaces had been deprecated since 1.1.  Use a
<tt class="docutils literal"><span class="pre">BeforeRender</span></tt> event subscriber as documented in the &quot;Hooks&quot; chapter of the
Pyramid narrative documentation instead of providing renderer globals values
to the configurator.</p>
</li>
</ul>
</div>
<div class="section" id="id9">
<h3>Deprecations<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.set_request_property</span></tt> method now issues
a deprecation warning when used.  It had been docs-deprecated in 1.4
but did not issue a deprecation warning when used.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2013-08-30">
<h2>1.5a1 (2013-08-30)<a class="headerlink" href="#a1-2013-08-30" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id10">
<h3>Features<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">A new http exception subclass named <tt class="docutils literal"><span class="pre">pyramid.httpexceptions.HTTPSuccessful</span></tt>
was added.  You can use this class as the <tt class="docutils literal"><span class="pre">context</span></tt> of an exception
view to catch all 200-series &quot;exceptions&quot; (e.g. &quot;raise HTTPOk&quot;).  This
also allows you to catch <em>only</em> the <tt class="docutils literal"><span class="pre">HTTPOk</span></tt> exception itself; previously
this was impossible because a number of other exceptions
(such as <tt class="docutils literal"><span class="pre">HTTPNoContent</span></tt>) inherited from <tt class="docutils literal"><span class="pre">HTTPOk</span></tt>, but now they do not.</p>
</li>
<li><p class="first">You can now generate &quot;hybrid&quot; urldispatch/traversal URLs more easily
by using the new <tt class="docutils literal"><span class="pre">route_name</span></tt>, <tt class="docutils literal"><span class="pre">route_kw</span></tt> and <tt class="docutils literal"><span class="pre">route_remainder_name</span></tt>
arguments to  <tt class="docutils literal"><span class="pre">request.resource_url</span></tt> and <tt class="docutils literal"><span class="pre">request.resource_path</span></tt>.  See
the new section of the &quot;Combining Traversal and URL Dispatch&quot; documentation
chapter entitled  &quot;Hybrid URL Generation&quot;.</p>
</li>
<li><p class="first">It is now possible to escape double braces in Pyramid scaffolds (unescaped,
these represent replacement values).  You can use <tt class="docutils literal"><span class="pre">\{\{a\}\}</span></tt> to
represent a &quot;bare&quot; <tt class="docutils literal"><span class="pre">{{a}}</span></tt>.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/862">https://github.com/Pylons/pyramid/pull/862</a></p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">localizer</span></tt> and <tt class="docutils literal"><span class="pre">locale_name</span></tt> properties (reified) to the request.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/508">https://github.com/Pylons/pyramid/issues/508</a>.  Note that the
<tt class="docutils literal"><span class="pre">pyramid.i18n.get_localizer</span></tt> and <tt class="docutils literal"><span class="pre">pyramid.i18n.get_locale_name</span></tt> functions
now simply look up these properties on the request.</p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">pdistreport</span></tt> script, which prints the Python version in use, the
Pyramid version in use, and the version number and location of all Python
distributions currently installed.</p>
</li>
<li><p class="first">Add the ability to invert the result of any view, route, or subscriber
predicate using the <tt class="docutils literal"><span class="pre">not_</span></tt> class.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">not_</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;myroute&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="n">not_</span><span class="p">(</span><span class="s">&#39;POST&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span> <span class="o">...</span>
</pre></div>
</div>
<p>The above example will ensure that the view is called if the request method
is not POST (at least if no other view is more specific).</p>
<p>The <tt class="docutils literal"><span class="pre">pyramid.config.not_</span></tt> class can be used against any value that is
a predicate value passed in any of these contexts:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_view</span></tt></li>
<li><tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_route</span></tt></li>
<li><tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_subscriber</span></tt></li>
<li><tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt></li>
<li><tt class="docutils literal"><span class="pre">pyramid.events.subscriber</span></tt></li>
</ul>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">scripts/prequest.py</span></tt>: add support for submitting <tt class="docutils literal"><span class="pre">PUT</span></tt> and <tt class="docutils literal"><span class="pre">PATCH</span></tt>
requests.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1033">https://github.com/Pylons/pyramid/pull/1033</a>.  add support for
submitting <tt class="docutils literal"><span class="pre">OPTIONS</span></tt> and <tt class="docutils literal"><span class="pre">PROPFIND</span></tt> requests, and  allow users to specify
basic authentication credentials in the request via a <tt class="docutils literal"><span class="pre">--login</span></tt> argument to
the script.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1039">https://github.com/Pylons/pyramid/pull/1039</a>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">ACLAuthorizationPolicy</span></tt> supports <tt class="docutils literal"><span class="pre">__acl__</span></tt> as a callable. This
removes the ambiguity between the potential <tt class="docutils literal"><span class="pre">AttributeError</span></tt> that would
be raised on the <tt class="docutils literal"><span class="pre">context</span></tt> when the property was not defined and the
<tt class="docutils literal"><span class="pre">AttributeError</span></tt> that could be raised from any user-defined code within
a dynamic property. It is recommended to define a dynamic ACL as a callable
to avoid this ambiguity. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/735">https://github.com/Pylons/pyramid/issues/735</a>.</p>
</li>
<li><p class="first">Allow a protocol-relative URL (e.g. <tt class="docutils literal"><span class="pre">//example.com/images</span></tt>) to be passed to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_static_view</span></tt>. This allows
externally-hosted static URLs to be generated based on the current protocol.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">AuthTktAuthenticationPolicy</span></tt> has two new options to configure its
domain usage:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">parent_domain</span></tt>: if set the authentication cookie is set on
the parent domain. This is useful if you have multiple sites sharing the
same domain.</li>
<li><tt class="docutils literal"><span class="pre">domain</span></tt>: if provided the cookie is always set for this domain, bypassing
all usual logic.</li>
</ul>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1028">https://github.com/Pylons/pyramid/pull/1028</a>,
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1072">https://github.com/Pylons/pyramid/pull/1072</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1078">https://github.com/Pylons/pyramid/pull/1078</a>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">AuthTktAuthenticationPolicy</span></tt> now supports IPv6 addresses when using
the <tt class="docutils literal"><span class="pre">include_ip=True</span></tt> option. This is possibly incompatible with
alternative <tt class="docutils literal"><span class="pre">auth_tkt</span></tt> implementations, as the specification does not
define how to properly handle IPv6. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/831">https://github.com/Pylons/pyramid/issues/831</a>.</p>
</li>
<li><p class="first">Make it possible to use variable arguments via
<tt class="docutils literal"><span class="pre">pyramid.paster.get_appsettings</span></tt>. This also allowed the generated
<tt class="docutils literal"><span class="pre">initialize_db</span></tt> script from the <tt class="docutils literal"><span class="pre">alchemy</span></tt> scaffold to grow support
for options in the form <tt class="docutils literal"><span class="pre">a=1</span> <span class="pre">b=2</span></tt> so you can fill in
values in a parameterized <tt class="docutils literal"><span class="pre">.ini</span></tt> file, e.g.
<tt class="docutils literal"><span class="pre">initialize_myapp_db</span> <span class="pre">etc/development.ini</span> <span class="pre">a=1</span> <span class="pre">b=2</span></tt>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/911">https://github.com/Pylons/pyramid/pull/911</a></p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">request.session.check_csrf_token()</span></tt> method and the <tt class="docutils literal"><span class="pre">check_csrf</span></tt> view
predicate now take into account the value of the HTTP header named
<tt class="docutils literal"><span class="pre">X-CSRF-Token</span></tt> (as well as the <tt class="docutils literal"><span class="pre">csrf_token</span></tt> form parameter, which they
always did).  The header is tried when the form parameter does not exist.</p>
</li>
<li><p class="first">View lookup will now search for valid views based on the inheritance
hierarchy of the context. It tries to find views based on the most
specific context first, and upon predicate failure, will move up the
inheritance chain to test views found by the super-type of the context.
In the past, only the most specific type containing views would be checked
and if no matching view could be found then a PredicateMismatch would be
raised. Now predicate mismatches don't hide valid views registered on
super-types. Here's an example that now works:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">IResource</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;POST&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;DELETE&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@implementer</span><span class="p">(</span><span class="n">IResource</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyResource</span><span class="p">:</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">MyResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s">&#39;POST&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">override_post</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>
</pre></div>
</div>
<p>Previously the override_post view registration would hide the get
and delete views in the context of MyResource -- leading to a
predicate mismatch error when trying to use GET or DELETE
methods. Now the views are found and no predicate mismatch is
raised.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/786">https://github.com/Pylons/pyramid/pull/786</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1004">https://github.com/Pylons/pyramid/pull/1004</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1046">https://github.com/Pylons/pyramid/pull/1046</a></p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pserve</span></tt> command now takes a <tt class="docutils literal"><span class="pre">-v</span></tt> (or <tt class="docutils literal"><span class="pre">--verbose</span></tt>) flag and a
<tt class="docutils literal"><span class="pre">-q</span></tt> (or <tt class="docutils literal"><span class="pre">--quiet</span></tt>) flag.  Output from running <tt class="docutils literal"><span class="pre">pserve</span></tt> can be
controlled using these flags.  <tt class="docutils literal"><span class="pre">-v</span></tt> can be specified multiple times to
increase verbosity.  <tt class="docutils literal"><span class="pre">-q</span></tt> sets verbosity to <tt class="docutils literal"><span class="pre">0</span></tt> unconditionally.  The
default verbosity level is <tt class="docutils literal"><span class="pre">1</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">alchemy</span></tt> scaffold tests now provide better coverage.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1029">https://github.com/Pylons/pyramid/pull/1029</a></p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_route</span></tt> method now supports being
called with an external URL as pattern. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/611">https://github.com/Pylons/pyramid/issues/611</a> and the documentation section
in the &quot;URL Dispatch&quot; chapter entitled &quot;External Routes&quot; for more information.</p>
</li>
</ul>
</div>
<div class="section" id="id11">
<h3>Bug Fixes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>It was not possible to use <tt class="docutils literal"><span class="pre">pyramid.httpexceptions.HTTPException</span></tt> as
the <tt class="docutils literal"><span class="pre">context</span></tt> of an exception view as very general catchall for
http-related exceptions when you wanted that exception view to override the
default exception view.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/985">https://github.com/Pylons/pyramid/issues/985</a></li>
<li>When the <tt class="docutils literal"><span class="pre">pyramid.reload_templates</span></tt> setting was true, and a Chameleon
template was reloaded, and the renderer specification named a macro
(e.g. <tt class="docutils literal"><span class="pre">foo#macroname.pt</span></tt>), renderings of the template after the template
was reloaded due to a file change would produce the entire template body
instead of just a rendering of the macro.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1013">https://github.com/Pylons/pyramid/issues/1013</a>.</li>
<li>Fix an obscure problem when combining a virtual root with a route with a
<tt class="docutils literal"><span class="pre">*traverse</span></tt> in its pattern.  Now the traversal path generated in
such a configuration will be correct, instead of an element missing
a leading slash.</li>
<li>Fixed a Mako renderer bug returning a tuple with a previous defname value
in some circumstances. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1037">https://github.com/Pylons/pyramid/issues/1037</a>
for more information.</li>
<li>Make the <tt class="docutils literal"><span class="pre">pyramid.config.assets.PackageOverrides</span></tt> object implement the API
for <tt class="docutils literal"><span class="pre">__loader__</span></tt> objects specified in PEP 302.  Proxies to the
<tt class="docutils literal"><span class="pre">__loader__</span></tt> set by the importer, if present; otherwise, raises
<tt class="docutils literal"><span class="pre">NotImplementedError</span></tt>.  This makes Pyramid static view overrides work
properly under Python 3.3 (previously they would not).  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1015">https://github.com/Pylons/pyramid/pull/1015</a> for more information.</li>
<li><tt class="docutils literal"><span class="pre">mako_templating</span></tt>: added defensive workaround for non-importability of
<tt class="docutils literal"><span class="pre">mako</span></tt> due to upstream <tt class="docutils literal"><span class="pre">markupsafe</span></tt> dropping Python 3.2 support.  Mako
templating will no longer work under the combination of MarkupSafe 0.17 and
Python 3.2 (although the combination of MarkupSafe 0.17 and Python 3.3 or any
supported Python 2 version will work OK).</li>
<li>Spaces and dots may now be in mako renderer template paths. This was
broken when support for the new makodef syntax was added in 1.4a1.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/950">https://github.com/Pylons/pyramid/issues/950</a></li>
<li><tt class="docutils literal"><span class="pre">pyramid.debug_authorization=true</span></tt> will now correctly print out
<tt class="docutils literal"><span class="pre">Allowed</span></tt> for views registered with <tt class="docutils literal"><span class="pre">NO_PERMISSION_REQUIRED</span></tt> instead
of invoking the <tt class="docutils literal"><span class="pre">permits</span></tt> method of the authorization policy.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/954">https://github.com/Pylons/pyramid/issues/954</a></li>
<li>Pyramid failed to install on some systems due to being packaged with
some test files containing higher order characters in their names. These
files have now been removed. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/981">https://github.com/Pylons/pyramid/issues/981</a></li>
<li><tt class="docutils literal"><span class="pre">pyramid.testing.DummyResource</span></tt> didn't define <tt class="docutils literal"><span class="pre">__bool__</span></tt>, so code under
Python 3 would use <tt class="docutils literal"><span class="pre">__len__</span></tt> to find truthiness; this usually caused an
instance of DummyResource to be &quot;falsy&quot; instead of &quot;truthy&quot;.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1032">https://github.com/Pylons/pyramid/pull/1032</a></li>
<li>The <tt class="docutils literal"><span class="pre">alchemy</span></tt> scaffold would break when the database was MySQL during
tables creation.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1049">https://github.com/Pylons/pyramid/pull/1049</a></li>
<li>The <tt class="docutils literal"><span class="pre">current_route_url</span></tt> method now attaches the query string to the URL by
default. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1040">https://github.com/Pylons/pyramid/issues/1040</a></li>
<li>Make <tt class="docutils literal"><span class="pre">pserve.cherrypy_server_runner</span></tt> Python 3 compatible. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/718">https://github.com/Pylons/pyramid/issues/718</a></li>
</ul>
</div>
<div class="section" id="id12">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Modified the <tt class="docutils literal"><span class="pre">current_route_url</span></tt> method in pyramid.Request. The method
previously returned the URL without the query string by default, it now does
attach the query string unless it is overriden.</li>
<li>The <tt class="docutils literal"><span class="pre">route_url</span></tt> and <tt class="docutils literal"><span class="pre">route_path</span></tt> APIs no longer quote <tt class="docutils literal"><span class="pre">/</span></tt>
to <tt class="docutils literal"><span class="pre">%2F</span></tt> when a replacement value contains a <tt class="docutils literal"><span class="pre">/</span></tt>.  This was pointless,
as WSGI servers always unquote the slash anyway, and Pyramid never sees the
quoted value.</li>
<li>It is no longer possible to set a <tt class="docutils literal"><span class="pre">locale_name</span></tt> attribute of the request,
nor is it possible to set a <tt class="docutils literal"><span class="pre">localizer</span></tt> attribute of the request.  These
are now &quot;reified&quot; properties that look up a locale name and localizer
respectively using the machinery described in the &quot;Internationalization&quot;
chapter of the documentation.</li>
<li>If you send an <tt class="docutils literal"><span class="pre">X-Vhm-Root</span></tt> header with a value that ends with a slash (or
any number of slashes), the trailing slash(es) will be removed before a URL
is generated when you use use <tt class="docutils literal"><span class="pre">request.resource_url</span></tt> or
<tt class="docutils literal"><span class="pre">request.resource_path</span></tt>.  Previously the virtual root path would not have
trailing slashes stripped, which would influence URL generation.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.interfaces.IResourceURL</span></tt> interface has now grown two new
attributes: <tt class="docutils literal"><span class="pre">virtual_path_tuple</span></tt> and <tt class="docutils literal"><span class="pre">physical_path_tuple</span></tt>.  These should
be the tuple form of the resource's path (physical and virtual).</li>
</ul>
</div>
</div>
<div class="section" id="id13">
<h2>1.4 (2012-12-18)<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<div class="section" id="docs">
<h3>Docs<a class="headerlink" href="#docs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix functional tests in the ZODB tutorial</li>
</ul>
</div>
</div>
<div class="section" id="b3-2012-12-10">
<h2>1.4b3 (2012-12-10)<a class="headerlink" href="#b3-2012-12-10" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Packaging release only, no code changes.  1.4b2 was a brownbag release due to
missing directories in the tarball.</li>
</ul>
</div>
<div class="section" id="b2-2012-12-10">
<h2>1.4b2 (2012-12-10)<a class="headerlink" href="#b2-2012-12-10" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id14">
<h3>Docs<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Scaffolding is now PEP-8 compliant (at least for a brief shining moment).</li>
<li>Tutorial improvements.</li>
</ul>
</div>
<div class="section" id="id15">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Modified the <tt class="docutils literal"><span class="pre">_depth</span></tt> argument to <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> to accept
a value relative to the invocation of <tt class="docutils literal"><span class="pre">view_config</span></tt> itself. Thus, when it
was previously expecting a value of <tt class="docutils literal"><span class="pre">1</span></tt> or greater, to reflect that
the caller of <tt class="docutils literal"><span class="pre">view_config</span></tt> is 1 stack frame away from <tt class="docutils literal"><span class="pre">venusian.attach</span></tt>,
this implementation detail is now hidden.</li>
<li>Modified the <tt class="docutils literal"><span class="pre">_backframes</span></tt> argument to <tt class="docutils literal"><span class="pre">pyramid.util.action_method</span></tt> in a
similar way to the changes described to <tt class="docutils literal"><span class="pre">_depth</span></tt> above.  This argument
remains undocumented, but might be used in the wild by some insane person.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2012-11-21">
<h2>1.4b1 (2012-11-21)<a class="headerlink" href="#b1-2012-11-21" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id16">
<h3>Features<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Small microspeed enhancement which anticipates that a
<tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt> object is likely to be returned from a view.
Some code is shortcut if the class of the object returned by a view is this
class.  A similar microoptimization was done to
<tt class="docutils literal"><span class="pre">pyramid.request.Request.is_response</span></tt>.</p>
</li>
<li><p class="first">Make it possible to use variable arguments on <tt class="docutils literal"><span class="pre">p*</span></tt> commands (<tt class="docutils literal"><span class="pre">pserve</span></tt>,
<tt class="docutils literal"><span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">pviews</span></tt>, etc) in the form <tt class="docutils literal"><span class="pre">a=1</span> <span class="pre">b=2</span></tt> so you can fill in
values in parameterized <tt class="docutils literal"><span class="pre">.ini</span></tt> file, e.g. <tt class="docutils literal"><span class="pre">pshell</span> <span class="pre">etc/development.ini</span>
<span class="pre">http_port=8080</span></tt>.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/714">https://github.com/Pylons/pyramid/pull/714</a></p>
</li>
<li><p class="first">A somewhat advanced and obscure feature of Pyramid event handlers is their
ability to handle &quot;multi-interface&quot; notifications.  These notifications have
traditionally presented multiple objects to the subscriber callable.  For
instance, if an event was sent by code like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">registry</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>In the past, in order to catch such an event, you were obligated to write and
register an event subscriber that mentioned both the event and the context in
its argument list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeEvent</span><span class="p">,</span> <span class="n">SomeContextType</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>In many subscriber callables registered this way, it was common for the logic
in the subscriber callable to completely ignore the second and following
arguments (e.g. <tt class="docutils literal"><span class="pre">context</span></tt> in the above example might be ignored), because
they usually existed as attributes of the event anyway.  You could usually
get the same value by doing <tt class="docutils literal"><span class="pre">event.context</span></tt> or similar.</p>
<p>The fact that you needed to put an extra argument which you usually ignored
in the subscriber callable body was only a minor annoyance until we added
&quot;subscriber predicates&quot;, used to narrow the set of circumstances under which
a subscriber will be executed, in a prior 1.4 alpha release.  Once those were
added, the annoyance was escalated, because subscriber predicates needed to
accept the same argument list and arity as the subscriber callables that they
were configured against.  So, for example, if you had these two subscriber
registrations in your code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeEvent</span><span class="p">,</span> <span class="n">SomeContextType</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@subscriber</span><span class="p">(</span><span class="n">SomeOtherEvent</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>And you wanted to use a subscriber predicate:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeEvent</span><span class="p">,</span> <span class="n">SomeContextType</span><span class="p">],</span> <span class="n">mypredicate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">asubscriber1</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@subscriber</span><span class="p">(</span><span class="n">SomeOtherEvent</span><span class="p">,</span> <span class="n">mypredicate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">asubscriber2</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>If an existing <tt class="docutils literal"><span class="pre">mypredicate</span></tt> subscriber predicate had been written in such
a way that it accepted only one argument in its <tt class="docutils literal"><span class="pre">__call__</span></tt>, you could not
use it against a subscription which named more than one interface in its
subscriber interface list.  Similarly, if you had written a subscriber
predicate that accepted two arguments, you couldn't use it against a
registration that named only a single interface type.</p>
<p>For example, if you created this predicate:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyPredicate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c"># portions elided...</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">==</span> <span class="n">event</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">foo</span>
</pre></div>
</div>
<p>It would not work against a multi-interface-registered subscription, so in
the above example, when you attempted to use it against <tt class="docutils literal"><span class="pre">asubscriber1</span></tt>, it
would fail at runtime with a TypeError, claiming something was attempting to
call it with too many arguments.</p>
<p>To hack around this limitation, you were obligated to design the
<tt class="docutils literal"><span class="pre">mypredicate</span></tt> predicate to expect to receive in its <tt class="docutils literal"><span class="pre">__call__</span></tt> either a
single <tt class="docutils literal"><span class="pre">event</span></tt> argument (a SomeOtherEvent object) <em>or</em> a pair of arguments
(a SomeEvent object and a SomeContextType object), presumably by doing
something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyPredicate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c"># portions elided...</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">==</span> <span class="n">event</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">foo</span>
</pre></div>
</div>
<p>This was confusing and bad.</p>
<p>In order to allow people to ignore unused arguments to subscriber callables
and to normalize the relationship between event subscribers and subscriber
predicates, we now allow both subscribers and subscriber predicates to accept
only a single <tt class="docutils literal"><span class="pre">event</span></tt> argument even if they've been subscribed for
notifications that involve multiple interfaces.  Subscribers and subscriber
predicates that accept only one argument will receive the first object passed
to <tt class="docutils literal"><span class="pre">notify</span></tt>; this is typically (but not always) the event object.  The
other objects involved in the subscription lookup will be discarded.  You can
now write an event subscriber that accepts only <tt class="docutils literal"><span class="pre">event</span></tt> even if it
subscribes to multiple interfaces:</p>
<div class="highlight-python"><div class="highlight"><pre>@subscriber([SomeEvent, SomeContextType])
def asubscriber(event):
    # this will work!
</pre></div>
</div>
<p>This prevents you from needing to match the subscriber callable parameters to
the subscription type unnecessarily, especially when you don't make use of
any argument in your subscribers except for the event object itself.</p>
<p>Note, however, that if the event object is not the first
object in the call to <tt class="docutils literal"><span class="pre">notify</span></tt>, you'll run into trouble.  For example, if
notify is called with the context argument first:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">registry</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>You won't be able to take advantage of the event-only feature.  It will
&quot;work&quot;, but the object received by your event handler won't be the event
object, it will be the context object, which won't be very useful:</p>
<div class="highlight-python"><div class="highlight"><pre>@subscriber([SomeContextType, SomeEvent])
def asubscriber(event):
    # bzzt! you&#39;ll be getting the context here as ``event``, and it&#39;ll
    # be useless
</pre></div>
</div>
<p>Existing multiple-argument subscribers continue to work without issue, so you
should continue use those if your system notifies using multiple interfaces
and the first interface is not the event interface.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>@subscriber([SomeContextType, SomeEvent])
def asubscriber(context, event):
    # this will still work!
</pre></div>
</div>
<p>The event-only feature makes it possible to use a subscriber predicate that
accepts only a request argument within both multiple-interface subscriber
registrations and single-interface subscriber registrations.  You needn't
make slightly different variations of predicates depending on the
subscription type arguments.  Instead, just write all your subscriber
predicates so they only accept <tt class="docutils literal"><span class="pre">event</span></tt> in their <tt class="docutils literal"><span class="pre">__call__</span></tt> and they'll be
useful across all registrations for subscriptions that use an event as their
first argument, even ones which accept more than just <tt class="docutils literal"><span class="pre">event</span></tt>.</p>
<p>However, the same caveat applies to predicates as to subscriber callables: if
you're subscribing to a multi-interface event, and the first interface is not
the event interface, the predicate won't work properly.  In such a case,
you'll need to match the predicate <tt class="docutils literal"><span class="pre">__call__</span></tt> argument ordering and
composition to the ordering of the interfaces.  For example, if the
registration for the subscription uses <tt class="docutils literal"><span class="pre">[SomeContext,</span> <span class="pre">SomeEvent]</span></tt>, you'll
need to reflect that in the ordering of the parameters of the predicate's
<tt class="docutils literal"><span class="pre">__call__</span></tt> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">event</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
<p>tl;dr: 1) When using multi-interface subscriptions, always use the event type
as the first subscription registration argument and 2) When 1 is true, use
only <tt class="docutils literal"><span class="pre">event</span></tt> in your subscriber and subscriber predicate parameter lists,
no matter how many interfaces the subscriber is notified with.  This
combination will result in the maximum amount of reusability of subscriber
predicates and the least amount of thought on your part.  Drink responsibly.</p>
</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Bug Fixes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A failure when trying to locate the attribute <tt class="docutils literal"><span class="pre">__text__</span></tt> on route and view
predicates existed when the <tt class="docutils literal"><span class="pre">debug_routematch</span></tt> setting was true or when the
<tt class="docutils literal"><span class="pre">pviews</span></tt> command was used. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/727">https://github.com/Pylons/pyramid/pull/727</a></li>
</ul>
</div>
<div class="section" id="id18">
<h3>Documentation<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Sync up tutorial source files with the files that are rendered by the
scaffold that each uses.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2012-11-14">
<h2>1.4a4 (2012-11-14)<a class="headerlink" href="#a4-2012-11-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id19">
<h3>Features<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></tt> has been updated to
support newer hashing algorithms such as <tt class="docutils literal"><span class="pre">sha512</span></tt>. Existing applications
should consider updating if possible for improved security over the default
md5 hashing.</li>
<li>Added an <tt class="docutils literal"><span class="pre">effective_principals</span></tt> route and view predicate.</li>
<li>Do not allow the userid returned from the <tt class="docutils literal"><span class="pre">authenticated_userid</span></tt> or the
userid that is one of the list of principals returned by
<tt class="docutils literal"><span class="pre">effective_principals</span></tt> to be either of the strings <tt class="docutils literal"><span class="pre">system.Everyone</span></tt> or
<tt class="docutils literal"><span class="pre">system.Authenticated</span></tt> when any of the built-in authorization policies that
live in <tt class="docutils literal"><span class="pre">pyramid.authentication</span></tt> are in use.  These two strings are
reserved for internal usage by Pyramid and they will not be accepted as valid
userids.</li>
<li>Slightly better debug logging from
<tt class="docutils literal"><span class="pre">pyramid.authentication.RepozeWho1AuthenticationPolicy</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">pyramid.security.view_execution_permitted</span></tt> used to return <tt class="docutils literal"><span class="pre">True</span></tt> if no
view could be found. It now raises a <tt class="docutils literal"><span class="pre">TypeError</span></tt> exception in that case, as
it doesn't make sense to assert that a nonexistent view is
execution-permitted. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/299">https://github.com/Pylons/pyramid/issues/299</a>.</li>
<li>Allow a <tt class="docutils literal"><span class="pre">_depth</span></tt> argument to <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt>, which will
permit limited composition reuse of the decorator by other software that
wants to provide custom decorators that are much like view_config.</li>
<li>Allow an iterable of decorators to be passed to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_view</span></tt>. This allows views to be wrapped
by more than one decorator without requiring combining the decorators
yourself.</li>
</ul>
</div>
<div class="section" id="id20">
<h3>Bug Fixes<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In the past if a renderer returned <tt class="docutils literal"><span class="pre">None</span></tt>, the body of the resulting
response would be set explicitly to the empty string.  Instead, now, the body
is left unchanged, which allows the renderer to set a body itself by using
e.g. <tt class="docutils literal"><span class="pre">request.response.body</span> <span class="pre">=</span> <span class="pre">b'foo'</span></tt>.  The body set by the renderer will
be unmolested on the way out.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/709">https://github.com/Pylons/pyramid/issues/709</a></li>
<li>In uncommon cases, the <tt class="docutils literal"><span class="pre">pyramid_excview_tween_factory</span></tt> might have
inadvertently raised a <tt class="docutils literal"><span class="pre">KeyError</span></tt> looking for <tt class="docutils literal"><span class="pre">request_iface</span></tt> as an
attribute of the request.  It no longer fails in this case.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/700">https://github.com/Pylons/pyramid/issues/700</a></li>
<li>Be more tolerant of potential error conditions in <tt class="docutils literal"><span class="pre">match_param</span></tt> and
<tt class="docutils literal"><span class="pre">physical_path</span></tt> predicate implementations; instead of raising an exception,
return False.</li>
<li><tt class="docutils literal"><span class="pre">pyramid.view.render_view</span></tt> was not functioning properly under Python 3.x
due to a byte/unicode discrepancy. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/721">https://github.com/Pylons/pyramid/issues/721</a></li>
</ul>
</div>
<div class="section" id="id21">
<h3>Deprecations<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></tt> will emit a warning if
an application is using the policy without explicitly passing a <tt class="docutils literal"><span class="pre">hashalg</span></tt>
argument. This is because the default is &quot;md5&quot; which is considered
theoretically subject to collision attacks. If you really want &quot;md5&quot; then you
must specify it explicitly to get rid of the warning.</li>
</ul>
</div>
<div class="section" id="id22">
<h3>Documentation<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All of the tutorials that use
<tt class="docutils literal"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></tt> now explicitly pass
<tt class="docutils literal"><span class="pre">sha512</span></tt> as a <tt class="docutils literal"><span class="pre">hashalg</span></tt> argument.</li>
</ul>
</div>
<div class="section" id="internals">
<h3>Internals<a class="headerlink" href="#internals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Move <tt class="docutils literal"><span class="pre">TopologicalSorter</span></tt> from <tt class="docutils literal"><span class="pre">pyramid.config.util</span></tt> to <tt class="docutils literal"><span class="pre">pyramid.util</span></tt>,
move <tt class="docutils literal"><span class="pre">CyclicDependencyError</span></tt> from <tt class="docutils literal"><span class="pre">pyramid.config.util</span></tt> to
<tt class="docutils literal"><span class="pre">pyramid.exceptions</span></tt>, rename <tt class="docutils literal"><span class="pre">Singleton</span></tt> to <tt class="docutils literal"><span class="pre">Sentinel</span></tt> and move from
<tt class="docutils literal"><span class="pre">pyramid.config.util</span></tt> to <tt class="docutils literal"><span class="pre">pyramid.util</span></tt>; this is in an effort to
move that stuff that may be an API one day out of <tt class="docutils literal"><span class="pre">pyramid.config.util</span></tt>,
because that package should never be imported from non-Pyramid code.
TopologicalSorter is still not an API, but may become one.</li>
<li>Get rid of shady monkeypatching of <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt> done within the <tt class="docutils literal"><span class="pre">__init__.py</span></tt> of Pyramid.
Webob no longer relies on this being done.  Instead, the ResponseClass
attribute of the Pyramid Request class is assigned to the Pyramid response
class; that's enough to satisfy WebOb and behave as it did before with the
monkeypatching.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2012-10-26">
<h2>1.4a3 (2012-10-26)<a class="headerlink" href="#a3-2012-10-26" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id23">
<h3>Bug Fixes<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The match_param predicate's text method was fixed to sort its values.
Part of <a class="reference external" href="https://github.com/Pylons/pyramid/pull/705">https://github.com/Pylons/pyramid/pull/705</a></li>
<li>1.4a <tt class="docutils literal"><span class="pre">pyramid.scripting.prepare</span></tt> behaved differently than 1.3 series
function of same name.  In particular, if passed a request, it would not
set the <tt class="docutils literal"><span class="pre">registry</span></tt> attribute of the request like 1.3 did.  A symptom
would be that passing a request to <tt class="docutils literal"><span class="pre">pyramid.paster.bootstrap</span></tt> (which uses
the function) that did not have a <tt class="docutils literal"><span class="pre">registry</span></tt> attribute could assume that
the registry would be attached to the request by Pyramid.  This assumption
could be made in 1.3, but not in 1.4.  The assumption can now be made in
1.4 too (a registry is attached to a request passed to bootstrap or
prepare).</li>
<li>When registering a view configuration that named a Chameleon ZPT renderer
with a macro name in it (e.g. <tt class="docutils literal"><span class="pre">renderer='some/template#somemacro.pt</span></tt>) as
well as a view configuration without a macro name in it that pointed to the
same template (e.g. <tt class="docutils literal"><span class="pre">renderer='some/template.pt'</span></tt>), internal caching could
confuse the two, and your code might have rendered one instead of the
other.</li>
</ul>
</div>
<div class="section" id="id24">
<h3>Features<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow multiple values to be specified to the <tt class="docutils literal"><span class="pre">request_param</span></tt> view/route
predicate as a sequence.  Previously only a single string value was allowed.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/705">https://github.com/Pylons/pyramid/pull/705</a></li>
<li>Comments with references to documentation sections placed in scaffold
<tt class="docutils literal"><span class="pre">.ini</span></tt> files.</li>
<li>Added an HTTP Basic authentication policy
at <tt class="docutils literal"><span class="pre">pyramid.authentication.BasicAuthAuthenticationPolicy</span></tt>.</li>
<li>The Configurator <tt class="docutils literal"><span class="pre">testing_securitypolicy</span></tt> method now returns the policy
object it creates.</li>
<li>The Configurator <tt class="docutils literal"><span class="pre">testing_securitypolicy</span></tt> method accepts two new
arguments: <tt class="docutils literal"><span class="pre">remember_result</span></tt> and <tt class="docutils literal"><span class="pre">forget_result</span></tt>.  If supplied, these
values influence the result of the policy's <tt class="docutils literal"><span class="pre">remember</span></tt> and <tt class="docutils literal"><span class="pre">forget</span></tt>
methods, respectively.</li>
<li>The DummySecurityPolicy created by <tt class="docutils literal"><span class="pre">testing_securitypolicy</span></tt> now sets a
<tt class="docutils literal"><span class="pre">forgotten</span></tt> value on the policy (the value <tt class="docutils literal"><span class="pre">True</span></tt>) when its <tt class="docutils literal"><span class="pre">forget</span></tt>
method is called.</li>
<li>The DummySecurityPolicy created by <tt class="docutils literal"><span class="pre">testing_securitypolicy</span></tt> now sets a
<tt class="docutils literal"><span class="pre">remembered</span></tt> value on the policy, which is the value of the <tt class="docutils literal"><span class="pre">principal</span></tt>
argument it's called with when its <tt class="docutils literal"><span class="pre">remember</span></tt> method is called.</li>
<li>New <tt class="docutils literal"><span class="pre">physical_path</span></tt> view predicate.  If specified, this value should be a
string or a tuple representing the physical traversal path of the context
found via traversal for this predicate to match as true.  For example:
<tt class="docutils literal"><span class="pre">physical_path='/'</span></tt> or <tt class="docutils literal"><span class="pre">physical_path='/a/b/c'</span></tt> or <tt class="docutils literal"><span class="pre">physical_path=('',</span>
<span class="pre">'a',</span> <span class="pre">'b',</span> <span class="pre">'c')</span></tt>.  This is not a path prefix match or a regex, it's a
whole-path match.  It's useful when you want to always potentially show a
view when some object is traversed to, but you can't be sure about what kind
of object it will be, so you can't use the <tt class="docutils literal"><span class="pre">context</span></tt> predicate.  The
individual path elements inbetween slash characters or in tuple elements
should be the Unicode representation of the name of the resource and should
not be encoded in any way.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2012-09-27">
<h2>1.4a2 (2012-09-27)<a class="headerlink" href="#a2-2012-09-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id25">
<h3>Bug Fixes<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When trying to determine Mako defnames and Chameleon macro names in asset
specifications, take into account that the filename may have a hyphen in
it.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/692">https://github.com/Pylons/pyramid/pull/692</a></li>
</ul>
</div>
<div class="section" id="id26">
<h3>Features<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A new <tt class="docutils literal"><span class="pre">pyramid.session.check_csrf_token</span></tt> convenience function was added.</li>
<li>A <tt class="docutils literal"><span class="pre">check_csrf</span></tt> view predicate was added.  For example, you can now do
<tt class="docutils literal"><span class="pre">config.add_view(someview,</span> <span class="pre">check_csrf=True)</span></tt>.  When the predicate is
checked, if the <tt class="docutils literal"><span class="pre">csrf_token</span></tt> value in <tt class="docutils literal"><span class="pre">request.params</span></tt> matches the CSRF
token in the request's session, the view will be permitted to execute.
Otherwise, it will not be permitted to execute.</li>
<li>Add <tt class="docutils literal"><span class="pre">Base.metadata.bind</span> <span class="pre">=</span> <span class="pre">engine</span></tt> to alchemy template, so that tables
defined imperatively will work.</li>
</ul>
</div>
<div class="section" id="id27">
<h3>Documentation<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>update wiki2 SQLA tutorial with the changes required after inserting
<tt class="docutils literal"><span class="pre">Base.metadata.bind</span> <span class="pre">=</span> <span class="pre">engine</span></tt> into the alchemy scaffold.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2012-09-16">
<h2>1.4a1 (2012-09-16)<a class="headerlink" href="#a1-2012-09-16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id28">
<h3>Bug Fixes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Forward port from 1.3 branch: When no authentication policy was configured,
a call to <tt class="docutils literal"><span class="pre">pyramid.security.effective_principals</span></tt> would unconditionally
return the empty list.  This was incorrect, it should have unconditionally
returned <tt class="docutils literal"><span class="pre">[Everyone]</span></tt>, and now does.</li>
<li>Explicit url dispatch regexes can now contain colons.
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/629">https://github.com/Pylons/pyramid/issues/629</a></li>
<li>On at least one 64-bit Ubuntu system under Python 3.2, using the
<tt class="docutils literal"><span class="pre">view_config</span></tt> decorator caused a <tt class="docutils literal"><span class="pre">RuntimeError:</span> <span class="pre">dictionary</span> <span class="pre">changed</span> <span class="pre">size</span>
<span class="pre">during</span> <span class="pre">iteration</span></tt> exception.  It no longer does.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/635">https://github.com/Pylons/pyramid/issues/635</a> for more information.</li>
<li>In Mako Templates lookup, check if the uri is already adjusted and bring
it back to an asset spec. Normally occurs with inherited templates or
included components.
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/606">https://github.com/Pylons/pyramid/issues/606</a>
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/607">https://github.com/Pylons/pyramid/issues/607</a></li>
<li>In Mako Templates lookup, check for absolute uri (using mako directories)
when mixing up inheritance with asset specs.
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/662">https://github.com/Pylons/pyramid/issues/662</a></li>
<li>HTTP Accept headers were not being normalized causing potentially
conflicting view registrations to go unnoticed. Two views that only
differ in the case ('text/html' vs. 'text/HTML') will now raise an error.
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/620">https://github.com/Pylons/pyramid/pull/620</a></li>
<li>Forward-port from 1.3 branch: when registering multiple views with an
<tt class="docutils literal"><span class="pre">accept</span></tt> predicate in a Pyramid application runing under Python 3, you
might have received a <tt class="docutils literal"><span class="pre">TypeError:</span> <span class="pre">unorderable</span> <span class="pre">types:</span> <span class="pre">function()</span> <span class="pre">&lt;</span>
<span class="pre">function()</span></tt> exception.</li>
</ul>
</div>
<div class="section" id="id29">
<h3>Features<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Configurator.add_directive now accepts arbitrary callables like partials or
objects implementing <tt class="docutils literal"><span class="pre">__call__</span></tt> which dont have <tt class="docutils literal"><span class="pre">__name__</span></tt> and
<tt class="docutils literal"><span class="pre">__doc__</span></tt> attributes.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/621">https://github.com/Pylons/pyramid/issues/621</a>
and <a class="reference external" href="https://github.com/Pylons/pyramid/pull/647">https://github.com/Pylons/pyramid/pull/647</a>.</p>
</li>
<li><p class="first">Third-party custom view, route, and subscriber predicates can now be added
for use by view authors via
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_view_predicate</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_route_predicate</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_subscriber_predicate</span></tt>.  So, for example,
doing this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_view_predicate</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">my</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">ABCPredicate</span><span class="p">)</span>
</pre></div>
</div>
<p>Might allow a view author to do this in an application that configured that
predicate:</p>
<div class="highlight-python"><div class="highlight"><pre>@view_config(abc=1)
</pre></div>
</div>
<p>Similar features exist for <tt class="docutils literal"><span class="pre">add_route</span></tt>, and <tt class="docutils literal"><span class="pre">add_subscriber</span></tt>.  See
&quot;Adding A Third Party View, Route, or Subscriber Predicate&quot; in the Hooks
chapter for more information.</p>
<p>Note that changes made to support the above feature now means that only
actions registered using the same &quot;order&quot; can conflict with one another.
It used to be the case that actions registered at different orders could
potentially conflict, but to my knowledge nothing ever depended on this
behavior (it was a bit silly).</p>
</li>
<li><p class="first">Custom objects can be made easily JSON-serializable in Pyramid by defining
a <tt class="docutils literal"><span class="pre">__json__</span></tt> method on the object's class. This method should return
values natively serializable by <tt class="docutils literal"><span class="pre">json.dumps</span></tt> (such as ints, lists,
dictionaries, strings, and so forth).</p>
</li>
<li><p class="first">The JSON renderer now allows for the definition of custom type adapters to
convert unknown objects to JSON serializations.</p>
</li>
<li><p class="first">As of this release, the <tt class="docutils literal"><span class="pre">request_method</span></tt> predicate, when used, will also
imply that <tt class="docutils literal"><span class="pre">HEAD</span></tt> is implied when you use <tt class="docutils literal"><span class="pre">GET</span></tt>.  For example, using
<tt class="docutils literal"><span class="pre">&#64;view_config(request_method='GET')</span></tt> is equivalent to using
<tt class="docutils literal"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'HEAD'))</span></tt>.  Using
<tt class="docutils literal"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'POST')</span></tt> is equivalent to using
<tt class="docutils literal"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'HEAD',</span> <span class="pre">'POST')</span></tt>.  This is because
HEAD is a variant of GET that omits the body, and WebOb has special support
to return an empty body when a HEAD is used.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">config.add_request_method</span></tt> has been introduced to support extending
request objects with arbitrary callables. This method expands on the
previous <tt class="docutils literal"><span class="pre">config.set_request_property</span></tt> by supporting methods as well as
properties. This method now causes less code to be executed at
request construction time than <tt class="docutils literal"><span class="pre">config.set_request_property</span></tt> in
version 1.3.</p>
</li>
<li><p class="first">Don't add a <tt class="docutils literal"><span class="pre">?</span></tt> to URLs generated by <tt class="docutils literal"><span class="pre">request.resource_url</span></tt> if the
<tt class="docutils literal"><span class="pre">query</span></tt> argument is provided but empty.</p>
</li>
<li><p class="first">Don't add a <tt class="docutils literal"><span class="pre">?</span></tt> to URLs generated by <tt class="docutils literal"><span class="pre">request.route_url</span></tt> if the
<tt class="docutils literal"><span class="pre">_query</span></tt> argument is provided but empty.</p>
</li>
<li><p class="first">The static view machinery now raises (rather than returns) <tt class="docutils literal"><span class="pre">HTTPNotFound</span></tt>
and <tt class="docutils literal"><span class="pre">HTTPMovedPermanently</span></tt> exceptions, so these can be caught by the
Not Found View (and other exception views).</p>
</li>
<li><p class="first">The Mako renderer now supports a def name in an asset spec.  When the def
name is present in the asset spec, the system will render the template def
within the template and will return the result. An example asset spec is
<tt class="docutils literal"><span class="pre">package:path/to/template#defname.mako</span></tt>. This will render the def named
<tt class="docutils literal"><span class="pre">defname</span></tt> inside the <tt class="docutils literal"><span class="pre">template.mako</span></tt> template instead of rendering the
entire template.  The old way of returning a tuple in the form
<tt class="docutils literal"><span class="pre">('defname',</span> <span class="pre">{})</span></tt> from the view is supported for backward compatibility,</p>
</li>
<li><p class="first">The Chameleon ZPT renderer now accepts a macro name in an asset spec.  When
the macro name is present in the asset spec, the system will render the
macro listed as a <tt class="docutils literal"><span class="pre">define-macro</span></tt> and return the result instead of
rendering the entire template.  An example asset spec:
<tt class="docutils literal"><span class="pre">package:path/to/template#macroname.pt</span></tt>.  This will render the macro
defined as <tt class="docutils literal"><span class="pre">macroname</span></tt> within the <tt class="docutils literal"><span class="pre">template.pt</span></tt> template instead of the
entire templae.</p>
</li>
<li><p class="first">When there is a predicate mismatch exception (seen when no view matches for
a given request due to predicates not working), the exception now contains
a textual description of the predicate which didn't match.</p>
</li>
<li><p class="first">An <tt class="docutils literal"><span class="pre">add_permission</span></tt> directive method was added to the Configurator.  This
directive registers a free-standing permission introspectable into the
Pyramid introspection system.  Frameworks built atop Pyramid can thus use
the <tt class="docutils literal"><span class="pre">permissions</span></tt> introspectable category data to build a
comprehensive list of permissions supported by a running system.  Before
this method was added, permissions were already registered in this
introspectable category as a side effect of naming them in an <tt class="docutils literal"><span class="pre">add_view</span></tt>
call, this method just makes it possible to arrange for a permission to be
put into the <tt class="docutils literal"><span class="pre">permissions</span></tt> introspectable category without naming it
along with an associated view.  Here's an example of usage of
<tt class="docutils literal"><span class="pre">add_permission</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_permission</span><span class="p">(</span><span class="s">&#39;view&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></tt> now accepts
<tt class="docutils literal"><span class="pre">signed_serialize</span></tt> and <tt class="docutils literal"><span class="pre">signed_deserialize</span></tt> hooks which may be used
to influence how the sessions are marshalled (by default this is done
with HMAC+pickle).</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt> now supports methods supplied by the
<tt class="docutils literal"><span class="pre">pyramid.util.InstancePropertyMixin</span></tt> class such as <tt class="docutils literal"><span class="pre">set_property</span></tt>.</p>
</li>
<li><p class="first">Request properties and methods added via <tt class="docutils literal"><span class="pre">config.set_request_property</span></tt> or
<tt class="docutils literal"><span class="pre">config.add_request_method</span></tt> are now available to tweens.</p>
</li>
<li><p class="first">Request properties and methods added via <tt class="docutils literal"><span class="pre">config.set_request_property</span></tt> or
<tt class="docutils literal"><span class="pre">config.add_request_method</span></tt> are now available in the request object
returned from <tt class="docutils literal"><span class="pre">pyramid.paster.bootstrap</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">request.context</span></tt> of environment request during <tt class="docutils literal"><span class="pre">bootstrap</span></tt> is now the
root object if a context isn't already set on a provided request.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.decorator.reify</span></tt> function is now an API, and was added to
the API documentation.</p>
</li>
<li><p class="first">Added the <tt class="docutils literal"><span class="pre">pyramid.testing.testConfig</span></tt> context manager, which can be used
to generate a configurator in a test, e.g. <tt class="docutils literal"><span class="pre">with</span> <span class="pre">testing.testConfig(...):</span></tt>.</p>
</li>
<li><p class="first">Users can now invoke a subrequest from within view code using a new
<tt class="docutils literal"><span class="pre">request.invoke_subrequest</span></tt> API.</p>
</li>
</ul>
</div>
<div class="section" id="id30">
<h3>Deprecations<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.set_request_property</span></tt> has been
documentation-deprecated.  The method remains usable but the more
featureful <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_request_method</span></tt> should be
used in its place (it has all of the same capabilities but can also extend
the request object with methods).</li>
</ul>
</div>
<div class="section" id="id31">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The Pyramid router no longer adds the values <tt class="docutils literal"><span class="pre">bfg.routes.route</span></tt> or
<tt class="docutils literal"><span class="pre">bfg.routes.matchdict</span></tt> to the request's WSGI environment dictionary.
These values were docs-deprecated in <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> 1.0 (effectively seven
minor releases ago).  If your code depended on these values, use
request.matched_route and request.matchdict instead.</li>
<li>It is no longer possible to pass an environ dictionary directly to
<tt class="docutils literal"><span class="pre">pyramid.traversal.ResourceTreeTraverser.__call__</span></tt> (aka
<tt class="docutils literal"><span class="pre">ModelGraphTraverser.__call__</span></tt>).  Instead, you must pass a request
object.  Passing an environment instead of a request has generated a
deprecation warning since Pyramid 1.1.</li>
<li>Pyramid will no longer work properly if you use the
<tt class="docutils literal"><span class="pre">webob.request.LegacyRequest</span></tt> as a request factory.  Instances of the
LegacyRequest class have a <tt class="docutils literal"><span class="pre">request.path_info</span></tt> which return a string.
This Pyramid release assumes that <tt class="docutils literal"><span class="pre">request.path_info</span></tt> will
unconditionally be Unicode.</li>
<li>The functions from <tt class="docutils literal"><span class="pre">pyramid.chameleon_zpt</span></tt> and <tt class="docutils literal"><span class="pre">pyramid.chameleon_text</span></tt>
named <tt class="docutils literal"><span class="pre">get_renderer</span></tt>, <tt class="docutils literal"><span class="pre">get_template</span></tt>, <tt class="docutils literal"><span class="pre">render_template</span></tt>, and
<tt class="docutils literal"><span class="pre">render_template_to_response</span></tt> have been removed.  These have issued a
deprecation warning upon import since Pyramid 1.0.  Use
<tt class="docutils literal"><span class="pre">pyramid.renderers.get_renderer()</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.renderers.get_renderer().implementation()</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.renderers.render()</span></tt> or <tt class="docutils literal"><span class="pre">pyramid.renderers.render_to_response</span></tt>
respectively instead of these functions.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.configuration</span></tt> module was removed.  It had been deprecated
since Pyramid 1.0 and printed a deprecation warning upon its use.  Use
<tt class="docutils literal"><span class="pre">pyramid.config</span></tt> instead.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.paster.PyramidTemplate</span></tt> API was removed.  It had been
deprecated since Pyramid 1.1 and issued a warning on import.  If your code
depended on this, adjust your code to import
<tt class="docutils literal"><span class="pre">pyramid.scaffolds.PyramidTemplate</span></tt> instead.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.settings.get_settings()</span></tt> API was removed.  It had been
printing a deprecation warning since Pyramid 1.0.  If your code depended on
this API, use <tt class="docutils literal"><span class="pre">pyramid.threadlocal.get_current_registry().settings</span></tt>
instead or use the <tt class="docutils literal"><span class="pre">settings</span></tt> attribute of the registry available from
the request (<tt class="docutils literal"><span class="pre">request.registry.settings</span></tt>).</li>
<li>These APIs from the <tt class="docutils literal"><span class="pre">pyramid.testing</span></tt> module were removed.  They have
been printing deprecation warnings since Pyramid 1.0:<ul>
<li><tt class="docutils literal"><span class="pre">registerDummySecurityPolicy</span></tt>, use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.testing_securitypolicy</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerResources</span></tt> (aka <tt class="docutils literal"><span class="pre">registerModels</span></tt>, use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.testing_resources</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerEventListener</span></tt>, use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.testing_add_subscriber</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerTemplateRenderer</span></tt> (aka <cite>registerDummyRenderer`</cite>), use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.testing_add_template</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerView</span></tt>, use <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_view</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerUtility</span></tt>, use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.registry.registerUtility</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerAdapter</span></tt>, use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.registry.registerAdapter</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerSubscriber</span></tt>, use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_subscriber</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerRoute</span></tt>, use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_route</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">registerSettings</span></tt>, use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_settings</span></tt> instead.</li>
</ul>
</li>
<li>In Pyramid 1.3 and previous, the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of a Response object
was invoked before any finished callbacks were executed.  As of this
release, the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of a Response object is invoked <em>after</em>
finished callbacks are executed.  This is in support of the
<tt class="docutils literal"><span class="pre">request.invoke_subrequest</span></tt> feature.</li>
<li>The 200-series exception responses named <tt class="docutils literal"><span class="pre">HTTPCreated</span></tt>, <tt class="docutils literal"><span class="pre">HTTPAccepted</span></tt>,
<tt class="docutils literal"><span class="pre">HTTPNonAuthoritativeInformation</span></tt>, <tt class="docutils literal"><span class="pre">HTTPNoContent</span></tt>, <tt class="docutils literal"><span class="pre">HTTPResetContent</span></tt>,
and <tt class="docutils literal"><span class="pre">HTTPPartialContent</span></tt> in <tt class="docutils literal"><span class="pre">pyramid.httpexceptions</span></tt> no longer inherit
from <tt class="docutils literal"><span class="pre">HTTPOk</span></tt>.  Instead they inherit from a new base class named
<tt class="docutils literal"><span class="pre">HTTPSuccessful</span></tt>.  This will have no effect on you unless you've registered
an exception view for <tt class="docutils literal"><span class="pre">HTTPOk</span></tt> and expect that exception view to
catch all the aforementioned exceptions.</li>
</ul>
</div>
<div class="section" id="id32">
<h3>Documentation<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added an &quot;Upgrading Pyramid&quot; chapter to the narrative documentation.  It
describes how to cope with deprecations and removals of Pyramid APIs and
how to show Pyramid-generated deprecation warnings while running tests and
while running a server.</li>
<li>Added a &quot;Invoking a Subrequest&quot; chapter to the documentation.  It describes
how to use the new <tt class="docutils literal"><span class="pre">request.invoke_subrequest</span></tt> API.</li>
</ul>
</div>
<div class="section" id="id33">
<h3>Dependencies<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid now requires WebOb 1.2b3+ (the prior Pyramid release only relied on
1.2dev+).  This is to ensure that we obtain a version of WebOb that returns
<tt class="docutils literal"><span class="pre">request.path_info</span></tt> as text.</li>
</ul>
</div>
</div>
<div class="section" id="id34">
<h2>1.3 (2012-03-21)<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id35">
<h3>Bug Fixes<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When <tt class="docutils literal"><span class="pre">pyramid.wsgi.wsgiapp2</span></tt> calls the downstream WSGI app, the app's
environ will no longer have (deprecated and potentially misleading)
<tt class="docutils literal"><span class="pre">bfg.routes.matchdict</span></tt> or <tt class="docutils literal"><span class="pre">bfg.routes.route</span></tt> keys in it.  A symptom of
this bug would be a <tt class="docutils literal"><span class="pre">wsgiapp2</span></tt>-wrapped Pyramid app finding the wrong view
because it mistakenly detects that a route was matched when, in fact, it
was not.</li>
<li>The fix for issue <a class="reference external" href="https://github.com/Pylons/pyramid/issues/461">https://github.com/Pylons/pyramid/issues/461</a> (which made
it possible for instance methods to be used as view callables) introduced a
backwards incompatibility when methods that declared only a request
argument were used.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/503">https://github.com/Pylons/pyramid/issues/503</a></li>
</ul>
</div>
</div>
<div class="section" id="b3-2012-03-17">
<h2>1.3b3 (2012-03-17)<a class="headerlink" href="#b3-2012-03-17" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id36">
<h3>Bug Fixes<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">config.add_view(&lt;aninstancemethod&gt;)</span></tt> raised AttributeError involving
<tt class="docutils literal"><span class="pre">__text__</span></tt>.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/461">https://github.com/Pylons/pyramid/issues/461</a></li>
<li>Remove references to do-nothing <tt class="docutils literal"><span class="pre">pyramid.debug_templates</span></tt> setting in all
Pyramid-provided <tt class="docutils literal"><span class="pre">.ini</span></tt> files.  This setting previously told Chameleon to
render better exceptions; now Chameleon always renders nice exceptions
regardless of the value of this setting.</li>
</ul>
</div>
<div class="section" id="scaffolds">
<h3>Scaffolds<a class="headerlink" href="#scaffolds" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">alchemy</span></tt> scaffold now shows an informative error message in the
browser if the person creating the project forgets to run the
initialization script.</li>
<li>The <tt class="docutils literal"><span class="pre">alchemy</span></tt> scaffold initialization script is now called
<tt class="docutils literal"><span class="pre">initialize_&lt;projectname&gt;_db</span></tt> instead of <tt class="docutils literal"><span class="pre">populate_&lt;projectname&gt;</span></tt>.</li>
</ul>
</div>
<div class="section" id="id37">
<h3>Documentation<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Wiki tutorials improved due to collaboration at PyCon US 2012 sprints.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2012-03-02">
<h2>1.3b2 (2012-03-02)<a class="headerlink" href="#b2-2012-03-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id38">
<h3>Bug Fixes<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The method <tt class="docutils literal"><span class="pre">pyramid.request.Request.partial_application_url</span></tt> is no longer
in the API docs.  It was meant to be a private method; its publication in
the documentation as an API method was a mistake, and it has been renamed
to something private.</p>
</li>
<li><p class="first">When a static view was registered using an absolute filesystem path on
Windows, the <tt class="docutils literal"><span class="pre">request.static_url</span></tt> function did not work to generate URLs
to its resources.  Symptom: &quot;No static URL definition matching
c:\foo\bar\baz&quot;.</p>
</li>
<li><p class="first">Make all tests pass on Windows XP.</p>
</li>
<li><p class="first">Bug in ACL authentication checking on Python 3: the <tt class="docutils literal"><span class="pre">permits</span></tt> and
<tt class="docutils literal"><span class="pre">principals_allowed_by_permission</span></tt> method of
<tt class="docutils literal"><span class="pre">pyramid.authorization.ACLAuthenticationPolicy</span></tt> could return an
inappropriate <tt class="docutils literal"><span class="pre">True</span></tt> value when a permission on an ACL was a string
rather than a sequence, and then only if the ACL permission string was a
substring of the <tt class="docutils literal"><span class="pre">permission</span></tt> value passed to the function.</p>
<p>This bug effects no Pyramid deployment under Python 2; it is a bug that
exists only in deployments running on Python 3.  It has existed since
Pyramid 1.3a1.</p>
<p>This bug was due to the presence of an <tt class="docutils literal"><span class="pre">__iter__</span></tt> attribute on strings
under Python 3 which is not present under strings in Python 2.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="b1-2012-02-26">
<h2>1.3b1 (2012-02-26)<a class="headerlink" href="#b1-2012-02-26" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id39">
<h3>Bug Fixes<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pyramid.config.Configurator.with_package</span></tt> didn't work if the
Configurator was an old-style <tt class="docutils literal"><span class="pre">pyramid.configuration.Configurator</span></tt>
instance.</li>
<li>Pyramid authorization policies did not show up in the introspector.</li>
</ul>
</div>
<div class="section" id="id40">
<h3>Deprecations<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All references to the <tt class="docutils literal"><span class="pre">tmpl_context</span></tt> request variable were removed from
the docs.  Its existence in Pyramid is confusing for people who were never
Pylons users.  It was added as a porting convenience for Pylons users in
Pyramid 1.0, but it never caught on because the Pyramid rendering system is
a lot different than Pylons' was, and alternate ways exist to do what it
was designed to offer in Pylons.  It will continue to exist &quot;forever&quot; but
it will not be recommended or mentioned in the docs.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2012-02-22">
<h2>1.3a9 (2012-02-22)<a class="headerlink" href="#a9-2012-02-22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id41">
<h3>Features<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add an <tt class="docutils literal"><span class="pre">introspection</span></tt> boolean to the Configurator constructor.  If this
is <tt class="docutils literal"><span class="pre">True</span></tt>, actions registered using the Configurator will be registered
with the introspector.  If it is <tt class="docutils literal"><span class="pre">False</span></tt>, they won't.  The default is
<tt class="docutils literal"><span class="pre">True</span></tt>.  Setting it to <tt class="docutils literal"><span class="pre">False</span></tt> during action processing will prevent
introspection for any following registration statements, and setting it to
<tt class="docutils literal"><span class="pre">True</span></tt> will start them up again.  This addition is to service a
requirement that the debug toolbar's own views and methods not show up in
the introspector.</li>
<li>New API: <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_notfound_view</span></tt>.  This is a
wrapper for <tt class="docutils literal"><span class="pre">pyramid.Config.configurator.add_view</span></tt> which provides easy
append_slash support and does the right thing about permissions.  It should
be preferred over calling <tt class="docutils literal"><span class="pre">add_view</span></tt> directly with
<tt class="docutils literal"><span class="pre">context=HTTPNotFound</span></tt> as was previously recommended.</li>
<li>New API: <tt class="docutils literal"><span class="pre">pyramid.view.notfound_view_config</span></tt>.  This is a decorator
constructor like <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> that calls
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_notfound_view</span></tt> when scanned.  It should
be preferred over using <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> with
<tt class="docutils literal"><span class="pre">context=HTTPNotFound</span></tt> as was previously recommended.</li>
<li>New API: <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_forbidden_view</span></tt>.  This is a
wrapper for <tt class="docutils literal"><span class="pre">pyramid.Config.configurator.add_view</span></tt> which does the right
thing about permissions.  It should be preferred over calling <tt class="docutils literal"><span class="pre">add_view</span></tt>
directly with <tt class="docutils literal"><span class="pre">context=HTTPForbidden</span></tt> as was previously recommended.</li>
<li>New API: <tt class="docutils literal"><span class="pre">pyramid.view.forbidden_view_config</span></tt>.  This is a decorator
constructor like <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> that calls
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_forbidden_view</span></tt> when scanned.  It should
be preferred over using <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> with
<tt class="docutils literal"><span class="pre">context=HTTPForbidden</span></tt> as was previously recommended.</li>
<li>New APIs: <tt class="docutils literal"><span class="pre">pyramid.response.FileResponse</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.response.FileIter</span></tt>, for usage in views that must serve files
&quot;manually&quot;.</li>
</ul>
</div>
<div class="section" id="id42">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.with_context</span></tt> class method.  It was
never an API, it is only used by <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt> and its functionality has
been moved to that package's latest release.  This means that you'll need
to use the 0.9.2 or later release of <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt> with this release of
Pyramid.</li>
<li>The <tt class="docutils literal"><span class="pre">introspector</span></tt> argument to the <tt class="docutils literal"><span class="pre">pyramid.config.Configurator</span></tt>
constructor API has been removed.  It has been replaced by the boolean
<tt class="docutils literal"><span class="pre">introspection</span></tt> flag.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.registry.noop_introspector</span></tt> API object has been removed.</li>
<li>The older deprecated <tt class="docutils literal"><span class="pre">set_notfound_view</span></tt> Configurator method is now an
alias for the new <tt class="docutils literal"><span class="pre">add_notfound_view</span></tt> Configurator method.  Likewise, the
older deprecated <tt class="docutils literal"><span class="pre">set_forbidden_view</span></tt> is now an alias for the new
<tt class="docutils literal"><span class="pre">add_forbidden_view</span></tt>. This has the following impact: the <tt class="docutils literal"><span class="pre">context</span></tt> sent
to views with a <tt class="docutils literal"><span class="pre">(context,</span> <span class="pre">request)</span></tt> call signature registered via the
<tt class="docutils literal"><span class="pre">set_notfound_view</span></tt> or <tt class="docutils literal"><span class="pre">set_forbidden_view</span></tt> will now be an exception
object instead of the actual resource context found.  Use
<tt class="docutils literal"><span class="pre">request.context</span></tt> to get the actual resource context.  It's also
recommended to disuse <tt class="docutils literal"><span class="pre">set_notfound_view</span></tt> in favor of
<tt class="docutils literal"><span class="pre">add_notfound_view</span></tt>, and disuse <tt class="docutils literal"><span class="pre">set_forbidden_view</span></tt> in favor of
<tt class="docutils literal"><span class="pre">add_forbidden_view</span></tt> despite the aliasing.</li>
</ul>
</div>
<div class="section" id="id43">
<h3>Deprecations<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The API documentation for <tt class="docutils literal"><span class="pre">pyramid.view.append_slash_notfound_view</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.view.AppendSlashNotFoundViewFactory</span></tt> was removed.  These names
still exist and are still importable, but they are no longer APIs.  Use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_notfound_view(append_slash=True)</span></tt> or
<tt class="docutils literal"><span class="pre">pyramid.view.notfound_view_config(append_slash=True)</span></tt> to get the same
behavior.</li>
<li>The <tt class="docutils literal"><span class="pre">set_forbidden_view</span></tt> and <tt class="docutils literal"><span class="pre">set_notfound_view</span></tt> methods of the
Configurator were removed from the documentation.  They have been
deprecated since Pyramid 1.1.</li>
</ul>
</div>
<div class="section" id="id44">
<h3>Bug Fixes<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The static file response object used by <tt class="docutils literal"><span class="pre">config.add_static_view</span></tt> opened
the static file twice, when it only needed to open it once.</li>
<li>The AppendSlashNotFoundViewFactory used request.path to match routes.  This
was wrong because request.path contains the script name, and this would
cause it to fail in circumstances where the script name was not empty.  It
should have used request.path_info, and now does.</li>
</ul>
</div>
<div class="section" id="id45">
<h3>Documentation<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Updated the &quot;Creating a Not Found View&quot; section of the &quot;Hooks&quot; chapter,
replacing explanations of registering a view using <tt class="docutils literal"><span class="pre">add_view</span></tt> or
<tt class="docutils literal"><span class="pre">view_config</span></tt> with ones using <tt class="docutils literal"><span class="pre">add_notfound_view</span></tt> or
<tt class="docutils literal"><span class="pre">notfound_view_config</span></tt>.</li>
<li>Updated the &quot;Creating a Not Forbidden View&quot; section of the &quot;Hooks&quot; chapter,
replacing explanations of registering a view using <tt class="docutils literal"><span class="pre">add_view</span></tt> or
<tt class="docutils literal"><span class="pre">view_config</span></tt> with ones using <tt class="docutils literal"><span class="pre">add_forbidden_view</span></tt> or
<tt class="docutils literal"><span class="pre">forbidden_view_config</span></tt>.</li>
<li>Updated the &quot;Redirecting to Slash-Appended Routes&quot; section of the &quot;URL
Dispatch&quot; chapter, replacing explanations of registering a view using
<tt class="docutils literal"><span class="pre">add_view</span></tt> or <tt class="docutils literal"><span class="pre">view_config</span></tt> with ones using <tt class="docutils literal"><span class="pre">add_notfound_view</span></tt> or
<tt class="docutils literal"><span class="pre">notfound_view_config</span></tt></li>
<li>Updated all tutorials to use <tt class="docutils literal"><span class="pre">pyramid.view.forbidden_view_config</span></tt> rather
than <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> with an HTTPForbidden context.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2012-02-19">
<h2>1.3a8 (2012-02-19)<a class="headerlink" href="#a8-2012-02-19" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id46">
<h3>Features<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">scan</span></tt> method of a <tt class="docutils literal"><span class="pre">Configurator</span></tt> can be passed an <tt class="docutils literal"><span class="pre">ignore</span></tt>
argument, which can be a string, a callable, or a list consisting of
strings and/or callables.  This feature allows submodules, subpackages, and
global objects from being scanned.  See
<a class="reference external" href="http://readthedocs.org/docs/venusian/en/latest/#ignore-scan-argument">http://readthedocs.org/docs/venusian/en/latest/#ignore-scan-argument</a> for
more information about how to use the <tt class="docutils literal"><span class="pre">ignore</span></tt> argument to <tt class="docutils literal"><span class="pre">scan</span></tt>.</li>
<li>Better error messages when a view callable returns a value that cannot be
converted to a response (for example, when a view callable returns a
dictionary without a renderer defined, or doesn't return any value at all).
The error message now contains information about the view callable itself
as well as the result of calling it.</li>
<li>Better error message when a .pyc-only module is <tt class="docutils literal"><span class="pre">config.include</span></tt> -ed.
This is not permitted due to error reporting requirements, and a better
error message is shown when it is attempted.  Previously it would fail with
something like &quot;AttributeError: 'NoneType' object has no attribute
'rfind'&quot;.</li>
<li>Add <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_traverser</span></tt> API method.  See the
Hooks narrative documentation section entitled &quot;Changing the Traverser&quot; for
more information.  This is not a new feature, it just provides an API for
adding a traverser without needing to use the ZCA API.</li>
<li>Add <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_resource_url_adapter</span></tt> API method.
See the Hooks narrative documentation section entitled &quot;Changing How
pyramid.request.Request.resource_url Generates a URL&quot; for more information.
This is not a new feature, it just provides an API for adding a resource
url adapter without needing to use the ZCA API.</li>
<li>The system value <tt class="docutils literal"><span class="pre">req</span></tt> is now supplied to renderers as an alias for
<tt class="docutils literal"><span class="pre">request</span></tt>.  This means that you can now, for example, in a template, do
<tt class="docutils literal"><span class="pre">req.route_url(...)</span></tt> instead of <tt class="docutils literal"><span class="pre">request.route_url(...)</span></tt>.  This is
purely a change to reduce the amount of typing required to use request
methods and attributes from within templates.  The value <tt class="docutils literal"><span class="pre">request</span></tt> is
still available too, this is just an alternative.</li>
<li>A new interface was added: <tt class="docutils literal"><span class="pre">pyramid.interfaces.IResourceURL</span></tt>.  An adapter
implementing its interface can be used to override resource URL generation
when <tt class="docutils literal"><span class="pre">request.resource_url</span></tt> is called.  This interface replaces the
now-deprecated <tt class="docutils literal"><span class="pre">pyramid.interfaces.IContextURL</span></tt> interface.</li>
<li>The dictionary passed to a resource's <tt class="docutils literal"><span class="pre">__resource_url__</span></tt> method (see
&quot;Overriding Resource URL Generation&quot; in the &quot;Resources&quot; chapter) now
contains an <tt class="docutils literal"><span class="pre">app_url</span></tt> key, representing the application URL generated
during <tt class="docutils literal"><span class="pre">request.resource_url</span></tt>.  It represents a potentially customized
URL prefix, containing potentially custom scheme, host and port information
passed by the user to <tt class="docutils literal"><span class="pre">request.resource_url</span></tt>.  It should be used instead
of <tt class="docutils literal"><span class="pre">request.application_url</span></tt> where necessary.</li>
<li>The <tt class="docutils literal"><span class="pre">request.resource_url</span></tt> API now accepts these arguments: <tt class="docutils literal"><span class="pre">app_url</span></tt>,
<tt class="docutils literal"><span class="pre">scheme</span></tt>, <tt class="docutils literal"><span class="pre">host</span></tt>, and <tt class="docutils literal"><span class="pre">port</span></tt>.  The app_url argument can be used to
replace the URL prefix wholesale during url generation.  The <tt class="docutils literal"><span class="pre">scheme</span></tt>,
<tt class="docutils literal"><span class="pre">host</span></tt>, and <tt class="docutils literal"><span class="pre">port</span></tt> arguments can be used to replace the respective
default values of <tt class="docutils literal"><span class="pre">request.application_url</span></tt> partially.</li>
<li>A new API named <tt class="docutils literal"><span class="pre">request.resource_path</span></tt> now exists.  It works like
<tt class="docutils literal"><span class="pre">request.resource_url</span></tt> but produces a relative URL rather than an
absolute one.</li>
<li>The <tt class="docutils literal"><span class="pre">request.route_url</span></tt> API now accepts these arguments: <tt class="docutils literal"><span class="pre">_app_url</span></tt>,
<tt class="docutils literal"><span class="pre">_scheme</span></tt>, <tt class="docutils literal"><span class="pre">_host</span></tt>, and <tt class="docutils literal"><span class="pre">_port</span></tt>.  The <tt class="docutils literal"><span class="pre">_app_url</span></tt> argument can be
used to replace the URL prefix wholesale during url generation.  The
<tt class="docutils literal"><span class="pre">_scheme</span></tt>, <tt class="docutils literal"><span class="pre">_host</span></tt>, and <tt class="docutils literal"><span class="pre">_port</span></tt> arguments can be used to replace the
respective default values of <tt class="docutils literal"><span class="pre">request.application_url</span></tt> partially.</li>
</ul>
</div>
<div class="section" id="id47">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.interfaces.IContextURL</span></tt> interface has been deprecated.
People have been instructed to use this to register a resource url adapter
in the &quot;Hooks&quot; chapter to use to influence <tt class="docutils literal"><span class="pre">request.resource_url</span></tt> URL
generation for resources found via custom traversers since Pyramid 1.0.</p>
<p>The interface still exists and registering such an adapter still works, but
this interface will be removed from the software after a few major Pyramid
releases.  You should replace it with an equivalent
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IResourceURL</span></tt> adapter, registered using the new
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_resource_url_adapter</span></tt> API.  A
deprecation warning is now emitted when a
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IContextURL</span></tt> adapter is found when
<tt class="docutils literal"><span class="pre">request.resource_url</span></tt> is called.</p>
</li>
</ul>
</div>
<div class="section" id="id48">
<h3>Documentation<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Don't create a <tt class="docutils literal"><span class="pre">session</span></tt> instance in SQLA Wiki tutorial, use raw
<tt class="docutils literal"><span class="pre">DBSession</span></tt> instead (this is more common in real SQLA apps).</li>
</ul>
</div>
<div class="section" id="scaffolding">
<h3>Scaffolding<a class="headerlink" href="#scaffolding" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Put <tt class="docutils literal"><span class="pre">pyramid.includes</span></tt> targets within ini files in scaffolds on separate
lines in order to be able to tell people to comment out only the
<tt class="docutils literal"><span class="pre">pyramid_debugtoolbar</span></tt> line when they want to disable the toolbar.</li>
</ul>
</div>
<div class="section" id="id49">
<h3>Dependencies<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Depend on <tt class="docutils literal"><span class="pre">venusian</span></tt> &gt;= 1.0a3 to provide scan <tt class="docutils literal"><span class="pre">ignore</span></tt> support.</li>
</ul>
</div>
<div class="section" id="internal">
<h3>Internal<a class="headerlink" href="#internal" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Create a &quot;MakoRendererFactoryHelper&quot; that provides customizable settings
key prefixes.  Allows settings prefixes other than &quot;mako.&quot; to be used to
create different factories that don't use the global mako settings.  This
will be useful for the debug toolbar, which can currently be sabotaged by
someone using custom mako configuration settings.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2012-02-07">
<h2>1.3a7 (2012-02-07)<a class="headerlink" href="#a7-2012-02-07" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id50">
<h3>Features<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>More informative error message when a <tt class="docutils literal"><span class="pre">config.include</span></tt> cannot find an
<tt class="docutils literal"><span class="pre">includeme</span></tt>.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/392">https://github.com/Pylons/pyramid/pull/392</a>.</li>
<li>Internal: catch unhashable discriminators early (raise an error instead of
allowing them to find their way into resolveConflicts).</li>
<li>The <cite>match_param</cite> view predicate now accepts a string or a tuple.
This replaces the broken behavior of accepting a dict. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/425">https://github.com/Pylons/pyramid/issues/425</a> for more information.</li>
</ul>
</div>
<div class="section" id="id51">
<h3>Bug Fixes<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The process will now restart when <tt class="docutils literal"><span class="pre">pserve</span></tt> is used with the <tt class="docutils literal"><span class="pre">--reload</span></tt>
flag when the <tt class="docutils literal"><span class="pre">development.ini</span></tt> file (or any other .ini file in use) is
changed.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/377">https://github.com/Pylons/pyramid/issues/377</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/411">https://github.com/Pylons/pyramid/pull/411</a></li>
<li>The <tt class="docutils literal"><span class="pre">prequest</span></tt> script would fail when used against URLs which did not
return HTML or text.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/381">https://github.com/Pylons/pyramid/issues/381</a></li>
</ul>
</div>
<div class="section" id="id52">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <cite>match_param</cite> view predicate no longer accepts a dict. This will
have no negative affect because the implementation was broken for
dict-based arguments.</li>
</ul>
</div>
<div class="section" id="id53">
<h3>Documentation<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a traversal hello world example to the narrative docs.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2012-01-20">
<h2>1.3a6 (2012-01-20)<a class="headerlink" href="#a6-2012-01-20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id54">
<h3>Features<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New API: <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.set_request_property</span></tt>. Add lazy
property descriptors to a request without changing the request factory.
This method provides conflict detection and is the suggested way to add
properties to a request.</li>
<li>Responses generated by Pyramid's <tt class="docutils literal"><span class="pre">static_view</span></tt> now use
a <tt class="docutils literal"><span class="pre">wsgi.file_wrapper</span></tt> (see
<a class="reference external" href="http://www.python.org/dev/peps/pep-0333/#optional-platform-specific-file-handling">http://www.python.org/dev/peps/pep-0333/#optional-platform-specific-file-handling</a>)
when one is provided by the web server.</li>
</ul>
</div>
<div class="section" id="id55">
<h3>Bug Fixes<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Views registered with an <tt class="docutils literal"><span class="pre">accept</span></tt> could not be overridden correctly with
a different view that had the same predicate arguments.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/404">https://github.com/Pylons/pyramid/pull/404</a> for more information.</li>
<li>When using a dotted name for a <tt class="docutils literal"><span class="pre">view</span></tt> argument to
<tt class="docutils literal"><span class="pre">Configurator.add_view</span></tt> that pointed to a class with a <tt class="docutils literal"><span class="pre">view_defaults</span></tt>
decorator, the view defaults would not be applied.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/396">https://github.com/Pylons/pyramid/issues/396</a> .</li>
<li>Static URL paths were URL-quoted twice.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/407">https://github.com/Pylons/pyramid/issues/407</a> .</li>
</ul>
</div>
</div>
<div class="section" id="a5-2012-01-09">
<h2>1.3a5 (2012-01-09)<a class="headerlink" href="#a5-2012-01-09" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id56">
<h3>Bug Fixes<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">pyramid.view.view_defaults</span></tt> decorator did not work properly when
more than one view relied on the defaults being different for configuration
conflict resolution.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/394">https://github.com/Pylons/pyramid/issues/394</a>.</li>
</ul>
</div>
<div class="section" id="id57">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">path_info</span></tt> route and view predicates now match against
<tt class="docutils literal"><span class="pre">request.upath_info</span></tt> (Unicode) rather than <tt class="docutils literal"><span class="pre">request.path_info</span></tt>
(indeterminate value based on Python 3 vs. Python 2).  This has to be done
to normalize matching on Python 2 and Python 3.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2012-01-05">
<h2>1.3a4 (2012-01-05)<a class="headerlink" href="#a4-2012-01-05" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id58">
<h3>Features<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New API: <tt class="docutils literal"><span class="pre">pyramid.request.Request.set_property</span></tt>. Add lazy property
descriptors to a request without changing the request factory. New
properties may be reified, effectively caching the value for the lifetime
of the instance. Common use-cases for this would be to get a database
connection for the request or identify the current user.</li>
<li>Use the <tt class="docutils literal"><span class="pre">waitress</span></tt> WSGI server instead of <tt class="docutils literal"><span class="pre">wsgiref</span></tt> in scaffolding.</li>
</ul>
</div>
<div class="section" id="id59">
<h3>Bug Fixes<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The documentation of <tt class="docutils literal"><span class="pre">pyramid.events.subscriber</span></tt> indicated that using it
as a decorator with no arguments like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@subscriber</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">somefunc</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Would register <tt class="docutils literal"><span class="pre">somefunc</span></tt> to receive all events sent via the registry,
but this was untrue.  Instead, it would receive no events at all.  This has
now been fixed and the code matches the documentation.  See also
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/386">https://github.com/Pylons/pyramid/issues/386</a></p>
</li>
<li><p class="first">Literal portions of route patterns were not URL-quoted when <tt class="docutils literal"><span class="pre">route_url</span></tt>
or <tt class="docutils literal"><span class="pre">route_path</span></tt> was used to generate a URL or path.</p>
</li>
<li><p class="first">The result of <tt class="docutils literal"><span class="pre">route_path</span></tt> or <tt class="docutils literal"><span class="pre">route_url</span></tt> might have been <tt class="docutils literal"><span class="pre">unicode</span></tt>
or <tt class="docutils literal"><span class="pre">str</span></tt> depending on the input.  It is now guaranteed to always be
<tt class="docutils literal"><span class="pre">str</span></tt>.</p>
</li>
<li><p class="first">URL matching when the pattern contained non-ASCII characters in literal
parts was indeterminate.  Now the pattern supplied to <tt class="docutils literal"><span class="pre">add_route</span></tt> is
assumed to be either: a <tt class="docutils literal"><span class="pre">unicode</span></tt> value, or a <tt class="docutils literal"><span class="pre">str</span></tt> value that contains
only ASCII characters.  If you now want to match the path info from a URL
that contains high order characters, you can pass the Unicode
representation of the decoded path portion in the pattern.</p>
</li>
<li><p class="first">When using a <tt class="docutils literal"><span class="pre">traverse=</span></tt> route predicate, traversal would fail with a
URLDecodeError if there were any high-order characters in the traversal
pattern or in the matched dynamic segments.</p>
</li>
<li><p class="first">Using a dynamic segment named <tt class="docutils literal"><span class="pre">traverse</span></tt> in a route pattern like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;trav_route&#39;</span><span class="p">,</span> <span class="s">&#39;traversal/{traverse:.*}&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Would cause a <tt class="docutils literal"><span class="pre">UnicodeDecodeError</span></tt> when the route was matched and the
matched portion of the URL contained any high-order characters.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/385">https://github.com/Pylons/pyramid/issues/385</a> .</p>
</li>
<li><p class="first">When using a <tt class="docutils literal"><span class="pre">*traverse</span></tt> stararg in a route pattern, a URL that matched
that possessed a <tt class="docutils literal"><span class="pre">&#64;&#64;</span></tt> in its name (signifying a view name) would be
inappropriately quoted by the traversal machinery during traversal,
resulting in the view not being found properly. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/382">https://github.com/Pylons/pyramid/issues/382</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/375">https://github.com/Pylons/pyramid/issues/375</a> .</p>
</li>
</ul>
</div>
<div class="section" id="id60">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">String values passed to <tt class="docutils literal"><span class="pre">route_url</span></tt> or <tt class="docutils literal"><span class="pre">route_path</span></tt> that are meant to
replace &quot;remainder&quot; matches will now be URL-quoted except for embedded
slashes. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;remain&#39;</span><span class="p">,</span> <span class="s">&#39;/foo*remainder&#39;</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">route_path</span><span class="p">(</span><span class="s">&#39;remain&#39;</span><span class="p">,</span> <span class="n">remainder</span><span class="o">=</span><span class="s">&#39;abc / def&#39;</span><span class="p">)</span>
<span class="c"># -&gt; &#39;/foo/abc%20/%20def&#39;</span>
</pre></div>
</div>
<p>Previously string values passed as remainder replacements were tacked on
untouched, without any URL-quoting.  But this doesn't really work logically
if the value passed is Unicode (raw unicode cannot be placed in a URL or in
a path) and it is inconsistent with the rest of the URL generation
machinery if the value is a string (it won't be quoted unless by the
caller).</p>
<p>Some folks will have been relying on the older behavior to tack on query
string elements and anchor portions of the URL; sorry, you'll need to
change your code to use the <tt class="docutils literal"><span class="pre">_query</span></tt> and/or <tt class="docutils literal"><span class="pre">_anchor</span></tt> arguments to
<tt class="docutils literal"><span class="pre">route_path</span></tt> or <tt class="docutils literal"><span class="pre">route_url</span></tt> to do this now.</p>
</li>
<li><p class="first">If you pass a bytestring that contains non-ASCII characters to
<tt class="docutils literal"><span class="pre">add_route</span></tt> as a pattern, it will now fail at startup time.  Use Unicode
instead.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a3-2011-12-21">
<h2>1.3a3 (2011-12-21)<a class="headerlink" href="#a3-2011-12-21" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id61">
<h3>Features<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a <tt class="docutils literal"><span class="pre">prequest</span></tt> script (along the lines of <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">request</span></tt>).  It is
documented in the &quot;Command-Line Pyramid&quot; chapter in the section entitled
&quot;Invoking a Request&quot;.</li>
<li>Add undocumented <tt class="docutils literal"><span class="pre">__discriminator__</span></tt> API to derived view callables.
e.g. <tt class="docutils literal"><span class="pre">adapters.lookup(...).__discriminator__(context,</span> <span class="pre">request)</span></tt>.  It will
be used by superdynamic systems that require the discriminator to be used
for introspection after manual view lookup.</li>
</ul>
</div>
<div class="section" id="id62">
<h3>Bug Fixes<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Normalized exit values and <tt class="docutils literal"><span class="pre">-h</span></tt> output for all <tt class="docutils literal"><span class="pre">p*</span></tt> scripts
(<tt class="docutils literal"><span class="pre">pviews</span></tt>, <tt class="docutils literal"><span class="pre">proutes</span></tt>, etc).</li>
</ul>
</div>
<div class="section" id="id63">
<h3>Documentation<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a section named &quot;Making Your Script into a Console Script&quot; in the
&quot;Command-Line Pyramid&quot; chapter.</li>
<li>Removed the &quot;Running Pyramid on Google App Engine&quot; tutorial from the main
docs.  It survives on in the Cookbook
(<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/gae.html">http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/gae.html</a>).
Rationale: it provides the correct info for the Python 2.5 version of GAE
only, and this version of Pyramid does not support Python 2.5.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2011-12-14">
<h2>1.3a2 (2011-12-14)<a class="headerlink" href="#a2-2011-12-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id64">
<h3>Features<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New API: <tt class="docutils literal"><span class="pre">pyramid.view.view_defaults</span></tt>. If you use a class as a view, you
can use the new <tt class="docutils literal"><span class="pre">view_defaults</span></tt> class decorator on the class to provide
defaults to the view configuration information used by every
<tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> decorator that decorates a method of that class.  It also
works against view configurations involving a class made imperatively.</li>
<li>Added a backwards compatibility knob to <tt class="docutils literal"><span class="pre">pcreate</span></tt> to emulate <tt class="docutils literal"><span class="pre">paster</span>
<span class="pre">create</span></tt> handling for the <tt class="docutils literal"><span class="pre">--list-templates</span></tt> option.</li>
<li>Changed scaffolding machinery around a bit to make it easier for people who
want to have extension scaffolds that can work across Pyramid 1.0.X, 1.1.X,
1.2.X and 1.3.X.  See the new &quot;Creating Pyramid Scaffolds&quot; chapter in the
narrative documentation for more info.</li>
</ul>
</div>
<div class="section" id="id65">
<h3>Documentation<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added documentation to &quot;View Configuration&quot; narrative documentation chapter
about <tt class="docutils literal"><span class="pre">view_defaults</span></tt> class decorator.</li>
<li>Added API docs for <tt class="docutils literal"><span class="pre">view_defaults</span></tt> class decorator.</li>
<li>Added an API docs chapter for <tt class="docutils literal"><span class="pre">pyramid.scaffolds</span></tt>.</li>
<li>Added a narrative docs chapter named &quot;Creating Pyramid Scaffolds&quot;.</li>
</ul>
</div>
<div class="section" id="id66">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">template_renderer</span></tt> method of <tt class="docutils literal"><span class="pre">pyramid.scaffolds.PyramidScaffold</span></tt>
was renamed to <tt class="docutils literal"><span class="pre">render_template</span></tt>.  If you were overriding it, you're a
bad person, because it wasn't an API before now.  But we're nice so we're
letting you know.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2011-12-09">
<h2>1.3a1 (2011-12-09)<a class="headerlink" href="#a1-2011-12-09" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id67">
<h3>Features<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Python 3.2 compatibility.</li>
<li>New <tt class="docutils literal"><span class="pre">pyramid.compat</span></tt> module and API documentation which provides Python
2/3 straddling support for Pyramid add-ons and development environments.</li>
<li>A <tt class="docutils literal"><span class="pre">mako.directories</span></tt> setting is no longer required to use Mako templates
Rationale: Mako template renderers can be specified using an absolute asset
spec.  An entire application can be written with such asset specs,
requiring no ordered lookup path.</li>
<li><tt class="docutils literal"><span class="pre">bpython</span></tt> interpreter compatibility in <tt class="docutils literal"><span class="pre">pshell</span></tt>.  See the &quot;Command-Line
Pyramid&quot; narrative docs chapter for more information.</li>
<li>Added <tt class="docutils literal"><span class="pre">get_appsettings</span></tt> API function to the <tt class="docutils literal"><span class="pre">pyramid.paster</span></tt> module.
This function returns the settings defined within an <tt class="docutils literal"><span class="pre">[app:...]</span></tt> section
in a PasteDeploy ini file.</li>
<li>Added <tt class="docutils literal"><span class="pre">setup_logging</span></tt> API function to the <tt class="docutils literal"><span class="pre">pyramid.paster</span></tt> module.
This function sets up Python logging according to the logging configuration
in a PasteDeploy ini file.</li>
<li>Configuration conflict reporting is reported in a more understandable way
(&quot;Line 11 in file...&quot; vs. a repr of a tuple of similar info).</li>
<li>A configuration introspection system was added; see the narrative
documentation chapter entitled &quot;Pyramid Configuration Introspection&quot; for
more information.  New APIs: <tt class="docutils literal"><span class="pre">pyramid.registry.Introspectable</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.introspector</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.introspectable</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.registry.Registry.introspector</span></tt>.</li>
<li>Allow extra keyword arguments to be passed to the
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.action</span></tt> method.</li>
<li>New APIs: <tt class="docutils literal"><span class="pre">pyramid.path.AssetResolver</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.path.DottedNameResolver</span></tt>.  The former can be used to resolve
asset specifications, the latter can be used to resolve dotted names to
modules or packages.</li>
</ul>
</div>
<div class="section" id="id68">
<h3>Bug Fixes<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make test suite pass on 32-bit systems; closes #286.  closes #306.
See also <a class="reference external" href="https://github.com/Pylons/pyramid/issues/286">https://github.com/Pylons/pyramid/issues/286</a></li>
<li>The <tt class="docutils literal"><span class="pre">pryamid.view.view_config</span></tt> decorator did not accept a <tt class="docutils literal"><span class="pre">match_params</span></tt>
predicate argument.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/308">https://github.com/Pylons/pyramid/pull/308</a></li>
<li>The AuthTktCookieHelper could potentially generate Unicode headers
inappropriately when the <tt class="docutils literal"><span class="pre">tokens</span></tt> argument to remember was used.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/314">https://github.com/Pylons/pyramid/pull/314</a>.</li>
<li>The AuthTktAuthenticationPolicy did not use a timing-attack-aware string
comparator.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/320">https://github.com/Pylons/pyramid/pull/320</a> for more info.</li>
<li>The DummySession in <tt class="docutils literal"><span class="pre">pyramid.testing</span></tt> now generates a new CSRF token if
one doesn't yet exist.</li>
<li><tt class="docutils literal"><span class="pre">request.static_url</span></tt> now generates URL-quoted URLs when fed a <tt class="docutils literal"><span class="pre">path</span></tt>
argument which contains characters that are unsuitable for URLs.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/349">https://github.com/Pylons/pyramid/issues/349</a> for more info.</li>
<li>Prevent a scaffold rendering from being named <tt class="docutils literal"><span class="pre">site</span></tt> (conflicts with
Python internal site.py).</li>
<li>Support for using instances as targets of the <tt class="docutils literal"><span class="pre">pyramid.wsgi.wsgiapp</span></tt> and
<tt class="docutils literal"><span class="pre">pryramid.wsgi.wsgiapp2</span></tt> functions.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/370">https://github.com/Pylons/pyramid/pull/370</a> for more info.</li>
</ul>
</div>
<div class="section" id="id69">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid no longer runs on Python 2.5 (which includes the most recent
release of Jython and the Python 2.5 version of GAE as of this writing).</li>
<li>The <tt class="docutils literal"><span class="pre">paster</span></tt> command is no longer the documented way to create projects,
start the server, or run debugging commands.  To create projects from
scaffolds, <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">create</span></tt> is replaced by the <tt class="docutils literal"><span class="pre">pcreate</span></tt> console script.
To serve up a project, <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">serve</span></tt> is replaced by the <tt class="docutils literal"><span class="pre">pserve</span></tt>
console script.  New console scripts named <tt class="docutils literal"><span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">pviews</span></tt>,
<tt class="docutils literal"><span class="pre">proutes</span></tt>, and <tt class="docutils literal"><span class="pre">ptweens</span></tt> do what their <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">&lt;commandname&gt;</span></tt>
equivalents used to do.  Rationale: the Paste and PasteScript packages do
not run under Python 3.</li>
<li>The default WSGI server run as the result of <tt class="docutils literal"><span class="pre">pserve</span></tt> from newly rendered
scaffolding is now the <tt class="docutils literal"><span class="pre">wsgiref</span></tt> WSGI server instead of the
<tt class="docutils literal"><span class="pre">paste.httpserver</span></tt> server.  Rationale: Rationale: the Paste and
PasteScript packages do not run under Python 3.</li>
<li>The <tt class="docutils literal"><span class="pre">pshell</span></tt> command (see &quot;paster pshell&quot;) no longer accepts a
<tt class="docutils literal"><span class="pre">--disable-ipython</span></tt> command-line argument.  Instead, it accepts a <tt class="docutils literal"><span class="pre">-p</span></tt>
or <tt class="docutils literal"><span class="pre">--python-shell</span></tt> argument, which can be any of the values <tt class="docutils literal"><span class="pre">python</span></tt>,
<tt class="docutils literal"><span class="pre">ipython</span></tt> or <tt class="docutils literal"><span class="pre">bpython</span></tt>.</li>
<li>Removed the <tt class="docutils literal"><span class="pre">pyramid.renderers.renderer_from_name</span></tt> function.  It has been
deprecated since Pyramid 1.0, and was never an API.</li>
<li>To use ZCML with versions of Pyramid &gt;= 1.3, you will need <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt>
version &gt;= 0.8 and <tt class="docutils literal"><span class="pre">zope.configuration</span></tt> version &gt;= 3.8.0.  The
<tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt> package version 0.8 is backwards compatible all the way to
Pyramid 1.0, so you won't be warned if you have older versions installed
and upgrade Pyramid &quot;in-place&quot;; it may simply break instead.</li>
</ul>
</div>
<div class="section" id="id70">
<h3>Dependencies<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid no longer depends on the <tt class="docutils literal"><span class="pre">zope.component</span></tt> package, except as a
testing dependency.</li>
<li>Pyramid now depends on a zope.interface&gt;=3.8.0, WebOb&gt;=1.2dev,
repoze.lru&gt;=0.4, zope.deprecation&gt;=3.5.0, translationstring&gt;=0.4 (for
Python 3 compatibility purposes).  It also, as a testing dependency,
depends on WebTest&gt;=1.3.1 for the same reason.</li>
<li>Pyramid no longer depends on the Paste or PasteScript packages.</li>
</ul>
</div>
<div class="section" id="id71">
<h3>Documentation<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The SQLAlchemy Wiki tutorial has been updated.  It now uses
<tt class="docutils literal"><span class="pre">&#64;view_config</span></tt> decorators and an explicit database population script.</li>
<li>Minor updates to the ZODB Wiki tutorial.</li>
<li>A narrative documentation chapter named &quot;Extending Pyramid Configuration&quot;
was added; it describes how to add a new directive, and how use the
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.action</span></tt> method within custom directives.  It
also describes how to add introspectable objects.</li>
<li>A narrative documentation chapter named &quot;Pyramid Configuration
Introspection&quot; was added.  It describes how to query the introspection
system.</li>
</ul>
</div>
<div class="section" id="id72">
<h3>Scaffolds<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Rendered scaffolds have now been changed to be more relocatable (fewer
mentions of the package name within files in the package).</li>
<li>The <tt class="docutils literal"><span class="pre">routesalchemy</span></tt> scaffold has been renamed <tt class="docutils literal"><span class="pre">alchemy</span></tt>, replacing the
older (traversal-based) <tt class="docutils literal"><span class="pre">alchemy</span></tt> scaffold (which has been retired).</li>
<li>The <tt class="docutils literal"><span class="pre">starter</span></tt> scaffold now uses URL dispatch by default.</li>
</ul>
</div>
</div>
<div class="section" id="id73">
<h2>1.2 (2011-09-12)<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id74">
<h3>Features<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Route pattern replacement marker names can now begin with an underscore.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/276">https://github.com/Pylons/pyramid/issues/276</a>.</li>
</ul>
</div>
</div>
<div class="section" id="b3-2011-09-11">
<h2>1.2b3 (2011-09-11)<a class="headerlink" href="#b3-2011-09-11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id75">
<h3>Bug Fixes<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The route prefix was not taken into account when a static view was added in
an &quot;include&quot;.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/266">https://github.com/Pylons/pyramid/issues/266</a> .</li>
</ul>
</div>
</div>
<div class="section" id="b2-2011-09-08">
<h2>1.2b2 (2011-09-08)<a class="headerlink" href="#b2-2011-09-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id76">
<h3>Bug Fixes<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The 1.2b1 tarball was a brownbag (particularly for Windows users) because
it contained filenames with stray quotation marks in inappropriate places.
We depend on <tt class="docutils literal"><span class="pre">setuptools-git</span></tt> to produce release tarballs, and when it
was run to produce the 1.2b1 tarball, it didn't yet cope well with files
present in git repositories with high-order characters in their filenames.</li>
</ul>
</div>
<div class="section" id="id77">
<h3>Documentation<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Minor tweaks to the &quot;Introduction&quot; narrative chapter example app and
wording.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2011-09-08">
<h2>1.2b1 (2011-09-08)<a class="headerlink" href="#b1-2011-09-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id78">
<h3>Bug Fixes<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Sometimes falling back from territory translations (<tt class="docutils literal"><span class="pre">de_DE</span></tt>) to language
translations (<tt class="docutils literal"><span class="pre">de</span></tt>) would not work properly when using a localizer.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/263">https://github.com/Pylons/pyramid/issues/263</a></li>
<li>The static file serving machinery could not serve files that started with a
<tt class="docutils literal"><span class="pre">.</span></tt> (dot) character.</li>
<li>Static files with high-order (super-ASCII) characters in their names could
not be served by a static view.  The static file serving machinery
inappropriately URL-quoted path segments in filenames when asking for files
from the filesystem.</li>
<li>Within <tt class="docutils literal"><span class="pre">pyramid.traversal.traversal_path</span></tt> , canonicalize URL segments
from UTF-8 to Unicode before checking whether a segment matches literally
one of <tt class="docutils literal"><span class="pre">.</span></tt>, the empty string, or <tt class="docutils literal"><span class="pre">..</span></tt> in case there's some sneaky way
someone might tunnel those strings via UTF-8 that don't match the literals
before decoded.</li>
</ul>
</div>
<div class="section" id="id79">
<h3>Documentation<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a &quot;What Makes Pyramid Unique&quot; section to the Introduction narrative
chapter.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2011-09-06">
<h2>1.2a6 (2011-09-06)<a class="headerlink" href="#a6-2011-09-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id80">
<h3>Bug Fixes<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>AuthTktAuthenticationPolicy with a <tt class="docutils literal"><span class="pre">reissue_time</span></tt> interfered with logout.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/262">https://github.com/Pylons/pyramid/issues/262</a>.</li>
</ul>
</div>
<div class="section" id="id81">
<h3>Internal<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Internalize code previously depended upon as imports from the
<tt class="docutils literal"><span class="pre">paste.auth</span></tt> module (futureproof).</li>
<li>Replaced use of <tt class="docutils literal"><span class="pre">paste.urlparser.StaticURLParser</span></tt> with a derivative of
Chris Rossi's &quot;happy&quot; static file serving code (futureproof).</li>
<li>Fixed test suite; on some systems tests would fail due to indeterminate
test run ordering and a double-push-single-pop of a shared test variable.</li>
</ul>
</div>
<div class="section" id="behavior-differences">
<h3>Behavior Differences<a class="headerlink" href="#behavior-differences" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>An ETag header is no longer set when serving a static file.  A
Last-Modified header is set instead.</li>
<li>Static file serving no longer supports the <tt class="docutils literal"><span class="pre">wsgi.file_wrapper</span></tt> extension.</li>
<li>Instead of returning a <tt class="docutils literal"><span class="pre">403</span> <span class="pre">Forbidden</span></tt> error when a static file is served
that cannot be accessed by the Pyramid process' user due to file
permissions, an IOError (or similar) will be raised.</li>
</ul>
</div>
<div class="section" id="id82">
<h3>Scaffolds<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All scaffolds now send the <tt class="docutils literal"><span class="pre">cache_max_age</span></tt> parameter to the
<tt class="docutils literal"><span class="pre">add_static_view</span></tt> method.</li>
</ul>
</div>
</div>
<div class="section" id="a5-2011-09-04">
<h2>1.2a5 (2011-09-04)<a class="headerlink" href="#a5-2011-09-04" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id83">
<h3>Bug Fixes<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">route_prefix</span></tt> of a configurator was not properly taken into account
when registering routes in certain circumstances.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/260">https://github.com/Pylons/pyramid/issues/260</a></li>
</ul>
</div>
<div class="section" id="id84">
<h3>Dependencies<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">zope.configuration</span></tt> package is no longer a dependency.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2011-09-02">
<h2>1.2a4 (2011-09-02)<a class="headerlink" href="#a4-2011-09-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id85">
<h3>Features<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support an <tt class="docutils literal"><span class="pre">onerror</span></tt> keyword argument to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.scan()</span></tt>.  This onerror keyword argument is
passed to <tt class="docutils literal"><span class="pre">venusian.Scanner.scan()</span></tt> to influence error behavior when
an exception is raised during scanning.</li>
<li>The <tt class="docutils literal"><span class="pre">request_method</span></tt> predicate argument to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_view</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_route</span></tt> is now permitted to be a tuple of
HTTP method names.  Previously it was restricted to being a string
representing a single HTTP method name.</li>
<li>Undeprecated <tt class="docutils literal"><span class="pre">pyramid.traversal.find_model</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.traversal.model_path</span></tt>, <tt class="docutils literal"><span class="pre">pyramid.traversal.model_path_tuple</span></tt>,
and <tt class="docutils literal"><span class="pre">pyramid.url.model_url</span></tt>, which were all deprecated in Pyramid 1.0.
There's just not much cost to keeping them around forever as aliases to
their renamed <tt class="docutils literal"><span class="pre">resource_*</span></tt> prefixed functions.</li>
<li>Undeprecated <tt class="docutils literal"><span class="pre">pyramid.view.bfg_view</span></tt>, which was deprecated in Pyramid
1.0.  This is a low-cost alias to <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> which we'll
just keep around forever.</li>
</ul>
</div>
<div class="section" id="id86">
<h3>Dependencies<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid now requires Venusian 1.0a1 or better to support the <tt class="docutils literal"><span class="pre">onerror</span></tt>
keyword argument to <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.scan</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2011-08-29">
<h2>1.2a3 (2011-08-29)<a class="headerlink" href="#a3-2011-08-29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id87">
<h3>Bug Fixes<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid did not properly generate static URLs using
<tt class="docutils literal"><span class="pre">pyramid.url.static_url</span></tt> when passed a caller-package relative path due
to a refactoring done in 1.2a1.</li>
<li>The <tt class="docutils literal"><span class="pre">settings</span></tt> object emitted a deprecation warning any time
<tt class="docutils literal"><span class="pre">__getattr__</span></tt> was called upon it.  However, there are legitimate
situations in which <tt class="docutils literal"><span class="pre">__getattr__</span></tt> is called on arbitrary objects
(e.g. <tt class="docutils literal"><span class="pre">hasattr</span></tt>).  Now, the <tt class="docutils literal"><span class="pre">settings</span></tt> object only emits the warning
upon successful lookup.</li>
</ul>
</div>
<div class="section" id="id88">
<h3>Internal<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use <tt class="docutils literal"><span class="pre">config.with_package</span></tt> in view_config decorator rather than
manufacturing a new renderer helper (cleanup).</li>
</ul>
</div>
</div>
<div class="section" id="a2-2011-08-27">
<h2>1.2a2 (2011-08-27)<a class="headerlink" href="#a2-2011-08-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id89">
<h3>Bug Fixes<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When a <tt class="docutils literal"><span class="pre">renderers=</span></tt> argument is not specified to the Configurator
constructor, eagerly register and commit the default renderer set.  This
permits the overriding of the default renderers, which was broken in 1.2a1
without a commit directly after Configurator construction.</li>
<li>Mako rendering exceptions had the wrong value for an error message.</li>
<li>An include could not set a root factory successfully because the
Configurator constructor unconditionally registered one that would be
treated as if it were &quot;the word of the user&quot;.</li>
</ul>
</div>
<div class="section" id="id90">
<h3>Features<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A session factory can now be passed in using the dotted name syntax.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2011-08-24">
<h2>1.2a1 (2011-08-24)<a class="headerlink" href="#a1-2011-08-24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id91">
<h3>Features<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">[pshell]</span></tt> section in an ini configuration file now treats a
<tt class="docutils literal"><span class="pre">setup</span></tt> key as a dotted name that points to a callable that is passed the
bootstrap environment.  It can mutate the environment as necessary for
great justice.</p>
</li>
<li><p class="first">A new configuration setting named <tt class="docutils literal"><span class="pre">pyramid.includes</span></tt> is now available.
It is described in the &quot;Environment Variables and <tt class="docutils literal"><span class="pre">.ini</span></tt> Files Settings&quot;
narrative documentation chapter.</p>
</li>
<li><p class="first">Added a <tt class="docutils literal"><span class="pre">route_prefix</span></tt> argument to the
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.include</span></tt> method.  This argument allows you
to compose URL dispatch applications together.  See the section entitled
&quot;Using a Route Prefix to Compose Applications&quot; in the &quot;URL Dispatch&quot;
narrative documentation chapter.</p>
</li>
<li><p class="first">Added a <tt class="docutils literal"><span class="pre">pyramid.security.NO_PERMISSION_REQUIRED</span></tt> constant for use in
<tt class="docutils literal"><span class="pre">permission=</span></tt> statements to view configuration.  This constant has a
value of the string <tt class="docutils literal"><span class="pre">__no_permission_required__</span></tt>.  This string value was
previously referred to in documentation; now the documentation uses the
constant.</p>
</li>
<li><p class="first">Added a decorator-based way to configure a response adapter:
<tt class="docutils literal"><span class="pre">pyramid.response.response_adapter</span></tt>.  This decorator has the same use as
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_response_adapter</span></tt> but it's declarative.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.events.BeforeRender</span></tt> event now has an attribute named
<tt class="docutils literal"><span class="pre">rendering_val</span></tt>.  This can be used to introspect the value returned by a
view in a BeforeRender subscriber.</p>
</li>
<li><p class="first">New configurator directive: <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_tween</span></tt>.
This directive adds a &quot;tween&quot;.  A &quot;tween&quot; is used to wrap the Pyramid
router's primary request handling function.  This is a feature may be used
by Pyramid framework extensions, to provide, for example, view timing
support and as a convenient place to hang bookkeeping code.</p>
<p>Tweens are further described in the narrative docs section in the Hooks
chapter, named &quot;Registering Tweens&quot;.</p>
</li>
<li><p class="first">New paster command <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">ptweens</span></tt>, which prints the current &quot;tween&quot;
configuration for an application.  See the section entitled &quot;Displaying
Tweens&quot; in the Command-Line Pyramid chapter of the narrative documentation
for more info.</p>
</li>
<li><p class="first">The Pyramid debug logger now uses the standard logging configuration
(usually set up by Paste as part of startup).  This means that output from
e.g. <tt class="docutils literal"><span class="pre">debug_notfound</span></tt>, <tt class="docutils literal"><span class="pre">debug_authorization</span></tt>, etc. will go to the
normal logging channels.  The logger name of the debug logger will be the
package name of the <em>caller</em> of the Configurator's constructor.</p>
</li>
<li><p class="first">A new attribute is available on request objects: <tt class="docutils literal"><span class="pre">exc_info</span></tt>.  Its value
will be <tt class="docutils literal"><span class="pre">None</span></tt> until an exception is caught by the Pyramid router, after
which it will be the result of <tt class="docutils literal"><span class="pre">sys.exc_info()</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt> now implements the
<tt class="docutils literal"><span class="pre">add_finished_callback</span></tt> and <tt class="docutils literal"><span class="pre">add_response_callback</span></tt> methods.</p>
</li>
<li><p class="first">New methods of the <tt class="docutils literal"><span class="pre">pyramid.config.Configurator</span></tt> class:
<tt class="docutils literal"><span class="pre">set_authentication_policy</span></tt> and <tt class="docutils literal"><span class="pre">set_authorization_policy</span></tt>.  These are
meant to be consumed mostly by add-on authors.</p>
</li>
<li><p class="first">New Configurator method: <tt class="docutils literal"><span class="pre">set_root_factory</span></tt>.</p>
</li>
<li><p class="first">Pyramid no longer eagerly commits some default configuration statements at
Configurator construction time, which permits values passed in as
constructor arguments (e.g. <tt class="docutils literal"><span class="pre">authentication_policy</span></tt> and
<tt class="docutils literal"><span class="pre">authorization_policy</span></tt>) to override the same settings obtained via an
&quot;include&quot;.</p>
</li>
<li><p class="first">Better Mako rendering exceptions via
<tt class="docutils literal"><span class="pre">pyramid.mako_templating.MakoRenderingException</span></tt></p>
</li>
<li><p class="first">New request methods: <tt class="docutils literal"><span class="pre">current_route_url</span></tt>, <tt class="docutils literal"><span class="pre">current_route_path</span></tt>, and
<tt class="docutils literal"><span class="pre">static_path</span></tt>.</p>
</li>
<li><p class="first">New functions in <tt class="docutils literal"><span class="pre">pyramid.url</span></tt>: <tt class="docutils literal"><span class="pre">current_route_path</span></tt> and
<tt class="docutils literal"><span class="pre">static_path</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.request.Request.static_url</span></tt> API (and its brethren
<tt class="docutils literal"><span class="pre">pyramid.request.Request.static_path</span></tt>, <tt class="docutils literal"><span class="pre">pyramid.url.static_url</span></tt>, and
<tt class="docutils literal"><span class="pre">pyramid.url.static_path</span></tt>) now accept an asbolute filename as a &quot;path&quot;
argument.  This will generate a URL to an asset as long as the filename is
in a directory which was previously registered as a static view.
Previously, trying to generate a URL to an asset using an absolute file
path would raise a ValueError.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">RemoteUserAuthenticationPolicy</span> <span class="pre">``,</span> <span class="pre">``AuthTktAuthenticationPolicy</span></tt>,
and <tt class="docutils literal"><span class="pre">SessionAuthenticationPolicy</span></tt> constructors now accept an additional
keyword argument named <tt class="docutils literal"><span class="pre">debug</span></tt>.  By default, this keyword argument is
<tt class="docutils literal"><span class="pre">False</span></tt>.  When it is <tt class="docutils literal"><span class="pre">True</span></tt>, debug information will be sent to the
Pyramid debug logger (usually on stderr) when the <tt class="docutils literal"><span class="pre">authenticated_userid</span></tt>
or <tt class="docutils literal"><span class="pre">effective_principals</span></tt> method is called on any of these policies.  The
output produced can be useful when trying to diagnose
authentication-related problems.</p>
</li>
<li><p class="first">New view predicate: <tt class="docutils literal"><span class="pre">match_param</span></tt>.  Example: a view added via
<tt class="docutils literal"><span class="pre">config.add_view(aview,</span> <span class="pre">match_param='action=edit')</span></tt> will be called only
when the <tt class="docutils literal"><span class="pre">request.matchdict</span></tt> has a value inside it named <tt class="docutils literal"><span class="pre">action</span></tt> with
a value of <tt class="docutils literal"><span class="pre">edit</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id92">
<h3>Internal<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The Pyramid &quot;exception view&quot; machinery is now implemented as a &quot;tween&quot;
(<tt class="docutils literal"><span class="pre">pyramid.tweens.excview_tween_factory</span></tt>).</li>
<li>WSGIHTTPException (HTTPFound, HTTPNotFound, etc) now has a new API named
&quot;prepare&quot; which renders the body and content type when it is provided with
a WSGI environ.  Required for debug toolbar.</li>
<li>Once <tt class="docutils literal"><span class="pre">__call__</span></tt> or <tt class="docutils literal"><span class="pre">prepare</span></tt> is called on a WSGIHTTPException, the body
will be set, and subsequent calls to <tt class="docutils literal"><span class="pre">__call__</span></tt> will always return the
same body.  Delete the body attribute to rerender the exception body.</li>
<li>Previously the <tt class="docutils literal"><span class="pre">pyramid.events.BeforeRender</span></tt> event <em>wrapped</em> a dictionary
(it addressed it as its <tt class="docutils literal"><span class="pre">_system</span></tt> attribute).  Now it <em>is</em> a dictionary
(it inherits from <tt class="docutils literal"><span class="pre">dict</span></tt>), and it's the value that is passed to templates
as a top-level dictionary.</li>
<li>The <tt class="docutils literal"><span class="pre">route_url</span></tt>, <tt class="docutils literal"><span class="pre">route_path</span></tt>, <tt class="docutils literal"><span class="pre">resource_url</span></tt>, <tt class="docutils literal"><span class="pre">static_url</span></tt>, and
<tt class="docutils literal"><span class="pre">current_route_url</span></tt> functions in the <tt class="docutils literal"><span class="pre">pyramid.url</span></tt> package now delegate
to a method on the request they've been passed, instead of the other way
around.  The pyramid.request.Request object now inherits from a mixin named
pyramid.url.URLMethodsMixin to make this possible, and all url/path
generation logic is embedded in this mixin.</li>
<li>Refactor <tt class="docutils literal"><span class="pre">pyramid.config</span></tt> into a package.</li>
<li>Removed the <tt class="docutils literal"><span class="pre">_set_security_policies</span></tt> method of the Configurator.</li>
<li>Moved the <tt class="docutils literal"><span class="pre">StaticURLInfo</span></tt> class from <tt class="docutils literal"><span class="pre">pyramid.static</span></tt> to
<tt class="docutils literal"><span class="pre">pyramid.config.views</span></tt>.</li>
<li>Move the <tt class="docutils literal"><span class="pre">Settings</span></tt> class from <tt class="docutils literal"><span class="pre">pyramid.settings</span></tt> to
<tt class="docutils literal"><span class="pre">pyramid.config.settings</span></tt>.</li>
<li>Move the <tt class="docutils literal"><span class="pre">OverrideProvider</span></tt>, <tt class="docutils literal"><span class="pre">PackageOverrides</span></tt>, <tt class="docutils literal"><span class="pre">DirectoryOverride</span></tt>,
and <tt class="docutils literal"><span class="pre">FileOverride</span></tt> classes from <tt class="docutils literal"><span class="pre">pyramid.asset</span></tt> to
<tt class="docutils literal"><span class="pre">pyramid.config.assets</span></tt>.</li>
</ul>
</div>
<div class="section" id="id93">
<h3>Deprecations<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All Pyramid-related deployment settings (e.g. <tt class="docutils literal"><span class="pre">debug_all</span></tt>,
<tt class="docutils literal"><span class="pre">debug_notfound</span></tt>) are now meant to be prefixed with the prefix
<tt class="docutils literal"><span class="pre">pyramid.</span></tt>.  For example: <tt class="docutils literal"><span class="pre">debug_all</span></tt> -&gt; <tt class="docutils literal"><span class="pre">pyramid.debug_all</span></tt>.  The
old non-prefixed settings will continue to work indefinitely but supplying
them may eventually print a deprecation warning.  All scaffolds and
tutorials have been changed to use prefixed settings.</li>
<li>The <tt class="docutils literal"><span class="pre">settings</span></tt> dictionary now raises a deprecation warning when you
attempt to access its values via <tt class="docutils literal"><span class="pre">__getattr__</span></tt> instead of
via <tt class="docutils literal"><span class="pre">__getitem__</span></tt>.</li>
</ul>
</div>
<div class="section" id="id94">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">If a string is passed as the <tt class="docutils literal"><span class="pre">debug_logger</span></tt> parameter to a Configurator,
that string is considered to be the name of a global Python logger rather
than a dotted name to an instance of a logger.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.include</span></tt> method now accepts only a
single <tt class="docutils literal"><span class="pre">callable</span></tt> argument (a sequence of callables used to be
permitted).  If you are passing more than one <tt class="docutils literal"><span class="pre">callable</span></tt> to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.include</span></tt>, it will break.  You now must now
instead make a separate call to the method for each callable.  This change
was introduced to support the <tt class="docutils literal"><span class="pre">route_prefix</span></tt> feature of include.</p>
</li>
<li><p class="first">It may be necessary to more strictly order configuration route and view
statements when using an &quot;autocommitting&quot; Configurator.  In the past, it
was possible to add a view which named a route name before adding a route
with that name when you used an autocommitting configurator.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s">&#39;my.pkg.someview&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;/foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above will raise an exception when the view attempts to add itself.
Now you must add the route before adding the view:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;/foo&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s">&#39;my.pkg.someview&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This won't effect &quot;normal&quot; users, only people who have legacy BFG codebases
that used an autommitting configurator and possibly tests that use the
configurator API (the configurator returned by <tt class="docutils literal"><span class="pre">pyramid.testing.setUp</span></tt> is
an autocommitting configurator).  The right way to get around this is to
use a non-autocommitting configurator (the default), which does not have
these directive ordering requirements.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_route</span></tt> directive no longer returns a
route object.  This change was required to make route vs. view
configuration processing work properly.</p>
</li>
</ul>
</div>
<div class="section" id="id95">
<h3>Documentation<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Narrative and API documentation which used the <tt class="docutils literal"><span class="pre">route_url</span></tt>,
<tt class="docutils literal"><span class="pre">route_path</span></tt>, <tt class="docutils literal"><span class="pre">resource_url</span></tt>, <tt class="docutils literal"><span class="pre">static_url</span></tt>, and <tt class="docutils literal"><span class="pre">current_route_url</span></tt>
functions in the <tt class="docutils literal"><span class="pre">pyramid.url</span></tt> package have now been changed to use
eponymous methods of the request instead.</li>
<li>Added a section entitled &quot;Using a Route Prefix to Compose Applications&quot; to
the &quot;URL Dispatch&quot; narrative documentation chapter.</li>
<li>Added a new module to the API docs: <tt class="docutils literal"><span class="pre">pyramid.tweens</span></tt>.</li>
<li>Added a &quot;Registering Tweens&quot; section to the &quot;Hooks&quot; narrative chapter.</li>
<li>Added a &quot;Displaying Tweens&quot; section to the &quot;Command-Line Pyramid&quot; narrative
chapter.</li>
<li>Added documentation for the <tt class="docutils literal"><span class="pre">pyramid.tweens</span></tt> and <tt class="docutils literal"><span class="pre">pyramid.includes</span></tt>
configuration settings to the &quot;Environment Variables and <tt class="docutils literal"><span class="pre">.ini</span></tt> Files
Settings&quot; chapter.</li>
<li>Added a Logging chapter to the narrative docs (based on the Pylons logging
docs, thanks Phil).</li>
<li>Added a Paste chapter to the narrative docs (moved content from the Project
chapter).</li>
<li>Added the <tt class="docutils literal"><span class="pre">pyramid.interfaces.IDict</span></tt> interface representing the methods
of a dictionary, for documentation purposes only (IMultiDict and
IBeforeRender inherit from it).</li>
<li>All tutorials now use - The <tt class="docutils literal"><span class="pre">route_url</span></tt>, <tt class="docutils literal"><span class="pre">route_path</span></tt>,
<tt class="docutils literal"><span class="pre">resource_url</span></tt>, <tt class="docutils literal"><span class="pre">static_url</span></tt>, and <tt class="docutils literal"><span class="pre">current_route_url</span></tt> methods of the
request rather than the function variants imported from <tt class="docutils literal"><span class="pre">pyramid.url</span></tt>.</li>
<li>The ZODB wiki tutorial now uses the <tt class="docutils literal"><span class="pre">pyramid_zodbconn</span></tt> package rather
than the <tt class="docutils literal"><span class="pre">repoze.zodbconn</span></tt> package to provide ZODB integration.</li>
</ul>
</div>
<div class="section" id="dependency-changes">
<h3>Dependency Changes<a class="headerlink" href="#dependency-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid now relies on PasteScript &gt;= 1.7.4.  This version contains a
feature important for allowing flexible logging configuration.</li>
</ul>
</div>
<div class="section" id="id96">
<h3>Scaffolds<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All scaffolds now use the <tt class="docutils literal"><span class="pre">pyramid_tm</span></tt> package rather than the
<tt class="docutils literal"><span class="pre">repoze.tm2</span></tt> middleware to manage transaction management.</li>
<li>The ZODB scaffold now uses the <tt class="docutils literal"><span class="pre">pyramid_zodbconn</span></tt> package rather than the
<tt class="docutils literal"><span class="pre">repoze.zodbconn</span></tt> package to provide ZODB integration.</li>
<li>All scaffolds now use the <tt class="docutils literal"><span class="pre">pyramid_debugtoolbar</span></tt> package rather than the
<tt class="docutils literal"><span class="pre">WebError</span></tt> package to provide interactive debugging features.</li>
<li>Projects created via a scaffold no longer depend on the <tt class="docutils literal"><span class="pre">WebError</span></tt>
package at all; configuration in the <tt class="docutils literal"><span class="pre">production.ini</span></tt> file which used to
require its <tt class="docutils literal"><span class="pre">error_catcher</span></tt> middleware has been removed.  Configuring
error catching / email sending is now the domain of the <tt class="docutils literal"><span class="pre">pyramid_exclog</span></tt>
package (see <a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_exclog/en/latest/">http://docs.pylonsproject.org/projects/pyramid_exclog/en/latest/</a>).</li>
</ul>
</div>
<div class="section" id="id97">
<h3>Bug Fixes<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed an issue with the default renderer not working at certain times.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/249">https://github.com/Pylons/pyramid/issues/249</a></li>
</ul>
</div>
</div>
<div class="section" id="id98">
<h2>1.1 (2011-07-22)<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id99">
<h3>Features<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added the <tt class="docutils literal"><span class="pre">pyramid.renderers.null_renderer</span></tt> object as an API.  The null
renderer is an object that can be used in advanced integration cases as
input to the view configuration <tt class="docutils literal"><span class="pre">renderer=</span></tt> argument.  When the null
renderer is used as a view renderer argument, Pyramid avoids converting the
view callable result into a Response object.  This is useful if you want to
reuse the view configuration and lookup machinery outside the context of
its use by the Pyramid router.  This feature was added for consumption by
the <tt class="docutils literal"><span class="pre">pyramid_rpc</span></tt> package, which uses view configuration and lookup
outside the context of a router in exactly this way.  <tt class="docutils literal"><span class="pre">pyramid_rpc</span></tt> has
been broken under 1.1 since 1.1b1; adding it allows us to make it work
again.</li>
<li>Change all scaffolding templates that point to docs.pylonsproject.org to
use <tt class="docutils literal"><span class="pre">/projects/pyramid/current</span></tt> rather than <tt class="docutils literal"><span class="pre">/projects/pyramid/dev</span></tt>.</li>
</ul>
</div>
<div class="section" id="id100">
<h3>Internals<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">compat</span></tt> code that served only the purpose of providing backwards
compatibility with Python 2.4.</li>
<li>Add a deprecation warning for non-API function
<tt class="docutils literal"><span class="pre">pyramid.renderers.renderer_from_name</span></tt> which has seen use in the wild.</li>
<li>Add a <tt class="docutils literal"><span class="pre">clone</span></tt> method to <tt class="docutils literal"><span class="pre">pyramid.renderers.RendererHelper</span></tt> for use by
the <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> decorator.</li>
</ul>
</div>
<div class="section" id="id101">
<h3>Documentation<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed two typos in wiki2 (SQLA + URL Dispatch) tutorial.</li>
<li>Reordered chapters in narrative section for better new user friendliness.</li>
<li>Added more indexing markers to sections in documentation.</li>
</ul>
</div>
</div>
<div class="section" id="b4-2011-07-18">
<h2>1.1b4 (2011-07-18)<a class="headerlink" href="#b4-2011-07-18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id102">
<h3>Documentation<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a section entitled &quot;Writing a Script&quot; to the &quot;Command-Line Pyramid&quot;
chapter.</li>
</ul>
</div>
<div class="section" id="id103">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We added the <tt class="docutils literal"><span class="pre">pyramid.scripting.make_request</span></tt> API too hastily in 1.1b3.
It has been removed.  Sorry for any inconvenience.  Use the
<tt class="docutils literal"><span class="pre">pyramid.request.Request.blank</span></tt> API instead.</li>
</ul>
</div>
<div class="section" id="id104">
<h3>Features<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt>, and <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">proutes</span></tt> commands
each now under the hood uses <tt class="docutils literal"><span class="pre">pyramid.paster.bootstrap</span></tt>, which makes it
possible to supply an <tt class="docutils literal"><span class="pre">.ini</span></tt> file without naming the &quot;right&quot; section in
the file that points at the actual Pyramid application.  Instead, you can
generally just run <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">{pshell|proutes|pviews}</span> <span class="pre">development.ini</span></tt> and
it will do mostly the right thing.</li>
</ul>
</div>
<div class="section" id="id105">
<h3>Bug Fixes<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Omit custom environ variables when rendering a custom exception template in
<tt class="docutils literal"><span class="pre">pyramid.httpexceptions.WSGIHTTPException._set_default_attrs</span></tt>;
stringifying thse may trigger code that should not be executed; see
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/239">https://github.com/Pylons/pyramid/issues/239</a></li>
</ul>
</div>
</div>
<div class="section" id="b3-2011-07-15">
<h2>1.1b3 (2011-07-15)<a class="headerlink" href="#b3-2011-07-15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id106">
<h3>Features<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix corner case to ease semifunctional testing of views: create a new
rendererinfo to clear out old registry on a rescan.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/234">https://github.com/Pylons/pyramid/pull/234</a>.</p>
</li>
<li><p class="first">New API class: <tt class="docutils literal"><span class="pre">pyramid.static.static_view</span></tt>.  This supersedes the
deprecated <tt class="docutils literal"><span class="pre">pyramid.view.static</span></tt> class.  <tt class="docutils literal"><span class="pre">pyramid.static.static_view</span></tt>
by default serves up documents as the result of the request's
<tt class="docutils literal"><span class="pre">path_info</span></tt>, attribute rather than it's <tt class="docutils literal"><span class="pre">subpath</span></tt> attribute (the
inverse was true of <tt class="docutils literal"><span class="pre">pyramid.view.static</span></tt>, and still is).
<tt class="docutils literal"><span class="pre">pyramid.static.static_view</span></tt> exposes a <tt class="docutils literal"><span class="pre">use_subpath</span></tt> flag for use when
you want the static view to behave like the older deprecated version.</p>
</li>
<li><p class="first">A new API function <tt class="docutils literal"><span class="pre">pyramid.paster.bootstrap</span></tt> has been added to make
writing scripts that bootstrap a Pyramid environment easier, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.paster</span> <span class="kn">import</span> <span class="n">bootstrap</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">bootstrap</span><span class="p">(</span><span class="s">&#39;/path/to/my/development.ini&#39;</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;request&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">request</span><span class="o">.</span><span class="n">route_url</span><span class="p">(</span><span class="s">&#39;myroute&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">A new API function <tt class="docutils literal"><span class="pre">pyramid.scripting.prepare</span></tt> has been added.  It is a
lower-level analogue of <tt class="docutils literal"><span class="pre">pyramid.paster.boostrap</span></tt> that accepts a request
and a registry instead of a config file argument, and is used for the same
purpose:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.scripting</span> <span class="kn">import</span> <span class="n">prepare</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">prepare</span><span class="p">(</span><span class="n">registry</span><span class="o">=</span><span class="n">myregistry</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;request&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">request</span><span class="o">.</span><span class="n">route_url</span><span class="p">(</span><span class="s">&#39;myroute&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">A new API function <tt class="docutils literal"><span class="pre">pyramid.scripting.make_request</span></tt> has been added.  The
resulting request will have a <tt class="docutils literal"><span class="pre">registry</span></tt> attribute.  It is meant to be
used in conjunction with <tt class="docutils literal"><span class="pre">pyramid.scripting.prepare</span></tt> and/or
<tt class="docutils literal"><span class="pre">pyramid.paster.bootstrap</span></tt> (both of which accept a request as an
argument):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.scripting</span> <span class="kn">import</span> <span class="n">make_request</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">make_request</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">New API attribute <tt class="docutils literal"><span class="pre">pyramid.config.global_registries</span></tt> is an iterable
object that contains references to every Pyramid registry loaded into the
current process via <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.make_app</span></tt>.  It also has
a <tt class="docutils literal"><span class="pre">last</span></tt> attribute containing the last registry loaded.  This is used by
the scripting machinery, and is available for introspection.</p>
</li>
</ul>
</div>
<div class="section" id="id107">
<h3>Deprecations<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">pyramid.view.static</span></tt> class has been deprecated in favor of the newer
<tt class="docutils literal"><span class="pre">pyramid.static.static_view</span></tt> class.  A deprecation warning is raised when
it is used.  You should replace it with a reference to
<tt class="docutils literal"><span class="pre">pyramid.static.static_view</span></tt> with the <tt class="docutils literal"><span class="pre">use_subpath=True</span></tt> argument.</li>
</ul>
</div>
<div class="section" id="id108">
<h3>Bug Fixes<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Without a mo-file loaded for the combination of domain/locale,
<tt class="docutils literal"><span class="pre">pyramid.i18n.Localizer.pluralize</span></tt> run using that domain/locale
combination raised an inscrutable &quot;translations object has no attr
'plural'&quot; error.  Now, instead it &quot;works&quot; (it uses a germanic pluralization
by default).  It's nonsensical to try to pluralize something without
translations for that locale/domain available, but this behavior matches
the behavior of <tt class="docutils literal"><span class="pre">pyramid.i18n.Localizer.translate</span></tt> so it's at least
consistent; see <a class="reference external" href="https://github.com/Pylons/pyramid/issues/235">https://github.com/Pylons/pyramid/issues/235</a>.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2011-07-13">
<h2>1.1b2 (2011-07-13)<a class="headerlink" href="#b2-2011-07-13" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id109">
<h3>Features<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New environment setting <tt class="docutils literal"><span class="pre">PYRAMID_PREVENT_HTTP_CACHE</span></tt> and new
configuration file value <tt class="docutils literal"><span class="pre">prevent_http_cache</span></tt>.  These are synomymous and
allow you to prevent HTTP cache headers from being set by Pyramid's
<tt class="docutils literal"><span class="pre">http_cache</span></tt> machinery globally in a process.  see the &quot;Influencing HTTP
Caching&quot; section of the &quot;View Configuration&quot; narrative chapter and the
detailed documentation for this setting in the &quot;Environment Variables and
Configuration Settings&quot; narrative chapter.</li>
</ul>
</div>
<div class="section" id="behavior-changes">
<h3>Behavior Changes<a class="headerlink" href="#behavior-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Previously, If a <tt class="docutils literal"><span class="pre">BeforeRender</span></tt> event subscriber added a value via the
<tt class="docutils literal"><span class="pre">__setitem__</span></tt> or <tt class="docutils literal"><span class="pre">update</span></tt> methods of the event object with a key that
already existed in the renderer globals dictionary, a <tt class="docutils literal"><span class="pre">KeyError</span></tt> was
raised.  With the deprecation of the &quot;add_renderer_globals&quot; feature of the
configurator, there was no way to override an existing value in the
renderer globals dictionary that already existed.  Now, the event object
will overwrite an older value that is already in the globals dictionary
when its <tt class="docutils literal"><span class="pre">__setitem__</span></tt> or <tt class="docutils literal"><span class="pre">update</span></tt> is called (as well as the new
<tt class="docutils literal"><span class="pre">setdefault</span></tt> method), just like a plain old dictionary.  As a result, for
maximum interoperability with other third-party subscribers, if you write
an event subscriber meant to be used as a BeforeRender subscriber, your
subscriber code will now need to (using <tt class="docutils literal"><span class="pre">.get</span></tt> or <tt class="docutils literal"><span class="pre">__contains__</span></tt> of the
event object) ensure no value already exists in the renderer globals
dictionary before setting an overriding value.</li>
</ul>
</div>
<div class="section" id="id110">
<h3>Bug Fixes<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">Configurator.add_route</span></tt> method allowed two routes with the same
route to be added without an intermediate <tt class="docutils literal"><span class="pre">config.commit()</span></tt>.  If you now
receive a <tt class="docutils literal"><span class="pre">ConfigurationError</span></tt> at startup time that appears to be
<tt class="docutils literal"><span class="pre">add_route</span></tt> related, you'll need to either a) ensure that all of your
route names are unique or b) call <tt class="docutils literal"><span class="pre">config.commit()</span></tt> before adding a
second route with the name of a previously added name or c) use a
Configurator that works in <tt class="docutils literal"><span class="pre">autocommit</span></tt> mode.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> and <tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt> scaffolds
inappropriately used <tt class="docutils literal"><span class="pre">DBSession.rollback()</span></tt> instead of
<tt class="docutils literal"><span class="pre">transaction.abort()</span></tt> in one place.</li>
<li>We now clear <tt class="docutils literal"><span class="pre">request.response</span></tt> before we invoke an exception view; an
exception view will be working with a request.response that has not been
touched by any code prior to the exception.</li>
<li>Views associated with routes with spaces in the route name may not have
been looked up correctly when using Pyramid with <tt class="docutils literal"><span class="pre">zope.interface</span></tt> 3.6.4
and better.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/232">https://github.com/Pylons/pyramid/issues/232</a>.</li>
</ul>
</div>
<div class="section" id="id111">
<h3>Documentation<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Wiki2 (SQLAlchemy + URL Dispatch) tutorial <tt class="docutils literal"><span class="pre">models.initialize_sql</span></tt> didn't
match the <tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> scaffold function of the same name; it
didn't get synchronized when it was changed in the scaffold.</li>
<li>New documentation section in View Configuration narrative chapter:
&quot;Influencing HTTP Caching&quot;.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2011-07-10">
<h2>1.1b1 (2011-07-10)<a class="headerlink" href="#b1-2011-07-10" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id112">
<h3>Features<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">It is now possible to invoke <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt> even if the paste ini file
section name pointed to in its argument is not actually a Pyramid WSGI
application.  The shell will work in a degraded mode, and will warn the
user.  See &quot;The Interactive Shell&quot; in the &quot;Creating a Pyramid Project&quot;
narrative documentation section.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt> now offers more built-in global variables by default
(including <tt class="docutils literal"><span class="pre">app</span></tt> and <tt class="docutils literal"><span class="pre">settings</span></tt>).  See &quot;The Interactive Shell&quot; in the
&quot;Creating a Pyramid Project&quot; narrative documentation section.</p>
</li>
<li><p class="first">It is now possible to add a <tt class="docutils literal"><span class="pre">[pshell]</span></tt> section to your application's .ini
configuration file, which influences the global names available to a pshell
session.  See &quot;Extending the Shell&quot; in the &quot;Creating a Pyramid Project&quot;
narrative documentation chapter.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">config.scan</span></tt> method has grown a <tt class="docutils literal"><span class="pre">**kw</span></tt> argument.  <tt class="docutils literal"><span class="pre">kw</span></tt> argument
represents a set of keyword arguments to pass to the Venusian <tt class="docutils literal"><span class="pre">Scanner</span></tt>
object created by Pyramid.  (See the Venusian documentation for more
information about <tt class="docutils literal"><span class="pre">Scanner</span></tt>).</p>
</li>
<li><p class="first">New request property: <tt class="docutils literal"><span class="pre">json_body</span></tt>. This property will return the
JSON-decoded variant of the request body.  If the request body is not
well-formed JSON, this property will raise an exception.</p>
</li>
<li><p class="first">A new value <tt class="docutils literal"><span class="pre">http_cache</span></tt> can be used as a view configuration
parameter.</p>
<p>When you supply an <tt class="docutils literal"><span class="pre">http_cache</span></tt> value to a view configuration, the
<tt class="docutils literal"><span class="pre">Expires</span></tt> and <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> headers of a response generated by the
associated view callable are modified.  The value for <tt class="docutils literal"><span class="pre">http_cache</span></tt> may be
one of the following:</p>
<ul class="simple">
<li>A nonzero integer.  If it's a nonzero integer, it's treated as a number
of seconds.  This number of seconds will be used to compute the
<tt class="docutils literal"><span class="pre">Expires</span></tt> header and the <tt class="docutils literal"><span class="pre">Cache-Control:</span> <span class="pre">max-age</span></tt> parameter of
responses to requests which call this view.  For example:
<tt class="docutils literal"><span class="pre">http_cache=3600</span></tt> instructs the requesting browser to 'cache this
response for an hour, please'.</li>
<li>A <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt> instance.  If it's a <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt>
instance, it will be converted into a number of seconds, and that number
of seconds will be used to compute the <tt class="docutils literal"><span class="pre">Expires</span></tt> header and the
<tt class="docutils literal"><span class="pre">Cache-Control:</span> <span class="pre">max-age</span></tt> parameter of responses to requests which call
this view.  For example: <tt class="docutils literal"><span class="pre">http_cache=datetime.timedelta(days=1)</span></tt>
instructs the requesting browser to 'cache this response for a day,
please'.</li>
<li>Zero (<tt class="docutils literal"><span class="pre">0</span></tt>).  If the value is zero, the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> and
<tt class="docutils literal"><span class="pre">Expires</span></tt> headers present in all responses from this view will be
composed such that client browser cache (and any intermediate caches) are
instructed to never cache the response.</li>
<li>A two-tuple.  If it's a two tuple (e.g. <tt class="docutils literal"><span class="pre">http_cache=(1,</span>
<span class="pre">{'public':True})</span></tt>), the first value in the tuple may be a nonzero
integer or a <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt> instance; in either case this value
will be used as the number of seconds to cache the response.  The second
value in the tuple must be a dictionary.  The values present in the
dictionary will be used as input to the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> response
header.  For example: <tt class="docutils literal"><span class="pre">http_cache=(3600,</span> <span class="pre">{'public':True})</span></tt> means 'cache
for an hour, and add <tt class="docutils literal"><span class="pre">public</span></tt> to the Cache-Control header of the
response'.  All keys and values supported by the
<tt class="docutils literal"><span class="pre">webob.cachecontrol.CacheControl</span></tt> interface may be added to the
dictionary.  Supplying <tt class="docutils literal"><span class="pre">{'public':True}</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_control.public</span> <span class="pre">=</span> <span class="pre">True</span></tt>.</li>
</ul>
<p>Providing a non-tuple value as <tt class="docutils literal"><span class="pre">http_cache</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_expires(value)</span></tt> within your view's body.</p>
<p>Providing a two-tuple value as <tt class="docutils literal"><span class="pre">http_cache</span></tt> is equivalent to calling
<tt class="docutils literal"><span class="pre">response.cache_expires(value[0],</span> <span class="pre">**value[1])</span></tt> within your view's body.</p>
<p>If you wish to avoid influencing, the <tt class="docutils literal"><span class="pre">Expires</span></tt> header, and instead wish
to only influence <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> headers, pass a tuple as <tt class="docutils literal"><span class="pre">http_cache</span></tt>
with the first element of <tt class="docutils literal"><span class="pre">None</span></tt>, e.g.: <tt class="docutils literal"><span class="pre">(None,</span> <span class="pre">{'public':True})</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id113">
<h3>Bug Fixes<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Framework wrappers of the original view (such as http_cached and so on)
relied on being able to trust that the response they were receiving was an
IResponse.  It wasn't always, because the response was resolved by the
router instead of early in the view wrapping process.  This has been fixed.</li>
</ul>
</div>
<div class="section" id="id114">
<h3>Documentation<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a section in the &quot;Webob&quot; chapter named &quot;Dealing With A JSON-Encoded
Request Body&quot; (usage of <tt class="docutils literal"><span class="pre">request.json_body</span></tt>).</li>
</ul>
</div>
<div class="section" id="id115">
<h3>Behavior Changes<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt>, <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">proutes</span></tt>, and <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt> commands
now take a single argument in the form <tt class="docutils literal"><span class="pre">/path/to/config.ini#sectionname</span></tt>
rather than the previous 2-argument spelling <tt class="docutils literal"><span class="pre">/path/to/config.ini</span>
<span class="pre">sectionname</span></tt>.  <tt class="docutils literal"><span class="pre">#sectionname</span></tt> may be omitted, in which case <tt class="docutils literal"><span class="pre">#main</span></tt> is
assumed.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2011-07-01">
<h2>1.1a4 (2011-07-01)<a class="headerlink" href="#a4-2011-07-01" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id116">
<h3>Bug Fixes<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt> now raises deprecation warnings when
attributes deprecated for <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt> are accessed (like
<tt class="docutils literal"><span class="pre">response_content_type</span></tt>).  This is for the benefit of folks running unit
tests which use DummyRequest instead of a &quot;real&quot; request, so they know
things are deprecated without necessarily needing a functional test suite.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.events.subscriber</span></tt> directive behaved contrary to the
documentation when passed more than one interface object to its
constructor.  For example, when the following listener was registered:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@subscriber</span><span class="p">(</span><span class="n">IFoo</span><span class="p">,</span> <span class="n">IBar</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">expects_ifoo_events_and_ibar_events</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">event</span>
</pre></div>
</div>
<p>The Events chapter docs claimed that the listener would be registered and
listening for both <tt class="docutils literal"><span class="pre">IFoo</span></tt> and <tt class="docutils literal"><span class="pre">IBar</span></tt> events.  Instead, it registered an
&quot;object event&quot; subscriber which would only be called if an IObjectEvent was
emitted where the object interface was <tt class="docutils literal"><span class="pre">IFoo</span></tt> and the event interface was
<tt class="docutils literal"><span class="pre">IBar</span></tt>.</p>
<p>The behavior now matches the documentation. If you were relying on the
buggy behavior of the 1.0 <tt class="docutils literal"><span class="pre">subscriber</span></tt> directive in order to register an
object event subscriber, you must now pass a sequence to indicate you'd
like to register a subscriber for an object event. e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@subscriber</span><span class="p">([</span><span class="n">IFoo</span><span class="p">,</span> <span class="n">IBar</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">expects_object_event</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">print</span> <span class="nb">object</span><span class="p">,</span> <span class="n">event</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id117">
<h3>Features<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add JSONP renderer (see &quot;JSONP renderer&quot; in the Renderers chapter of the
documentation).</li>
</ul>
</div>
<div class="section" id="id118">
<h3>Deprecations<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deprecated the <tt class="docutils literal"><span class="pre">set_renderer_globals_factory</span></tt> method of the Configurator
and the <tt class="docutils literal"><span class="pre">renderer_globals</span></tt> Configurator constructor parameter.</li>
</ul>
</div>
<div class="section" id="id119">
<h3>Documentation<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The Wiki and Wiki2 tutorial &quot;Tests&quot; chapters each had two bugs: neither did
told the user to depend on WebTest, and 2 tests failed in each as the
result of changes to Pyramid itself.  These issues have been fixed.</li>
<li>Move 1.0.X CHANGES.txt entries to HISTORY.txt.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2011-06-26">
<h2>1.1a3 (2011-06-26)<a class="headerlink" href="#a3-2011-06-26" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id120">
<h3>Features<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added <tt class="docutils literal"><span class="pre">mako.preprocessor</span></tt> config file parameter; allows for a Mako
preprocessor to be specified as a Python callable or Python dotted name.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/183">https://github.com/Pylons/pyramid/pull/183</a> for rationale.</li>
</ul>
</div>
<div class="section" id="id121">
<h3>Bug fixes<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid would raise an AttributeError in the Configurator when attempting
to set a <tt class="docutils literal"><span class="pre">__text__</span></tt> attribute on a custom predicate that was actually a
classmethod.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/217">https://github.com/Pylons/pyramid/pull/217</a> .</li>
<li>Accessing or setting deprecated response_* attrs on request
(e.g. <tt class="docutils literal"><span class="pre">response_content_type</span></tt>) now issues a deprecation warning at access
time rather than at rendering time.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2011-06-22">
<h2>1.1a2 (2011-06-22)<a class="headerlink" href="#a2-2011-06-22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id122">
<h3>Bug Fixes<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>1.1a1 broke Akhet by not providing a backwards compatibility import shim
for <tt class="docutils literal"><span class="pre">pyramid.paster.PyramidTemplate</span></tt>.  Now one has been added, although a
deprecation warning is emitted when Akhet imports it.</li>
<li>If multiple specs were provided in a single call to
<tt class="docutils literal"><span class="pre">config.add_translation_dirs</span></tt>, the directories were inserted into the
beginning of the directory list in the wrong order: they were inserted in
the reverse of the order they were provided in the <tt class="docutils literal"><span class="pre">*specs</span></tt> list (items
later in the list were added before ones earlier in the list).  This is now
fixed.</li>
</ul>
</div>
<div class="section" id="id123">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The pyramid Router attempted to set a value into the key
<tt class="docutils literal"><span class="pre">environ['repoze.bfg.message']</span></tt> when it caught a view-related exception
for backwards compatibility with applications written for <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>
during error handling.  It did this by using code that looked like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># &quot;why&quot; is an exception object</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">why</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

<span class="n">environ</span><span class="p">[</span><span class="s">&#39;repoze.bfg.message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">msg</span>
</pre></div>
</div>
<p>Use of the value <tt class="docutils literal"><span class="pre">environ['repoze.bfg.message']</span></tt> was docs-deprecated in
Pyramid 1.0.  Our standing policy is to not remove features after a
deprecation for two full major releases, so this code was originally slated
to be removed in Pyramid 1.2.  However, computing the
<tt class="docutils literal"><span class="pre">repoze.bfg.message</span></tt> value was the source of at least one bug found in
the wild (<a class="reference external" href="https://github.com/Pylons/pyramid/issues/199">https://github.com/Pylons/pyramid/issues/199</a>), and there isn't a
foolproof way to both preserve backwards compatibility and to fix the bug.
Therefore, the code which sets the value has been removed in this release.
Code in exception views which relies on this value's presence in the
environment should now use the <tt class="docutils literal"><span class="pre">exception</span></tt> attribute of the request
(e.g. <tt class="docutils literal"><span class="pre">request.exception[0]</span></tt>) to retrieve the message instead of relying
on <tt class="docutils literal"><span class="pre">request.environ['repoze.bfg.message']</span></tt>.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a1-2011-06-20">
<h2>1.1a1 (2011-06-20)<a class="headerlink" href="#a1-2011-06-20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id124">
<h3>Documentation<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The term &quot;template&quot; used to refer to both &quot;paster templates&quot; and &quot;rendered
templates&quot; (templates created by a rendering engine.  i.e. Mako, Chameleon,
Jinja, etc.).  &quot;Paster templates&quot; will now be refered to as &quot;scaffolds&quot;,
whereas the name for &quot;rendered templates&quot; will remain as &quot;templates.&quot;</li>
<li>The <tt class="docutils literal"><span class="pre">wiki</span></tt> (ZODB+Traversal) tutorial was updated slightly.</li>
<li>The <tt class="docutils literal"><span class="pre">wiki2</span></tt> (SQLA+URL Dispatch) tutorial was updated slightly.</li>
<li>Make <tt class="docutils literal"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IAuthorizationPolicy</span></tt> public interfaces, and refer to
them within the <tt class="docutils literal"><span class="pre">pyramid.authentication</span></tt> and <tt class="docutils literal"><span class="pre">pyramid.authorization</span></tt>
API docs.</li>
<li>Render the function definitions for each exposed interface in
<tt class="docutils literal"><span class="pre">pyramid.interfaces</span></tt>.</li>
<li>Add missing docs reference to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.set_view_mapper</span></tt> and refer to it within
Hooks chapter section named &quot;Using a View Mapper&quot;.</li>
<li>Added section to the &quot;Environment Variables and <tt class="docutils literal"><span class="pre">.ini</span></tt> File Settings&quot;
chapter in the narrative documentation section entitled &quot;Adding a Custom
Setting&quot;.</li>
<li>Added documentation for a &quot;multidict&quot; (e.g. the API of <tt class="docutils literal"><span class="pre">request.POST</span></tt>) as
interface API documentation.</li>
<li>Added a section to the &quot;URL Dispatch&quot; narrative chapter regarding the new
&quot;static&quot; route feature.</li>
<li>Added &quot;What's New in Pyramid 1.1&quot; to HTML rendering of documentation.</li>
<li>Added API docs for <tt class="docutils literal"><span class="pre">pyramid.authentication.SessionAuthenticationPolicy</span></tt>.</li>
<li>Added API docs for <tt class="docutils literal"><span class="pre">pyramid.httpexceptions.exception_response</span></tt>.</li>
<li>Added &quot;HTTP Exceptions&quot; section to Views narrative chapter including a
description of <tt class="docutils literal"><span class="pre">pyramid.httpexceptions.exception_response</span></tt>.</li>
</ul>
</div>
<div class="section" id="id125">
<h3>Features<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add support for language fallbacks: when trying to translate for a
specific territory (such as <tt class="docutils literal"><span class="pre">en_GB</span></tt>) fall back to translations
for the language (ie <tt class="docutils literal"><span class="pre">en</span></tt>). This brings the translation behaviour in line
with GNU gettext and fixes partially translated texts when using C
extensions.</p>
</li>
<li><p class="first">New authentication policy:
<tt class="docutils literal"><span class="pre">pyramid.authentication.SessionAuthenticationPolicy</span></tt>, which uses a session
to store credentials.</p>
</li>
<li><p class="first">Accessing the <tt class="docutils literal"><span class="pre">response</span></tt> attribute of a <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt>
object (e.g. <tt class="docutils literal"><span class="pre">request.response</span></tt> within a view) now produces a new
<tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt> object.  This feature is meant to be used
mainly when a view configured with a renderer needs to set response
attributes: all renderers will use the Response object implied by
<tt class="docutils literal"><span class="pre">request.response</span></tt> as the response object returned to the router.</p>
<p><tt class="docutils literal"><span class="pre">request.response</span></tt> can also be used by code in a view that does not use a
renderer, however the response object that is produced by
<tt class="docutils literal"><span class="pre">request.response</span></tt> must be returned when a renderer is not in play (it is
not a &quot;global&quot; response).</p>
</li>
<li><p class="first">Integers and longs passed as <tt class="docutils literal"><span class="pre">elements</span></tt> to <tt class="docutils literal"><span class="pre">pyramid.url.resource_url</span></tt>
or <tt class="docutils literal"><span class="pre">pyramid.request.Request.resource_url</span></tt> e.g. <tt class="docutils literal"><span class="pre">resource_url(context,</span>
<span class="pre">request,</span> <span class="pre">1,</span> <span class="pre">2)</span></tt> (<tt class="docutils literal"><span class="pre">1</span></tt> and <tt class="docutils literal"><span class="pre">2</span></tt> are the <tt class="docutils literal"><span class="pre">elements</span></tt>) will now be
converted implicitly to strings in the result.  Previously passing integers
or longs as elements would cause a TypeError.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt> paster template now uses <tt class="docutils literal"><span class="pre">query.get</span></tt> rather than
<tt class="docutils literal"><span class="pre">query.filter_by</span></tt> to take better advantage of identity map caching.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt> paster template now has unit tests.</p>
</li>
<li><p class="first">Added <tt class="docutils literal"><span class="pre">pyramid.i18n.make_localizer</span></tt> API (broken out from
<tt class="docutils literal"><span class="pre">get_localizer</span></tt> guts).</p>
</li>
<li><p class="first">An exception raised by a NewRequest event subscriber can now be caught by
an exception view.</p>
</li>
<li><p class="first">It is now possible to get information about why Pyramid raised a Forbidden
exception from within an exception view.  The <tt class="docutils literal"><span class="pre">ACLDenied</span></tt> object returned
by the <tt class="docutils literal"><span class="pre">permits</span></tt> method of each stock authorization policy
(<tt class="docutils literal"><span class="pre">pyramid.interfaces.IAuthorizationPolicy.permits</span></tt>) is now attached to
the Forbidden exception as its <tt class="docutils literal"><span class="pre">result</span></tt> attribute.  Therefore, if you've
created a Forbidden exception view, you can see the ACE, ACL, permission,
and principals involved in the request as
eg. <tt class="docutils literal"><span class="pre">context.result.permission</span></tt>, <tt class="docutils literal"><span class="pre">context.result.acl</span></tt>, etc within the
logic of the Forbidden exception view.</p>
</li>
<li><p class="first">Don't explicitly prevent the <tt class="docutils literal"><span class="pre">timeout</span></tt> from being lower than the
<tt class="docutils literal"><span class="pre">reissue_time</span></tt> when setting up an <tt class="docutils literal"><span class="pre">AuthTktAuthenticationPolicy</span></tt>
(previously such a configuration would raise a <tt class="docutils literal"><span class="pre">ValueError</span></tt>, now it's
allowed, although typically nonsensical).  Allowing the nonsensical
configuration made the code more understandable and required fewer tests.</p>
</li>
<li><p class="first">A new paster command named <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pviews</span></tt> was added.  This command
prints a summary of potentially matching views for a given path.  See the
section entitled &quot;Displaying Matching Views for a Given URL&quot; in the &quot;View
Configuration&quot; chapter of the narrative documentation for more information.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">add_route</span></tt> method of the Configurator now accepts a <tt class="docutils literal"><span class="pre">static</span></tt>
argument.  If this argument is <tt class="docutils literal"><span class="pre">True</span></tt>, the added route will never be
considered for matching when a request is handled.  Instead, it will only
be useful for URL generation via <tt class="docutils literal"><span class="pre">route_url</span></tt> and <tt class="docutils literal"><span class="pre">route_path</span></tt>.  See the
section entitled &quot;Static Routes&quot; in the URL Dispatch narrative chapter for
more information.</p>
</li>
<li><p class="first">A default exception view for the context
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IExceptionResponse</span></tt> is now registered by default.
This means that an instance of any exception response class imported from
<tt class="docutils literal"><span class="pre">pyramid.httpexceptions</span></tt> (such as <tt class="docutils literal"><span class="pre">HTTPFound</span></tt>) can now be raised from
within view code; when raised, this exception view will render the
exception to a response.</p>
</li>
<li><p class="first">A function named <tt class="docutils literal"><span class="pre">pyramid.httpexceptions.exception_response</span></tt> is a
shortcut that can be used to create HTTP exception response objects using
an HTTP integer status code.</p>
</li>
<li><p class="first">The Configurator now accepts an additional keyword argument named
<tt class="docutils literal"><span class="pre">exceptionresponse_view</span></tt>.  By default, this argument is populated with a
default exception view function that will be used when a response is raised
as an exception. When <tt class="docutils literal"><span class="pre">None</span></tt> is passed for this value, an exception view
for responses will not be registered.  Passing <tt class="docutils literal"><span class="pre">None</span></tt> returns the
behavior of raising an HTTP exception to that of Pyramid 1.0 (the exception
will propagate to middleware and to the WSGI server).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt> class now has a <tt class="docutils literal"><span class="pre">ResponseClass</span></tt> interface
which points at <tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt> class now has a <tt class="docutils literal"><span class="pre">RequestClass</span></tt>
interface which points at <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt>.</p>
</li>
<li><p class="first">It is now possible to return an arbitrary object from a Pyramid view
callable even if a renderer is not used, as long as a suitable adapter to
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IResponse</span></tt> is registered for the type of the returned
object by using the new
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_response_adapter</span></tt> API.  See the section
in the Hooks chapter of the documentation entitled &quot;Changing How Pyramid
Treats View Responses&quot;.</p>
</li>
<li><p class="first">The Pyramid router will now, by default, call the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of
WebOb response objects when returning a WSGI response.  This means that,
among other things, the <tt class="docutils literal"><span class="pre">conditional_response</span></tt> feature of WebOb response
objects will now behave properly.</p>
</li>
<li><p class="first">New method named <tt class="docutils literal"><span class="pre">pyramid.request.Request.is_response</span></tt>.  This method
should be used instead of the <tt class="docutils literal"><span class="pre">pyramid.view.is_response</span></tt> function, which
has been deprecated.</p>
</li>
</ul>
</div>
<div class="section" id="id126">
<h3>Bug Fixes<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>URL pattern markers used in URL dispatch are permitted to specify a custom
regex. For example, the pattern <tt class="docutils literal"><span class="pre">/{foo:\d+}</span></tt> means to match <tt class="docutils literal"><span class="pre">/12345</span></tt>
(foo==12345 in the match dictionary) but not <tt class="docutils literal"><span class="pre">/abc</span></tt>. However, custom
regexes in a pattern marker which used squiggly brackets did not work. For
example, <tt class="docutils literal"><span class="pre">/{foo:\d{4}}</span></tt> would fail to match <tt class="docutils literal"><span class="pre">/1234</span></tt> and
<tt class="docutils literal"><span class="pre">/{foo:\d{1,2}}</span></tt> would fail to match <tt class="docutils literal"><span class="pre">/1</span></tt> or <tt class="docutils literal"><span class="pre">/11</span></tt>. One level of
inner squiggly brackets is now recognized so that the prior two patterns
given as examples now work. See also
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/#issue/123">https://github.com/Pylons/pyramid/issues/#issue/123</a>.</li>
<li>Don't send port numbers along with domain information in cookies set by
AuthTktCookieHelper (see <a class="reference external" href="https://github.com/Pylons/pyramid/issues/131">https://github.com/Pylons/pyramid/issues/131</a>).</li>
<li><tt class="docutils literal"><span class="pre">pyramid.url.route_path</span></tt> (and the shortcut
<tt class="docutils literal"><span class="pre">pyramid.request.Request.route_url</span></tt> method) now include the WSGI
SCRIPT_NAME at the front of the path if it is not empty (see
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/135">https://github.com/Pylons/pyramid/issues/135</a>).</li>
<li><tt class="docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt> now has a <tt class="docutils literal"><span class="pre">script_name</span></tt> attribute (the
empty string).</li>
<li>Don't quote <tt class="docutils literal"><span class="pre">:&#64;&amp;+$,</span></tt> symbols in <tt class="docutils literal"><span class="pre">*elements</span></tt> passed to
<tt class="docutils literal"><span class="pre">pyramid.url.route_url</span></tt> or <tt class="docutils literal"><span class="pre">pyramid.url.resource_url</span></tt> (see
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/141">https://github.com/Pylons/pyramid/issues#issue/141</a>).</li>
<li>Include SCRIPT_NAME in redirects issued by
<tt class="docutils literal"><span class="pre">pyramid.view.append_slash_notfound_view</span></tt> (see
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/149">https://github.com/Pylons/pyramid/issues#issue/149</a>).</li>
<li>Static views registered with <tt class="docutils literal"><span class="pre">config.add_static_view</span></tt> which also included
a <tt class="docutils literal"><span class="pre">permission</span></tt> keyword argument would not work as expected, because
<tt class="docutils literal"><span class="pre">add_static_view</span></tt> also registered a route factory internally.  Because a
route factory was registered internally, the context checked by the Pyramid
permission machinery never had an ACL.  <tt class="docutils literal"><span class="pre">add_static_view</span></tt> no longer
registers a route with a factory, so the default root factory will be used.</li>
<li><tt class="docutils literal"><span class="pre">config.add_static_view</span></tt> now passes extra keyword arguments it receives
to <tt class="docutils literal"><span class="pre">config.add_route</span></tt> (calling add_static_view is mostly logically
equivalent to adding a view of the type <tt class="docutils literal"><span class="pre">pyramid.static.static_view</span></tt>
hooked up to a route with a subpath).  This makes it possible to pass e.g.,
<tt class="docutils literal"><span class="pre">factory=</span></tt> to <tt class="docutils literal"><span class="pre">add_static_view</span></tt> to protect a particular static view
with a custom ACL.</li>
<li><tt class="docutils literal"><span class="pre">testing.DummyRequest</span></tt> used the wrong registry (the global registry) as
<tt class="docutils literal"><span class="pre">self.registry</span></tt> if a dummy request was created <em>before</em> <tt class="docutils literal"><span class="pre">testing.setUp</span></tt>
was executed (<tt class="docutils literal"><span class="pre">testing.setUp</span></tt> pushes a local registry onto the
threadlocal stack). Fixed by implementing <tt class="docutils literal"><span class="pre">registry</span></tt> as a property for
DummyRequest instead of eagerly assigning an attribute.
See also <a class="reference external" href="https://github.com/Pylons/pyramid/issues/165">https://github.com/Pylons/pyramid/issues/165</a></li>
<li>When visiting a URL that represented a static view which resolved to a
subdirectory, the <tt class="docutils literal"><span class="pre">index.html</span></tt> of that subdirectory would not be served
properly.  Instead, a redirect to <tt class="docutils literal"><span class="pre">/subdir</span></tt> would be issued.  This has
been fixed, and now visiting a subdirectory that contains an <tt class="docutils literal"><span class="pre">index.html</span></tt>
within a static view returns the index.html properly.  See also
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/67">https://github.com/Pylons/pyramid/issues/67</a>.</li>
<li>Redirects issued by a static view did not take into account any existing
<tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt> (such as one set by a url mapping composite).  Now they do.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.wsgi.wsgiapp2</span></tt> decorator did not take into account the
<tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt> in the origin request.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.wsgi.wsgiapp2</span></tt> decorator effectively only worked when it
decorated a view found via traversal; it ignored the <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> that was
part of a url-dispatch-matched view.</li>
</ul>
</div>
<div class="section" id="id127">
<h3>Deprecations<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Deprecated all assignments to <tt class="docutils literal"><span class="pre">request.response_*</span></tt> attributes (for
example <tt class="docutils literal"><span class="pre">request.response_content_type</span> <span class="pre">=</span> <span class="pre">'foo'</span></tt> is now deprecated).
Assignments and mutations of assignable request attributes that were
considered by the framework for response influence are now deprecated:
<tt class="docutils literal"><span class="pre">response_content_type</span></tt>, <tt class="docutils literal"><span class="pre">response_headerlist</span></tt>, <tt class="docutils literal"><span class="pre">response_status</span></tt>,
<tt class="docutils literal"><span class="pre">response_charset</span></tt>, and <tt class="docutils literal"><span class="pre">response_cache_for</span></tt>.  Instead of assigning
these to the request object for later detection by the rendering machinery,
users should use the appropriate API of the Response object created by
accessing <tt class="docutils literal"><span class="pre">request.response</span></tt> (e.g. code which does
<tt class="docutils literal"><span class="pre">request.response_content_type</span> <span class="pre">=</span> <span class="pre">'abc'</span></tt> should be changed to
<tt class="docutils literal"><span class="pre">request.response.content_type</span> <span class="pre">=</span> <span class="pre">'abc'</span></tt>).</p>
</li>
<li><p class="first">Passing view-related parameters to
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.add_route</span></tt> is now deprecated.  Previously, a
view was permitted to be connected to a route using a set of <tt class="docutils literal"><span class="pre">view*</span></tt>
parameters passed to the <tt class="docutils literal"><span class="pre">add_route</span></tt> method of the Configurator.  This
was a shorthand which replaced the need to perform a subsequent call to
<tt class="docutils literal"><span class="pre">add_view</span></tt>. For example, it was valid (and often recommended) to do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s">&#39;home&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;mypackage.views.myview&#39;</span><span class="p">,</span>
                  <span class="n">view_renderer</span><span class="o">=</span><span class="s">&#39;some/renderer.pt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Passing <tt class="docutils literal"><span class="pre">view*</span></tt> arguments to <tt class="docutils literal"><span class="pre">add_route</span></tt> is now deprecated in favor of
connecting a view to a predefined route via <tt class="docutils literal"><span class="pre">Configurator.add_view</span></tt> using
the route's <tt class="docutils literal"><span class="pre">route_name</span></tt> parameter.  As a result, the above example
should now be spelled:</p>
<div class="highlight-python"><div class="highlight"><pre>config.add_route(&#39;home&#39;, &#39;/&#39;)
config.add_view(&#39;mypackage.views.myview&#39;, route_name=&#39;home&#39;)
                renderer=&#39;some/renderer.pt&#39;)
</pre></div>
</div>
<p>This deprecation was done to reduce confusion observed in IRC, as well as
to (eventually) reduce documentation burden (see also
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/164">https://github.com/Pylons/pyramid/issues/164</a>).  A deprecation warning is
now issued when any view-related parameter is passed to
<tt class="docutils literal"><span class="pre">Configurator.add_route</span></tt>.</p>
</li>
<li><p class="first">Passing an <tt class="docutils literal"><span class="pre">environ</span></tt> dictionary to the <tt class="docutils literal"><span class="pre">__call__</span></tt> method of a
&quot;traverser&quot; (e.g. an object that implements
<tt class="docutils literal"><span class="pre">pyramid.interfaces.ITraverser</span></tt> such as an instance of
<tt class="docutils literal"><span class="pre">pyramid.traversal.ResourceTreeTraverser</span></tt>) as its <tt class="docutils literal"><span class="pre">request</span></tt> argument
now causes a deprecation warning to be emitted.  Consumer code should pass a
<tt class="docutils literal"><span class="pre">request</span></tt> object instead.  The fact that passing an environ dict is
permitted has been documentation-deprecated since <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> 1.1, and
this capability will be removed entirely in a future version.</p>
</li>
<li><p class="first">The following (undocumented, dictionary-like) methods of the
<tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt> object have been deprecated: <tt class="docutils literal"><span class="pre">__contains__</span></tt>,
<tt class="docutils literal"><span class="pre">__delitem__</span></tt>, <tt class="docutils literal"><span class="pre">__getitem__</span></tt>, <tt class="docutils literal"><span class="pre">__iter__</span></tt>, <tt class="docutils literal"><span class="pre">__setitem__</span></tt>, <tt class="docutils literal"><span class="pre">get</span></tt>,
<tt class="docutils literal"><span class="pre">has_key</span></tt>, <tt class="docutils literal"><span class="pre">items</span></tt>, <tt class="docutils literal"><span class="pre">iteritems</span></tt>, <tt class="docutils literal"><span class="pre">itervalues</span></tt>, <tt class="docutils literal"><span class="pre">keys</span></tt>, <tt class="docutils literal"><span class="pre">pop</span></tt>,
<tt class="docutils literal"><span class="pre">popitem</span></tt>, <tt class="docutils literal"><span class="pre">setdefault</span></tt>, <tt class="docutils literal"><span class="pre">update</span></tt>, and <tt class="docutils literal"><span class="pre">values</span></tt>.  Usage of any of
these methods will cause a deprecation warning to be emitted.  These
methods were added for internal compatibility in <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> 1.1 (code
that currently expects a request object expected an environ object in BFG
1.0 and before).  In a future version, these methods will be removed
entirely.</p>
</li>
<li><p class="first">Deprecated <tt class="docutils literal"><span class="pre">pyramid.view.is_response</span></tt> function in favor of (newly-added)
<tt class="docutils literal"><span class="pre">pyramid.request.Request.is_response</span></tt> method.  Determining if an object
is truly a valid response object now requires access to the registry, which
is only easily available as a request attribute.  The
<tt class="docutils literal"><span class="pre">pyramid.view.is_response</span></tt> function will still work until it is removed,
but now may return an incorrect answer under some (very uncommon)
circumstances.</p>
</li>
</ul>
</div>
<div class="section" id="id128">
<h3>Behavior Changes<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The default Mako renderer is now configured to escape all HTML in
expression tags. This is intended to help prevent XSS attacks caused by
rendering unsanitized input from users. To revert this behavior in user's
templates, they need to filter the expression through the 'n' filter.
For example, ${ myhtml | n }.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/193">https://github.com/Pylons/pyramid/issues/193</a>.</li>
<li>A custom request factory is now required to return a request object that
has a <tt class="docutils literal"><span class="pre">response</span></tt> attribute (or &quot;reified&quot;/lazy property) if they the
request is meant to be used in a view that uses a renderer.  This
<tt class="docutils literal"><span class="pre">response</span></tt> attribute should be an instance of the class
<tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt>.</li>
<li>The JSON and string renderer factories now assign to
<tt class="docutils literal"><span class="pre">request.response.content_type</span></tt> rather than
<tt class="docutils literal"><span class="pre">request.response_content_type</span></tt>.</li>
<li>Each built-in renderer factory now determines whether it should change the
content type of the response by comparing the response's content type
against the response's default content type; if the content type is the
default content type (usually <tt class="docutils literal"><span class="pre">text/html</span></tt>), the renderer changes the
content type (to <tt class="docutils literal"><span class="pre">application/json</span></tt> or <tt class="docutils literal"><span class="pre">text/plain</span></tt> for JSON and string
renderers respectively).</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.wsgi.wsgiapp2</span></tt> now uses a slightly different method of
figuring out how to &quot;fix&quot; <tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt> and <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> for the
downstream application.  As a result, those values may differ slightly from
the perspective of the downstream application (for example, <tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt>
will now never possess a trailing slash).</li>
<li>Previously, <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt> inherited from
<tt class="docutils literal"><span class="pre">webob.request.Request</span></tt> and implemented <tt class="docutils literal"><span class="pre">__getattr__</span></tt>, <tt class="docutils literal"><span class="pre">__setattr__</span></tt>
and <tt class="docutils literal"><span class="pre">__delattr__</span></tt> itself in order to overidde &quot;adhoc attr&quot; WebOb behavior
where attributes of the request are stored in the environ.  Now,
<tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt> object inherits from (the more recent)
<tt class="docutils literal"><span class="pre">webob.request.BaseRequest</span></tt> instead of <tt class="docutils literal"><span class="pre">webob.request.Request</span></tt>, which
provides the same behavior.  <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt> no longer
implements its own <tt class="docutils literal"><span class="pre">__getattr__</span></tt>, <tt class="docutils literal"><span class="pre">__setattr__</span></tt> or <tt class="docutils literal"><span class="pre">__delattr__</span></tt> as a
result.</li>
<li><tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt> is now a <em>subclass</em> of
<tt class="docutils literal"><span class="pre">webob.response.Response</span></tt> (in order to directly implement the
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IResponse</span></tt> interface).</li>
<li>The &quot;exception response&quot; objects importable from <tt class="docutils literal"><span class="pre">pyramid.httpexceptions</span></tt>
(e.g. <tt class="docutils literal"><span class="pre">HTTPNotFound</span></tt>) are no longer just import aliases for classes that
actually live in <tt class="docutils literal"><span class="pre">webob.exc</span></tt>.  Instead, we've defined our own exception
classes within the module that mirror and emulate the <tt class="docutils literal"><span class="pre">webob.exc</span></tt>
exception response objects almost entirely.  See the &quot;Design Defense&quot; doc
section named &quot;Pyramid Uses its Own HTTP Exception Classes&quot; for more
information.</li>
</ul>
</div>
<div class="section" id="id129">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid no longer supports Python 2.4.  Python 2.5 or better is required to
run Pyramid 1.1+.</li>
<li>The Pyramid router now, by default, expects response objects returned from
view callables to implement the <tt class="docutils literal"><span class="pre">pyramid.interfaces.IResponse</span></tt> interface.
Unlike the Pyramid 1.0 version of this interface, objects which implement
IResponse now must define a <tt class="docutils literal"><span class="pre">__call__</span></tt> method that accepts <tt class="docutils literal"><span class="pre">environ</span></tt>
and <tt class="docutils literal"><span class="pre">start_response</span></tt>, and which returns an <tt class="docutils literal"><span class="pre">app_iter</span></tt> iterable, among
other things.  Previously, it was possible to return any object which had
the three WebOb <tt class="docutils literal"><span class="pre">app_iter</span></tt>, <tt class="docutils literal"><span class="pre">headerlist</span></tt>, and <tt class="docutils literal"><span class="pre">status</span></tt> attributes as
a response, so this is a backwards incompatibility.  It is possible to get
backwards compatibility back by registering an adapter to IResponse from
the type of object you're now returning from view callables.  See the
section in the Hooks chapter of the documentation entitled &quot;Changing How
Pyramid Treats View Responses&quot;.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.interfaces.IResponse</span></tt> interface is now much more extensive.
Previously it defined only <tt class="docutils literal"><span class="pre">app_iter</span></tt>, <tt class="docutils literal"><span class="pre">status</span></tt> and <tt class="docutils literal"><span class="pre">headerlist</span></tt>; now
it is basically intended to directly mirror the <tt class="docutils literal"><span class="pre">webob.Response</span></tt> API,
which has many methods and attributes.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.httpexceptions</span></tt> classes named <tt class="docutils literal"><span class="pre">HTTPFound</span></tt>,
<tt class="docutils literal"><span class="pre">HTTPMultipleChoices</span></tt>, <tt class="docutils literal"><span class="pre">HTTPMovedPermanently</span></tt>, <tt class="docutils literal"><span class="pre">HTTPSeeOther</span></tt>,
<tt class="docutils literal"><span class="pre">HTTPUseProxy</span></tt>, and <tt class="docutils literal"><span class="pre">HTTPTemporaryRedirect</span></tt> now accept <tt class="docutils literal"><span class="pre">location</span></tt> as
their first positional argument rather than <tt class="docutils literal"><span class="pre">detail</span></tt>.  This means that
you can do, e.g. <tt class="docutils literal"><span class="pre">return</span> <span class="pre">pyramid.httpexceptions.HTTPFound('http://foo')</span></tt>
rather than <tt class="docutils literal"><span class="pre">return</span>
<span class="pre">pyramid.httpexceptions.HTTPFound(location='http//foo')</span></tt> (the latter will
of course continue to work).</li>
</ul>
</div>
<div class="section" id="id130">
<h3>Dependencies<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pyramid now depends on WebOb &gt;= 1.0.2 as tests depend on the bugfix in that
release: &quot;Fix handling of WSGI environs with missing <tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt>&quot;.
(Note that in reality, everyone should probably be using 1.0.4 or better
though, as WebOb 1.0.2 and 1.0.3 were effectively brownbag releases.)</li>
</ul>
</div>
</div>
<div class="section" id="id131">
<h2>1.0 (2011-01-30)<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id132">
<h3>Documentation<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed bug in ZODB Wiki tutorial (missing dependency on <tt class="docutils literal"><span class="pre">docutils</span></tt> in
&quot;models&quot; step within <tt class="docutils literal"><span class="pre">setup.py</span></tt>).</li>
<li>Removed API documentation for <tt class="docutils literal"><span class="pre">pyramid.testing</span></tt> APIs named
<tt class="docutils literal"><span class="pre">registerDummySecurityPolicy</span></tt>, <tt class="docutils literal"><span class="pre">registerResources</span></tt>, <tt class="docutils literal"><span class="pre">registerModels</span></tt>,
<tt class="docutils literal"><span class="pre">registerEventListener</span></tt>, <tt class="docutils literal"><span class="pre">registerTemplateRenderer</span></tt>,
<tt class="docutils literal"><span class="pre">registerDummyRenderer</span></tt>, <tt class="docutils literal"><span class="pre">registerView</span></tt>, <tt class="docutils literal"><span class="pre">registerUtility</span></tt>,
<tt class="docutils literal"><span class="pre">registerAdapter</span></tt>, <tt class="docutils literal"><span class="pre">registerSubscriber</span></tt>, <tt class="docutils literal"><span class="pre">registerRoute</span></tt>,
and <tt class="docutils literal"><span class="pre">registerSettings</span></tt>.</li>
<li>Moved &quot;Using ZODB With ZEO&quot; and &quot;Using repoze.catalog Within Pyramid&quot;
tutorials out of core documentation and into the Pyramid Tutorials site
(<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/">http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/</a>).</li>
<li>Changed &quot;Cleaning up After a Request&quot; section in the URL Dispatch chapter
to use <tt class="docutils literal"><span class="pre">request.add_finished_callback</span></tt> instead of jamming an object with
a <tt class="docutils literal"><span class="pre">__del__</span></tt> into the WSGI environment.</li>
<li>Remove duplication of <tt class="docutils literal"><span class="pre">add_route</span></tt> API documentation from URL Dispatch
narrative chapter.</li>
<li>Remove duplication of API and narrative documentation in
<tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> API docs by pointing to
<tt class="docutils literal"><span class="pre">pyramid.config.add_view</span></tt> documentation and narrative chapter
documentation.</li>
<li>Removed some API documentation duplicated in narrative portions of
documentation</li>
<li>Removed &quot;Overall Flow of Authentication&quot; from SQLAlchemy + URL Dispatch
wiki tutorial due to print space concerns (moved to Pyramid Tutorials
site).</li>
</ul>
</div>
<div class="section" id="id133">
<h3>Bug Fixes<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deprecated-since-BFG-1.2 APIs from <tt class="docutils literal"><span class="pre">pyramid.testing</span></tt> now properly emit
deprecation warnings.</li>
<li>Added <tt class="docutils literal"><span class="pre">egg:repoze.retry#retry</span></tt> middleware to the WSGI pipeline in ZODB
templates (retry ZODB conflict errors which occur in normal operations).</li>
<li>Removed duplicate implementations of <tt class="docutils literal"><span class="pre">is_response</span></tt>.  Two competing
implementations existed: one in <tt class="docutils literal"><span class="pre">pyramid.config</span></tt> and one in
<tt class="docutils literal"><span class="pre">pyramid.view</span></tt>.  Now the one defined in <tt class="docutils literal"><span class="pre">pyramid.view</span></tt> is used
internally by <tt class="docutils literal"><span class="pre">pyramid.config</span></tt> and continues to be advertised as an API.</li>
</ul>
</div>
</div>
<div class="section" id="b3-2011-01-28">
<h2>1.0b3 (2011-01-28)<a class="headerlink" href="#b3-2011-01-28" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id134">
<h3>Bug Fixes<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use &amp;copy; instead of copyright symbol in paster templates / tutorial
templates for the benefit of folks who cutnpaste and save to a non-UTF8
format.</li>
<li><tt class="docutils literal"><span class="pre">pyramid.view.append_slash_notfound_view</span></tt> now preserves GET query
parameters across redirects.</li>
</ul>
</div>
<div class="section" id="id135">
<h3>Documentation<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Beef up documentation related to <tt class="docutils literal"><span class="pre">set_default_permission</span></tt>: explicitly
mention that default permissions also protect exception views.</li>
<li>Paster templates and tutorials now use spaces instead of tabs in their HTML
templates.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2011-01-24">
<h2>1.0b2 (2011-01-24)<a class="headerlink" href="#b2-2011-01-24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id136">
<h3>Bug Fixes<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">production.ini</span></tt> generated by all paster templates now have an
effective logging level of WARN, which prevents e.g. SQLAlchemy statement
logging and other inappropriate output.</li>
<li>The <tt class="docutils literal"><span class="pre">production.ini</span></tt> of the <tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt> paster templates did not have a <tt class="docutils literal"><span class="pre">sqlalchemy</span></tt> logger
section, preventing <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">serve</span> <span class="pre">production.ini</span></tt> from working.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> and <tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt> paster templates used
the <tt class="docutils literal"><span class="pre">{{package}}</span></tt> variable in a place where it should have used the
<tt class="docutils literal"><span class="pre">{{project}}</span></tt> variable, causing applications created with uppercase
letters e.g. <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">create</span> <span class="pre">-t</span> <span class="pre">pyramid_routesalchemy</span> <span class="pre">Dibbus</span></tt> to fail to
start when <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">serve</span> <span class="pre">development.ini</span></tt> was used against the result.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/#issue/107">https://github.com/Pylons/pyramid/issues/#issue/107</a></li>
<li>The <tt class="docutils literal"><span class="pre">render_view</span></tt> method of <tt class="docutils literal"><span class="pre">pyramid.renderers.RendererHelper</span></tt> passed
an incorrect value into the renderer for <tt class="docutils literal"><span class="pre">renderer_info</span></tt>.  It now passes
an instance of <tt class="docutils literal"><span class="pre">RendererHelper</span></tt> instead of a dictionary, which is
consistent with other usages.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/106">https://github.com/Pylons/pyramid/issues#issue/106</a></li>
<li>A bug existed in the <tt class="docutils literal"><span class="pre">pyramid.authentication.AuthTktCookieHelper</span></tt> which
would break any usage of an AuthTktAuthenticationPolicy when one was
configured to reissue its tokens (<tt class="docutils literal"><span class="pre">reissue_time</span></tt> &lt; <tt class="docutils literal"><span class="pre">timeout</span></tt> /
<tt class="docutils literal"><span class="pre">max_age</span></tt>). Symptom: <tt class="docutils literal"><span class="pre">ValueError:</span> <span class="pre">('Invalid</span> <span class="pre">token</span> <span class="pre">%r',</span> <span class="pre">'')</span></tt>.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/108">https://github.com/Pylons/pyramid/issues#issue/108</a>.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2011-01-21">
<h2>1.0b1 (2011-01-21)<a class="headerlink" href="#b1-2011-01-21" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id137">
<h3>Features<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The AuthTktAuthenticationPolicy now accepts a <tt class="docutils literal"><span class="pre">tokens</span></tt> parameter via
<tt class="docutils literal"><span class="pre">pyramid.security.remember</span></tt>.  The value must be a sequence of strings.
Tokens are placed into the auth_tkt &quot;tokens&quot; field and returned in the
auth_tkt cookie.</li>
<li>Add <tt class="docutils literal"><span class="pre">wild_domain</span></tt> argument to AuthTktAuthenticationPolicy, which defaults
to <tt class="docutils literal"><span class="pre">True</span></tt>.  If it is set to <tt class="docutils literal"><span class="pre">False</span></tt>, the feature of the policy which
sets a cookie with a wildcard domain will be turned off.</li>
<li>Add a <tt class="docutils literal"><span class="pre">MANIFEST.in</span></tt> file to each paster template. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/95">https://github.com/Pylons/pyramid/issues#issue/95</a></li>
</ul>
</div>
<div class="section" id="id138">
<h3>Bug Fixes<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">testing.setUp</span></tt> now adds a <tt class="docutils literal"><span class="pre">settings</span></tt> attribute to the registry (both
when it's passed a registry without any settings and when it creates one).</li>
<li>The <tt class="docutils literal"><span class="pre">testing.setUp</span></tt> function now takes a <tt class="docutils literal"><span class="pre">settings</span></tt> argument, which
should be a dictionary.  Its values will subsequently be available on the
returned <tt class="docutils literal"><span class="pre">config</span></tt> object as <tt class="docutils literal"><span class="pre">config.registry.settings</span></tt>.</li>
</ul>
</div>
<div class="section" id="id139">
<h3>Documentation<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added &quot;What's New in Pyramid 1.0&quot; chapter to HTML rendering of
documentation.</li>
<li>Merged caseman-master narrative editing branch, many wording fixes and
extensions.</li>
<li>Fix deprecated example showing <tt class="docutils literal"><span class="pre">chameleon_zpt</span></tt> API call in testing
narrative chapter.</li>
<li>Added &quot;Adding Methods to the Configurator via <tt class="docutils literal"><span class="pre">add_directive</span></tt>&quot; section to
Advanced Configuration narrative chapter.</li>
<li>Add docs for <tt class="docutils literal"><span class="pre">add_finished_callback</span></tt>, <tt class="docutils literal"><span class="pre">add_response_callback</span></tt>,
<tt class="docutils literal"><span class="pre">route_path</span></tt>, <tt class="docutils literal"><span class="pre">route_url</span></tt>, and <tt class="docutils literal"><span class="pre">static_url</span></tt> methods to
<tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt> API docs.</li>
<li>Add (minimal) documentation about using I18N within Mako templates to
&quot;Internationalization and Localization&quot; narrative chapter.</li>
<li>Move content of &quot;Forms&quot; chapter back to &quot;Views&quot; chapter; I can't think of a
better place to put it.</li>
<li>Slightly improved interface docs for <tt class="docutils literal"><span class="pre">IAuthorizationPolicy</span></tt>.</li>
<li>Minimally explain usage of custom regular expressions in URL dispatch
replacement markers within URL Dispatch chapter.</li>
</ul>
</div>
<div class="section" id="id140">
<h3>Deprecations<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Using the <tt class="docutils literal"><span class="pre">pyramid.view.bfg_view</span></tt> alias for <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt>
(a backwards compatibility shim) now issues a deprecation warning.</li>
</ul>
</div>
<div class="section" id="id141">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Using <tt class="docutils literal"><span class="pre">testing.setUp</span></tt> now registers an ISettings utility as a side
effect.  Some test code which queries for this utility after
<tt class="docutils literal"><span class="pre">testing.setUp</span></tt> via queryAdapter will expect a return value of <tt class="docutils literal"><span class="pre">None</span></tt>.
This code will need to be changed.</li>
<li>When a <tt class="docutils literal"><span class="pre">pyramid.exceptions.Forbidden</span></tt> error is raised, its status code
now <tt class="docutils literal"><span class="pre">403</span> <span class="pre">Forbidden</span></tt>.  It was previously <tt class="docutils literal"><span class="pre">401</span> <span class="pre">Unauthorized</span></tt>, for
backwards compatibility purposes with <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>.  This change will
cause problems for users of Pyramid with <tt class="docutils literal"><span class="pre">repoze.who</span></tt>, which intercepts
<tt class="docutils literal"><span class="pre">401</span> <span class="pre">Unauthorized</span></tt> by default, but allows <tt class="docutils literal"><span class="pre">403</span> <span class="pre">Forbidden</span></tt> to pass
through.  Those deployments will need to configure <tt class="docutils literal"><span class="pre">repoze.who</span></tt> to also
react to <tt class="docutils literal"><span class="pre">403</span> <span class="pre">Forbidden</span></tt>.</li>
<li>The default value for the <tt class="docutils literal"><span class="pre">cookie_on_exception</span></tt> parameter to
<tt class="docutils literal"><span class="pre">pyramid.session.UnencyrptedCookieSessionFactory</span></tt> is now <tt class="docutils literal"><span class="pre">True</span></tt>.  This
means that when view code causes an exception to be raised, and the session
has been mutated, a cookie will be sent back in the response.  Previously
its default value was <tt class="docutils literal"><span class="pre">False</span></tt>.</li>
</ul>
</div>
<div class="section" id="paster-templates">
<h3>Paster Templates<a class="headerlink" href="#paster-templates" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">pyramid_zodb</span></tt>, <tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> and <tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt>
paster templates now use a default &quot;commit veto&quot; hook when configuring the
<tt class="docutils literal"><span class="pre">repoze.tm2</span></tt> transaction manager in <tt class="docutils literal"><span class="pre">development.ini</span></tt>.  This prevents a
transaction from being committed when the response status code is within
the 400 or 500 ranges.  See also
<a class="reference external" href="http://docs.repoze.org/tm2/#using-a-commit-veto">http://docs.repoze.org/tm2/#using-a-commit-veto</a>.</li>
</ul>
</div>
</div>
<div class="section" id="a10-2011-01-18">
<h2>1.0a10 (2011-01-18)<a class="headerlink" href="#a10-2011-01-18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id142">
<h3>Bug Fixes<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>URL dispatch now properly handles a <tt class="docutils literal"><span class="pre">.*</span></tt> or <tt class="docutils literal"><span class="pre">*</span></tt> appearing in a regex
match when used inside brackets.  Resolves issue #90.</li>
</ul>
</div>
<div class="section" id="id143">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">add_handler</span></tt> method of a Configurator has been removed from the
Pyramid core.  Handlers are now a feature of the <tt class="docutils literal"><span class="pre">pyramid_handlers</span></tt>
package, which can be downloaded from PyPI.  Documentation for the package
should be available via
<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_handlers/en/latest/">http://docs.pylonsproject.org/projects/pyramid_handlers/en/latest/</a>,
which describes how
to add a configuration statement to your <tt class="docutils literal"><span class="pre">main</span></tt> block to reobtain this
method.  You will also need to add an <tt class="docutils literal"><span class="pre">install_requires</span></tt> dependency upon
<tt class="docutils literal"><span class="pre">pyramid_handlers</span></tt> to your <tt class="docutils literal"><span class="pre">setup.py</span></tt> file.</li>
<li>The <tt class="docutils literal"><span class="pre">load_zcml</span></tt> method of a Configurator has been removed from the
Pyramid core.  Loading ZCML is now a feature of the <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt>
package, which can be downloaded from PyPI.  Documentation for the package
should be available via
<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_zcml/en/latest/">http://docs.pylonsproject.org/projects/pyramid_zcml/en/latest/</a>,
which describes how
to add a configuration statement to your <tt class="docutils literal"><span class="pre">main</span></tt> block to reobtain this
method.  You will also need to add an <tt class="docutils literal"><span class="pre">install_requires</span></tt> dependency upon
<tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt> to your <tt class="docutils literal"><span class="pre">setup.py</span></tt> file.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.includes</span></tt> subpackage has been removed.  ZCML files which use
include the package <tt class="docutils literal"><span class="pre">pyramid.includes</span></tt> (e.g. <tt class="docutils literal"><span class="pre">&lt;include</span>
<span class="pre">package=&quot;pyramid.includes&quot;/&gt;</span></tt>) now must include the <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt>
package instead (e.g. <tt class="docutils literal"><span class="pre">&lt;include</span> <span class="pre">package=&quot;pyramid_zcml&quot;/&gt;</span></tt>).</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.view.action</span></tt> decorator has been removed from the Pyramid
core.  Handlers are now a feature of the <tt class="docutils literal"><span class="pre">pyramid_handlers</span></tt> package.  It
should now be imported from <tt class="docutils literal"><span class="pre">pyramid_handlers</span></tt> e.g. <tt class="docutils literal"><span class="pre">from</span>
<span class="pre">pyramid_handlers</span> <span class="pre">import</span> <span class="pre">action</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">handler</span></tt> ZCML directive has been removed.  It is now a feature of
the <tt class="docutils literal"><span class="pre">pyramid_handlers</span></tt> package.</li>
<li>The <tt class="docutils literal"><span class="pre">pylons_minimal</span></tt>, <tt class="docutils literal"><span class="pre">pylons_basic</span></tt> and <tt class="docutils literal"><span class="pre">pylons_sqla</span></tt> paster
templates were removed.  Use <tt class="docutils literal"><span class="pre">pyramid_sqla</span></tt> (available from PyPI) as a
generic replacement for Pylons-esque development.</li>
<li>The <tt class="docutils literal"><span class="pre">make_app</span></tt> function has been removed from the <tt class="docutils literal"><span class="pre">pyramid.router</span></tt>
module.  It continues life within the <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt> package.  This
leaves the <tt class="docutils literal"><span class="pre">pyramid.router</span></tt> module without any API functions.</li>
<li>The <tt class="docutils literal"><span class="pre">configure_zcml</span></tt> setting within the deployment settings (within
<tt class="docutils literal"><span class="pre">**settings</span></tt> passed to a Pyramid <tt class="docutils literal"><span class="pre">main</span></tt> function) has ceased to have any
meaning.</li>
</ul>
</div>
<div class="section" id="id144">
<h3>Features<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pyramid.testing.setUp</span></tt> and <tt class="docutils literal"><span class="pre">pyramid.testing.tearDown</span></tt> have been
undeprecated.  They are now the canonical setup and teardown APIs for test
configuration, replacing &quot;direct&quot; creation of a Configurator.  This is a
change designed to provide a facade that will protect against any future
Configurator deprecations.</li>
<li>Add <tt class="docutils literal"><span class="pre">charset</span></tt> attribute to <tt class="docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt>
(unconditionally <tt class="docutils literal"><span class="pre">UTF-8</span></tt>).</li>
<li>Add <tt class="docutils literal"><span class="pre">add_directive</span></tt> method to configurator, which allows framework
extenders to add methods to the configurator (ala ZCML directives).</li>
<li>When <tt class="docutils literal"><span class="pre">Configurator.include</span></tt> is passed a <em>module</em> as an argument, it
defaults to attempting to find and use a callable named <tt class="docutils literal"><span class="pre">includeme</span></tt>
within that module.  This makes it possible to use
<tt class="docutils literal"><span class="pre">config.include('some.module')</span></tt> rather than
<tt class="docutils literal"><span class="pre">config.include('some.module.somefunc')</span></tt> as long as the include function
within <tt class="docutils literal"><span class="pre">some.module</span></tt> is named <tt class="docutils literal"><span class="pre">includeme</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">bfg2pyramid</span></tt> script now converts ZCML include tags that have
<tt class="docutils literal"><span class="pre">repoze.bfg.includes</span></tt> as a package attribute to the value
<tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt>.  For example, <tt class="docutils literal"><span class="pre">&lt;include</span> <span class="pre">package=&quot;repoze.bfg.includes&quot;&gt;</span></tt>
will be converted to <tt class="docutils literal"><span class="pre">&lt;include</span> <span class="pre">package=&quot;pyramid_zcml&quot;&gt;</span></tt>.</li>
</ul>
</div>
<div class="section" id="id145">
<h3>Paster Templates<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All paster templates now use <tt class="docutils literal"><span class="pre">pyramid.testing.setUp</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.testing.tearDown</span></tt> rather than creating a Configurator &quot;by hand&quot;
within their <tt class="docutils literal"><span class="pre">tests.py</span></tt> module, as per decision in features above.</li>
<li>The <tt class="docutils literal"><span class="pre">starter_zcml</span></tt> paster template has been moved to the <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt>
package.</li>
</ul>
</div>
<div class="section" id="id146">
<h3>Documentation<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The wiki and wiki2 tutorials now use <tt class="docutils literal"><span class="pre">pyramid.testing.setUp</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.testing.tearDown</span></tt> rather than creating a Configurator &quot;by hand&quot;,
as per decision in features above.</li>
<li>The &quot;Testing&quot; narrative chapter now explains <tt class="docutils literal"><span class="pre">pyramid.testing.setUp</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.testing.tearDown</span></tt> instead of Configurator creation and
<tt class="docutils literal"><span class="pre">Configurator.begin()</span></tt> and <tt class="docutils literal"><span class="pre">Configurator.end()</span></tt>.</li>
<li>Document the <tt class="docutils literal"><span class="pre">request.override_renderer</span></tt> attribute within the narrative
&quot;Renderers&quot; chapter in a section named &quot;Overriding A Renderer at Runtime&quot;.</li>
<li>The &quot;Declarative Configuration&quot; narrative chapter has been removed (it was
moved to the <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt> package).</li>
<li>Most references to ZCML in narrative chapters have been removed or
redirected to <tt class="docutils literal"><span class="pre">pyramid_zcml</span></tt> locations.</li>
</ul>
</div>
<div class="section" id="id147">
<h3>Deprecations<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deprecation warnings related to import of the following API functions were
added: <tt class="docutils literal"><span class="pre">pyramid.traversal.find_model</span></tt>, <tt class="docutils literal"><span class="pre">pyramid.traversal.model_path</span></tt>,
<tt class="docutils literal"><span class="pre">pyramid.traversal.model_path_tuple</span></tt>, <tt class="docutils literal"><span class="pre">pyramid.url.model_url</span></tt>.  The
instructions emitted by the deprecation warnings instruct the developer to
change these method spellings to their <tt class="docutils literal"><span class="pre">resource</span></tt> equivalents.  This is a
consequence of the mass concept rename of &quot;model&quot; to &quot;resource&quot; performed
in 1.0a7.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2011-01-08">
<h2>1.0a9 (2011-01-08)<a class="headerlink" href="#a9-2011-01-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id148">
<h3>Bug Fixes<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">proutes</span></tt> command tried too hard to resolve the view for printing,
resulting in exceptions when an exceptional root factory was encountered.
Instead of trying to resolve the view, if it cannot, it will now just print
<tt class="docutils literal"><span class="pre">&lt;unknown&gt;</span></tt>.</li>
<li>The <cite>self</cite> argument was included in new methods of the <tt class="docutils literal"><span class="pre">ISession</span></tt> interface
signature, causing <tt class="docutils literal"><span class="pre">pyramid_beaker</span></tt> tests to fail.</li>
<li>Readd <tt class="docutils literal"><span class="pre">pyramid.traversal.model_path_tuple</span></tt> as an alias for
<tt class="docutils literal"><span class="pre">pyramid.traversal.resource_path_tuple</span></tt> for backwards compatibility.</li>
</ul>
</div>
<div class="section" id="id149">
<h3>Features<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a new API <tt class="docutils literal"><span class="pre">pyramid.url.current_route_url</span></tt>, which computes a URL based
on the &quot;current&quot; route (if any) and its matchdict values.</li>
<li><tt class="docutils literal"><span class="pre">config.add_view</span></tt> now accepts a <tt class="docutils literal"><span class="pre">decorator</span></tt> keyword argument, a callable
which will decorate the view callable before it is added to the registry.</li>
<li>If a handler class provides an <tt class="docutils literal"><span class="pre">__action_decorator__</span></tt> attribute (usually
a classmethod or staticmethod), use that as the decorator for each view
registration for that handler.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></tt> interface now specifies an
<tt class="docutils literal"><span class="pre">unauthenticated_userid</span></tt> method.  This method supports an important
optimization required by people who are using persistent storages which do
not support object caching and whom want to create a &quot;user object&quot; as a
request attribute.</li>
<li>A new API has been added to the <tt class="docutils literal"><span class="pre">pyramid.security</span></tt> module named
<tt class="docutils literal"><span class="pre">unauthenticated_userid</span></tt>.  This API function calls the
<tt class="docutils literal"><span class="pre">unauthenticated_userid</span></tt> method of the effective security policy.</li>
<li>An <tt class="docutils literal"><span class="pre">unauthenticated_userid</span></tt> method has been added to the dummy
authentication policy returned by
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator.testing_securitypolicy</span></tt>.  It returns the
same thing as that the dummy authentication policy's
<tt class="docutils literal"><span class="pre">authenticated_userid</span></tt> method.</li>
<li>The class <tt class="docutils literal"><span class="pre">pyramid.authentication.AuthTktCookieHelper</span></tt> is now an API.
This class can be used by third-party authentication policy developers to
help in the mechanics of authentication cookie-setting.</li>
<li>New constructor argument to Configurator: <tt class="docutils literal"><span class="pre">default_view_mapper</span></tt>.  Useful
to create systems that have alternate view calling conventions.  A view
mapper allows objects that are meant to be used as view callables to have
an arbitrary argument list and an arbitrary result.  The object passed as
<tt class="docutils literal"><span class="pre">default_view_mapper</span></tt> should implement the
<tt class="docutils literal"><span class="pre">pyramid.interfaces.IViewMapperFactory</span></tt> interface.</li>
<li>add a <tt class="docutils literal"><span class="pre">set_view_mapper</span></tt> API to Configurator.  Has
the same result as passing <tt class="docutils literal"><span class="pre">default_view_mapper</span></tt> to the Configurator
constructor.</li>
<li><tt class="docutils literal"><span class="pre">config.add_view</span></tt> now accepts a <tt class="docutils literal"><span class="pre">mapper</span></tt> keyword argument, which should
either be <tt class="docutils literal"><span class="pre">None</span></tt>, a string representing a Python dotted name, or an
object which is an <tt class="docutils literal"><span class="pre">IViewMapperFactory</span></tt>.  This feature is not useful for
&quot;civilians&quot;, only for extension writers.</li>
<li>Allow static renderer provided during view registration to be overridden at
request time via a request attribute named <tt class="docutils literal"><span class="pre">override_renderer</span></tt>, which
should be the name of a previously registered renderer.  Useful to provide
&quot;omnipresent&quot; RPC using existing rendered views.</li>
<li>Instances of <tt class="docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt> now have a <tt class="docutils literal"><span class="pre">session</span></tt>
object, which is mostly a dictionary, but also implements the other session
API methods for flash and CSRF.</li>
</ul>
</div>
<div class="section" id="id150">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Since the <tt class="docutils literal"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></tt> interface now
specifies that a policy implementation must implement an
<tt class="docutils literal"><span class="pre">unauthenticated_userid</span></tt> method, all third-party custom authentication
policies now must implement this method.  It, however, will only be called
when the global function named <tt class="docutils literal"><span class="pre">pyramid.security.unauthenticated_userid</span></tt>
is invoked, so if you're not invoking that, you will not notice any issues.</li>
<li><tt class="docutils literal"><span class="pre">pyramid.interfaces.ISession.get_csrf_token</span></tt> now mandates that an
implementation should return a <em>new</em> token if one doesn't already exist in
the session (previously it would return None).  The internal sessioning
implementation has been changed.</li>
</ul>
</div>
<div class="section" id="id151">
<h3>Documentation<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The (weak) &quot;Converting a CMF Application to Pyramid&quot; tutorial has been
removed from the tutorials section.  It was moved to the
<tt class="docutils literal"><span class="pre">pyramid_tutorials</span></tt> Github repository.</li>
<li>The &quot;Resource Location and View Lookup&quot; chapter has been replaced with a
variant of Rob Miller's &quot;Much Ado About Traversal&quot; (originally published at
<a class="reference external" href="http://blog.nonsequitarian.org/2010/much-ado-about-traversal/">http://blog.nonsequitarian.org/2010/much-ado-about-traversal/</a>).</li>
<li>Many minor wording tweaks and refactorings (merged Casey Duncan's docs
fork, in which he is working on general editing).</li>
<li>Added (weak) description of new view mapper feature to Hooks narrative
chapter.</li>
<li>Split views chapter into 2: View Callables and View Configuration.</li>
<li>Reorder Renderers and Templates chapters after View Callables but before
View Configuration.</li>
<li>Merge Session Objects, Cross-Site Request Forgery, and Flash Messaging
chapter into a single Sessions chapter.</li>
<li>The Wiki and Wiki2 tutorials now have much nicer CSS and graphics.</li>
</ul>
</div>
<div class="section" id="id152">
<h3>Internals<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The &quot;view derivation&quot; code is now factored into a set of classes rather
than a large number of standalone functions (a side effect of the
view mapper refactoring).</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.renderer.RendererHelper</span></tt> class has grown a <tt class="docutils literal"><span class="pre">render_view</span></tt>
method, which is used by the default view mapper (a side effect of the
view mapper refactoring).</li>
<li>The object passed as <tt class="docutils literal"><span class="pre">renderer</span></tt> to the &quot;view deriver&quot; is now an instance
of <tt class="docutils literal"><span class="pre">pyramid.renderers.RendererHelper</span></tt> rather than a dictionary (a side
effect of view mapper refactoring).</li>
<li>The class used as the &quot;page template&quot; in <tt class="docutils literal"><span class="pre">pyramid.chameleon_text</span></tt> was
removed, in preference to using a Chameleon-inbuilt version.</li>
<li>A view callable wrapper registered in the registry now contains an
<tt class="docutils literal"><span class="pre">__original_view__</span></tt> attribute which references the original view callable
(or class).</li>
<li>The (non-API) method of all internal authentication policy implementations
previously named <tt class="docutils literal"><span class="pre">_get_userid</span></tt> is now named <tt class="docutils literal"><span class="pre">unauthenticated_userid</span></tt>,
promoted to an API method.  If you were overriding this method, you'll now
need to override it as <tt class="docutils literal"><span class="pre">unauthenticated_userid</span></tt> instead.</li>
<li>Remove (non-API) function of config.py named _map_view.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2010-12-27">
<h2>1.0a8 (2010-12-27)<a class="headerlink" href="#a8-2010-12-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id153">
<h3>Bug Fixes<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The name <tt class="docutils literal"><span class="pre">registry</span></tt> was not available in the <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt>
environment under IPython.</li>
</ul>
</div>
<div class="section" id="id154">
<h3>Features<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If a resource implements a <tt class="docutils literal"><span class="pre">__resource_url__</span></tt> method, it will be called
as the result of invoking the <tt class="docutils literal"><span class="pre">pyramid.url.resource_url</span></tt> function to
generate a URL, overriding the default logic.  See the new &quot;Generating The
URL Of A Resource&quot; section within the Resources narrative chapter.</li>
<li>Added flash messaging, as described in the &quot;Flash Messaging&quot; narrative
documentation chapter.</li>
<li>Added CSRF token generation, as described in the narrative chapter entitled
&quot;Preventing Cross-Site Request Forgery Attacks&quot;.</li>
<li>Prevent misunderstanding of how the <tt class="docutils literal"><span class="pre">view</span></tt> and <tt class="docutils literal"><span class="pre">view_permission</span></tt>
arguments to add_route work by raising an exception during configuration if
view-related arguments exist but no <tt class="docutils literal"><span class="pre">view</span></tt> argument is passed.</li>
<li>Add <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">proute</span></tt> command which displays a summary of the routing
table.  See the narrative documentation section within the &quot;URL Dispatch&quot;
chapter entitled &quot;Displaying All Application Routes&quot;.</li>
</ul>
</div>
<div class="section" id="id155">
<h3>Paster Templates<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">pyramid_zodb</span></tt> Paster template no longer employs ZCML.  Instead, it
is based on scanning.</li>
</ul>
</div>
<div class="section" id="id156">
<h3>Documentation<a class="headerlink" href="#id156" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added &quot;Generating The URL Of A Resource&quot; section to the Resources narrative
chapter (includes information about overriding URL generation using
<tt class="docutils literal"><span class="pre">__resource_url__</span></tt>).</li>
<li>Added &quot;Generating the Path To a Resource&quot; section to the Resources
narrative chapter.</li>
<li>Added &quot;Finding a Resource by Path&quot; section to the Resources narrative
chapter.</li>
<li>Added &quot;Obtaining the Lineage of a Resource&quot; to the Resources narrative
chapter.</li>
<li>Added &quot;Determining if a Resource is In The Lineage of Another Resource&quot; to
Resources narrative chapter.</li>
<li>Added &quot;Finding the Root Resource&quot; to Resources narrative chapter.</li>
<li>Added &quot;Finding a Resource With a Class or Interface in Lineage&quot; to
Resources narrative chapter.</li>
<li>Added a &quot;Flash Messaging&quot; narrative documentation chapter.</li>
<li>Added a narrative chapter entitled &quot;Preventing Cross-Site Request Forgery
Attacks&quot;.</li>
<li>Changed the &quot;ZODB + Traversal Wiki Tutorial&quot; based on changes to
<tt class="docutils literal"><span class="pre">pyramid_zodb</span></tt> Paster template.</li>
<li>Added &quot;Advanced Configuration&quot; narrative chapter which documents how to
deal with configuration conflicts, two-phase configuration, <tt class="docutils literal"><span class="pre">include</span></tt> and
<tt class="docutils literal"><span class="pre">commit</span></tt>.</li>
<li>Fix API documentation rendering for <tt class="docutils literal"><span class="pre">pyramid.view.static</span></tt></li>
<li>Add &quot;Pyramid Provides More Than One Way to Do It&quot; to Design Defense
documentation.</li>
<li>Changed &quot;Static Assets&quot; narrative chapter: clarify that <tt class="docutils literal"><span class="pre">name</span></tt> represents
a prefix unless it's a URL, added an example of a root-relative static view
fallback for URL dispatch, added an example of creating a simple view that
returns the body of a file.</li>
<li>Move ZCML usage in Hooks chapter to Declarative Configuration chapter.</li>
<li>Merge &quot;Static Assets&quot; chapter into the &quot;Assets&quot; chapter.</li>
<li>Added narrative documentation section within the &quot;URL Dispatch&quot; chapter
entitled &quot;Displaying All Application Routes&quot; (for <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">proutes</span></tt>
command).</li>
</ul>
</div>
</div>
<div class="section" id="a7-2010-12-20">
<h2>1.0a7 (2010-12-20)<a class="headerlink" href="#a7-2010-12-20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="terminology-changes">
<h3>Terminology Changes<a class="headerlink" href="#terminology-changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The Pyramid concept previously known as &quot;model&quot; is now known as &quot;resource&quot;.
As a result:</p>
<ul>
<li><p class="first">The following API changes have been made:</p>
<div class="highlight-python"><div class="highlight"><pre>pyramid.url.model_url -&gt;
                  pyramid.url.resource_url

pyramid.traversal.find_model -&gt;
                  pyramid.url.find_resource

pyramid.traversal.model_path -&gt;
                  pyramid.traversal.resource_path

pyramid.traversal.model_path_tuple -&gt;
                  pyramid.traversal.resource_path_tuple

pyramid.traversal.ModelGraphTraverser -&gt;
                  pyramid.traversal.ResourceTreeTraverser

pyramid.config.Configurator.testing_models -&gt;
                  pyramid.config.Configurator.testing_resources

pyramid.testing.registerModels -&gt;
                  pyramid.testing.registerResources

pyramid.testing.DummyModel -&gt;
                  pyramid.testing.DummyResource
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>All documentation which previously referred to &quot;model&quot; now refers to
&quot;resource&quot;.</li>
<li>The <tt class="docutils literal"><span class="pre">starter</span></tt> and <tt class="docutils literal"><span class="pre">starter_zcml</span></tt> paster templates now have a
<tt class="docutils literal"><span class="pre">resources.py</span></tt> module instead of a <tt class="docutils literal"><span class="pre">models.py</span></tt> module.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Positional argument names of various APIs have been changed from
<tt class="docutils literal"><span class="pre">model</span></tt> to <tt class="docutils literal"><span class="pre">resource</span></tt>.</li>
</ul>
<p>Backwards compatibility shims have been left in place in all cases.  They
will continue to work &quot;forever&quot;.</p>
</li>
<li><p class="first">The Pyramid concept previously known as &quot;resource&quot; is now known as &quot;asset&quot;.
As a result:</p>
<ul>
<li><p class="first">The (non-API) module previously known as <tt class="docutils literal"><span class="pre">pyramid.resource</span></tt> is now
known as <tt class="docutils literal"><span class="pre">pyramid.asset</span></tt>.</p>
</li>
<li><p class="first">All docs that previously referred to &quot;resource specification&quot; now refer
to &quot;asset specification&quot;.</p>
</li>
<li><p class="first">The following API changes were made:</p>
<div class="highlight-python"><div class="highlight"><pre>pyramid.config.Configurator.absolute_resource_spec -&gt;
                  pyramid.config.Configurator.absolute_asset_spec

pyramid.config.Configurator.override_resource -&gt;
                  pyramid.config.Configurator.override_asset
</pre></div>
</div>
</li>
<li><p class="first">The ZCML directive previously known as <tt class="docutils literal"><span class="pre">resource</span></tt> is now known as
<tt class="docutils literal"><span class="pre">asset</span></tt>.</p>
</li>
<li><p class="first">The setting previously known as <tt class="docutils literal"><span class="pre">BFG_RELOAD_RESOURCES</span></tt> (envvar) or
<tt class="docutils literal"><span class="pre">reload_resources</span></tt> (config file) is now known, respectively, as
<tt class="docutils literal"><span class="pre">PYRAMID_RELOAD_ASSETS</span></tt> and <tt class="docutils literal"><span class="pre">reload_assets</span></tt>.</p>
</li>
</ul>
<p>Backwards compatibility shims have been left in place in all cases.  They
will continue to work &quot;forever&quot;.</p>
</li>
</ul>
</div>
<div class="section" id="id157">
<h3>Bug Fixes<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make it possible to succesfully run all tests via <tt class="docutils literal"><span class="pre">nosetests</span></tt> command
directly (rather than indirectly via <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">nosetests</span></tt>).</li>
<li>When a configuration conflict is encountered during scanning, the conflict
exception now shows the decorator information that caused the conflict.</li>
</ul>
</div>
<div class="section" id="id158">
<h3>Features<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added <tt class="docutils literal"><span class="pre">debug_routematch</span></tt> configuration setting that logs matched routes
(including the matchdict and predicates).</li>
<li>The name <tt class="docutils literal"><span class="pre">registry</span></tt> is now available in a <tt class="docutils literal"><span class="pre">pshell</span></tt> environment by
default.  It is the application registry object.</li>
</ul>
</div>
<div class="section" id="environment">
<h3>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All environment variables which used to be prefixed with <tt class="docutils literal"><span class="pre">BFG_</span></tt> are now
prefixed with <tt class="docutils literal"><span class="pre">PYRAMID_</span></tt> (e.g. <tt class="docutils literal"><span class="pre">BFG_DEBUG_NOTFOUND</span></tt> is now
<tt class="docutils literal"><span class="pre">PYRAMID_DEBUG_NOTFOUND</span></tt>)</li>
</ul>
</div>
<div class="section" id="id159">
<h3>Documentation<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added &quot;Debugging Route Matching&quot; section to the urldispatch narrative
documentation chapter.</li>
<li>Added reference to <tt class="docutils literal"><span class="pre">PYRAMID_DEBUG_ROUTEMATCH</span></tt> envvar and <tt class="docutils literal"><span class="pre">debug_routematch</span></tt>
config file setting to the Environment narrative docs chapter.</li>
<li>Changed &quot;Project&quot; chapter slightly to expand on use of <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt>.</li>
<li>Direct Jython users to Mako rather than Jinja2 in &quot;Install&quot; narrative
chapter.</li>
<li>Many changes to support terminological renaming of &quot;model&quot; to &quot;resource&quot;
and &quot;resource&quot; to &quot;asset&quot;.</li>
<li>Added an example of <tt class="docutils literal"><span class="pre">WebTest</span></tt> functional testing to the testing narrative
chapter.</li>
<li>Rearranged chapter ordering by popular demand (URL dispatch first, then
traversal).  Put hybrid chapter after views chapter.</li>
<li>Split off &quot;Renderers&quot; as its own chapter from &quot;Views&quot; chapter in narrative
documentation.</li>
</ul>
</div>
<div class="section" id="id160">
<h3>Paster Templates<a class="headerlink" href="#id160" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added <tt class="docutils literal"><span class="pre">debug_routematch</span> <span class="pre">=</span> <span class="pre">false</span></tt> to all paster templates.</li>
</ul>
</div>
<div class="section" id="id161">
<h3>Dependencies<a class="headerlink" href="#id161" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Depend on Venusian &gt;= 0.5 (for scanning conflict exception decoration).</li>
</ul>
</div>
</div>
<div class="section" id="a6-2010-12-15">
<h2>1.0a6 (2010-12-15)<a class="headerlink" href="#a6-2010-12-15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id162">
<h3>Bug Fixes<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>1.0a5 introduced a bug when <tt class="docutils literal"><span class="pre">pyramid.config.Configurator.scan</span></tt> was used
without a <tt class="docutils literal"><span class="pre">package</span></tt> argument (e.g. <tt class="docutils literal"><span class="pre">config.scan()</span></tt> as opposed to
<tt class="docutils literal"><span class="pre">config.scan('packagename')</span></tt>.  The symptoms were: lots of deprecation
warnings printed to the console about imports of deprecated Pyramid
functions and classes and non-detection of view callables decorated with
<tt class="docutils literal"><span class="pre">view_config</span></tt> decorators.  This has been fixed.</li>
<li>Tests now pass on Windows (no bugs found, but a few tests in the test suite
assumed UNIX path segments in filenames).</li>
</ul>
</div>
<div class="section" id="id163">
<h3>Documentation<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If you followed it to-the-letter, the ZODB+Traversal Wiki tutorial would
instruct you to run a test which would fail because the view callable
generated by the <tt class="docutils literal"><span class="pre">pyramid_zodb</span></tt> tutorial used a one-arg view callable,
but the test in the sample code used a two-arg call.</li>
<li>Updated ZODB+Traversal tutorial setup.py of all steps to match what's
generated by <tt class="docutils literal"><span class="pre">pyramid_zodb</span></tt>.</li>
<li>Fix reference to <tt class="docutils literal"><span class="pre">repoze.bfg.traversalwrapper</span></tt> in &quot;Models&quot; chapter (point
at <tt class="docutils literal"><span class="pre">pyramid_traversalwrapper</span></tt> instead).</li>
</ul>
</div>
</div>
<div class="section" id="a5-2010-12-14">
<h2>1.0a5 (2010-12-14)<a class="headerlink" href="#a5-2010-12-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id164">
<h3>Features<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">handler</span></tt> ZCML directive.  This directive does the same thing as
<tt class="docutils literal"><span class="pre">pyramid.configuration.add_handler</span></tt>.</li>
<li>A new module named <tt class="docutils literal"><span class="pre">pyramid.config</span></tt> was added.  It subsumes the duties of
the older <tt class="docutils literal"><span class="pre">pyramid.configuration</span></tt> module.</li>
<li>The new <tt class="docutils literal"><span class="pre">pyramid.config.Configurator`</span> <span class="pre">class</span> <span class="pre">has</span> <span class="pre">API</span> <span class="pre">methods</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">older</span>
<span class="pre">``pyramid.configuration.Configurator</span></tt> class did not: <tt class="docutils literal"><span class="pre">with_context</span></tt> (a
classmethod), <tt class="docutils literal"><span class="pre">include</span></tt>, <tt class="docutils literal"><span class="pre">action</span></tt>, and <tt class="docutils literal"><span class="pre">commit</span></tt>.  These methods exist
for imperative application extensibility purposes.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid.testing.setUp</span></tt> function now accepts an <tt class="docutils literal"><span class="pre">autocommit</span></tt>
keyword argument, which defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.  If it is passed <tt class="docutils literal"><span class="pre">False</span></tt>,
the Config object returned by <tt class="docutils literal"><span class="pre">setUp</span></tt> will be a non-autocommiting Config
object.</li>
<li>Add logging configuration to all paster templates.</li>
<li><tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt>, <tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt>, and <tt class="docutils literal"><span class="pre">pylons_sqla</span></tt> paster
templates now use idiomatic SQLAlchemy configuration in their respective
<tt class="docutils literal"><span class="pre">.ini</span></tt> files and Python code.</li>
<li><tt class="docutils literal"><span class="pre">pyramid.testing.DummyRequest</span></tt> now has a class variable,
<tt class="docutils literal"><span class="pre">query_string</span></tt>, which defaults to the empty string.</li>
<li>Add support for json on GAE by catching NotImplementedError and importing
simplejson from django.utils.</li>
<li>The Mako renderer now accepts a resource specification for
<tt class="docutils literal"><span class="pre">mako.module_directory</span></tt>.</li>
<li>New boolean Mako settings variable <tt class="docutils literal"><span class="pre">mako.strict_undefined</span></tt>.  See <a class="reference external" href="http://www.makotemplates.org/docs/runtime.html#context-variables">Mako
Context Variables</a> for
its meaning.</li>
</ul>
</div>
<div class="section" id="id165">
<h3>Dependencies<a class="headerlink" href="#id165" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Depend on Mako 0.3.6+ (we now require the <tt class="docutils literal"><span class="pre">strict_undefined</span></tt> feature).</li>
</ul>
</div>
<div class="section" id="id166">
<h3>Bug Fixes<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When creating a Configurator from within a <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">pshell</span></tt> session, you
were required to pass a <tt class="docutils literal"><span class="pre">package</span></tt> argument although <tt class="docutils literal"><span class="pre">package</span></tt> is not
actually required.  If you didn't pass <tt class="docutils literal"><span class="pre">package</span></tt>, you would receive an
error something like <tt class="docutils literal"><span class="pre">KeyError:</span> <span class="pre">'__name__'</span></tt> emanating from the
<tt class="docutils literal"><span class="pre">pyramid.path.caller_module</span></tt> function.  This has now been fixed.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> paster template's unit tests failed
(<tt class="docutils literal"><span class="pre">AssertionError:</span> <span class="pre">'SomeProject'</span> <span class="pre">!=</span> <span class="pre">'someproject'</span></tt>).  This is fixed.</li>
<li>Make default renderer work (renderer factory registered with no name, which
is active for every view unless the view names a specific renderer).</li>
<li>The Mako renderer did not properly turn the <tt class="docutils literal"><span class="pre">mako.imports</span></tt>,
<tt class="docutils literal"><span class="pre">mako.default_filters</span></tt>, and <tt class="docutils literal"><span class="pre">mako.imports</span></tt> settings into lists.</li>
<li>The Mako renderer did not properly convert the <tt class="docutils literal"><span class="pre">mako.error_handler</span></tt>
setting from a dotted name to a callable.</li>
</ul>
</div>
<div class="section" id="id167">
<h3>Documentation<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Merged many wording, readability, and correctness changes to narrative
documentation chapters from <a class="reference external" href="https://github.com/caseman/pyramid">https://github.com/caseman/pyramid</a> (up to and
including &quot;Models&quot; narrative chapter).</li>
<li>&quot;Sample Applications&quot; section of docs changed to note existence of Cluegun,
Shootout and Virginia sample applications, ported from their repoze.bfg
origin packages.</li>
<li>SQLAlchemy+URLDispatch tutorial updated to integrate changes to
<tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> template.</li>
<li>Add <tt class="docutils literal"><span class="pre">pyramid.interfaces.ITemplateRenderer</span></tt> interface to Interfaces API
chapter (has <tt class="docutils literal"><span class="pre">implementation()</span></tt> method, required to be used when getting
at Chameleon macros).</li>
<li>Add a &quot;Modifying Package Structure&quot; section to the project narrative
documentation chapter (explain turning a module into a package).</li>
<li>Documentation was added for the new <tt class="docutils literal"><span class="pre">handler</span></tt> ZCML directive in the ZCML
section.</li>
</ul>
</div>
<div class="section" id="id168">
<h3>Deprecations<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid.configuration.Configurator</span></tt> is now deprecated.  Use
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator</span></tt>, passing its constructor
<tt class="docutils literal"><span class="pre">autocommit=True</span></tt> instead.  The <tt class="docutils literal"><span class="pre">pyramid.configuration.Configurator</span></tt>
alias will live for a long time, as every application uses it, but its
import now issues a deprecation warning.  The
<tt class="docutils literal"><span class="pre">pyramid.config.Configurator</span></tt> class has the same API as
<tt class="docutils literal"><span class="pre">pyramid.configuration.Configurator</span></tt> class, which it means to replace,
except by default it is a <em>non-autocommitting</em> configurator. The
now-deprecated <tt class="docutils literal"><span class="pre">pyramid.configuration.Configurator</span></tt> will autocommit every
time a configuration method is called.</p>
<p>The <tt class="docutils literal"><span class="pre">pyramid.configuration</span></tt> module remains, but it is deprecated.  Use
<tt class="docutils literal"><span class="pre">pyramid.config</span></tt> instead.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a4-2010-11-21">
<h2>1.0a4 (2010-11-21)<a class="headerlink" href="#a4-2010-11-21" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id169">
<h3>Features<a class="headerlink" href="#id169" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>URL Dispatch now allows for replacement markers to be located anywhere
in the pattern, instead of immediately following a <tt class="docutils literal"><span class="pre">/</span></tt>.</li>
<li>URL Dispatch now uses the form <tt class="docutils literal"><span class="pre">{marker}</span></tt> to denote a replace marker in
the route pattern instead of <tt class="docutils literal"><span class="pre">:marker</span></tt>. The old colon-style marker syntax
is still accepted for backwards compatibility. The new format allows a
regular expression for that marker location to be used instead of the
default <tt class="docutils literal"><span class="pre">[^/]+</span></tt>, for example <tt class="docutils literal"><span class="pre">{marker:\d+}</span></tt> is now valid to require the
marker to be digits.</li>
<li>Add a <tt class="docutils literal"><span class="pre">pyramid.url.route_path</span></tt> API, allowing folks to generate relative
URLs.  Calling <tt class="docutils literal"><span class="pre">route_path</span></tt> is the same as calling
<tt class="docutils literal"><span class="pre">pyramid.url.route_url</span></tt> with the argument <tt class="docutils literal"><span class="pre">_app_url</span></tt> equal to the empty
string.</li>
<li>Add a <tt class="docutils literal"><span class="pre">pyramid.request.Request.route_path</span></tt> API.  This is a convenience
method of the request which calls <tt class="docutils literal"><span class="pre">pyramid.url.route_url</span></tt>.</li>
<li>Make test suite pass on Jython (requires PasteScript trunk, presumably to
be 1.7.4).</li>
<li>Make test suite pass on PyPy (Chameleon doesn't work).</li>
<li>Surrounding application configuration with <tt class="docutils literal"><span class="pre">config.begin()</span></tt> and
<tt class="docutils literal"><span class="pre">config.end()</span></tt> is no longer necessary.  All paster templates have been
changed to no longer call these functions.</li>
<li>Fix configurator to not convert <tt class="docutils literal"><span class="pre">ImportError</span></tt> to <tt class="docutils literal"><span class="pre">ConfigurationError</span></tt>
if the import that failed was unrelated to the import requested via a
dotted name when resolving dotted names (such as view dotted names).</li>
</ul>
</div>
<div class="section" id="id170">
<h3>Documentation<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>SQLAlchemy+URLDispatch and ZODB+Traversal tutorials have been updated to
not call <tt class="docutils literal"><span class="pre">config.begin()</span></tt> or <tt class="docutils literal"><span class="pre">config.end()</span></tt>.</li>
</ul>
</div>
<div class="section" id="id171">
<h3>Bug Fixes<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add deprecation warnings to import of <tt class="docutils literal"><span class="pre">pyramid.chameleon_text</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.chameleon_zpt</span></tt> of <tt class="docutils literal"><span class="pre">get_renderer</span></tt>, <tt class="docutils literal"><span class="pre">get_template</span></tt>,
<tt class="docutils literal"><span class="pre">render_template</span></tt>, and <tt class="docutils literal"><span class="pre">render_template_to_response</span></tt>.</li>
<li>Add deprecation warning for import of <tt class="docutils literal"><span class="pre">pyramid.zcml.zcml_configure</span></tt> and
<tt class="docutils literal"><span class="pre">pyramid.zcml.file_configure</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">pyramid_alchemy</span></tt> paster template had a typo, preventing an import
from working.</li>
<li>Fix apparent failures when calling <tt class="docutils literal"><span class="pre">pyramid.traversal.find_model(root,</span>
<span class="pre">path)</span></tt> or <tt class="docutils literal"><span class="pre">pyramid.traversal.traverse(path)</span></tt> when <tt class="docutils literal"><span class="pre">path</span></tt> is
(erroneously) a Unicode object. The user is meant to pass these APIs a
string object, never a Unicode object.  In practice, however, users indeed
pass Unicode.  Because the string that is passed must be ASCII encodeable,
now, if they pass a Unicode object, its data is eagerly converted to an
ASCII string rather than being passed along to downstream code as a
convenience to the user and to prevent puzzling second-order failures from
cropping up (all failures will occur within <tt class="docutils literal"><span class="pre">pyramid.traversal.traverse</span></tt>
rather than later down the line as the result of calling e.g.
<tt class="docutils literal"><span class="pre">traversal_path</span></tt>).</li>
</ul>
</div>
<div class="section" id="id172">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id172" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">pyramid.testing.zcml_configure</span></tt> API has been removed.  It had been
advertised as removed since repoze.bfg 1.2a1, but hadn't actually been.</li>
</ul>
</div>
<div class="section" id="id173">
<h3>Deprecations<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">pyramid.settings.get_settings</span></tt> API is now deprecated.  Use
<tt class="docutils literal"><span class="pre">pyramid.threadlocals.get_current_registry().settings</span></tt> instead or use the
<tt class="docutils literal"><span class="pre">settings</span></tt> attribute of the registry available from the request
(<tt class="docutils literal"><span class="pre">request.registry.settings</span></tt>).</li>
</ul>
</div>
<div class="section" id="id174">
<h3>Documentation<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Removed <tt class="docutils literal"><span class="pre">zodbsessions</span></tt> tutorial chapter.  It's still useful, but we now
have a SessionFactory abstraction which competes with it, and maintaining
documentation on both ways to do it is a distraction.</li>
</ul>
</div>
<div class="section" id="id175">
<h3>Internal<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Replace Twill with WebTest in internal integration tests (avoid deprecation
warnings generated by Twill).</li>
</ul>
</div>
</div>
<div class="section" id="a3-2010-11-16">
<h2>1.0a3 (2010-11-16)<a class="headerlink" href="#a3-2010-11-16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id176">
<h3>Features<a class="headerlink" href="#id176" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added Mako TemplateLookup settings for <tt class="docutils literal"><span class="pre">mako.error_handler</span></tt>,
<tt class="docutils literal"><span class="pre">mako.default_filters</span></tt>, and <tt class="docutils literal"><span class="pre">mako.imports</span></tt>.</li>
<li>Normalized all paster templates: each now uses the name <tt class="docutils literal"><span class="pre">main</span></tt> to
represent the function that returns a WSGI application, each now uses
WebError, each now has roughly the same shape of development.ini style.</li>
<li>Added class vars <tt class="docutils literal"><span class="pre">matchdict</span></tt> and <tt class="docutils literal"><span class="pre">matched_route</span></tt> to
<tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt>.  Each is set to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li>New API method: <tt class="docutils literal"><span class="pre">pyramid.settings.asbool</span></tt>.</li>
<li>New API methods for <tt class="docutils literal"><span class="pre">pyramid.request.Request</span></tt>: <tt class="docutils literal"><span class="pre">model_url</span></tt>,
<tt class="docutils literal"><span class="pre">route_url</span></tt>, and <tt class="docutils literal"><span class="pre">static_url</span></tt>.  These are simple passthroughs for their
respective functions in <tt class="docutils literal"><span class="pre">pyramid.url</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">settings</span></tt> object which used to be available only when
<tt class="docutils literal"><span class="pre">request.settings.get_settings</span></tt> was called is now available as
<tt class="docutils literal"><span class="pre">registry.settings</span></tt> (e.g. <tt class="docutils literal"><span class="pre">request.registry.settings</span></tt> in view code).</li>
</ul>
</div>
<div class="section" id="id177">
<h3>Bug Fixes<a class="headerlink" href="#id177" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The pylons_* paster templates erroneously used the <tt class="docutils literal"><span class="pre">{squiggly}</span></tt> routing
syntax as the pattern supplied to <tt class="docutils literal"><span class="pre">add_route</span></tt>.  This style of routing is
not supported.  They were replaced with <tt class="docutils literal"><span class="pre">:colon</span></tt> style route patterns.</li>
<li>The pylons_* paster template used the same string
(<tt class="docutils literal"><span class="pre">your_app_secret_string</span></tt>) for the <tt class="docutils literal"><span class="pre">session.secret</span></tt> setting in the
generated <tt class="docutils literal"><span class="pre">development.ini</span></tt>.  This was a security risk if left unchanged
in a project that used one of the templates to produce production
applications.  It now uses a randomly generated string.</li>
</ul>
</div>
<div class="section" id="id178">
<h3>Documentation<a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>ZODB+traversal wiki (<tt class="docutils literal"><span class="pre">wiki</span></tt>) tutorial updated due to changes to
<tt class="docutils literal"><span class="pre">pyramid_zodb</span></tt> paster template.</li>
<li>SQLAlchemy+urldispach wiki (<tt class="docutils literal"><span class="pre">wiki2</span></tt>) tutorial updated due to changes to
<tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> paster template.</li>
<li>Documented the <tt class="docutils literal"><span class="pre">matchdict</span></tt> and <tt class="docutils literal"><span class="pre">matched_route</span></tt> attributes of the
request object in the Request API documentation.</li>
</ul>
</div>
<div class="section" id="id179">
<h3>Deprecations<a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Obtaining the <tt class="docutils literal"><span class="pre">settings</span></tt> object via
<tt class="docutils literal"><span class="pre">registry.{get|query}Utility(ISettings)</span></tt> is now deprecated.  Instead,
obtain the <tt class="docutils literal"><span class="pre">settings</span></tt> object via the <tt class="docutils literal"><span class="pre">registry.settings</span></tt> attribute.  A
backwards compatibility shim was added to the registry object to register
the settings object as an ISettings utility when <tt class="docutils literal"><span class="pre">setattr(registry,</span>
<span class="pre">'settings',</span> <span class="pre">foo)</span></tt> is called, but it will be removed in a later release.</li>
<li>Obtaining the <tt class="docutils literal"><span class="pre">settings</span></tt> object via <tt class="docutils literal"><span class="pre">pyramid.settings.get_settings</span></tt> is
now deprecated.  Obtain it as the <tt class="docutils literal"><span class="pre">settings</span></tt> attribute of the registry
now (obtain the registry via <tt class="docutils literal"><span class="pre">pyramid.threadlocal.get_registry</span></tt> or as
<tt class="docutils literal"><span class="pre">request.registry</span></tt>).</li>
</ul>
</div>
<div class="section" id="id180">
<h3>Behavior Differences<a class="headerlink" href="#id180" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Internal: ZCML directives no longer call get_current_registry() if there's
a <tt class="docutils literal"><span class="pre">registry</span></tt> attribute on the ZCML context (kill off use of
threadlocals).</li>
<li>Internal: Chameleon template renderers now accept two arguments: <tt class="docutils literal"><span class="pre">path</span></tt>
and <tt class="docutils literal"><span class="pre">lookup</span></tt>.  <tt class="docutils literal"><span class="pre">Lookup</span></tt> will be an instance of a lookup class which
supplies (late-bound) arguments for debug, reload, and translate.  Any
third-party renderers which use (the non-API) function
<tt class="docutils literal"><span class="pre">pyramid.renderers.template_renderer_factory</span></tt> will need to adjust their
implementations to obey the new callback argument list.  This change was to
kill off inappropriate use of threadlocals.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2010-11-09">
<h2>1.0a2 (2010-11-09)<a class="headerlink" href="#a2-2010-11-09" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id181">
<h3>Documentation<a class="headerlink" href="#id181" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All references to events by interface
(e.g. <tt class="docutils literal"><span class="pre">pyramid.interfaces.INewRequest</span></tt>) have been changed to reference
their concrete classes (e.g. <tt class="docutils literal"><span class="pre">pyramid.events.NewRequest</span></tt>) in
documentation about making subscriptions.</li>
<li>All references to Pyramid-the-application were changed from mod-<cite>pyramid</cite>
to app-<cite>Pyramid</cite>.  A custom role setting was added to <tt class="docutils literal"><span class="pre">docs/conf.py</span></tt> to
allow for this.  (internal)</li>
</ul>
</div>
</div>
<div class="section" id="a1-2010-11-05">
<h2>1.0a1 (2010-11-05)<a class="headerlink" href="#a1-2010-11-05" title="Permalink to this headline">¶</a></h2>
<div class="section" id="features-delta-from-bfg-1-3">
<h3>Features (delta from BFG 1.3)<a class="headerlink" href="#features-delta-from-bfg-1-3" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Mako templating renderer supports resource specification format for
template lookups and within Mako templates. Absolute filenames must
be used in Pyramid to avoid this lookup process.</p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">pyramid.httpexceptions</span></tt> module, which is a facade for the
<tt class="docutils literal"><span class="pre">webob.exc</span></tt> module.</p>
</li>
<li><p class="first">Direct built-in support for the Mako templating language.</p>
</li>
<li><p class="first">A new configurator method exists: <tt class="docutils literal"><span class="pre">add_handler</span></tt>.  This method adds
a Pylons-style &quot;view handler&quot; (such a thing used to be called a
&quot;controller&quot; in Pylons 1.0).</p>
</li>
<li><p class="first">New argument to configurator: <tt class="docutils literal"><span class="pre">session_factory</span></tt>.</p>
</li>
<li><p class="first">New method on configurator: <tt class="docutils literal"><span class="pre">set_session_factory</span></tt></p>
</li>
<li><p class="first">Using <tt class="docutils literal"><span class="pre">request.session</span></tt> now returns a (dictionary-like) session
object if a session factory has been configured.</p>
</li>
<li><p class="first">The request now has a new attribute: <tt class="docutils literal"><span class="pre">tmpl_context</span></tt> for benefit of
Pylons users.</p>
</li>
<li><p class="first">The decorator previously known as <tt class="docutils literal"><span class="pre">pyramid.view.bfg_view</span></tt> is now
known most formally as <tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> in docs and
paster templates.  An import of <tt class="docutils literal"><span class="pre">pyramid.view.bfg_view</span></tt>, however,
will continue to work &quot;forever&quot;.</p>
</li>
<li><p class="first">New API methods in <tt class="docutils literal"><span class="pre">pyramid.session</span></tt>: <tt class="docutils literal"><span class="pre">signed_serialize</span></tt> and
<tt class="docutils literal"><span class="pre">signed_deserialize</span></tt>.</p>
</li>
<li><p class="first">New interface: <tt class="docutils literal"><span class="pre">pyramid.interfaces.IRendererInfo</span></tt>.  An object of this type
is passed to renderer factory constructors (see &quot;Backwards
Incompatibilities&quot;).</p>
</li>
<li><p class="first">New event type: <tt class="docutils literal"><span class="pre">pyramid.interfaces.IBeforeRender</span></tt>.  An object of this type
is sent as an event before a renderer is invoked (but after the
application-level renderer globals factory added via
<tt class="docutils literal"><span class="pre">pyramid.configurator.configuration.set_renderer_globals_factory</span></tt>, if any,
has injected its own keys).  Applications may now subscribe to the
<tt class="docutils literal"><span class="pre">IBeforeRender</span></tt> event type in order to introspect the and modify the set of
renderer globals before they are passed to a renderer.  The event object
iself has a dictionary-like interface that can be used for this purpose.  For
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">repoze.events</span> <span class="kn">import</span> <span class="n">subscriber</span>
<span class="kn">from</span> <span class="nn">pyramid.interfaces</span> <span class="kn">import</span> <span class="n">IRendererGlobalsEvent</span>

<span class="nd">@subscriber</span><span class="p">(</span><span class="n">IRendererGlobalsEvent</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add_global</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">event</span><span class="p">[</span><span class="s">&#39;mykey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span>
</pre></div>
</div>
<p>If a subscriber attempts to add a key that already exist in the renderer
globals dictionary, a <tt class="docutils literal"><span class="pre">KeyError</span></tt> is raised.  This limitation is due to the
fact that subscribers cannot be ordered relative to each other.  The set of
keys added to the renderer globals dictionary by all subscribers and
app-level globals factories must be unique.</p>
</li>
<li><p class="first">New class: <tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt>.  This is a pure facade for
<tt class="docutils literal"><span class="pre">webob.Response</span></tt> (old code need not change to use this facade, it's
existence is mostly for vanity and documentation-generation purposes).</p>
</li>
<li><p class="first">All preexisting paster templates (except <tt class="docutils literal"><span class="pre">zodb</span></tt>) now use &quot;imperative&quot;
configuration (<tt class="docutils literal"><span class="pre">starter</span></tt>, <tt class="docutils literal"><span class="pre">routesalchemy</span></tt>, <tt class="docutils literal"><span class="pre">alchemy</span></tt>).</p>
</li>
<li><p class="first">A new paster template named <tt class="docutils literal"><span class="pre">pyramid_starter_zcml</span></tt> exists, which uses
declarative configuration.</p>
</li>
</ul>
</div>
<div class="section" id="documentation-delta-from-bfg-1-3">
<h3>Documentation (delta from BFG 1.3)<a class="headerlink" href="#documentation-delta-from-bfg-1-3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a <tt class="docutils literal"><span class="pre">pyramid.httpexceptions</span></tt> API documentation chapter.</li>
<li>Added a <tt class="docutils literal"><span class="pre">pyramid.session</span></tt> API documentation chapter.</li>
<li>Added a <tt class="docutils literal"><span class="pre">Session</span> <span class="pre">Objects</span></tt> narrative documentation chapter.</li>
<li>Added an API chapter for the <tt class="docutils literal"><span class="pre">pyramid.personality</span></tt> module.</li>
<li>Added an API chapter for the <tt class="docutils literal"><span class="pre">pyramid.response</span></tt> module.</li>
<li>All documentation which previously referred to <tt class="docutils literal"><span class="pre">webob.Response</span></tt> now uses
<tt class="docutils literal"><span class="pre">pyramid.response.Response</span></tt> instead.</li>
<li>The documentation has been overhauled to use imperative configuration,
moving declarative configuration (ZCML) explanations to a separate
narrative chapter <tt class="docutils literal"><span class="pre">declarative.rst</span></tt>.</li>
<li>The ZODB Wiki tutorial was updated to take into account changes to the
<tt class="docutils literal"><span class="pre">pyramid_zodb</span></tt> paster template.</li>
<li>The SQL Wiki tutorial was updated to take into account changes to the
<tt class="docutils literal"><span class="pre">pyramid_routesalchemy</span></tt> paster template.</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilities-with-bfg-1-3">
<h3>Backwards Incompatibilities (with BFG 1.3)<a class="headerlink" href="#backwards-incompatibilities-with-bfg-1-3" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">There is no longer an <tt class="docutils literal"><span class="pre">IDebugLogger</span></tt> registered as a named utility
with the name <tt class="docutils literal"><span class="pre">repoze.bfg.debug</span></tt>.</p>
</li>
<li><p class="first">The logger which used to have the name of <tt class="docutils literal"><span class="pre">repoze.bfg.debug</span></tt> now
has the name <tt class="docutils literal"><span class="pre">pyramid.debug</span></tt>.</p>
</li>
<li><p class="first">The deprecated API <tt class="docutils literal"><span class="pre">pyramid.testing.registerViewPermission</span></tt>
has been removed.</p>
</li>
<li><p class="first">The deprecated API named <tt class="docutils literal"><span class="pre">pyramid.testing.registerRoutesMapper</span></tt>
has been removed.</p>
</li>
<li><p class="first">The deprecated API named <tt class="docutils literal"><span class="pre">pyramid.request.get_request</span></tt> was removed.</p>
</li>
<li><p class="first">The deprecated API named <tt class="docutils literal"><span class="pre">pyramid.security.Unauthorized</span></tt> was
removed.</p>
</li>
<li><p class="first">The deprecated API named <tt class="docutils literal"><span class="pre">pyramid.view.view_execution_permitted</span></tt>
was removed.</p>
</li>
<li><p class="first">The deprecated API named <tt class="docutils literal"><span class="pre">pyramid.view.NotFound</span></tt> was removed.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">bfgshell</span></tt> paster command is now named <tt class="docutils literal"><span class="pre">pshell</span></tt>.</p>
</li>
<li><p class="first">The Venusian &quot;category&quot; for all built-in Venusian decorators
(e.g. <tt class="docutils literal"><span class="pre">subscriber</span></tt> and <tt class="docutils literal"><span class="pre">view_config</span></tt>/<tt class="docutils literal"><span class="pre">bfg_view</span></tt>) is now
<tt class="docutils literal"><span class="pre">pyramid</span></tt> instead of <tt class="docutils literal"><span class="pre">bfg</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pyramid.renderers.rendered_response</span></tt> function removed; use
<tt class="docutils literal"><span class="pre">render_pyramid.renderers.render_to_response</span></tt> instead.</p>
</li>
<li><p class="first">Renderer factories now accept a <em>renderer info object</em> rather than an
absolute resource specification or an absolute path.  The object has the
following attributes: <tt class="docutils literal"><span class="pre">name</span></tt> (the <tt class="docutils literal"><span class="pre">renderer=</span></tt> value), <tt class="docutils literal"><span class="pre">package</span></tt> (the
'current package' when the renderer configuration statement was found),
<tt class="docutils literal"><span class="pre">type</span></tt>: the renderer type, <tt class="docutils literal"><span class="pre">registry</span></tt>: the current registry, and
<tt class="docutils literal"><span class="pre">settings</span></tt>: the deployment settings dictionary.</p>
<p>Third-party <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> renderer implementations that must be ported to
Pyramid will need to account for this.</p>
<p>This change was made primarily to support more flexible Mako template
rendering.</p>
</li>
<li><p class="first">The presence of the key <tt class="docutils literal"><span class="pre">repoze.bfg.message</span></tt> in the WSGI environment when
an exception occurs is now deprecated.  Instead, code which relies on this
environ value should use the <tt class="docutils literal"><span class="pre">exception</span></tt> attribute of the request
(e.g. <tt class="docutils literal"><span class="pre">request.exception[0]</span></tt>) to retrieve the message.</p>
</li>
<li><p class="first">The values <tt class="docutils literal"><span class="pre">bfg_localizer</span></tt> and <tt class="docutils literal"><span class="pre">bfg_locale_name</span></tt> kept on the request
during internationalization for caching purposes were never APIs.  These
however have changed to <tt class="docutils literal"><span class="pre">localizer</span></tt> and <tt class="docutils literal"><span class="pre">locale_name</span></tt>, respectively.</p>
</li>
<li><p class="first">The default <tt class="docutils literal"><span class="pre">cookie_name</span></tt> value of the <tt class="docutils literal"><span class="pre">authtktauthenticationpolicy</span></tt> ZCML
now defaults to <tt class="docutils literal"><span class="pre">auth_tkt</span></tt> (it used to default to <tt class="docutils literal"><span class="pre">repoze.bfg.auth_tkt</span></tt>).</p>
</li>
<li><p class="first">The default <tt class="docutils literal"><span class="pre">cookie_name</span></tt> value of the
<tt class="docutils literal"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></tt> constructor now
defaults to <tt class="docutils literal"><span class="pre">auth_tkt</span></tt> (it used to default to <tt class="docutils literal"><span class="pre">repoze.bfg.auth_tkt</span></tt>).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">request_type</span></tt> argument to the <tt class="docutils literal"><span class="pre">view</span></tt> ZCML directive, the
<tt class="docutils literal"><span class="pre">pyramid.configuration.Configurator.add_view</span></tt> method, or the
<tt class="docutils literal"><span class="pre">pyramid.view.view_config</span></tt> decorator (nee <tt class="docutils literal"><span class="pre">bfg_view</span></tt>) is no longer
permitted to be one of the strings <tt class="docutils literal"><span class="pre">GET</span></tt>, <tt class="docutils literal"><span class="pre">HEAD</span></tt>, <tt class="docutils literal"><span class="pre">PUT</span></tt>, <tt class="docutils literal"><span class="pre">POST</span></tt> or
<tt class="docutils literal"><span class="pre">DELETE</span></tt>, and now must always be an interface.  Accepting the
method-strings as <tt class="docutils literal"><span class="pre">request_type</span></tt> was a backwards compatibility strategy
servicing repoze.bfg 1.0 applications.  Use the <tt class="docutils literal"><span class="pre">request_method</span></tt>
parameter instead to specify that a view a string request-method predicate.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="repoze-bfg-change-history-previous-name-for-pyramid">
<h1><tt class="xref py py-mod docutils literal"><span class="pre">repoze.bfg</span></tt> Change History (previous name for Pyramid)<a class="headerlink" href="#repoze-bfg-change-history-previous-name-for-pyramid" title="Permalink to this headline">¶</a></h1>
<div class="section" id="b1-2010-10-25">
<h2>1.3b1 (2010-10-25)<a class="headerlink" href="#b1-2010-10-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id182">
<h3>Features<a class="headerlink" href="#id182" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">paster</span></tt> template named <tt class="docutils literal"><span class="pre">bfg_routesalchemy</span></tt> has been updated
to use SQLAlchemy declarative syntax.  Thanks to Ergo^.</li>
</ul>
</div>
<div class="section" id="id183">
<h3>Bug Fixes<a class="headerlink" href="#id183" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When a renderer factory could not be found, a misleading error
message was raised if the renderer name was not a string.</li>
</ul>
</div>
<div class="section" id="id184">
<h3>Documentation<a class="headerlink" href="#id184" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The &quot;&quot;bfgwiki2&quot; (SQLAlchemy + url dispatch) tutorial has been
updated slightly.  In particular, the source packages no longer
attempt to use a private index, and the recommended Python version
is now 2.6.  It was also updated to take into account the changes to
the <tt class="docutils literal"><span class="pre">bfg_routesalchemy</span></tt> template used to set up an environment.</li>
<li>The &quot;bfgwiki&quot; (ZODB + traversal) tutorial has been updated slightly.
In particular, the source packages no longer attempt to use a
private index, and the recommended Python version is now 2.6.</li>
</ul>
</div>
</div>
<div class="section" id="a15-2010-09-30">
<h2>1.3a15 (2010-09-30)<a class="headerlink" href="#a15-2010-09-30" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id185">
<h3>Features<a class="headerlink" href="#id185" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.traversal_path</span></tt> API now eagerly attempts
to encode a Unicode <tt class="docutils literal"><span class="pre">path</span></tt> into ASCII before attempting to split
it and decode its segments.  This is for convenience, effectively to
allow a (stored-as-Unicode-in-a-database, or
retrieved-as-Unicode-from-a-request-parameter) Unicode path to be
passed to <tt class="docutils literal"><span class="pre">find_model</span></tt>, which eventually internally uses the
<tt class="docutils literal"><span class="pre">traversal_path</span></tt> function under the hood.  In version 1.2 and
prior, if the <tt class="docutils literal"><span class="pre">path</span></tt> was Unicode, that Unicode was split on
slashes and each resulting segment value was Unicode.  An
inappropriate call to the <tt class="docutils literal"><span class="pre">decode()</span></tt> method of a resulting Unicode
path segment could cause a <tt class="docutils literal"><span class="pre">UnicodeDecodeError</span></tt> to occur even if
the Unicode representation of the path contained no 'high order'
characters (it effectively did a &quot;double decode&quot;).  By converting
the Unicode path argument to ASCII before we attempt to decode and
split, genuine errors will occur in a more obvious place while also
allowing us to handle (for convenience) the case that it's a Unicode
representation formed entirely from ASCII-compatible characters.</li>
</ul>
</div>
</div>
<div class="section" id="a14-2010-09-14">
<h2>1.3a14 (2010-09-14)<a class="headerlink" href="#a14-2010-09-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id186">
<h3>Bug Fixes<a class="headerlink" href="#id186" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If an exception view was registered through the legacy
<tt class="docutils literal"><span class="pre">set_notfound_view</span></tt> or <tt class="docutils literal"><span class="pre">set_forbidden_view</span></tt> APIs, the context
sent to the view was incorrect (could be <tt class="docutils literal"><span class="pre">None</span></tt> inappropriately).</li>
</ul>
</div>
<div class="section" id="id187">
<h3>Features<a class="headerlink" href="#id187" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Compatibility with WebOb 1.0.</li>
</ul>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Now requires WebOb &gt;= 1.0.</li>
</ul>
</div>
<div class="section" id="id188">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id188" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Due to changes introduced WebOb 1.0, the
<tt class="docutils literal"><span class="pre">repoze.bfg.request.make_request_ascii</span></tt> event subscriber no longer
works, so it has been removed.  This subscriber was meant to be used
in a deployment so that code written before BFG 0.7.0 could run
unchanged.  At this point, such code will need to be rewritten to
expect Unicode from <tt class="docutils literal"><span class="pre">request.GET</span></tt>, <tt class="docutils literal"><span class="pre">request.POST</span></tt> and
<tt class="docutils literal"><span class="pre">request.params</span></tt> or it will need to be changed to use
<tt class="docutils literal"><span class="pre">request.str_POST</span></tt>, <tt class="docutils literal"><span class="pre">request.str_GET</span></tt> and/or
<tt class="docutils literal"><span class="pre">request.str_params</span></tt> instead of the non-<tt class="docutils literal"><span class="pre">str</span></tt> versions of same,
as the non-<tt class="docutils literal"><span class="pre">str</span></tt> versions of the same APIs always now perform
decoding to Unicode.</li>
</ul>
</div>
<div class="section" id="errata">
<h3>Errata<a class="headerlink" href="#errata" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A prior changelog entry asserted that the <tt class="docutils literal"><span class="pre">INewResponse</span></tt> event was
not sent to listeners if the response was not &quot;valid&quot; (if a view or
renderer returned a response object that did not have a
status/headers/app_iter).  This is not true in this release, nor was
it true in 1.3a13.</li>
</ul>
</div>
</div>
<div class="section" id="a13-2010-09-14">
<h2>1.3a13 (2010-09-14)<a class="headerlink" href="#a13-2010-09-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id189">
<h3>Bug Fixes<a class="headerlink" href="#id189" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">traverse</span></tt> route predicate could not successfully generate a
traversal path.</li>
</ul>
</div>
<div class="section" id="id190">
<h3>Features<a class="headerlink" href="#id190" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In support of making it easier to configure applications which are
&quot;secure by default&quot;, a default permission feature was added.  If
supplied, the default permission is used as the permission string to
all view registrations which don't otherwise name a permission.
These APIs are in support of that:<ul>
<li>A new constructor argument was added to the Configurator:
<tt class="docutils literal"><span class="pre">default_permission</span></tt>.</li>
<li>A new method was added to the Configurator:
<tt class="docutils literal"><span class="pre">set_default_permission</span></tt>.</li>
<li>A new ZCML directive was added: <tt class="docutils literal"><span class="pre">default_permission</span></tt>.</li>
</ul>
</li>
<li>Add a new request API: <tt class="docutils literal"><span class="pre">request.add_finished_callback</span></tt>.  Finished
callbacks are called by the router unconditionally near the very end
of request processing.  See the &quot;Using Finished Callbacks&quot; section
of the &quot;Hooks&quot; narrative chapter of the documentation for more
information.</li>
<li>A <tt class="docutils literal"><span class="pre">request.matched_route</span></tt> attribute is now added to the request
when a route has matched.  Its value is the &quot;route&quot; object that
matched (see the <tt class="docutils literal"><span class="pre">IRoute</span></tt> interface within
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces</span></tt> API documentation for the API of a route
object).</li>
<li>The <tt class="docutils literal"><span class="pre">exception</span></tt> attribute of the request is now set slightly
earlier and in a slightly different set of scenarios, for benefit of
&quot;finished callbacks&quot; and &quot;response callbacks&quot;.  In previous
versions, the <tt class="docutils literal"><span class="pre">exception</span></tt> attribute of the request was not set at
all if an exception view was not found.  In this version, the
<tt class="docutils literal"><span class="pre">request.exception</span></tt> attribute is set immediately when an exception
is caught by the router, even if an exception view could not be
found.</li>
<li>The <tt class="docutils literal"><span class="pre">add_route</span></tt> method of a Configurator now accepts a
<tt class="docutils literal"><span class="pre">pregenerator</span></tt> argument.  The pregenerator for the resulting route
is called by <tt class="docutils literal"><span class="pre">route_url</span></tt> in order to adjust the set of arguments
passed to it by the user for special purposes, such as Pylons
'subdomain' support.  It will influence the URL returned by
<tt class="docutils literal"><span class="pre">route_url</span></tt>.  See the <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IRoutePregenerator</span></tt>
interface for more information.</li>
</ul>
</div>
<div class="section" id="id191">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id191" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The router no longer sets the value <tt class="docutils literal"><span class="pre">wsgiorg.routing_args</span></tt> into
the environ when a route matches. The value used to be something
like <tt class="docutils literal"><span class="pre">((),</span> <span class="pre">matchdict)</span></tt>.  This functionality was only ever
obliquely referred to in change logs; it was never documented as an
API.</li>
<li>The <tt class="docutils literal"><span class="pre">exception</span></tt> attribute of the request now defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.
In prior versions, the <tt class="docutils literal"><span class="pre">request.exception</span></tt> attribute did not exist
if an exception was not raised by user code during request
processing; it only began existence once an exception view was
found.</li>
</ul>
</div>
<div class="section" id="id192">
<h3>Deprecations<a class="headerlink" href="#id192" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IWSGIApplicationCreatedEvent</span></tt> event
interface was renamed to
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IApplicationCreated</span></tt>.  Likewise, the
<tt class="docutils literal"><span class="pre">repoze.bfg.events.WSGIApplicationCreatedEvent</span></tt> class was renamed
to <tt class="docutils literal"><span class="pre">repoze.bfg.events.ApplicationCreated</span></tt>.  The older aliases will
continue to work indefinitely.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IAfterTraversal</span></tt> event interface was
renamed to <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IContextFound</span></tt>.  Likewise, the
<tt class="docutils literal"><span class="pre">repoze.bfg.events.AfterTraversal</span></tt> class was renamed to
<tt class="docutils literal"><span class="pre">repoze.bfg.events.ContextFound</span></tt>.  The older aliases will continue
to work indefinitely.</li>
<li>References to the WSGI environment values <tt class="docutils literal"><span class="pre">bfg.routes.matchdict</span></tt>
and <tt class="docutils literal"><span class="pre">bfg.routes.route</span></tt> were removed from documentation.  These
will stick around internally for several more releases, but it is
<tt class="docutils literal"><span class="pre">request.matchdict</span></tt> and <tt class="docutils literal"><span class="pre">request.matched_route</span></tt> are now the
&quot;official&quot; way to obtain the matchdict and the route object which
resulted in the match.</li>
</ul>
</div>
<div class="section" id="id193">
<h3>Documentation<a class="headerlink" href="#id193" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added documentation for the <tt class="docutils literal"><span class="pre">default_permission</span></tt> ZCML directive.</li>
<li>Added documentation for the <tt class="docutils literal"><span class="pre">default_permission</span></tt> constructor value
and the <tt class="docutils literal"><span class="pre">set_default_permission</span></tt> method in the Configurator API
documentation.</li>
<li>Added a new section to the &quot;security&quot; chapter named &quot;Setting a
Default Permission&quot;.</li>
<li>Document <tt class="docutils literal"><span class="pre">renderer_globals_factory</span></tt> and <tt class="docutils literal"><span class="pre">request_factory</span></tt>
arguments to Configurator constructor.</li>
<li>Added two sections to the &quot;Hooks&quot; chapter of the documentation:
&quot;Using Response Callbacks&quot; and &quot;Using Finished Callbacks&quot;.</li>
<li>Added documentation of the <tt class="docutils literal"><span class="pre">request.exception</span></tt> attribute to the
<tt class="docutils literal"><span class="pre">repoze.bfg.request.Request</span></tt> API documentation.</li>
<li>Added glossary entries for &quot;response callback&quot; and &quot;finished
callback&quot;.</li>
<li>The &quot;Request Processing&quot; narrative chapter has been updated to note
finished and response callback steps.</li>
<li>New interface in interfaces API documentation: <tt class="docutils literal"><span class="pre">IRoutePregenerator</span></tt>.</li>
<li>Added a &quot;The Matched Route&quot; section to the URL Dispatch narrative
docs chapter, detailing the <tt class="docutils literal"><span class="pre">matched_route</span></tt> attribute.</li>
</ul>
</div>
</div>
<div class="section" id="a12-2010-09-08">
<h2>1.3a12 (2010-09-08)<a class="headerlink" href="#a12-2010-09-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id194">
<h3>Bug Fixes<a class="headerlink" href="#id194" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug in <tt class="docutils literal"><span class="pre">repoze.bfg.url.static_url</span></tt> URL generation: if two
resource specifications were used to create two separate static
views, but they shared a common prefix, it was possible that
<tt class="docutils literal"><span class="pre">static_url</span></tt> would generate an incorrect URL.</li>
<li>Fix another bug in <tt class="docutils literal"><span class="pre">repoze.bfg.static_url</span></tt> URL generation: too
many slashes in generated URL.</li>
<li>Prevent a race condition which could result in a <tt class="docutils literal"><span class="pre">RuntimeError</span></tt>
when rendering a Chameleon template that has not already been
rendered once.  This would usually occur directly after a restart,
when more than one person or thread is trying to execute the same
view at the same time: <a class="reference external" href="https://bugs.launchpad.net/karl3/+bug/621364">https://bugs.launchpad.net/karl3/+bug/621364</a></li>
</ul>
</div>
<div class="section" id="id195">
<h3>Features<a class="headerlink" href="#id195" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The argument to <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.add_route</span></tt>
which was previously called <tt class="docutils literal"><span class="pre">path</span></tt> is now called <tt class="docutils literal"><span class="pre">pattern</span></tt> for
better explicability.  For backwards compatibility purposes, passing
a keyword argument named <tt class="docutils literal"><span class="pre">path</span></tt> to <tt class="docutils literal"><span class="pre">add_route</span></tt> will still work
indefinitely.</li>
<li>The <tt class="docutils literal"><span class="pre">path</span></tt> attribute to the ZCML <tt class="docutils literal"><span class="pre">route</span></tt> directive is now named
<tt class="docutils literal"><span class="pre">pattern</span></tt> for better explicability.  The older <tt class="docutils literal"><span class="pre">path</span></tt> attribute
will continue to work indefinitely.</li>
</ul>
</div>
<div class="section" id="id196">
<h3>Documentation<a class="headerlink" href="#id196" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All narrative, API, and tutorial docs which referred to a route
pattern as a <tt class="docutils literal"><span class="pre">path</span></tt> have now been updated to refer to them as a
<tt class="docutils literal"><span class="pre">pattern</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces</span></tt> API documentation page is now rendered
via <tt class="docutils literal"><span class="pre">repoze.sphinx.autointerface</span></tt>.</li>
<li>The URL Dispatch narrative chapter now refers to the <tt class="docutils literal"><span class="pre">interfaces</span></tt>
chapter to explain the API of an <tt class="docutils literal"><span class="pre">IRoute</span></tt> object.</li>
</ul>
</div>
<div class="section" id="id197">
<h3>Paster Templates<a class="headerlink" href="#id197" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The routesalchemy template has been updated to use <tt class="docutils literal"><span class="pre">pattern</span></tt> in
its route declarations rather than <tt class="docutils literal"><span class="pre">path</span></tt>.</li>
</ul>
</div>
<div class="section" id="id198">
<h3>Dependencies<a class="headerlink" href="#id198" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">tests_require</span></tt> now includes <tt class="docutils literal"><span class="pre">repoze.sphinx.autointerface</span></tt> as a
dependency.</li>
</ul>
</div>
<div class="section" id="id199">
<h3>Internal<a class="headerlink" href="#id199" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add an API to the <tt class="docutils literal"><span class="pre">Configurator</span></tt> named <tt class="docutils literal"><span class="pre">get_routes_mapper</span></tt>.
This returns an object implementing the <tt class="docutils literal"><span class="pre">IRoutesMapper</span></tt> interface.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesMapper</span></tt> object now has a
<tt class="docutils literal"><span class="pre">get_route</span></tt> method which returns a single Route object or
<tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li>A new interface <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IRoute</span></tt> was added.  The
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.Route</span></tt> object implements this interface.</li>
<li>The canonical attribute for accessing the routing pattern from a
route object is now <tt class="docutils literal"><span class="pre">pattern</span></tt> rather than <tt class="docutils literal"><span class="pre">path</span></tt>.</li>
<li>Use <tt class="docutils literal"><span class="pre">hash()</span></tt> rather than <tt class="docutils literal"><span class="pre">id()</span></tt> when computing the &quot;phash&quot; of a
custom route/view predicate in order to allow the custom predicate
some control over which predicates are &quot;equal&quot;.</li>
<li>Use <tt class="docutils literal"><span class="pre">response.headerlist.append</span></tt> instead of
<tt class="docutils literal"><span class="pre">response.headers.add</span></tt> in
<tt class="docutils literal"><span class="pre">repoze.bfg.request.add_global_response_headers</span></tt> in case the
response is not a WebOb response.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.Route</span></tt> constructor (not an API) now
accepts a different ordering of arguments.  Previously it was
<tt class="docutils literal"><span class="pre">(pattern,</span> <span class="pre">name,</span> <span class="pre">factory=None,</span> <span class="pre">predicates=())</span></tt>.  It is now
<tt class="docutils literal"><span class="pre">(name,</span> <span class="pre">pattern,</span> <span class="pre">factory=None,</span> <span class="pre">predicates=())</span></tt>.  This is in
support of consistency with <tt class="docutils literal"><span class="pre">configurator.add_route</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesMapper.connect</span></tt> method (not an
API) now accepts a different ordering of arguments.  Previously it
was <tt class="docutils literal"><span class="pre">(pattern,</span> <span class="pre">name,</span> <span class="pre">factory=None,</span> <span class="pre">predicates=())</span></tt>.  It is now
<tt class="docutils literal"><span class="pre">(name,</span> <span class="pre">pattern,</span> <span class="pre">factory=None,</span> <span class="pre">predicates=())</span></tt>.  This is in
support of consistency with <tt class="docutils literal"><span class="pre">configurator.add_route</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="a11-2010-09-05">
<h2>1.3a11 (2010-09-05)<a class="headerlink" href="#a11-2010-09-05" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id200">
<h3>Bug Fixes<a class="headerlink" href="#id200" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Process the response callbacks and the NewResponse event earlier, to
enable mutations to the response to take effect.</li>
</ul>
</div>
</div>
<div class="section" id="a10-2010-09-05">
<h2>1.3a10 (2010-09-05)<a class="headerlink" href="#a10-2010-09-05" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id201">
<h3>Features<a class="headerlink" href="#id201" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">A new <tt class="docutils literal"><span class="pre">repoze.bfg.request.Request.add_response_callback</span></tt> API has
been added.  This method is documented in the new
<tt class="docutils literal"><span class="pre">repoze.bfg.request</span></tt> API chapter.  It can be used to influence
response values before a concrete response object has been created.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INewResponse</span></tt> interface now includes a
<tt class="docutils literal"><span class="pre">request</span></tt> attribute; as a result, a handler for INewResponse now
has access to the request which caused the response.</p>
</li>
<li><p class="first">Each of the follow methods of the Configurator now allow the
below-named arguments to be passed as &quot;dotted name strings&quot;
(e.g. &quot;foo.bar.baz&quot;) rather than as actual implementation objects
that must be imported:</p>
<dl class="docutils">
<dt>setup_registry</dt>
<dd><p class="first last">root_factory, authentication_policy, authorization_policy,
debug_logger, locale_negotiator, request_factory,
renderer_globals_factory</p>
</dd>
<dt>add_subscriber</dt>
<dd><p class="first last">subscriber, iface</p>
</dd>
<dt>derive_view</dt>
<dd><p class="first last">view</p>
</dd>
<dt>add_view</dt>
<dd><p class="first last">view, <tt class="docutils literal"><span class="pre">for_</span></tt>, context, request_type, containment</p>
</dd>
<dt>add_route()</dt>
<dd><p class="first last">view, view_for, factory, <tt class="docutils literal"><span class="pre">for_</span></tt>, view_context</p>
</dd>
<dt>scan</dt>
<dd><p class="first last">package</p>
</dd>
<dt>add_renderer</dt>
<dd><p class="first last">factory</p>
</dd>
<dt>set_forbidden_view</dt>
<dd><p class="first last">view</p>
</dd>
<dt>set_notfound_view</dt>
<dd><p class="first last">view</p>
</dd>
<dt>set_request_factory</dt>
<dd><p class="first last">factory</p>
</dd>
<dt>set_renderer_globals_factory()</dt>
<dd><p class="first last">factory</p>
</dd>
<dt>set_locale_negotiator</dt>
<dd><p class="first last">negotiator</p>
</dd>
<dt>testing_add_subscriber</dt>
<dd><p class="first last">event_iface</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id202">
<h3>Bug Fixes<a class="headerlink" href="#id202" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The route pattern registered internally for a local &quot;static view&quot;
(either via the <tt class="docutils literal"><span class="pre">static</span></tt> ZCML directive or via the
<tt class="docutils literal"><span class="pre">add_static_view</span></tt> method of the configurator) was incorrect.  It
was regsistered for e.g. <tt class="docutils literal"><span class="pre">static*traverse</span></tt>, while it should have
been registered for <tt class="docutils literal"><span class="pre">static/*traverse</span></tt>.  Symptom: two static views
could not reliably be added to a system when they both shared the
same path prefix (e.g. <tt class="docutils literal"><span class="pre">/static</span></tt> and <tt class="docutils literal"><span class="pre">/static2</span></tt>).</li>
</ul>
</div>
<div class="section" id="id203">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id203" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The INewResponse event is now not sent to listeners if the response
returned by view code (or a renderer) is not a &quot;real&quot; response
(e.g. if it does not have <tt class="docutils literal"><span class="pre">.status</span></tt>, <tt class="docutils literal"><span class="pre">.headerlist</span></tt> and
<tt class="docutils literal"><span class="pre">.app_iter</span></tt> attribtues).</li>
</ul>
</div>
<div class="section" id="id204">
<h3>Documentation<a class="headerlink" href="#id204" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add an API chapter for the <tt class="docutils literal"><span class="pre">repoze.bfg.request</span></tt> module, which
includes documentation for the <tt class="docutils literal"><span class="pre">repoze.bfg.request.Request</span></tt> class
(the &quot;request object&quot;).</li>
<li>Modify the &quot;Request and Response&quot; narrative chapter to reference the
new <tt class="docutils literal"><span class="pre">repoze.bfg.request</span></tt> API chapter.  Some content was moved from
this chapter into the API documentation itself.</li>
<li>Various changes to denote that Python dotted names are now allowed
as input to Configurator methods.</li>
</ul>
</div>
<div class="section" id="id205">
<h3>Internal<a class="headerlink" href="#id205" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The (internal) feature which made it possible to attach a
<tt class="docutils literal"><span class="pre">global_response_headers</span></tt> attribute to the request (which was
assumed to contain a sequence of header key/value pairs which would
later be added to the response by the router), has been removed.
The functionality of
<tt class="docutils literal"><span class="pre">repoze.bfg.request.Request.add_response_callback</span></tt> takes its
place.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.events.NewResponse</span></tt> class's construct has changed:
it now must be created with <tt class="docutils literal"><span class="pre">(request,</span> <span class="pre">response)</span></tt> rather than
simply <tt class="docutils literal"><span class="pre">(response)</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2010-08-22">
<h2>1.3a9 (2010-08-22)<a class="headerlink" href="#a9-2010-08-22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id206">
<h3>Features<a class="headerlink" href="#id206" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The Configurator now accepts a dotted name <em>string</em> to a package as
a <tt class="docutils literal"><span class="pre">package</span></tt> constructor argument. The <tt class="docutils literal"><span class="pre">package</span></tt> argument was
previously required to be a package <em>object</em> (not a dotted name
string).</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.with_package</span></tt> method
was added.  This method returns a new Configurator using the same
application registry as the configurator object it is called
upon. The new configurator is created afresh with its <tt class="docutils literal"><span class="pre">package</span></tt>
constructor argument set to the value passed to <tt class="docutils literal"><span class="pre">with_package</span></tt>.
This feature will make it easier for future BFG versions to allow
dotted names as arguments in places where currently only object
references are allowed (the work to allow dotted names isntead of
object references everywhere has not yet been done, however).</li>
<li>The new <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.maybe_dotted</span></tt>
method resolves a Python dotted name string supplied as its
<tt class="docutils literal"><span class="pre">dotted</span></tt> argument to a global Python object.  If the value cannot
be resolved, a <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.ConfigurationError</span></tt> is
raised.  If the value supplied as <tt class="docutils literal"><span class="pre">dotted</span></tt> is not a string, the
value is returned unconditionally without any resolution attempted.</li>
<li>The new
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.absolute_resource_spec</span></tt>
method resolves a potentially relative &quot;resource specification&quot;
string into an absolute version.  If the value supplied as
<tt class="docutils literal"><span class="pre">relative_spec</span></tt> is not a string, the value is returned
unconditionally without any resolution attempted.</li>
</ul>
</div>
<div class="section" id="id207">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id207" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The functions in <tt class="docutils literal"><span class="pre">repoze.bfg.renderers</span></tt> named <tt class="docutils literal"><span class="pre">render</span></tt> and
<tt class="docutils literal"><span class="pre">render_to_response</span></tt> introduced in 1.3a6 previously took a set of
<tt class="docutils literal"><span class="pre">**values</span></tt> arguments for the values to be passed to the renderer.
This was wrong, as renderers don't need to accept only dictionaries
(they can accept any type of object).  Now, the value sent to the
renderer must be supplied as a positional argument named <tt class="docutils literal"><span class="pre">value</span></tt>.
The <tt class="docutils literal"><span class="pre">request</span></tt> argument is still a keyword argument, however.</li>
<li>The functions in <tt class="docutils literal"><span class="pre">repoze.bfg.renderers</span></tt> named <tt class="docutils literal"><span class="pre">render</span></tt> and
<tt class="docutils literal"><span class="pre">render_to_response</span></tt> now accept an additonal keyword argument
named <tt class="docutils literal"><span class="pre">package</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">get_renderer</span></tt> API in <tt class="docutils literal"><span class="pre">repoze.bfg.renderers</span></tt> now accepts a
<tt class="docutils literal"><span class="pre">package</span></tt> argument.</li>
</ul>
</div>
<div class="section" id="id208">
<h3>Documentation<a class="headerlink" href="#id208" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The ZCML <tt class="docutils literal"><span class="pre">include</span></tt> directive docs were incorrect: they specified
<tt class="docutils literal"><span class="pre">filename</span></tt> rather than (the correct) <tt class="docutils literal"><span class="pre">file</span></tt> as an allowable
attribute.</li>
</ul>
</div>
<div class="section" id="id209">
<h3>Internal<a class="headerlink" href="#id209" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.resource.resolve_resource_spec</span></tt> function can now
accept a package object as its <tt class="docutils literal"><span class="pre">pname</span></tt> argument instead of just a
package name.</li>
<li>The <tt class="docutils literal"><span class="pre">_renderer_factory_from_name</span></tt> and <tt class="docutils literal"><span class="pre">_renderer_from_name</span></tt>
methods of the Configurator were removed.  These were never APIs.</li>
<li>The <tt class="docutils literal"><span class="pre">_render</span></tt>, <tt class="docutils literal"><span class="pre">_render_to_response</span></tt> and <tt class="docutils literal"><span class="pre">_make_response</span></tt>
functions with <tt class="docutils literal"><span class="pre">repoze.bfg.render</span></tt> (added in 1.3a6) have been
removed.</li>
<li>A new helper class <tt class="docutils literal"><span class="pre">repoze.bfg.renderers.RendererHelper</span></tt> was
added.</li>
<li>The _map_view function of <tt class="docutils literal"><span class="pre">repoze.bfg.configuration</span></tt> now takes
only a renderer_name argument instead of both a <tt class="docutils literal"><span class="pre">renderer</span></tt> and
<tt class="docutils literal"><span class="pre">renderer``_name</span> <span class="pre">argument.</span>&nbsp; <span class="pre">It</span> <span class="pre">also</span> <span class="pre">takes</span> <span class="pre">a</span> <span class="pre">``package</span></tt> argument
now.</li>
<li>Use <tt class="docutils literal"><span class="pre">imp.get_suffixes</span></tt> indirection in
<tt class="docutils literal"><span class="pre">repoze.bfg.path.package_name</span></tt> instead of hardcoded <tt class="docutils literal"><span class="pre">.py</span></tt>
<tt class="docutils literal"><span class="pre">.pyc</span></tt> and <tt class="docutils literal"><span class="pre">.pyo</span></tt> to use for comparison when attemtping to
decide if a directory is a package.</li>
<li>Make tests runnable again under Jython (although they do not all
pass currently).</li>
<li>The reify decorator now maintains the docstring of the function it
wraps.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2010-08-08">
<h2>1.3a8 (2010-08-08)<a class="headerlink" href="#a8-2010-08-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id210">
<h3>Features<a class="headerlink" href="#id210" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">New public interface: <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.IExceptionResponse</span></tt>.
This interface is provided by all internal exception classes (such
as <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.NotFound</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.Forbidden</span></tt>), instances of which are both
exception objects and can behave as WSGI response objects.  This
interface is made public so that exception classes which are also
valid WSGI response factories can be configured to implement them or
exception instances which are also or response instances can be
configured to provide them.</p>
</li>
<li><p class="first">New API class: <tt class="docutils literal"><span class="pre">repoze.bfg.view.AppendSlashNotFoundViewFactory</span></tt>.</p>
<p>There can only be one Not Found view in any <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>
application.  Even if you use
<tt class="docutils literal"><span class="pre">repoze.bfg.view.append_slash_notfound_view</span></tt> as the Not Found
view, <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> still must generate a <tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt>
response when it cannot redirect to a slash-appended URL; this not
found response will be visible to site users.</p>
<p>If you don't care what this 404 response looks like, and you only
need redirections to slash-appended route URLs, you may use the
<tt class="docutils literal"><span class="pre">repoze.bfg.view.append_slash_notfound_view</span></tt> object as the Not
Found view.  However, if you wish to use a <em>custom</em> notfound view
callable when a URL cannot be redirected to a slash-appended URL,
you may wish to use an instance of the
<tt class="docutils literal"><span class="pre">repoze.bfg.view.AppendSlashNotFoundViewFactory</span></tt> class as the Not
Found view, supplying the notfound view callable as the first
argument to its constructor.  For instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">repoze.bfg.exceptions</span> <span class="kn">import</span> <span class="n">NotFound</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="kn">import</span> <span class="n">AppendSlashNotFoundViewFactory</span>

<span class="k">def</span> <span class="nf">notfound_view</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HTTPNotFound</span><span class="p">(</span><span class="s">&#39;It aint there, stop trying!&#39;</span><span class="p">)</span>

<span class="n">custom_append_slash</span> <span class="o">=</span> <span class="n">AppendSlashNotFoundViewFactory</span><span class="p">(</span><span class="n">notfound_view</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">custom_append_slash</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">NotFound</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">notfound_view</span></tt> supplied must adhere to the two-argument view
callable calling convention of <tt class="docutils literal"><span class="pre">(context,</span> <span class="pre">request)</span></tt> (<tt class="docutils literal"><span class="pre">context</span></tt>
will be the exception object).</p>
</li>
</ul>
</div>
<div class="section" id="id211">
<h3>Documentation<a class="headerlink" href="#id211" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Expanded the &quot;Cleaning Up After a Request&quot; section of the URL
Dispatch narrative chapter.</li>
<li>Expanded the &quot;Redirecting to Slash-Appended Routes&quot; section of the
URL Dispatch narrative chapter.</li>
</ul>
</div>
<div class="section" id="id212">
<h3>Internal<a class="headerlink" href="#id212" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Previously, two default view functions were registered at
Configurator setup (one for <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.NotFound</span></tt> named
<tt class="docutils literal"><span class="pre">default_notfound_view</span></tt> and one for
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.Forbidden</span></tt> named
<tt class="docutils literal"><span class="pre">default_forbidden_view</span></tt>) to render internal exception responses.
Those default view functions have been removed, replaced with a
generic default view function which is registered at Configurator
setup for the <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IExceptionResponse</span></tt> interface
that simply returns the exception instance; the <tt class="docutils literal"><span class="pre">NotFound</span></tt> and
<tt class="docutils literal"><span class="pre">Forbidden</span></tt> classes are now still exception factories but they are
also response factories which generate instances that implement the
new <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IExceptionResponse</span></tt> interface.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2010-08-01">
<h2>1.3a7 (2010-08-01)<a class="headerlink" href="#a7-2010-08-01" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id213">
<h3>Features<a class="headerlink" href="#id213" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.add_route</span></tt> API now
returns the route object that was added.</li>
<li>A <tt class="docutils literal"><span class="pre">repoze.bfg.events.subscriber</span></tt> decorator was added.  This
decorator decorates module-scope functions, which are then treated
as event listeners after a scan() is performed.  See the Events
narrative documentation chapter and the <tt class="docutils literal"><span class="pre">repoze.bfg.events</span></tt> module
documentation for more information.</li>
</ul>
</div>
<div class="section" id="id214">
<h3>Bug Fixes<a class="headerlink" href="#id214" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When adding a view for a route which did not yet exist (&quot;did not yet
exist&quot; meaning, temporally, a view was added with a route name for a
route which had not yet been added via add_route), the value of the
<tt class="docutils literal"><span class="pre">custom_predicate</span></tt> argument to <tt class="docutils literal"><span class="pre">add_view</span></tt> was lost.  Symptom:
wrong view matches when using URL dispatch and custom view
predicates together.</li>
<li>Pattern matches for a <tt class="docutils literal"><span class="pre">:segment</span></tt> marker in a URL dispatch route
pattern now always match at least one character.  See &quot;Backwards
Incompatibilities&quot; below in this changelog.</li>
</ul>
</div>
<div class="section" id="id215">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id215" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A bug existed in the regular expression to do URL matching.  As an
example, the URL matching machinery would cause the pattern
<tt class="docutils literal"><span class="pre">/{foo}</span></tt> to match the root URL <tt class="docutils literal"><span class="pre">/</span></tt> resulting in a match
dictionary of <tt class="docutils literal"><span class="pre">{'foo':u''}</span></tt> or the pattern <tt class="docutils literal"><span class="pre">/{fud}/edit</span> <span class="pre">might</span>
<span class="pre">match</span> <span class="pre">the</span> <span class="pre">URL</span> <span class="pre">``//edit</span></tt> resulting in a match dictionary of
<tt class="docutils literal"><span class="pre">{'fud':u''}</span></tt>.  It was always the intent that <tt class="docutils literal"><span class="pre">:segment</span></tt> markers
in the pattern would need to match <em>at least one</em> character, and
never match the empty string.  This, however, means that in certain
circumstances, a routing match which your application inadvertently
depended upon may no longer happen.</li>
</ul>
</div>
<div class="section" id="id216">
<h3>Documentation<a class="headerlink" href="#id216" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added description of the <tt class="docutils literal"><span class="pre">repoze.bfg.events.subscriber</span></tt> decorator
to the Events narrative chapter.</li>
<li>Added <tt class="docutils literal"><span class="pre">repoze.bfg.events.subscriber</span></tt> API documentation to
<tt class="docutils literal"><span class="pre">repoze.bfg.events</span></tt> API docs.</li>
<li>Added a section named &quot;Zope 3 Enforces 'TTW' Authorization Checks By
Default; BFG Does Not&quot; to the &quot;Design Defense&quot; chapter.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2010-07-25">
<h2>1.3a6 (2010-07-25)<a class="headerlink" href="#a6-2010-07-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id217">
<h3>Features<a class="headerlink" href="#id217" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">New argument to <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.add_route</span></tt>
and the <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive: <tt class="docutils literal"><span class="pre">traverse</span></tt>.  If you would like
to cause the <tt class="docutils literal"><span class="pre">context</span></tt> to be something other than the <tt class="docutils literal"><span class="pre">root</span></tt>
object when this route matches, you can spell a traversal pattern as
the <tt class="docutils literal"><span class="pre">traverse</span></tt> argument.  This traversal pattern will be used as
the traversal path: traversal will begin at the root object implied
by this route (either the global root, or the object returned by the
<tt class="docutils literal"><span class="pre">factory</span></tt> associated with this route).</p>
<p>The syntax of the <tt class="docutils literal"><span class="pre">traverse</span></tt> argument is the same as it is for
<tt class="docutils literal"><span class="pre">path</span></tt>. For example, if the <tt class="docutils literal"><span class="pre">path</span></tt> provided is
<tt class="docutils literal"><span class="pre">articles/:article/edit</span></tt>, and the <tt class="docutils literal"><span class="pre">traverse</span></tt> argument provided
is <tt class="docutils literal"><span class="pre">/:article</span></tt>, when a request comes in that causes the route to
match in such a way that the <tt class="docutils literal"><span class="pre">article</span></tt> match value is '1' (when
the request URI is <tt class="docutils literal"><span class="pre">/articles/1/edit</span></tt>), the traversal path will be
generated as <tt class="docutils literal"><span class="pre">/1</span></tt>.  This means that the root object's
<tt class="docutils literal"><span class="pre">__getitem__</span></tt> will be called with the name <tt class="docutils literal"><span class="pre">1</span></tt> during the
traversal phase.  If the <tt class="docutils literal"><span class="pre">1</span></tt> object exists, it will become the
<tt class="docutils literal"><span class="pre">context</span></tt> of the request.  The Traversal narrative has more
information about traversal.</p>
<p>If the traversal path contains segment marker names which are not
present in the path argument, a runtime error will occur.  The
<tt class="docutils literal"><span class="pre">traverse</span></tt> pattern should not contain segment markers that do not
exist in the <tt class="docutils literal"><span class="pre">path</span></tt>.</p>
<p>A similar combining of routing and traversal is available when a
route is matched which contains a <tt class="docutils literal"><span class="pre">*traverse</span></tt> remainder marker in
its path.  The <tt class="docutils literal"><span class="pre">traverse</span></tt> argument allows you to associate route
patterns with an arbitrary traversal path without using a
<tt class="docutils literal"><span class="pre">*traverse</span></tt> remainder marker; instead you can use other match
information.</p>
<p>Note that the <tt class="docutils literal"><span class="pre">traverse</span></tt> argument is ignored when attached to a
route that has a <tt class="docutils literal"><span class="pre">*traverse</span></tt> remainder marker in its path.</p>
</li>
<li><p class="first">A new method of the <tt class="docutils literal"><span class="pre">Configurator</span></tt> exists:
<tt class="docutils literal"><span class="pre">set_request_factory</span></tt>.  If used, this method will set the factory
used by the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> router to create all request objects.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">Configurator</span></tt> constructor takes an additional argument:
<tt class="docutils literal"><span class="pre">request_factory</span></tt>.  If used, this argument will set the factory
used by the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> router to create all request objects.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">Configurator</span></tt> constructor takes an additional argument:
<tt class="docutils literal"><span class="pre">request_factory</span></tt>.  If used, this argument will set the factory
used by the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> router to create all request objects.</p>
</li>
<li><p class="first">A new method of the <tt class="docutils literal"><span class="pre">Configurator</span></tt> exists:
<tt class="docutils literal"><span class="pre">set_renderer_globals_factory</span></tt>.  If used, this method will set the
factory used by the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> router to create renderer
globals.</p>
</li>
<li><p class="first">A new method of the <tt class="docutils literal"><span class="pre">Configurator</span></tt> exists: <tt class="docutils literal"><span class="pre">get_settings</span></tt>.  If
used, this method will return the current settings object (performs
the same job as the <tt class="docutils literal"><span class="pre">repoze.bfg.settings.get_settings</span></tt> API).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">Configurator</span></tt> constructor takes an additional argument:
<tt class="docutils literal"><span class="pre">renderer_globals_factory</span></tt>.  If used, this argument will set the
factory used by the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> router to create renderer
globals.</p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">repoze.bfg.renderers.render</span></tt>,
<tt class="docutils literal"><span class="pre">repoze.bfg.renderers.render_to_response</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.renderers.get_renderer</span></tt> functions.  These are
imperative APIs which will use the same rendering machinery used by
view configurations with a <tt class="docutils literal"><span class="pre">renderer=</span></tt> attribute/argument to
produce a rendering or renderer.  Because these APIs provide a
central API for all rendering, they now form the preferred way to
perform imperative template rendering.  Using functions named
<tt class="docutils literal"><span class="pre">render_*</span></tt> from modules such as <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_text</span></tt> is now discouraged (although not
deprecated).  The code the backing older templating-system-specific
APIs now calls into the newer <tt class="docutils literal"><span class="pre">repoze.bfg.renderer</span></tt> code.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.testing_add_template</span></tt>
has been renamed to <tt class="docutils literal"><span class="pre">testing_add_renderer</span></tt>.  A backwards
compatibility alias is present using the old name.</p>
</li>
</ul>
</div>
<div class="section" id="id218">
<h3>Documentation<a class="headerlink" href="#id218" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">Hybrid</span></tt> narrative chapter now contains a description of the
<tt class="docutils literal"><span class="pre">traverse</span></tt> route argument.</li>
<li>The <tt class="docutils literal"><span class="pre">Hooks</span></tt> narrative chapter now contains sections about
changing the request factory and adding a renderer globals factory.</li>
<li>The API documentation includes a new module:
<tt class="docutils literal"><span class="pre">repoze.bfg.renderers</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">Templates</span></tt> chapter was updated; all narrative that used
templating-specific APIs within examples to perform rendering (such
as the <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt.render_template_to_response</span></tt>
method) was changed to use <tt class="docutils literal"><span class="pre">repoze.bfg.renderers.render_*</span></tt>
functions.</li>
</ul>
</div>
<div class="section" id="id219">
<h3>Bug Fixes<a class="headerlink" href="#id219" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">header</span></tt> predicate (when used as either a view predicate or a
route predicate) had a problem when specified with a name/regex
pair.  When the header did not exist in the headers dictionary, the
regex match could be fed <tt class="docutils literal"><span class="pre">None</span></tt>, causing it to throw a
<tt class="docutils literal"><span class="pre">TypeError:</span> <span class="pre">expected</span> <span class="pre">string</span> <span class="pre">or</span> <span class="pre">buffer</span></tt> exception.  Now, the
predicate returns False as intended.</li>
</ul>
</div>
<div class="section" id="id220">
<h3>Deprecations<a class="headerlink" href="#id220" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.renderers.rendered_response</span></tt> function was never an
official API, but may have been imported by extensions in the wild.
It is officially deprecated in this release.  Use
<tt class="docutils literal"><span class="pre">repoze.bfg.renderers.render_to_response</span></tt> instead.</p>
</li>
<li><p class="first">The following APIs are <em>documentation</em> deprecated (meaning they are
officially deprecated in documentation but do not raise a
deprecation error upon their usage, and may continue to work for an
indefinite period of time):</p>
<p>In the <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt</span></tt> module: <tt class="docutils literal"><span class="pre">get_renderer</span></tt>,
<tt class="docutils literal"><span class="pre">get_template</span></tt>, <tt class="docutils literal"><span class="pre">render_template</span></tt>,
<tt class="docutils literal"><span class="pre">render_template_to_response</span></tt>.  The suggested alternatives are
documented within the docstrings of those methods (which are still
present in the documentation).</p>
<p>In the <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_text</span></tt> module: <tt class="docutils literal"><span class="pre">get_renderer</span></tt>,
<tt class="docutils literal"><span class="pre">get_template</span></tt>, <tt class="docutils literal"><span class="pre">render_template</span></tt>,
<tt class="docutils literal"><span class="pre">render_template_to_response</span></tt>.  The suggested alternatives are
documented within the docstrings of those methods (which are still
present in the documentation).</p>
<p>In general, to perform template-related functions, one should now
use the various methods in the <tt class="docutils literal"><span class="pre">repoze.bfg.renderers</span></tt> module.</p>
</li>
</ul>
</div>
<div class="section" id="id221">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id221" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">A new internal exception class (<em>not</em> an API) named
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.PredicateMismatch</span></tt> now exists.  This
exception is currently raised when no constituent view of a
multiview can be called (due to no predicate match).  Previously, in
this situation, a <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.NotFound</span></tt> was raised.  We
provide backwards compatibility for code that expected a
<tt class="docutils literal"><span class="pre">NotFound</span></tt> to be raised when no predicates match by causing
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.PredicateMismatch</span></tt> to inherit from
<tt class="docutils literal"><span class="pre">NotFound</span></tt>.  This will cause any exception view registered for
<tt class="docutils literal"><span class="pre">NotFound</span></tt> to be called when a predicate mismatch occurs, as was
the previous behavior.</p>
<p>There is however, one perverse case that will expose a backwards
incompatibility.  If 1) you had a view that was registered as a
member of a multiview 2) this view explicitly raised a <tt class="docutils literal"><span class="pre">NotFound</span></tt>
exception <em>in order to</em> proceed to the next predicate check in the
multiview, that code will now behave differently: rather than
skipping to the next view match, a NotFound will be raised to the
top-level exception handling machinery instead.  For code to be
depending upon the behavior of a view raising <tt class="docutils literal"><span class="pre">NotFound</span></tt> to
proceed to the next predicate match, would be tragic, but not
impossible, given that <tt class="docutils literal"><span class="pre">NotFound</span></tt> is a public interface.
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.PredicateMismatch</span></tt> is not a public API and
cannot be depended upon by application code, so you should not
change your view code to raise <tt class="docutils literal"><span class="pre">PredicateMismatch</span></tt>.  Instead, move
the logic which raised the <tt class="docutils literal"><span class="pre">NotFound</span></tt> exception in the view out
into a custom view predicate.</p>
</li>
<li><p class="first">If, when you run your application's unit test suite under BFG 1.3, a
<tt class="docutils literal"><span class="pre">KeyError</span></tt> naming a template or a <tt class="docutils literal"><span class="pre">ValueError</span></tt> indicating that a
'renderer factory' is not registered may is raised
(e.g. <tt class="docutils literal"><span class="pre">ValueError:</span> <span class="pre">No</span> <span class="pre">factory</span> <span class="pre">for</span> <span class="pre">renderer</span> <span class="pre">named</span> <span class="pre">'.pt'</span> <span class="pre">when</span> <span class="pre">looking</span>
<span class="pre">up</span> <span class="pre">karl.views:templates/snippets.pt</span></tt>), you may need to perform some
extra setup in your test code.</p>
<p>The best solution is to use the
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.testing_add_renderer</span></tt> (or,
alternately the deprecated
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerTemplateRenderer</span></tt> or
<tt class="docutils literal"><span class="pre">registerDummyRenderer</span></tt>) API within the code comprising each
individual unit test suite to register a &quot;dummy&quot; renderer for each
of the templates and renderers used by code under test.  For
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">testing_add_renderer</span><span class="p">(</span><span class="s">&#39;karl.views:templates/snippets.pt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will register a basic dummy renderer for this particular
missing template.  The <tt class="docutils literal"><span class="pre">testing_add_renderer</span></tt> API actually
<em>returns</em> the renderer, but if you don't care about how the render
is used, you don't care about having a reference to it either.</p>
<p>A more rough way to solve the issue exists.  It causes the &quot;real&quot;
template implementations to be used while the system is under test,
which is suboptimal, because tests will run slower, and unit tests
won't actually <em>be</em> unit tests, but it is easier.  Always ensure you
call the <tt class="docutils literal"><span class="pre">setup_registry()</span></tt> method of the Configurator .  Eg:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">reg</span> <span class="o">=</span> <span class="n">MyRegistry</span><span class="p">()</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">registry</span><span class="o">=</span><span class="n">reg</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">setup_registry</span><span class="p">()</span>
</pre></div>
</div>
<p>Calling <tt class="docutils literal"><span class="pre">setup_registry</span></tt> only has an effect if you're <em>passing in</em>
a <tt class="docutils literal"><span class="pre">registry</span></tt> argument to the Configurator constructor.
<tt class="docutils literal"><span class="pre">setup_registry</span></tt> is called by the course of normal operations
anyway if you do not pass in a <tt class="docutils literal"><span class="pre">registry</span></tt>.</p>
<p>If your test suite isn't using a Configurator yet, and is still
using the older <tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt> APIs name <tt class="docutils literal"><span class="pre">setUp</span></tt> or
<tt class="docutils literal"><span class="pre">cleanUp</span></tt>, these will register the renderers on your behalf.</p>
<p>A variant on the symptom for this theme exists: you may already be
dutifully registering a dummy template or renderer for a template
used by the code you're testing using <tt class="docutils literal"><span class="pre">testing_register_renderer</span></tt>
or <tt class="docutils literal"><span class="pre">registerTemplateRenderer</span></tt>, but (perhaps unbeknownst to you)
the code under test expects to be able to use a &quot;real&quot; template
renderer implementation to retrieve or render <em>another</em> template
that you forgot was being rendered as a side effect of calling the
code you're testing.  This happened to work because it found the
<em>real</em> template while the system was under test previously, and now
it cannot.  The solution is the same.</p>
<p>It may also help reduce confusion to use a <em>resource specification</em>
to specify the template path in the test suite and code rather than
a relative path in either.  A resource specification is unambiguous,
while a relative path needs to be relative to &quot;here&quot;, where &quot;here&quot;
isn't always well-defined (&quot;here&quot; in a test suite may or may not be
the same as &quot;here&quot; in the code under test).</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a5-2010-07-14">
<h2>1.3a5 (2010-07-14)<a class="headerlink" href="#a5-2010-07-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id222">
<h3>Features<a class="headerlink" href="#id222" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New internal exception: <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.URLDecodeError</span></tt>.
This URL is a subclass of the built-in Python exception named
<tt class="docutils literal"><span class="pre">UnicodeDecodeError</span></tt>.</li>
<li>When decoding a URL segment to Unicode fails, the exception raised
is now <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.URLDecodeError</span></tt> instead of
<tt class="docutils literal"><span class="pre">UnicodeDecodeError</span></tt>.  This makes it possible to register an
exception view invoked specifically when <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> cannot
decode a URL.</li>
</ul>
</div>
<div class="section" id="id223">
<h3>Bug Fixes<a class="headerlink" href="#id223" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix regression in
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.add_static_view</span></tt>.  Before
1.3a4, view names that contained a slash were supported as route
prefixes. 1.3a4 broke this by trying to treat them as full URLs.</li>
</ul>
</div>
<div class="section" id="id224">
<h3>Documentation<a class="headerlink" href="#id224" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.URLDecodeError</span></tt> exception was added to
the exceptions chapter of the API documentation.</li>
</ul>
</div>
<div class="section" id="id225">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id225" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>in previous releases, when a URL could not be decoded from UTF-8
during traversal, a <tt class="docutils literal"><span class="pre">TypeError</span></tt> was raised.  Now the error which
is raised is a <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.URLDecodeError</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2010-07-03">
<h2>1.3a4 (2010-07-03)<a class="headerlink" href="#a4-2010-07-03" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id226">
<h3>Features<a class="headerlink" href="#id226" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Undocumented hook: make <tt class="docutils literal"><span class="pre">get_app</span></tt> and <tt class="docutils literal"><span class="pre">get_root</span></tt> of the
<tt class="docutils literal"><span class="pre">repoze.bfg.paster.BFGShellCommand</span></tt> hookable in cases where
endware may interfere with the default versions.</p>
</li>
<li><p class="first">In earlier versions, a custom route predicate associated with a url
dispatch route (each of the predicate functions fed to the
<tt class="docutils literal"><span class="pre">custom_predicates</span></tt> argument of
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.add_route</span></tt>) has always
required a 2-positional argument signature, e.g. <tt class="docutils literal"><span class="pre">(context,</span>
<span class="pre">request)</span></tt>.  Before this release, the <tt class="docutils literal"><span class="pre">context</span></tt> argument was
always <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
<p>As of this release, the first argument passed to a predicate is now
a dictionary conventionally named <tt class="docutils literal"><span class="pre">info</span></tt> consisting of <tt class="docutils literal"><span class="pre">route</span></tt>,
and <tt class="docutils literal"><span class="pre">match</span></tt>.  <tt class="docutils literal"><span class="pre">match</span></tt> is a dictionary: it represents the
arguments matched in the URL by the route.  <tt class="docutils literal"><span class="pre">route</span></tt> is an object
representing the route which was matched.</p>
<p>This is useful when predicates need access to the route match.  For
example:</p>
<div class="highlight-python"><div class="highlight"><pre>def any_of(segment_name, *args):
    def predicate(info, request):
        if info[&#39;match&#39;][segment_name] in args:
            return True
    return predicate

num_one_two_or_three = any_of(&#39;num, &#39;one&#39;, &#39;two&#39;, &#39;three&#39;)

add_route(&#39;num&#39;, &#39;/:num&#39;, custom_predicates=(num_one_two_or_three,))
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">route</span></tt> object is an object that has two useful attributes:
<tt class="docutils literal"><span class="pre">name</span></tt> and <tt class="docutils literal"><span class="pre">path</span></tt>.  The <tt class="docutils literal"><span class="pre">name</span></tt> attribute is the route name.
The <tt class="docutils literal"><span class="pre">path</span></tt> attribute is the route pattern.  An example of using
the route in a set of route predicates:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">twenty_ten</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;route&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;ymd&#39;</span><span class="p">,</span> <span class="s">&#39;ym&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;match&#39;</span><span class="p">][</span><span class="s">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;2010&#39;</span>

<span class="n">add_route</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;/:year&#39;</span><span class="p">,</span> <span class="n">custom_predicates</span><span class="o">=</span><span class="p">(</span><span class="n">twenty_ten</span><span class="p">,))</span>
<span class="n">add_route</span><span class="p">(</span><span class="s">&#39;ym&#39;</span><span class="p">,</span> <span class="s">&#39;/:year/:month&#39;</span><span class="p">,</span> <span class="n">custom_predicates</span><span class="o">=</span><span class="p">(</span><span class="n">twenty_ten</span><span class="p">,))</span>
<span class="n">add_route</span><span class="p">(</span><span class="s">&#39;ymd&#39;</span><span class="p">,</span> <span class="s">&#39;/:year/:month:/day&#39;</span><span class="p">,</span> <span class="n">custom_predicates</span><span class="o">=</span><span class="p">(</span><span class="n">twenty_ten</span><span class="p">,))</span>
</pre></div>
</div>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.url.route_url</span></tt> API has changed.  If a keyword
<tt class="docutils literal"><span class="pre">_app_url</span></tt> is present in the arguments passed to <tt class="docutils literal"><span class="pre">route_url</span></tt>,
this value will be used as the protocol/hostname/port/leading path
prefix of the generated URL.  For example, using an <tt class="docutils literal"><span class="pre">_app_url</span></tt> of
<tt class="docutils literal"><span class="pre">http://example.com:8080/foo</span></tt> would cause the URL
<tt class="docutils literal"><span class="pre">http://example.com:8080/foo/fleeb/flub</span></tt> to be returned from this
function if the expansion of the route pattern associated with the
<tt class="docutils literal"><span class="pre">route_name</span></tt> expanded to <tt class="docutils literal"><span class="pre">/fleeb/flub</span></tt>.</p>
</li>
<li><p class="first">It is now possible to use a URL as the <tt class="docutils literal"><span class="pre">name</span></tt> argument fed to
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.add_static_view</span></tt>.  When the
name argument is a URL, the <tt class="docutils literal"><span class="pre">repoze.bfg.url.static_url</span></tt> API will
generate join this URL (as a prefix) to a path including the static
file name.  This makes it more possible to put static media on a
separate webserver for production, while keeping static media
package-internal and served by the development webserver during
development.</p>
</li>
</ul>
</div>
<div class="section" id="id227">
<h3>Documentation<a class="headerlink" href="#id227" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The authorization chapter of the ZODB Wiki Tutorial
(docs/tutorials/bfgwiki) was changed to demonstrate authorization
via a group rather than via a direct username (thanks to Alex
Marandon).</li>
<li>The authorization chapter of the SQLAlchemy Wiki Tutorial
(docs/tutorials/bfgwiki2) was changed to demonstrate authorization
via a group rather than via a direct username.</li>
<li>Redirect requests for tutorial sources to
<a class="reference external" href="http://docs.repoze.org/bfgwiki-1.3">http://docs.repoze.org/bfgwiki-1.3</a> and
<a class="reference external" href="http://docs.repoze.org/bfgwiki2-1.3/">http://docs.repoze.org/bfgwiki2-1.3/</a> respectively.</li>
<li>A section named <tt class="docutils literal"><span class="pre">Custom</span> <span class="pre">Route</span> <span class="pre">Predicates</span></tt> was added to the URL
Dispatch narrative chapter.</li>
<li>The Static Resources chapter has been updated to mention using
<tt class="docutils literal"><span class="pre">static_url</span></tt> to generate URLs to external webservers.</li>
</ul>
</div>
<div class="section" id="id228">
<h3>Internal<a class="headerlink" href="#id228" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Removed <tt class="docutils literal"><span class="pre">repoze.bfg.static.StaticURLFactory</span></tt> in favor of a new
abstraction revolving around the (still-internal)
<tt class="docutils literal"><span class="pre">repoze.bfg.static.StaticURLInfo</span></tt> helper class.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2010-05-01">
<h2>1.3a3 (2010-05-01)<a class="headerlink" href="#a3-2010-05-01" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id229">
<h3>Paster Templates<a class="headerlink" href="#id229" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">bfg_alchemy</span></tt> and <tt class="docutils literal"><span class="pre">bfg_routesalchemy</span></tt> templates no longer
register a <tt class="docutils literal"><span class="pre">handle_teardown</span></tt> event listener which calls
<tt class="docutils literal"><span class="pre">DBSession.remove</span></tt>.  This was found by Chris Withers to be
unnecessary.</li>
</ul>
</div>
<div class="section" id="id230">
<h3>Documentation<a class="headerlink" href="#id230" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The &quot;bfgwiki2&quot; (URL dispatch wiki) tutorial code and documentation
was changed to remove the <tt class="docutils literal"><span class="pre">handle_teardown</span></tt> event listener which
calls <tt class="docutils literal"><span class="pre">DBSession.remove</span></tt>.</li>
<li>Any mention of the <tt class="docutils literal"><span class="pre">handle_teardown</span></tt> event listener as used by the
paster templates was removed from the URL Dispatch narrative chapter.</li>
<li>A section entitled Detecting Available Languages was added to the
i18n narrative docs chapter.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2010-04-28">
<h2>1.3a2 (2010-04-28)<a class="headerlink" href="#a2-2010-04-28" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id231">
<h3>Features<a class="headerlink" href="#id231" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A locale negotiator no longer needs to be registered explicitly. The
default locale negotiator at
<tt class="docutils literal"><span class="pre">repoze.bfg.i18n.default_locale_negotiator</span></tt> is now used
unconditionally as... um, the default locale negotiator.</li>
<li>The default locale negotiator has become more complex.<ul>
<li>First, the negotiator looks for the <tt class="docutils literal"><span class="pre">_LOCALE_</span></tt> attribute of
the request object (possibly set by a view or an event listener).</li>
<li>Then it looks for the <tt class="docutils literal"><span class="pre">request.params['_LOCALE_']</span></tt> value.</li>
<li>Then it looks for the <tt class="docutils literal"><span class="pre">request.cookies['_LOCALE_']</span></tt> value.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id232">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id232" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The default locale negotiator now looks for the parameter named
<tt class="docutils literal"><span class="pre">_LOCALE_</span></tt> rather than a parameter named <tt class="docutils literal"><span class="pre">locale</span></tt> in
<tt class="docutils literal"><span class="pre">request.params</span></tt>.</li>
</ul>
</div>
<div class="section" id="id233">
<h3>Behavior Changes<a class="headerlink" href="#id233" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A locale negotiator may now return <tt class="docutils literal"><span class="pre">None</span></tt>, signifying that the
default locale should be used.</li>
</ul>
</div>
<div class="section" id="id234">
<h3>Documentation<a class="headerlink" href="#id234" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Documentation concerning locale negotiation in the
Internationalizationa and Localization chapter was updated.</li>
<li>Expanded portion of i18n narrative chapter docs which discuss
working with gettext files.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2010-04-26">
<h2>1.3a1 (2010-04-26)<a class="headerlink" href="#a1-2010-04-26" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id235">
<h3>Features<a class="headerlink" href="#id235" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Added &quot;exception views&quot;.  When you use an exception (anything that
inherits from the Python <tt class="docutils literal"><span class="pre">Exception</span></tt> builtin) as view context
argument, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="kn">import</span> <span class="n">bfg_view</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.exceptions</span> <span class="kn">import</span> <span class="n">NotFound</span>
<span class="kn">from</span> <span class="nn">webob.exc</span> <span class="kn">import</span> <span class="n">HTTPNotFound</span>

<span class="nd">@bfg_view</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">NotFound</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">notfound_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HTTPNotFound</span><span class="p">()</span>
</pre></div>
</div>
<p>For the above example, when the <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.NotFound</span></tt>
exception is raised by any view or any root factory, the
<tt class="docutils literal"><span class="pre">notfound_view</span></tt> view callable will be invoked and its response
returned.</p>
<p>Other normal view predicates can also be used in combination with an
exception view registration:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="kn">import</span> <span class="n">bfg_view</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.exceptions</span> <span class="kn">import</span> <span class="n">NotFound</span>
<span class="kn">from</span> <span class="nn">webob.exc</span> <span class="kn">import</span> <span class="n">HTTPNotFound</span>

<span class="nd">@bfg_view</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s">&#39;home&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">notfound_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HTTPNotFound</span><span class="p">()</span>
</pre></div>
</div>
<p>The above exception view names the <tt class="docutils literal"><span class="pre">route_name</span></tt> of <tt class="docutils literal"><span class="pre">home</span></tt>,
meaning that it will only be called when the route matched has a
name of <tt class="docutils literal"><span class="pre">home</span></tt>.  You can therefore have more than one exception
view for any given exception in the system: the &quot;most specific&quot; one
will be called when the set of request circumstances which match the
view registration.  The only predicate that cannot be not be used
successfully is <tt class="docutils literal"><span class="pre">name</span></tt>.  The name used to look up an exception
view is always the empty string.</p>
<p>Existing (pre-1.3) normal views registered against objects
inheriting from <tt class="docutils literal"><span class="pre">Exception</span></tt> will continue to work.  Exception
views used for user-defined exceptions and system exceptions used as
contexts will also work.</p>
<p>The feature can be used with any view registration mechanism
(<tt class="docutils literal"><span class="pre">&#64;bfg_view</span></tt> decorator, ZCML, or imperative <tt class="docutils literal"><span class="pre">config.add_view</span></tt>
styles).</p>
<p>This feature was kindly contributed by Andrey Popp.</p>
</li>
<li><p class="first">Use &quot;Venusian&quot; (<a class="reference external" href="http://docs.repoze.org/venusian">http://docs.repoze.org/venusian</a>) to perform <tt class="docutils literal"><span class="pre">bfg_view</span></tt>
decorator scanning rather than relying on a BFG-internal decorator
scanner.  (Truth be told, Venusian is really just a generalization
of the BFG-internal decorator scanner).</p>
</li>
<li><p class="first">Internationalization and localization features as documented in the
narrative documentation chapter entitled <tt class="docutils literal"><span class="pre">Internationalization</span> <span class="pre">and</span>
<span class="pre">Localization</span></tt>.</p>
</li>
<li><p class="first">A new deployment setting named <tt class="docutils literal"><span class="pre">default_locale_name</span></tt> was added.
If this string is present as a Paster <tt class="docutils literal"><span class="pre">.ini</span></tt> file option, it will
be considered the default locale name.  The default locale name is
used during locale-related operations such as language translation.</p>
</li>
<li><p class="first">It is now possible to turn on Chameleon template &quot;debugging mode&quot;
for all Chameleon BFG templates by setting a BFG-related Paster
<tt class="docutils literal"><span class="pre">.ini</span></tt> file setting named <tt class="docutils literal"><span class="pre">debug_templates</span></tt>. The exceptions
raised by Chameleon templates when a rendering fails are sometimes
less than helpful.  <tt class="docutils literal"><span class="pre">debug_templates</span></tt> allows you to configure your
application development environment so that exceptions generated by
Chameleon during template compilation and execution will contain
more helpful debugging information.  This mode is on by default in
all new projects.</p>
</li>
<li><p class="first">Add a new method of the Configurator named <tt class="docutils literal"><span class="pre">derive_view</span></tt> which can
be used to generate a BFG view callable from a user-supplied
function, instance, or class. This useful for external framework and
plugin authors wishing to wrap callables supplied by their users
which follow the same calling conventions and response conventions
as objects that can be supplied directly to BFG as a view callable.
See the <tt class="docutils literal"><span class="pre">derive_view</span></tt> method in the
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator</span></tt> docs.</p>
</li>
</ul>
</div>
<div class="section" id="zcml">
<h3>ZCML<a class="headerlink" href="#zcml" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">translationdir</span></tt> ZCML directive to support localization.</li>
<li>Add a <tt class="docutils literal"><span class="pre">localenegotiator</span></tt> ZCML directive to support localization.</li>
</ul>
</div>
<div class="section" id="id236">
<h3>Deprecations<a class="headerlink" href="#id236" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The exception views feature replaces the need for the
<tt class="docutils literal"><span class="pre">set_notfound_view</span></tt> and <tt class="docutils literal"><span class="pre">set_forbidden_view</span></tt> methods of the
<tt class="docutils literal"><span class="pre">Configurator</span></tt> as well as the <tt class="docutils literal"><span class="pre">notfound</span></tt> and <tt class="docutils literal"><span class="pre">forbidden</span></tt> ZCML
directives.  Those methods and directives will continue to work for
the foreseeable future, but they are deprecated in the
documentation.</li>
</ul>
</div>
<div class="section" id="id237">
<h3>Dependencies<a class="headerlink" href="#id237" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A new install-time dependency on the <tt class="docutils literal"><span class="pre">venusian</span></tt> distribution was
added.</li>
<li>A new install-time dependency on the <tt class="docutils literal"><span class="pre">translationstring</span></tt>
distribution was added.</li>
<li>Chameleon 1.2.3 or better is now required (internationalization and
per-template debug settings).</li>
</ul>
</div>
<div class="section" id="id238">
<h3>Internal<a class="headerlink" href="#id238" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>View registrations and lookups are now done with three &quot;requires&quot;
arguments instead of two to accomodate orthogonality of exception
views.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IForbiddenView</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INotFoundView</span></tt> interfaces were removed;
they weren't APIs and they became vestigial with the addition of
exception views.</li>
<li>Remove <tt class="docutils literal"><span class="pre">repoze.bfg.compat.pkgutil_26.py</span></tt> and import alias
<tt class="docutils literal"><span class="pre">repoze.bfg.compat.walk_packages</span></tt>.  These were only required by
internal scanning machinery; Venusian replaced the internal scanning
machinery, so these are no longer required.</li>
</ul>
</div>
<div class="section" id="id239">
<h3>Documentation<a class="headerlink" href="#id239" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Exception view documentation was added to the <tt class="docutils literal"><span class="pre">Hooks</span></tt> narrative
chapter.</li>
<li>A new narrative chapter entitled <tt class="docutils literal"><span class="pre">Internationalization</span> <span class="pre">and</span>
<span class="pre">Localization</span></tt> was added.</li>
<li>The &quot;Environment Variables and <tt class="docutils literal"><span class="pre">ini</span></tt> File Settings&quot; chapter was
changed: documentation about the <tt class="docutils literal"><span class="pre">default_locale_name</span></tt> setting was
added.</li>
<li>A new API chapter for the <tt class="docutils literal"><span class="pre">repoze.bfg.i18n</span></tt> module was added.</li>
<li>Documentation for the new <tt class="docutils literal"><span class="pre">translationdir</span></tt> and
<tt class="docutils literal"><span class="pre">localenegotiator</span></tt> ZCML directives were added.</li>
<li>A section was added to the Templates chapter entitled &quot;Nicer
Exceptions in Templates&quot; describing the result of setting
<tt class="docutils literal"><span class="pre">debug_templates</span> <span class="pre">=</span> <span class="pre">true</span></tt>.</li>
</ul>
</div>
<div class="section" id="id240">
<h3>Paster Templates<a class="headerlink" href="#id240" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All paster templates now create a <tt class="docutils literal"><span class="pre">setup.cfg</span></tt> which includes
commands related to nose testing and Babel message catalog
extraction/compilation.</li>
<li>A <tt class="docutils literal"><span class="pre">default_locale_name</span> <span class="pre">=</span> <span class="pre">en</span></tt> setting was added to each existing paster
template.</li>
<li>A <tt class="docutils literal"><span class="pre">debug_templates</span> <span class="pre">=</span> <span class="pre">true</span></tt> setting was added to each existing
paster template.</li>
</ul>
</div>
<div class="section" id="licensing">
<h3>Licensing<a class="headerlink" href="#licensing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The Edgewall (BSD) license was added to the LICENSES.txt file, as
some code in the <tt class="docutils literal"><span class="pre">repoze.bfg.i18n</span></tt> derives from Babel source.</li>
</ul>
</div>
</div>
<div class="section" id="id241">
<h2>1.2 (2010-02-10)<a class="headerlink" href="#id241" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>No changes from 1.2b6.</li>
</ul>
</div>
<div class="section" id="b6-2010-02-06">
<h2>1.2b6 (2010-02-06)<a class="headerlink" href="#b6-2010-02-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id242">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id242" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove magical feature of <tt class="docutils literal"><span class="pre">repoze.bfg.url.model_url</span></tt> which
prepended a fully-expanded urldispatch route URL before a the
model's path if it was noticed that the request had matched a route.
This feature was ill-conceived, and didn't work in all scenarios.</li>
</ul>
</div>
<div class="section" id="id243">
<h3>Bug Fixes<a class="headerlink" href="#id243" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>More correct conversion of provided <tt class="docutils literal"><span class="pre">renderer</span></tt> values to resource
specification values (internal).</li>
</ul>
</div>
</div>
<div class="section" id="b5-2010-02-04">
<h2>1.2b5 (2010-02-04)<a class="headerlink" href="#b5-2010-02-04" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id244">
<h3>Bug Fixes<a class="headerlink" href="#id244" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>1.2b4 introduced a bug whereby views added via a route configuration
that named a view callable and also a <tt class="docutils literal"><span class="pre">view_attr</span></tt> became broken.
Symptom: <tt class="docutils literal"><span class="pre">MyViewClass</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">callable</span></tt> or the <tt class="docutils literal"><span class="pre">__call__</span></tt> of a
class was being called instead of the method named via
<tt class="docutils literal"><span class="pre">view_attr</span></tt>.</li>
<li>Fix a bug whereby a <tt class="docutils literal"><span class="pre">renderer</span></tt> argument to the <tt class="docutils literal"><span class="pre">&#64;bfg_view</span></tt>
decorator that provided a package-relative template filename might
not have been resolved properly.  Symptom: inappropriate <tt class="docutils literal"><span class="pre">Missing</span>
<span class="pre">template</span> <span class="pre">resource</span></tt> errors.</li>
</ul>
</div>
</div>
<div class="section" id="b4-2010-02-03">
<h2>1.2b4 (2010-02-03)<a class="headerlink" href="#b4-2010-02-03" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id245">
<h3>Documentation<a class="headerlink" href="#id245" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Update GAE tutorial to use Chameleon instead of Jinja2 (now that
it's possible).</li>
</ul>
</div>
<div class="section" id="id246">
<h3>Bug Fixes<a class="headerlink" href="#id246" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Ensure that <tt class="docutils literal"><span class="pre">secure</span></tt> flag for AuthTktAuthenticationPolicy
constructor does what it's documented to do (merge Daniel Holth's
fancy-cookies-2 branch).</li>
</ul>
</div>
<div class="section" id="id247">
<h3>Features<a class="headerlink" href="#id247" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">path</span></tt> and <tt class="docutils literal"><span class="pre">http_only</span></tt> options to
AuthTktAuthenticationPolicy constructor (merge Daniel Holth's
fancy-cookies-2 branch).</li>
</ul>
</div>
<div class="section" id="id248">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id248" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">view_header</span></tt>, <tt class="docutils literal"><span class="pre">view_accept</span></tt>, <tt class="docutils literal"><span class="pre">view_xhr</span></tt>,
<tt class="docutils literal"><span class="pre">view_path_info</span></tt>, <tt class="docutils literal"><span class="pre">view_request_method</span></tt>, <tt class="docutils literal"><span class="pre">view_request_param</span></tt>,
and <tt class="docutils literal"><span class="pre">view_containment</span></tt> predicate arguments from the
<tt class="docutils literal"><span class="pre">Configurator.add_route</span></tt> argument list.  These arguments were
speculative.  If you need the features exposed by these arguments,
add a view associated with a route using the <tt class="docutils literal"><span class="pre">route_name</span></tt> argument
to the <tt class="docutils literal"><span class="pre">add_view</span></tt> method instead.</li>
<li>Remove <tt class="docutils literal"><span class="pre">view_header</span></tt>, <tt class="docutils literal"><span class="pre">view_accept</span></tt>, <tt class="docutils literal"><span class="pre">view_xhr</span></tt>,
<tt class="docutils literal"><span class="pre">view_path_info</span></tt>, <tt class="docutils literal"><span class="pre">view_request_method</span></tt>, <tt class="docutils literal"><span class="pre">view_request_param</span></tt>,
and <tt class="docutils literal"><span class="pre">view_containment</span></tt> predicate arguments from the <tt class="docutils literal"><span class="pre">route</span></tt> ZCML
directive attribute set.  These attributes were speculative.  If you
need the features exposed by these attributes, add a view associated
with a route using the <tt class="docutils literal"><span class="pre">route_name</span></tt> attribute of the <tt class="docutils literal"><span class="pre">view</span></tt> ZCML
directive instead.</li>
</ul>
</div>
<div class="section" id="id249">
<h3>Dependencies<a class="headerlink" href="#id249" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove dependency on <tt class="docutils literal"><span class="pre">sourcecodegen</span></tt> (not depended upon by
Chameleon 1.1.1+).</li>
</ul>
</div>
</div>
<div class="section" id="b3-2010-01-24">
<h2>1.2b3 (2010-01-24)<a class="headerlink" href="#b3-2010-01-24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id250">
<h3>Bug Fixes<a class="headerlink" href="#id250" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When &quot;hybrid mode&quot; (both traversal and urldispatch) is in use,
default to finding route-related views even if a non-route-related
view registration has been made with a more specific context.  The
default used to be to find views with a more specific context first.
Use the new <tt class="docutils literal"><span class="pre">use_global_views</span></tt> argument to the route definition to
get back the older behavior.</li>
</ul>
</div>
<div class="section" id="id251">
<h3>Features<a class="headerlink" href="#id251" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">use_global_views</span></tt> argument to <tt class="docutils literal"><span class="pre">add_route</span></tt> method of
Configurator.  When this argument is true, views registered for <em>no</em>
route will be found if no more specific view related to the route is
found.</li>
<li>Add <tt class="docutils literal"><span class="pre">use_global_views</span></tt> attribute to ZCML <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> directive
(see above).</li>
</ul>
</div>
<div class="section" id="id252">
<h3>Internal<a class="headerlink" href="#id252" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When registering a view, register the view adapter with the
&quot;requires&quot; interfaces as <tt class="docutils literal"><span class="pre">(request_type,</span> <span class="pre">context_type)</span></tt> rather
than <tt class="docutils literal"><span class="pre">(context_type,</span> <span class="pre">request_type)</span></tt>.  This provides for saner
lookup, because the registration will always be made with a specific
request interface, but registration may not be made with a specific
context interface.  In general, when creating multiadapters, you
want to order the requires interfaces so that the elements which
are more likely to be registered using specific interfaces are
ordered before those which are less likely.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2010-01-21">
<h2>1.2b2 (2010-01-21)<a class="headerlink" href="#b2-2010-01-21" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id253">
<h3>Bug Fixes<a class="headerlink" href="#id253" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When the <tt class="docutils literal"><span class="pre">Configurator</span></tt> is passed an instance of
<tt class="docutils literal"><span class="pre">zope.component.registry.Components</span></tt> as a <tt class="docutils literal"><span class="pre">registry</span></tt> constructor
argument, fix the instance up to have the attributes we expect of an
instance of <tt class="docutils literal"><span class="pre">repoze.bfg.registry.Registry</span></tt> when <tt class="docutils literal"><span class="pre">setup_registry</span></tt>
is called.  This makes it possible to use the global Zope component
registry as a BFG application registry.</li>
<li>When WebOb 0.9.7.1 was used, a deprecation warning was issued for
the class attribute named <tt class="docutils literal"><span class="pre">charset</span></tt> within
<tt class="docutils literal"><span class="pre">repoze.bfg.request.Request</span></tt>.  BFG now <em>requires</em> WebOb &gt;= 0.9.7,
and code was added so that this deprecation warning has disappeared.</li>
<li>Fix a view lookup ordering bug whereby a view with a larger number
of predicates registered first (literally first, not &quot;earlier&quot;) for
a triad would lose during view lookup to one registered with fewer.</li>
<li>Make sure views with exactly N custom predicates are always called
before views with exactly N non-custom predicates given all else is
equal in the view configuration.</li>
</ul>
</div>
<div class="section" id="id254">
<h3>Documentation<a class="headerlink" href="#id254" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Change renderings of ZCML directive documentation.</li>
<li>Add a narrative documentation chapter: &quot;Using the Zope Component
Architecture in repoze.bfg&quot;.</li>
</ul>
</div>
<div class="section" id="id255">
<h3>Dependencies<a class="headerlink" href="#id255" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Require WebOb &gt;= 0.9.7</li>
</ul>
</div>
</div>
<div class="section" id="b1-2010-01-18">
<h2>1.2b1 (2010-01-18)<a class="headerlink" href="#b1-2010-01-18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id256">
<h3>Bug Fixes<a class="headerlink" href="#id256" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In <tt class="docutils literal"><span class="pre">bfg_routesalchemy</span></tt>, <tt class="docutils literal"><span class="pre">bfg_alchemy</span></tt> paster templates and the
<tt class="docutils literal"><span class="pre">bfgwiki2</span></tt> tutorial, clean up the SQLAlchemy connection by
registering a <tt class="docutils literal"><span class="pre">repoze.tm.after_end</span></tt> callback instead of relying on
a <tt class="docutils literal"><span class="pre">__del__</span></tt> method of a <tt class="docutils literal"><span class="pre">Cleanup</span></tt> class added to the WSGI
environment.  The <tt class="docutils literal"><span class="pre">__del__</span></tt> strategy was fragile and caused
problems in the wild.  Thanks to Daniel Holth for testing.</li>
</ul>
</div>
<div class="section" id="id257">
<h3>Features<a class="headerlink" href="#id257" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Read logging configuration from PasteDeploy config file <tt class="docutils literal"><span class="pre">loggers</span></tt>
section (and related) when <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">bfgshell</span></tt> is invoked.</li>
</ul>
</div>
<div class="section" id="id258">
<h3>Documentation<a class="headerlink" href="#id258" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Major rework in preparation for book publication.</li>
</ul>
</div>
</div>
<div class="section" id="a11-2010-01-05">
<h2>1.2a11 (2010-01-05)<a class="headerlink" href="#a11-2010-01-05" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id259">
<h3>Bug Fixes<a class="headerlink" href="#id259" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">bfgshell</span></tt> and <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">create</span> <span class="pre">-t</span> <span class="pre">bfg_xxx</span></tt> work on
Jython (fix minor incompatibility with treatment of <tt class="docutils literal"><span class="pre">__doc__</span></tt> at
the class level).</li>
<li>Updated dependency on <tt class="docutils literal"><span class="pre">WebOb</span></tt> to require a version which supports
features now used in tests.</li>
</ul>
</div>
<div class="section" id="id260">
<h3>Features<a class="headerlink" href="#id260" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Jython compatibility (at least when repoze.bfg.jinja2 is used as the
templating engine; Chameleon does not work under Jython).</li>
<li>Show the derived abspath of template resource specifications in the
traceback when a renderer template cannot be found.</li>
<li>Show the original traceback when a Chameleon template cannot be
rendered due to a platform incompatibility.</li>
</ul>
</div>
</div>
<div class="section" id="a10-2010-01-04">
<h2>1.2a10 (2010-01-04)<a class="headerlink" href="#a10-2010-01-04" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id261">
<h3>Features<a class="headerlink" href="#id261" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">Configurator.add_view</span></tt> method now accepts an argument named
<tt class="docutils literal"><span class="pre">context</span></tt>.  This is an alias for the older argument named
<tt class="docutils literal"><span class="pre">for_</span></tt>; it is preferred over <tt class="docutils literal"><span class="pre">for_</span></tt>, but <tt class="docutils literal"><span class="pre">for_</span></tt> will continue
to be supported &quot;forever&quot;.</li>
<li>The <tt class="docutils literal"><span class="pre">view</span></tt> ZCML directive now accepts an attribute named
<tt class="docutils literal"><span class="pre">context</span></tt>.  This is an alias for the older attribute named
<tt class="docutils literal"><span class="pre">for</span></tt>; it is preferred over <tt class="docutils literal"><span class="pre">for</span></tt>, but <tt class="docutils literal"><span class="pre">for</span></tt> will continue to
be supported &quot;forever&quot;.</li>
<li>The <tt class="docutils literal"><span class="pre">Configurator.add_route</span></tt> method now accepts an argument named
<tt class="docutils literal"><span class="pre">view_context</span></tt>.  This is an alias for the older argument named
<tt class="docutils literal"><span class="pre">view_for</span></tt>; it is preferred over <tt class="docutils literal"><span class="pre">view_for</span></tt>, but <tt class="docutils literal"><span class="pre">view_for</span></tt>
will continue to be supported &quot;forever&quot;.</li>
<li>The <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive now accepts an attribute named
<tt class="docutils literal"><span class="pre">view_context</span></tt>.  This is an alias for the older attribute named
<tt class="docutils literal"><span class="pre">view_for</span></tt>; it is preferred over <tt class="docutils literal"><span class="pre">view_for</span></tt>, but <tt class="docutils literal"><span class="pre">view_for</span></tt>
will continue to be supported &quot;forever&quot;.</li>
</ul>
</div>
<div class="section" id="documentation-and-paster-templates">
<h3>Documentation and Paster Templates<a class="headerlink" href="#documentation-and-paster-templates" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LaTeX rendering tweaks.</li>
<li>All uses of the <tt class="docutils literal"><span class="pre">Configurator.add_view</span></tt> method that used its
<tt class="docutils literal"><span class="pre">for_</span></tt> argument now use the <tt class="docutils literal"><span class="pre">context</span></tt> argument instead.</li>
<li>All uses of the <tt class="docutils literal"><span class="pre">Configurator.add_route</span></tt> method that used its
<tt class="docutils literal"><span class="pre">view_for</span></tt> argument now use the <tt class="docutils literal"><span class="pre">view_context</span></tt> argument instead.</li>
<li>All uses of the <tt class="docutils literal"><span class="pre">view</span></tt> ZCML directive that used its <tt class="docutils literal"><span class="pre">for</span></tt>
attribute now use the <tt class="docutils literal"><span class="pre">context</span></tt> attribute instead.</li>
<li>All uses of the <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive that used its <tt class="docutils literal"><span class="pre">view_for</span></tt>
attribute now use the <tt class="docutils literal"><span class="pre">view_context</span></tt> attribute instead.</li>
<li>Add a (minimal) tutorial dealing with use of <tt class="docutils literal"><span class="pre">repoze.catalog</span></tt> in a
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> application.</li>
</ul>
</div>
<div class="section" id="documentation-licensing">
<h3>Documentation Licensing<a class="headerlink" href="#documentation-licensing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Loosen the documentation licensing to allow derivative works: it is
now offered under the <a class="reference external" href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">Creative Commons
Attribution-Noncommercial-Share Alike 3.0 United States License</a>.  This is
only a documentation licensing change; the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> software
continues to be offered under the Repoze Public License at
<a class="reference external" href="http://repoze.org/license.html">http://repoze.org/license.html</a> (BSD-like).</li>
</ul>
</div>
</div>
<div class="section" id="a9-2009-12-27">
<h2>1.2a9 (2009-12-27)<a class="headerlink" href="#a9-2009-12-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id262">
<h3>Documentation Licensing<a class="headerlink" href="#id262" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <em>documentation</em> (the result of <tt class="docutils literal"><span class="pre">make</span> <span class="pre">&lt;html|latex|htmlhelp&gt;</span></tt>
within the <tt class="docutils literal"><span class="pre">docs</span></tt> directory) in this release is now offered under
the Creative Commons Attribution-Noncommercial-No Derivative Works
3.0 United States License as described by
<a class="reference external" href="http://creativecommons.org/licenses/by-nc-nd/3.0/us/">http://creativecommons.org/licenses/by-nc-nd/3.0/us/</a> .  This is only
a licensing change for the documentation; the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>
software continues to be offered under the Repoze Public License
at <a class="reference external" href="http://repoze.org/license.html">http://repoze.org/license.html</a> (BSD-like).</li>
</ul>
</div>
<div class="section" id="id263">
<h3>Documentation<a class="headerlink" href="#id263" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added manual index entries to generated index.</li>
<li>Document the previously existing (but non-API)
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.setup_registry</span></tt> method as
an official API of a <tt class="docutils literal"><span class="pre">Configurator</span></tt>.</li>
<li>Fix syntax errors in various documentation code blocks.</li>
<li>Created new top-level documentation section: &quot;ZCML Directives&quot;.
This section contains detailed ZCML directive information, some of
which was removed from various narrative chapters.</li>
<li>The LaTeX rendering of the documentation has been improved.</li>
<li>Added a &quot;Fore-Matter&quot; section with author, copyright, and licensing
information.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2009-12-24">
<h2>1.2a8 (2009-12-24)<a class="headerlink" href="#a8-2009-12-24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id264">
<h3>Features<a class="headerlink" href="#id264" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">**kw</span></tt> arg to the <tt class="docutils literal"><span class="pre">Configurator.add_settings</span></tt> API.</li>
<li>Add <tt class="docutils literal"><span class="pre">hook_zca</span></tt> and <tt class="docutils literal"><span class="pre">unhook_zca</span></tt> methods to the <tt class="docutils literal"><span class="pre">Configurator</span></tt>
API.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt> method now returns a
<tt class="docutils literal"><span class="pre">Configurator</span></tt> instance which can be used to do further
configuration during unit tests.</li>
</ul>
</div>
<div class="section" id="id265">
<h3>Bug Fixes<a class="headerlink" href="#id265" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">json</span></tt> renderer failed to set the response content type to
<tt class="docutils literal"><span class="pre">application/json</span></tt>.  It now does, by setting
<tt class="docutils literal"><span class="pre">request.response_content_type</span></tt> unless this attribute is already
set.</li>
<li>The <tt class="docutils literal"><span class="pre">string</span></tt> renderer failed to set the response content type to
<tt class="docutils literal"><span class="pre">text/plain</span></tt>.  It now does, by setting
<tt class="docutils literal"><span class="pre">request.response_content_type</span></tt> unless this attribute is already
set.</li>
</ul>
</div>
<div class="section" id="id266">
<h3>Documentation<a class="headerlink" href="#id266" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>General documentation improvements by using better Sphinx roles such
as &quot;class&quot;, &quot;func&quot;, &quot;meth&quot;, and so on.  This means that there are
many more hyperlinks pointing to API documentation for API
definitions in all narrative, tutorial, and API documentation
elements.</li>
<li>Added a description of imperative configuration in various places
which only described ZCML configuration.</li>
<li>A syntactical refreshing of various tutorials.</li>
<li>Added the <tt class="docutils literal"><span class="pre">repoze.bfg.authentication</span></tt>,
<tt class="docutils literal"><span class="pre">repoze.bfg.authorization</span></tt>, and <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces</span></tt> modules
to API documentation.</li>
</ul>
</div>
<div class="section" id="id267">
<h3>Deprecations<a class="headerlink" href="#id267" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerRoutesMapper</span></tt> API (added in an
early 1.2 alpha) was deprecated.  Its import now generates a
deprecation warning.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-12-20">
<h2>1.2a7 (2009-12-20)<a class="headerlink" href="#a7-2009-12-20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id268">
<h3>Features<a class="headerlink" href="#id268" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add four new testing-related APIs to the
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator</span></tt> class:
<tt class="docutils literal"><span class="pre">testing_securitypolicy</span></tt>, <tt class="docutils literal"><span class="pre">testing_models</span></tt>,
<tt class="docutils literal"><span class="pre">testing_add_subscriber</span></tt>, and <tt class="docutils literal"><span class="pre">testing_add_template</span></tt>.  These
were added in order to provide more direct access to the
functionality of the <tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt> APIs named
<tt class="docutils literal"><span class="pre">registerDummySecurityPolicy</span></tt>, <tt class="docutils literal"><span class="pre">registerModels</span></tt>,
<tt class="docutils literal"><span class="pre">registerEventListener</span></tt>, and <tt class="docutils literal"><span class="pre">registerTemplateRenderer</span></tt> when a
configurator is used.  The <tt class="docutils literal"><span class="pre">testing</span></tt> APIs named are nominally
deprecated (although they will likely remain around &quot;forever&quot;, as
they are in heavy use in the wild).</li>
<li>Add a new API to the <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator</span></tt>
class: <tt class="docutils literal"><span class="pre">add_settings</span></tt>.  This API can be used to add &quot;settings&quot;
(information returned within via the
<tt class="docutils literal"><span class="pre">repoze.bfg.settings.get_settings</span></tt> API) after the configurator has
been initially set up.  This is most useful for testing purposes.</li>
<li>Add a <tt class="docutils literal"><span class="pre">custom_predicates</span></tt> argument to the <tt class="docutils literal"><span class="pre">Configurator</span></tt>
<tt class="docutils literal"><span class="pre">add_view</span></tt> method, the <tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorator and the attribute
list of the ZCML <tt class="docutils literal"><span class="pre">view</span></tt> directive.  If <tt class="docutils literal"><span class="pre">custom_predicates</span></tt> is
specified, it must be a sequence of predicate callables (a predicate
callable accepts two arguments: <tt class="docutils literal"><span class="pre">context</span></tt> and <tt class="docutils literal"><span class="pre">request</span></tt> and
returns <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>).  The associated view callable will
only be invoked if all custom predicates return <tt class="docutils literal"><span class="pre">True</span></tt>.  Use one
or more custom predicates when no existing predefined predicate is
useful.  Predefined and custom predicates can be mixed freely.</li>
<li>Add a <tt class="docutils literal"><span class="pre">custom_predicates</span></tt> argument to the <tt class="docutils literal"><span class="pre">Configurator</span></tt>
<tt class="docutils literal"><span class="pre">add_route</span></tt> and the attribute list of the ZCML <tt class="docutils literal"><span class="pre">route</span></tt>
directive.  If <tt class="docutils literal"><span class="pre">custom_predicates</span></tt> is specified, it must be a
sequence of predicate callables (a predicate callable accepts two
arguments: <tt class="docutils literal"><span class="pre">context</span></tt> and <tt class="docutils literal"><span class="pre">request</span></tt> and returns <tt class="docutils literal"><span class="pre">True</span></tt> or
<tt class="docutils literal"><span class="pre">False</span></tt>).  The associated route will match will only be invoked if
all custom predicates return <tt class="docutils literal"><span class="pre">True</span></tt>, else route matching
continues.  Note that the value <tt class="docutils literal"><span class="pre">context</span></tt> will always be <tt class="docutils literal"><span class="pre">None</span></tt>
when passed to a custom route predicate.  Use one or more custom
predicates when no existing predefined predicate is useful.
Predefined and custom predicates can be mixed freely.</li>
</ul>
</div>
<div class="section" id="id269">
<h3>Internal<a class="headerlink" href="#id269" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove the <tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerTraverser</span></tt> function.  This
function was never an API.</li>
</ul>
</div>
<div class="section" id="documenation">
<h3>Documenation<a class="headerlink" href="#documenation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Doc-deprecated most helper functions in the <tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt>
module.  These helper functions likely won't be removed any time
soon, nor will they generate a warning any time soon, due to their
heavy use in the wild, but equivalent behavior exists in methods of
a Configurator.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-12-18">
<h2>1.2a6 (2009-12-18)<a class="headerlink" href="#a6-2009-12-18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id270">
<h3>Features<a class="headerlink" href="#id270" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">Configurator</span></tt> object now has two new methods: <tt class="docutils literal"><span class="pre">begin</span></tt> and
<tt class="docutils literal"><span class="pre">end</span></tt>.  The <tt class="docutils literal"><span class="pre">begin</span></tt> method is meant to be called before any
&quot;configuration&quot; begins (e.g. before <tt class="docutils literal"><span class="pre">add_view</span></tt>, et. al are
called).  The <tt class="docutils literal"><span class="pre">end</span></tt> method is meant to be called after all
&quot;configuration&quot; is complete.</p>
<p>Previously, before there was imperative configuration at all (1.1
and prior), configuration begin and end was invariably implied by
the process of loading a ZCML file.  When a ZCML load happened, the
threadlocal data structure containing the request and registry was
modified before the load, and torn down after the load, making sure
that all framework code that needed <tt class="docutils literal"><span class="pre">get_current_registry</span></tt> for the
duration of the ZCML load was satisfied.</p>
<p>Some API methods called during imperative configuration, (such as
<tt class="docutils literal"><span class="pre">Configurator.add_view</span></tt> when a renderer is involved) end up for
historical reasons calling <tt class="docutils literal"><span class="pre">get_current_registry</span></tt>.  However, in
1.2a5 and below, the Configurator supplied no functionality that
allowed people to make sure that <tt class="docutils literal"><span class="pre">get_current_registry</span></tt> returned
the registry implied by the configurator being used.  <tt class="docutils literal"><span class="pre">begin</span></tt> now
serves this purpose.  Inversely, <tt class="docutils literal"><span class="pre">end</span></tt> pops the thread local
stack, undoing the actions of <tt class="docutils literal"><span class="pre">begin</span></tt>.</p>
<p>We make this boundary explicit to reduce the potential for confusion
when the configurator is used in different circumstances (e.g. in
unit tests and app code vs. just in initial app setup).</p>
<p>Existing code written for 1.2a1-1.2a5 which does not call <tt class="docutils literal"><span class="pre">begin</span></tt>
or <tt class="docutils literal"><span class="pre">end</span></tt> continues to work in the same manner it did before.  It
is however suggested that this code be changed to call <tt class="docutils literal"><span class="pre">begin</span></tt> and
<tt class="docutils literal"><span class="pre">end</span></tt> to reduce the potential for confusion in the future.</p>
</li>
<li><p class="first">All <tt class="docutils literal"><span class="pre">paster</span></tt> templates which generate an application skeleton now
make use of the new <tt class="docutils literal"><span class="pre">begin</span></tt> and <tt class="docutils literal"><span class="pre">end</span></tt> methods of the
Configurator they use in their respective copies of <tt class="docutils literal"><span class="pre">run.py</span></tt> and
<tt class="docutils literal"><span class="pre">tests.py</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id271">
<h3>Documentation<a class="headerlink" href="#id271" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All documentation that makes use of a <tt class="docutils literal"><span class="pre">Configurator</span></tt> object to do
application setup and test setup now makes use of the new <tt class="docutils literal"><span class="pre">begin</span></tt>
and <tt class="docutils literal"><span class="pre">end</span></tt> methods of the configurator.</li>
</ul>
</div>
<div class="section" id="id272">
<h3>Bug Fixes<a class="headerlink" href="#id272" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When a <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.NotFound</span></tt> or
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.Forbidden</span></tt> <em>class</em> (as opposed to instance)
was raised as an exception within a root factory (or route root
factory), the exception would not be caught properly by the
<tt class="docutils literal"><span class="pre">repoze.bfg.</span></tt> Router and it would propagate to up the call stack,
as opposed to rendering the not found view or the forbidden view as
would have been expected.</li>
<li>When Chameleon page or text templates used as renderers were added
imperatively (via <tt class="docutils literal"><span class="pre">Configurator.add_view</span></tt> or some derivative),
they too-eagerly attempted to look up the <tt class="docutils literal"><span class="pre">reload_templates</span></tt>
setting via <tt class="docutils literal"><span class="pre">get_settings</span></tt>, meaning they were always registered in
non-auto-reload-mode (the default).  Each now waits until its
respective <tt class="docutils literal"><span class="pre">template</span></tt> attribute is accessed to look up the value.</li>
<li>When a route with the same name as a previously registered route was
added, the old route was not removed from the mapper's routelist.
Symptom: the old registered route would be used (and possibly
matched) during route lookup when it should not have had a chance to
ever be used.</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-12-10">
<h2>1.2a5 (2009-12-10)<a class="headerlink" href="#a5-2009-12-10" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id273">
<h3>Features<a class="headerlink" href="#id273" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When the <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.NotFound</span></tt> or
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.Forbidden</span></tt> error is raised from within a
custom root factory or the <tt class="docutils literal"><span class="pre">factory</span></tt> of a route, the appropriate
response is now sent to the requesting user agent (the result of the
notfound view or the forbidden view, respectively).  When these
errors are raised from within a root factory, the <tt class="docutils literal"><span class="pre">context</span></tt> passed
to the notfound or forbidden view will be <tt class="docutils literal"><span class="pre">None</span></tt>.  Also, the
request will not be decorated with <tt class="docutils literal"><span class="pre">view_name</span></tt>, <tt class="docutils literal"><span class="pre">subpath</span></tt>,
<tt class="docutils literal"><span class="pre">context</span></tt>, etc. as would normally be the case if traversal had
been allowed to take place.</li>
</ul>
</div>
<div class="section" id="id274">
<h3>Internals<a class="headerlink" href="#id274" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The exception class representing the error raised by various methods
of a <tt class="docutils literal"><span class="pre">Configurator</span></tt> is now importable as
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.ConfigurationError</span></tt>.</li>
</ul>
</div>
<div class="section" id="id275">
<h3>Documentation<a class="headerlink" href="#id275" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>General documentation freshening which takes imperative
configuration into account in more places and uses glossary
references more liberally.</li>
<li>Remove explanation of changing the request type in a new request
event subscriber, as other predicates are now usually an easier way
to get this done.</li>
<li>Added &quot;Thread Locals&quot; narrative chapter to documentation, and added
a API chapter documenting the <tt class="docutils literal"><span class="pre">repoze.bfg.threadlocals</span></tt> module.</li>
<li>Added a &quot;Special Exceptions&quot; section to the &quot;Views&quot; narrative
documentation chapter explaining the effect of raising
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.NotFound</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.Forbidden</span></tt> from within view code.</li>
</ul>
</div>
<div class="section" id="id276">
<h3>Dependencies<a class="headerlink" href="#id276" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A new dependency on the <tt class="docutils literal"><span class="pre">twill</span></tt> package was added to the
<tt class="docutils literal"><span class="pre">setup.py</span></tt> <tt class="docutils literal"><span class="pre">tests_require</span></tt> argument (Twill will only be
downloaded when <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> <tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">test</span></tt> or <tt class="docutils literal"><span class="pre">setup.py</span>
<span class="pre">nosetests</span></tt> is invoked).</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-12-07">
<h2>1.2a4 (2009-12-07)<a class="headerlink" href="#a4-2009-12-07" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id277">
<h3>Features<a class="headerlink" href="#id277" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">repoze.bfg.testing.DummyModel</span></tt> now accepts a new constructor
keyword argument: <tt class="docutils literal"><span class="pre">__provides__</span></tt>.  If this constructor argument is
provided, it should be an interface or a tuple of interfaces.  The
resulting model will then provide these interfaces (they will be
attached to the constructed model via
<tt class="docutils literal"><span class="pre">zope.interface.alsoProvides</span></tt>).</li>
</ul>
</div>
<div class="section" id="id278">
<h3>Bug Fixes<a class="headerlink" href="#id278" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Operation on GAE was broken, presumably because the
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration</span></tt> module began to attempt to import the
<tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt</span></tt> and <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_text</span></tt>
modules, and these cannot be used on non-CPython platforms.  It now
tolerates startup time import failures for these modules, and only
raise an import error when a template from one of these packages is
actually used.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-12-02">
<h2>1.2a3 (2009-12-02)<a class="headerlink" href="#a3-2009-12-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id279">
<h3>Bug Fixes<a class="headerlink" href="#id279" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.url.route_url</span></tt> function inappropriately passed
along <tt class="docutils literal"><span class="pre">_query</span></tt> and/or <tt class="docutils literal"><span class="pre">_anchor</span></tt> arguments to the
<tt class="docutils literal"><span class="pre">mapper.generate</span></tt> function, resulting in blowups.</li>
<li>When two views were registered with differering <tt class="docutils literal"><span class="pre">for</span></tt> interfaces
or classes, and the <tt class="docutils literal"><span class="pre">for</span></tt> of first view registered was a
superclass of the second, the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> view machinery would
incorrectly associate the two views with the same &quot;multiview&quot;.
Multiviews are meant to be collections of views that have <em>exactly</em>
the same for/request/viewname values, without taking inheritance
into account.  Symptom: wrong view callable found even when you had
correctly specified a <tt class="docutils literal"><span class="pre">for_</span></tt> interface/class during view
configuration for one or both view configurations.</li>
</ul>
</div>
<div class="section" id="id280">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id280" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.templating</span></tt> module has been removed; it had been
deprecated in 1.1 and never actually had any APIs in it.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-11-29">
<h2>1.2a2 (2009-11-29)<a class="headerlink" href="#a2-2009-11-29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id281">
<h3>Bug Fixes<a class="headerlink" href="#id281" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The long description of this package (as shown on PyPI) was not
valid reStructuredText, and so was not renderable.</li>
<li>Trying to use an HTTP method name string such as <tt class="docutils literal"><span class="pre">GET</span></tt> as a
<tt class="docutils literal"><span class="pre">request_type</span></tt> predicate argument caused a startup time failure
when it was encountered in imperative configuration or in a
decorator (symptom: <tt class="docutils literal"><span class="pre">Type</span> <span class="pre">Error:</span> <span class="pre">Required</span> <span class="pre">specification</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">a</span>
<span class="pre">specification</span></tt>).  This now works again, although <tt class="docutils literal"><span class="pre">request_method</span></tt>
is now the preferred predicate argument for associating a view
configuration with an HTTP request method.</li>
</ul>
</div>
<div class="section" id="id282">
<h3>Documentation<a class="headerlink" href="#id282" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed &quot;Startup&quot; narrative documentation chapter; it was explaining
&quot;the old way&quot; an application constructor worked.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-11-28">
<h2>1.2a1 (2009-11-28)<a class="headerlink" href="#a1-2009-11-28" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id283">
<h3>Features<a class="headerlink" href="#id283" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">An imperative configuration mode.</p>
<p>A <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> application can now begin its life as a single
Python file.  Later, the application might evolve into a set of
Python files in a package.  Even later, it might start making use of
other configuration features, such as <tt class="docutils literal"><span class="pre">ZCML</span></tt>.  But neither the use
of a package nor the use of non-imperative configuration is required
to create a simple <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> application any longer.</p>
<p>Imperative configuration makes <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> competetive with
&quot;microframeworks&quot; such as <a class="reference external" href="http://bottle.paws.de/">Bottle</a> and
<a class="reference external" href="http://www.tornadoweb.org/">Tornado</a>.  <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> has a good
deal of functionality that most microframeworks lack, so this is
hopefully a &quot;best of both worlds&quot; feature.</p>
<p>The simplest possible <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> application is now:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">webob</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">wsgiref</span> <span class="kn">import</span> <span class="n">simple_server</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.configuration</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">def</span> <span class="nf">hello_world</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;Hello world!&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">hello_world</span><span class="p">)</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
    <span class="n">simple_server</span><span class="o">.</span><span class="n">make_server</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">A new class now exists: <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator</span></tt>.
This class forms the basis for sharing machinery between
&quot;imperatively&quot; configured applications and traditional
declaratively-configured applications.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt> function now accepts three extra
optional keyword arguments: <tt class="docutils literal"><span class="pre">registry</span></tt>, <tt class="docutils literal"><span class="pre">request</span></tt> and
<tt class="docutils literal"><span class="pre">hook_zca</span></tt>.</p>
<p>If the <tt class="docutils literal"><span class="pre">registry</span></tt> argument is not <tt class="docutils literal"><span class="pre">None</span></tt>, the argument will be
treated as the registry that is set as the &quot;current registry&quot; (it
will be returned by <tt class="docutils literal"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></tt>)
for the duration of the test.  If the <tt class="docutils literal"><span class="pre">registry</span></tt> argument is
<tt class="docutils literal"><span class="pre">None</span></tt> (the default), a new registry is created and used for the
duration of the test.</p>
<p>The value of the <tt class="docutils literal"><span class="pre">request</span></tt> argument is used as the &quot;current
request&quot; (it will be returned by
<tt class="docutils literal"><span class="pre">repoze.bfg.threadlocal.get_current_request</span></tt>) for the duration of
the test; it defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
<p>If <tt class="docutils literal"><span class="pre">hook_zca</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt> (the default), the
<tt class="docutils literal"><span class="pre">zope.component.getSiteManager</span></tt> function will be hooked with a
function that returns the value of <tt class="docutils literal"><span class="pre">registry</span></tt> (or the
default-created registry if <tt class="docutils literal"><span class="pre">registry</span></tt> is <tt class="docutils literal"><span class="pre">None</span></tt>) instead of the
registry returned by <tt class="docutils literal"><span class="pre">zope.component.getGlobalSiteManager</span></tt>,
causing the Zope Component Architecture API (<tt class="docutils literal"><span class="pre">getSiteManager</span></tt>,
<tt class="docutils literal"><span class="pre">getAdapter</span></tt>, <tt class="docutils literal"><span class="pre">getUtility</span></tt>, and so on) to use the testing
registry instead of the global ZCA registry.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.testing.tearDown</span></tt> function now accepts an
<tt class="docutils literal"><span class="pre">unhook_zca</span></tt> argument.  If this argument is <tt class="docutils literal"><span class="pre">True</span></tt> (the
default), <tt class="docutils literal"><span class="pre">zope.component.getSiteManager.reset()</span></tt> will be called.
This will cause the result of the <tt class="docutils literal"><span class="pre">zope.component.getSiteManager</span></tt>
function to be the global ZCA registry (the result of
<tt class="docutils literal"><span class="pre">zope.component.getGlobalSiteManager</span></tt>) once again.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">run.py</span></tt> module in various <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> <tt class="docutils literal"><span class="pre">paster</span></tt> templates
now use a <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator</span></tt> class instead of
the (now-legacy) <tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt> function to produce
a WSGI application.</p>
</li>
</ul>
</div>
<div class="section" id="id284">
<h3>Documentation<a class="headerlink" href="#id284" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The documentation now uses the &quot;request-only&quot; view calling
convention in most examples (as opposed to the <tt class="docutils literal"><span class="pre">context,</span> <span class="pre">request</span></tt>
convention).  This is a documentation-only change; the <tt class="docutils literal"><span class="pre">context,</span>
<span class="pre">request</span></tt> convention is also supported and documented, and will be
&quot;forever&quot;.</li>
<li><tt class="docutils literal"><span class="pre">repoze.bfg.configuration</span></tt> API documentation has been added.</li>
<li>A narrative documentation chapter entitled &quot;Creating Your First
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> Application&quot; has been added.  This chapter details
usage of the new <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator</span></tt> class,
and demonstrates a simplified &quot;imperative-mode&quot; configuration; doing
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> application configuration imperatively was previously
much more difficult.</li>
<li>A narrative documentation chapter entitled &quot;Configuration,
Decorations and Code Scanning&quot; explaining ZCML- vs. imperative-
vs. decorator-based configuration equivalence.</li>
<li>The &quot;ZCML Hooks&quot; chapter has been renamed to &quot;Hooks&quot;; it documents
how to override hooks now via imperative configuration and ZCML.</li>
<li>The explanation about how to supply an alternate &quot;response factory&quot;
has been removed from the &quot;Hooks&quot; chapter.  This feature may be
removed in a later release (it still works now, it's just not
documented).</li>
<li>Add a section entitled &quot;Test Set Up and Tear Down&quot; to the
unittesting chapter.</li>
</ul>
</div>
<div class="section" id="id285">
<h3>Bug Fixes<a class="headerlink" href="#id285" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The ACL authorization policy debugging output when
<tt class="docutils literal"><span class="pre">debug_authorization</span></tt> console debugging output was turned on
wasn't as clear as it could have been when a view execution was
denied due to an authorization failure resulting from the set of
principals passed never having matched any ACE in any ACL in the
lineage.  Now in this case, we report <tt class="docutils literal"><span class="pre">&lt;default</span> <span class="pre">deny&gt;</span></tt> as the ACE
value and either the root ACL or <tt class="docutils literal"><span class="pre">&lt;No</span> <span class="pre">ACL</span> <span class="pre">found</span> <span class="pre">on</span> <span class="pre">any</span> <span class="pre">object</span> <span class="pre">in</span>
<span class="pre">model</span> <span class="pre">lineage&gt;</span></tt> if no ACL was found.</li>
<li>When two views were registered with the same <tt class="docutils literal"><span class="pre">accept</span></tt> argument,
but were otherwise registered with the same arguments, if a request
entered the application which had an <tt class="docutils literal"><span class="pre">Accept</span></tt> header that accepted
<em>either</em> of the media types defined by the set of views registered
with predicates that otherwise matched, a more or less &quot;random&quot; one
view would &quot;win&quot;.  Now, we try harder to use the view callable
associated with the view configuration that has the most specific
<tt class="docutils literal"><span class="pre">accept</span></tt> argument.  Thanks to Alberto Valverde for an initial
patch.</li>
</ul>
</div>
<div class="section" id="id286">
<h3>Internals<a class="headerlink" href="#id286" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The routes mapper is no longer a root factory wrapper.  It is now
consulted directly by the router.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.registry.make_registry</span></tt> callable has been removed.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.map_view</span></tt> callable has been removed.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.owrap_view</span></tt> callable has been removed.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.predicate_wrap</span></tt> callable has been removed.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.secure_view</span></tt> callable has been removed.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.authdebug_view</span></tt> callable has been removed.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.renderer_from_name</span></tt> callable has been
removed.  Use <tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.renderer_from_name</span></tt>
instead (still not an API, however).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.derive_view</span></tt> callable has been removed.  Use
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator.derive_view</span></tt> instead (still
not an API, however).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.settings.get_options</span></tt> callable has been removed.
Its job has been subsumed by the <tt class="docutils literal"><span class="pre">repoze.bfg.settings.Settings</span></tt>
class constructor.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.requestonly</span></tt> function has been moved to
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.requestonly</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.rendered_response</span></tt> function has been moved to
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.rendered_response</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.decorate_view</span></tt> function has been moved to
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.decorate_view</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.view.MultiView</span></tt> class has been moved to
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.MultiView</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.zcml.Uncacheable</span></tt> class has been removed.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.resource.resource_spec</span></tt> function has been removed.</p>
</li>
<li><p class="first">All ZCML directives which deal with attributes which are paths now
use the <tt class="docutils literal"><span class="pre">path</span></tt> method of the ZCML context to resolve a relative
name to an absolute one (imperative configuration requirement).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.scripting.get_root</span></tt> API now uses a 'real' WebOb
request rather than a FakeRequest when it sets up the request as a
threadlocal.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.traverse</span></tt> API now uses a 'real' WebOb
request rather than a FakeRequest when it calls the traverser.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.request.FakeRequest</span></tt> class has been removed.</p>
</li>
<li><p class="first">Most uses of the ZCA threadlocal API (the <tt class="docutils literal"><span class="pre">getSiteManager</span></tt>,
<tt class="docutils literal"><span class="pre">getUtility</span></tt>, <tt class="docutils literal"><span class="pre">getAdapter</span></tt>, <tt class="docutils literal"><span class="pre">getMultiAdapter</span></tt> threadlocal API)
have been removed from the core.  Instead, when a threadlocal is
necessary, the core uses the
<tt class="docutils literal"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></tt> API to obtain the
registry.</p>
</li>
<li><p class="first">The internal ILogger utility named <tt class="docutils literal"><span class="pre">repoze.bfg.debug</span></tt> is now just
an IDebugLogger unnamed utility.  A named utility with the old name
is registered for b/w compat.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplateRendererFactory</span></tt> interface was
removed; it has become unused.</p>
</li>
<li><p class="first">Instead of depending on the <tt class="docutils literal"><span class="pre">martian</span></tt> package to do code scanning,
we now just use our own scanning routines.</p>
</li>
<li><p class="first">We now no longer have a dependency on <tt class="docutils literal"><span class="pre">repoze.zcml</span></tt> package;
instead, the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> package includes implementations of the
<tt class="docutils literal"><span class="pre">adapter</span></tt>, <tt class="docutils literal"><span class="pre">subscriber</span></tt> and <tt class="docutils literal"><span class="pre">utility</span></tt> directives.</p>
</li>
<li><p class="first">Relating to the following functions:</p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.view.render_view</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.view.render_view_to_iterable</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.view.render_view_to_response</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.view.append_slash_notfound_view</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.view.default_notfound_view</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.view.default_forbidden_view</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.configuration.rendered_response</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.security.has_permission</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.security.authenticated_userid</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.security.effective_principals</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.security.view_execution_permitted</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.security.remember</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.security.forget</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.url.route_url</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.url.model_url</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.url.static_url</span></tt></p>
<p><tt class="docutils literal"><span class="pre">repoze.bfg.traversal.virtual_root</span></tt></p>
<p>Each of these functions now expects to be called with a request
object that has a <tt class="docutils literal"><span class="pre">registry</span></tt> attribute which represents the
current <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> registry.  They fall back to obtaining the
registry from the threadlocal API.</p>
</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilites">
<h3>Backwards Incompatibilites<a class="headerlink" href="#backwards-incompatibilites" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Unit tests which use <tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> for the
purpose of isolating tests from one another may now begin to fail
due to lack of isolation between tests.</p>
<p>Here's why: In repoze.bfg 1.1 and prior, the registry returned by
<tt class="docutils literal"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></tt> when no other
registry had been pushed on to the threadlocal stack was the
<tt class="docutils literal"><span class="pre">zope.component.globalregistry.base</span></tt> global registry (aka the
result of <tt class="docutils literal"><span class="pre">zope.component.getGlobalSiteManager()</span></tt>).  In repoze.bfg
1.2+, however, the registry returned in this situation is the new
module-scope <tt class="docutils literal"><span class="pre">repoze.bfg.registry.global_registry</span></tt> object.  The
<tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> function clears the
<tt class="docutils literal"><span class="pre">zope.component.globalregistry.base</span></tt> global registry
unconditionally.  However, it does not know about the
<tt class="docutils literal"><span class="pre">repoze.bfg.registry.global_registry</span></tt> object, so it does not clear
it.</p>
<p>If you use the <tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> function in the
<tt class="docutils literal"><span class="pre">setUp</span></tt> of test cases in your unit test suite instead of using the
(more correct as of 1.1) <tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt>, you will need
to replace all calls to <tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> with a call
to <tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt>.</p>
<p>If replacing all calls to <tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> with a
call to <tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt> is infeasible, you can put this
bit of code somewhere that is executed exactly <strong>once</strong> (<em>not</em> for
each test in a test suite; in the `` __init__.py`` of your package
or your package's <tt class="docutils literal"><span class="pre">tests</span></tt> subpackage would be a reasonable
place):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">zope.testing.cleanup</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.testing</span> <span class="kn">import</span> <span class="n">setUp</span>
<span class="n">zope</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">cleanup</span><span class="o">.</span><span class="n">addCleanUp</span><span class="p">(</span><span class="n">setUp</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">When there is no &quot;current registry&quot; in the
<tt class="docutils literal"><span class="pre">repoze.bfg.threadlocal.manager</span></tt> threadlocal data structure (this
is the case when there is no &quot;current request&quot; or we're not in the
midst of a <tt class="docutils literal"><span class="pre">r.b.testing.setUp</span></tt>-bounded unit test), the <tt class="docutils literal"><span class="pre">.get</span></tt>
method of the manager returns a data structure containing a <em>global</em>
registry.  In previous releases, this function returned the global
Zope &quot;base&quot; registry: the result of
<tt class="docutils literal"><span class="pre">zope.component.getGlobalSiteManager</span></tt>, which is an instance of the
<tt class="docutils literal"><span class="pre">zope.component.registry.Component</span></tt> class.  In this release,
however, the global registry returns a globally importable instance
of the <tt class="docutils literal"><span class="pre">repoze.bfg.registry.Registry</span></tt> class.  This registry
instance can always be imported as
<tt class="docutils literal"><span class="pre">repoze.bfg.registry.global_registry</span></tt>.</p>
<p>Effectively, this means that when you call
<tt class="docutils literal"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></tt> when no request or
<tt class="docutils literal"><span class="pre">setUp</span></tt> bounded unit test is in effect, you will always get back
the global registry that lives in
<tt class="docutils literal"><span class="pre">repoze.bfg.registry.global_registry</span></tt>.  It also means that
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> APIs that <em>call</em> <tt class="docutils literal"><span class="pre">get_current_registry</span></tt> will use
this registry.</p>
<p>This change was made because <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> now expects the registry
it uses to have a slightly different API than a bare instance of
<tt class="docutils literal"><span class="pre">zope.component.registry.Components</span></tt>.</p>
</li>
<li><p class="first">View registration no longer registers a
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IViewPermission</span></tt> adapter (it is no longer
checked by the framework; since 1.1, views have been responsible for
providing their own security).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt> callable no longer accepts the
<tt class="docutils literal"><span class="pre">authentication_policy</span></tt> nor the <tt class="docutils literal"><span class="pre">authorization_policy</span></tt>
arguments.  This feature was deprecated in version 1.0 and has been
removed.</p>
</li>
<li><p class="first">Obscure: the machinery which configured views with a
<tt class="docutils literal"><span class="pre">request_type</span></tt> <em>and</em> a <tt class="docutils literal"><span class="pre">route_name</span></tt> would ignore the request
interface implied by <tt class="docutils literal"><span class="pre">route_name</span></tt> registering a view only for the
interface implied by <tt class="docutils literal"><span class="pre">request_type</span></tt>.  In the unlikely event that
you were trying to use these two features together, the symptom
would have been that views that named a <tt class="docutils literal"><span class="pre">request_type</span></tt> but which
were also associated with routes were not found when the route
matched.  Now if a view is configured with both a <tt class="docutils literal"><span class="pre">request_type</span></tt>
and a <tt class="docutils literal"><span class="pre">route_name</span></tt>, an error is raised.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive now no longer accepts the
<tt class="docutils literal"><span class="pre">request_type</span></tt> or <tt class="docutils literal"><span class="pre">view_request_type</span></tt> attributes.  These
attributes didn't actually work in any useful way (see entry above
this one).</p>
</li>
<li><p class="first">Because the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> package now includes implementations of
the <tt class="docutils literal"><span class="pre">adapter</span></tt>, <tt class="docutils literal"><span class="pre">subscriber</span></tt> and <tt class="docutils literal"><span class="pre">utility</span></tt> ZCML directives, it
is now an error to have <tt class="docutils literal"><span class="pre">&lt;include</span> <span class="pre">package=&quot;repoze.zcml&quot;</span>
<span class="pre">file=&quot;meta.zcml&quot;/&gt;</span></tt> in the ZCML of a <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> application.  A
ZCML conflict error will be raised if your ZCML does so.  This
shouldn't be an issue for &quot;normal&quot; installations; it has always been
the responsibility of the <tt class="docutils literal"><span class="pre">repoze.bfg.includes</span></tt> ZCML to include
this file in the past; it now just doesn't.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.testing.zcml_configure</span></tt> API was removed.  Use
the <tt class="docutils literal"><span class="pre">Configurator.load_zcml</span></tt> API instead.</p>
</li>
</ul>
</div>
<div class="section" id="id287">
<h3>Deprecations<a class="headerlink" href="#id287" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt> function is now nominally
deprecated.  Its import and usage does not throw a warning, nor will
it probably ever disappear.  However, using a
<tt class="docutils literal"><span class="pre">repoze.bfg.configuration.Configurator</span></tt> class is now the preferred
way to generate a WSGI application.</p>
<p>Note that <tt class="docutils literal"><span class="pre">make_app</span></tt> calls
<tt class="docutils literal"><span class="pre">zope.component.getSiteManager.sethook(</span>
<span class="pre">repoze.bfg.threadlocal.get_current_registry)</span></tt> on the caller's
behalf, hooking ZCA global API lookups, for backwards compatibility
purposes.  If you disuse <tt class="docutils literal"><span class="pre">make_app</span></tt>, your calling code will need
to perform this call itself, at least if your application uses the
ZCA global API (<tt class="docutils literal"><span class="pre">getSiteManager</span></tt>, <tt class="docutils literal"><span class="pre">getAdapter</span></tt>, etc).</p>
</li>
</ul>
</div>
<div class="section" id="id288">
<h3>Dependencies<a class="headerlink" href="#id288" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A dependency on the <tt class="docutils literal"><span class="pre">martian</span></tt> package has been removed (its
functionality is replaced internally).</li>
<li>A dependency on the <tt class="docutils literal"><span class="pre">repoze.zcml</span></tt> package has been removed (its
functionality is replaced internally).</li>
</ul>
</div>
</div>
<div class="section" id="id289">
<h2>1.1.1 (2009-11-21)<a class="headerlink" href="#id289" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id290">
<h3>Bug Fixes<a class="headerlink" href="#id290" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>&quot;Hybrid mode&quot; applications (applications which explicitly used
traversal <em>after</em> url dispatch via <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> paths containing the
<tt class="docutils literal"><span class="pre">*traverse</span></tt> element) were broken in 1.1-final and all 1.1 alpha
and beta releases.  Views registered without a <tt class="docutils literal"><span class="pre">route_name</span></tt> route
shadowed views registered with a <tt class="docutils literal"><span class="pre">route_name</span></tt> inappropriately.</li>
</ul>
</div>
</div>
<div class="section" id="id291">
<h2>1.1 (2009-11-15)<a class="headerlink" href="#id291" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id292">
<h3>Internals<a class="headerlink" href="#id292" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove dead IRouteRequirement interface from <tt class="docutils literal"><span class="pre">repoze.bfg.zcml</span></tt>
module.</li>
</ul>
</div>
<div class="section" id="id293">
<h3>Documentation<a class="headerlink" href="#id293" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Improve the &quot;Extending an Existing Application&quot; narrative chapter.</li>
<li>Add more sections to the &quot;Defending Design&quot; chapter.</li>
</ul>
</div>
</div>
<div class="section" id="b4-2009-11-12">
<h2>1.1b4 (2009-11-12)<a class="headerlink" href="#b4-2009-11-12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id294">
<h3>Bug Fixes<a class="headerlink" href="#id294" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use <tt class="docutils literal"><span class="pre">alsoProvides</span></tt> in the urldispatch module to attach an
interface to the request rather than <tt class="docutils literal"><span class="pre">directlyProvides</span></tt> to avoid
disturbing interfaces set in a NewRequest event handler.</li>
</ul>
</div>
<div class="section" id="id295">
<h3>Documentation<a class="headerlink" href="#id295" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Move 1.0.1 and previous changelog to HISTORY.txt.</li>
<li>Add examples to <tt class="docutils literal"><span class="pre">repoze.bfg.url.model_url</span></tt> docstring.</li>
<li>Add &quot;Defending BFG Design&quot; chapter to frontpage docs.</li>
</ul>
</div>
<div class="section" id="templates">
<h3>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">ez_setup.py</span></tt> and its import from all paster templates,
samples, and tutorials for <tt class="docutils literal"><span class="pre">distribute</span></tt> compatibility.  The
documentation already explains how to install virtualenv (which will
include some <tt class="docutils literal"><span class="pre">setuptools</span></tt> package), so these files, imports and
usages were superfluous.</li>
</ul>
</div>
<div class="section" id="id296">
<h3>Deprecations<a class="headerlink" href="#id296" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">options</span></tt> kw arg to the <tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt>
function is deprecated.  In its place is the keyword argument
<tt class="docutils literal"><span class="pre">settings</span></tt>.  The <tt class="docutils literal"><span class="pre">options</span></tt> keyword continues to work, and a
deprecation warning is not emitted when it is detected.  However,
the paster templates, code samples, and documentation now make
reference to <tt class="docutils literal"><span class="pre">settings</span></tt> rather than <tt class="docutils literal"><span class="pre">options</span></tt>.  This
change/deprecation was mainly made for purposes of clarity and
symmetry with the <tt class="docutils literal"><span class="pre">get_settings()</span></tt> API and dicussions of
&quot;settings&quot; in various places in the docs: we want to use the same
name to refer to the same thing everywhere.</li>
</ul>
</div>
</div>
<div class="section" id="b3-2009-11-06">
<h2>1.1b3 (2009-11-06)<a class="headerlink" href="#b3-2009-11-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id297">
<h3>Features<a class="headerlink" href="#id297" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerRoutesMapper</span></tt> testing facility added.
This testing function registers a routes &quot;mapper&quot; object in the
registry, for tests which require its presence.  This function is
documented in the <tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt> API documentation.</li>
</ul>
</div>
<div class="section" id="id298">
<h3>Bug Fixes<a class="headerlink" href="#id298" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Compound statements that used an assignment entered into in an
interactive IPython session invoked via <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">bfgshell</span></tt> no
longer fail to mutate the shell namespace correctly.  For example,
this set of statements used to fail:</p>
<div class="highlight-python"><div class="highlight"><pre>In [2]: def bar(x): return x
  ...:
In [3]: list(bar(x) for x in &#39;abc&#39;)
Out[3]: NameError: &#39;bar&#39;
</pre></div>
</div>
<p>In this release, the <tt class="docutils literal"><span class="pre">bar</span></tt> function is found and the correct
output is now sent to the console.  Thanks to Daniel Holth for the
patch.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">bfgshell</span></tt> command did not function properly; it was still
expecting to be able to call the root factory with a bare
<tt class="docutils literal"><span class="pre">environ</span></tt> rather than a request object.</p>
</li>
</ul>
</div>
<div class="section" id="id299">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id299" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.scripting.get_root</span></tt> function now expects a
<tt class="docutils literal"><span class="pre">request</span></tt> object as its second argument rather than an
<tt class="docutils literal"><span class="pre">environ</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2009-11-02">
<h2>1.1b2 (2009-11-02)<a class="headerlink" href="#b2-2009-11-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id300">
<h3>Bug Fixes<a class="headerlink" href="#id300" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Prevent PyPI installation failure due to <tt class="docutils literal"><span class="pre">easy_install</span></tt> trying way
too hard to guess the best version of Paste.  When <tt class="docutils literal"><span class="pre">easy_install</span></tt>
pulls from PyPI it reads links off various pages to determine &quot;more
up to date&quot; versions. It incorrectly picks up a link for an ancient
version of a package named &quot;Paste-Deploy-0.1&quot; (note the dash) when
trying to find the &quot;Paste&quot; distribution and somehow believes it's
the latest version of &quot;Paste&quot;.  It also somehow &quot;helpfully&quot; decides
to check out a version of this package from SVN.  We pin the Paste
dependency version to a version greater than 1.7 to work around
this <tt class="docutils literal"><span class="pre">easy_install</span></tt> bug.</li>
</ul>
</div>
<div class="section" id="id301">
<h3>Documentation<a class="headerlink" href="#id301" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix &quot;Hybrid&quot; narrative chapter: stop claiming that <tt class="docutils literal"><span class="pre">&lt;view&gt;</span></tt>
statements that mention a route_name need to come afer (in XML
order) the <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> statement which creates the route.  This
hasn't been true since 1.1a1.</li>
<li>&quot;What's New in <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> 1.1&quot; document added to narrative
documentation.</li>
</ul>
</div>
<div class="section" id="id302">
<h3>Features<a class="headerlink" href="#id302" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add a new event type: <tt class="docutils literal"><span class="pre">repoze.bfg.events.AfterTraversal</span></tt>.  Events
of this type will be sent after traversal is completed, but before
any view code is invoked.  Like <tt class="docutils literal"><span class="pre">repoze.bfg.events.NewRequest</span></tt>,
This event will have a single attribute: <tt class="docutils literal"><span class="pre">request</span></tt> representing
the current request.  Unlike the request attribute of
<tt class="docutils literal"><span class="pre">repoze.bfg.events.NewRequest</span></tt> however, during an AfterTraversal
event, the request object will possess attributes set by the
traverser, most notably <tt class="docutils literal"><span class="pre">context</span></tt>, which will be the context used
when a view is found and invoked.  The interface
<tt class="docutils literal"><span class="pre">repoze.bfg.events.IAfterTraversal</span></tt> can be used to subscribe to
the event.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;subscriber for=&quot;repoze.bfg.interfaces.IAfterTraversal&quot;
            handler=&quot;my.app.handle_after_traverse&quot;/&gt;
</pre></div>
</div>
<p>Like any framework event, a subscriber function should expect one
parameter: <tt class="docutils literal"><span class="pre">event</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id303">
<h3>Dependencies<a class="headerlink" href="#id303" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Rather than depending on <tt class="docutils literal"><span class="pre">chameleon.core</span></tt> and <tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt>
distributions individually, depend on Malthe's repackaged
<tt class="docutils literal"><span class="pre">Chameleon</span></tt> distribution (which includes both <tt class="docutils literal"><span class="pre">chameleon.core</span></tt>
and <tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt>).</li>
</ul>
</div>
</div>
<div class="section" id="b1-2009-11-01">
<h2>1.1b1 (2009-11-01)<a class="headerlink" href="#b1-2009-11-01" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id304">
<h3>Bug Fixes<a class="headerlink" href="#id304" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The routes root factory called route factories and the default route
factory with an environ rather than a request.  One of the symptoms
of this bug: applications generated using the <tt class="docutils literal"><span class="pre">bfg_zodb</span></tt> paster
template in 1.1a9 did not work properly.</li>
<li>Reinstate <tt class="docutils literal"><span class="pre">renderer</span></tt> alias for <tt class="docutils literal"><span class="pre">view_renderer</span></tt> in the
<tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> ZCML directive (in-the-wild 1.1a bw compat).</li>
<li><tt class="docutils literal"><span class="pre">bfg_routesalchemy</span></tt> paster template: change <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt>
declarations: rename <tt class="docutils literal"><span class="pre">renderer</span></tt> attribute to <tt class="docutils literal"><span class="pre">view_renderer</span></tt>.</li>
<li>Header values returned by the <tt class="docutils literal"><span class="pre">authtktauthenticationpolicy</span></tt>
<tt class="docutils literal"><span class="pre">remember</span></tt> and <tt class="docutils literal"><span class="pre">forget</span></tt> methods would be of type <tt class="docutils literal"><span class="pre">unicode</span></tt>.
This violated the WSGI spec, causing a <tt class="docutils literal"><span class="pre">TypeError</span></tt> to be raised
when these headers were used under <tt class="docutils literal"><span class="pre">mod_wsgi</span></tt>.</li>
<li>If a BFG app that had a route matching the root URL was mounted
under a path in modwsgi, ala <tt class="docutils literal"><span class="pre">WSGIScriptAlias</span> <span class="pre">/myapp</span>
<span class="pre">/Users/chrism/projects/modwsgi/env/bfg.wsgi</span></tt>, the home route (a
route with the path of <tt class="docutils literal"><span class="pre">'/'</span></tt> or <tt class="docutils literal"><span class="pre">''</span></tt>) would not match when the
path <tt class="docutils literal"><span class="pre">/myapp</span></tt> was visited (only when the path <tt class="docutils literal"><span class="pre">/myapp/</span></tt> was
visited).  This is now fixed: if the urldispatch root factory notes
that the PATH_INFO is empty, it converts it to a single slash before
trying to do matching.</li>
</ul>
</div>
<div class="section" id="id305">
<h3>Documentation<a class="headerlink" href="#id305" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> declarations in tutorial ZCML, rename <tt class="docutils literal"><span class="pre">renderer</span></tt>
attribute to <tt class="docutils literal"><span class="pre">view_renderer</span></tt> (fwd compat).</li>
<li>Fix various tutorials broken by 1.1a9 <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> directive changes.</li>
</ul>
</div>
<div class="section" id="id306">
<h3>Internal<a class="headerlink" href="#id306" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deal with a potential circref in the traversal module.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2009-10-31">
<h2>1.1a9 (2009-10-31)<a class="headerlink" href="#a9-2009-10-31" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id307">
<h3>Bug Fixes<a class="headerlink" href="#id307" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>An incorrect ZCML conflict would be encountered when the
<tt class="docutils literal"><span class="pre">request_param</span></tt> predicate attribute was used on the ZCML <tt class="docutils literal"><span class="pre">view</span></tt>
directive if any two otherwise same-predicated views had the
combination of a predicate value with an <tt class="docutils literal"><span class="pre">=</span></tt> sign and one without
(e.g. <tt class="docutils literal"><span class="pre">a</span></tt> vs. <tt class="docutils literal"><span class="pre">a=123</span></tt>).</li>
</ul>
</div>
<div class="section" id="id308">
<h3>Features<a class="headerlink" href="#id308" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In previous versions of BFG, the &quot;root factory&quot; (the <tt class="docutils literal"><span class="pre">get_root</span></tt>
callable passed to <tt class="docutils literal"><span class="pre">make_app</span></tt> or a function pointed to by the
<tt class="docutils literal"><span class="pre">factory</span></tt> attribute of a route) was called with a &quot;bare&quot; WSGI
environment.  In this version, and going forward, it will be called
with a <tt class="docutils literal"><span class="pre">request</span></tt> object.  The request object passed to the factory
implements dictionary-like methods in such a way that existing root
factory code which expects to be passed an environ will continue to
work.</li>
<li>The <tt class="docutils literal"><span class="pre">__call__</span></tt> of a plugin &quot;traverser&quot; implementation (registered
as an adapter for <tt class="docutils literal"><span class="pre">ITraverser</span></tt> or <tt class="docutils literal"><span class="pre">ITraverserFactory</span></tt>) will now
receive a <em>request</em> as the single argument to its <tt class="docutils literal"><span class="pre">__call__</span></tt>
method.  In previous versions it was passed a WSGI <tt class="docutils literal"><span class="pre">environ</span></tt>
object.  The request object passed to the factory implements
dictionary-like methods in such a way that existing traverser code
which expects to be passed an environ will continue to work.</li>
<li>The ZCML <tt class="docutils literal"><span class="pre">route</span></tt> directive's attributes <tt class="docutils literal"><span class="pre">xhr</span></tt>,
<tt class="docutils literal"><span class="pre">request_method</span></tt>, <tt class="docutils literal"><span class="pre">path_info</span></tt>, <tt class="docutils literal"><span class="pre">request_param</span></tt>, <tt class="docutils literal"><span class="pre">header</span></tt> and
<tt class="docutils literal"><span class="pre">accept</span></tt> are now <em>route</em> predicates rather than <em>view</em> predicates.
If one or more of these predicates is specified in the route
configuration, all of the predicates must return true for the route
to match a request.  If one or more of the route predicates
associated with a route returns <tt class="docutils literal"><span class="pre">False</span></tt> when checked during a
request, the route match fails, and the next match in the routelist
is tried.  This differs from the previous behavior, where no route
predicates existed and all predicates were considered view
predicates, because in that scenario, the next route was not tried.</li>
</ul>
</div>
<div class="section" id="id309">
<h3>Documentation<a class="headerlink" href="#id309" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Various changes were made to narrative and API documentation
supporting the change from passing a request rather than an environ
to root factories and traversers.</li>
</ul>
</div>
<div class="section" id="id310">
<h3>Internal<a class="headerlink" href="#id310" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The request implements dictionary-like methods that mutate and query
the WSGI environ.  This is only for the purpose of backwards
compatibility with root factories which expect an <tt class="docutils literal"><span class="pre">environ</span></tt> rather
than a request.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.request.create_route_request_factory</span></tt> function,
which returned a request factory was removed in favor of a
<tt class="docutils literal"><span class="pre">repoze.bfg.request.route_request_interface</span></tt> function, which
returns an interface.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.request.Request</span></tt> class, which is a subclass of
<tt class="docutils literal"><span class="pre">webob.Request</span></tt> now defines its own <tt class="docutils literal"><span class="pre">__setattr__</span></tt>,
<tt class="docutils literal"><span class="pre">__getattr__</span></tt> and <tt class="docutils literal"><span class="pre">__delattr__</span></tt> methods, which override the
default WebOb behavior.  The default WebOb behavior stores
attributes of the request in <tt class="docutils literal"><span class="pre">self.environ['webob.adhoc_attrs']</span></tt>,
and retrieves them from that dictionary during a <tt class="docutils literal"><span class="pre">__getattr__</span></tt>.
This behavior was undesirable for speed and &quot;expectation&quot; reasons.
Now attributes of the <tt class="docutils literal"><span class="pre">request</span></tt> are stored in <tt class="docutils literal"><span class="pre">request.__dict__</span></tt>
(as you otherwise might expect from an object that did not override
these methods).</li>
<li>The router no longer calls <tt class="docutils literal"><span class="pre">repoze.bfg.traversal._traverse</span></tt> and
does its work &quot;inline&quot; (speed).</li>
<li>Reverse the order in which the router calls the request factory and
the root factory.  The request factory is now called first; the
resulting request is passed to the root factory.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.request.request_factory</span></tt> function has been
removed.  Its functionality is no longer required.</li>
<li>The &quot;routes root factory&quot; that wraps the default root factory when
there are routes mentioned in the configuration now attaches an
interface to the request via <tt class="docutils literal"><span class="pre">zope.interface.directlyProvides</span></tt>.
This replaces logic in the (now-gone)
<tt class="docutils literal"><span class="pre">repoze.bfg.request.request_factory</span></tt> function.</li>
<li>The <tt class="docutils literal"><span class="pre">route</span></tt> and <tt class="docutils literal"><span class="pre">view</span></tt> ZCML directives now register an interface
as a named utility (retrieved from
<tt class="docutils literal"><span class="pre">repoze.bfg.request.route_request_interface</span></tt>) rather than a
request factory (the previous return value of the now-missing
<tt class="docutils literal"><span class="pre">repoze.bfg.request.create_route_request_factory</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.functional</span></tt> module was renamed to
<tt class="docutils literal"><span class="pre">repoze.bfg.compat</span></tt>.</li>
</ul>
</div>
<div class="section" id="id311">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id311" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Explicitly revert the feature introduced in 1.1a8: where the name
<tt class="docutils literal"><span class="pre">root</span></tt> is available as an attribute of the request before a
NewRequest event is emitted.  This makes some potential future
features impossible, or at least awkward (such as grouping traversal
and view lookup into a single adapter lookup).</li>
<li>The <tt class="docutils literal"><span class="pre">containment</span></tt>, <tt class="docutils literal"><span class="pre">attr</span></tt> and <tt class="docutils literal"><span class="pre">renderer</span></tt> attributes of the
<tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive were removed.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2009-10-27">
<h2>1.1a8 (2009-10-27)<a class="headerlink" href="#a8-2009-10-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id312">
<h3>Features<a class="headerlink" href="#id312" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">path_info</span></tt> view configuration predicate.</li>
<li><tt class="docutils literal"><span class="pre">paster</span> <span class="pre">bfgshell</span></tt> now supports IPython if it's available for
import.  Thanks to Daniel Holth for the initial patch.</li>
<li>Add <tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerSettings</span></tt> API, which is documented
in the &quot;repoze.bfg.testing&quot; API chapter.  This allows for
registration of &quot;settings&quot; values obtained via
<tt class="docutils literal"><span class="pre">repoze.bfg.settings.get_settings()</span></tt> for use in unit tests.</li>
<li>The name <tt class="docutils literal"><span class="pre">root</span></tt> is available as an attribute of the request
slightly earlier now (before a NewRequest event is emitted).
<tt class="docutils literal"><span class="pre">root</span></tt> is the result of the application &quot;root factory&quot;.</li>
<li>Added <tt class="docutils literal"><span class="pre">max_age</span></tt> parameter to <tt class="docutils literal"><span class="pre">authtktauthenticationpolicy</span></tt> ZCML
directive.  If this value is set, it must be an integer representing
the number of seconds which the auth tkt cookie will survive.
Mainly, its existence allows the auth_tkt cookie to survive across
browser sessions.</li>
</ul>
</div>
<div class="section" id="id313">
<h3>Bug Fixes<a class="headerlink" href="#id313" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix bug encountered during &quot;scan&quot; (when <tt class="docutils literal"><span class="pre">&lt;scan</span> <span class="pre">..&gt;</span></tt> directive is
used in ZCML) introduced in 1.1a7.  Symptom: <tt class="docutils literal"><span class="pre">AttributeError:</span>
<span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">__provides__</span></tt> raised at startup time.</li>
<li>The <tt class="docutils literal"><span class="pre">reissue_time</span></tt> argument to the <tt class="docutils literal"><span class="pre">authtktauthenticationpolicy</span></tt>
ZCML directive now actually works.  When it is set to an integer
value, an authticket set-cookie header is appended to the response
whenever a request requires authentication and 'now' minus the
authticket's timestamp is greater than <tt class="docutils literal"><span class="pre">reissue_time</span></tt> seconds.</li>
</ul>
</div>
<div class="section" id="id314">
<h3>Documentation<a class="headerlink" href="#id314" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a chapter titled &quot;Request and Response&quot; to the narrative
documentation, content cribbed from the WebOb documentation.</li>
<li>Call out predicate attributes of ZCML directive within &quot;Views&quot;
chapter.</li>
<li>Fix route_url documentation (<tt class="docutils literal"><span class="pre">_query</span></tt> argument documented as
<tt class="docutils literal"><span class="pre">query</span></tt> and <tt class="docutils literal"><span class="pre">_anchor</span></tt> argument documented as <tt class="docutils literal"><span class="pre">anchor</span></tt>).</li>
</ul>
</div>
<div class="section" id="id315">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id315" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">authtkt</span></tt> authentication policy <tt class="docutils literal"><span class="pre">remember</span></tt> method now no
longer honors <tt class="docutils literal"><span class="pre">token</span></tt> or <tt class="docutils literal"><span class="pre">userdata</span></tt> keyword arguments.</li>
</ul>
</div>
<div class="section" id="id316">
<h3>Internal<a class="headerlink" href="#id316" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Change how <tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorator works when used as a class method
decorator.  In 1.1a7, the``scan``directive actually tried to grope
every class in scanned package at startup time, calling <tt class="docutils literal"><span class="pre">dir</span></tt>
against each found class, and subsequently invoking <tt class="docutils literal"><span class="pre">getattr</span></tt>
against each thing found by <tt class="docutils literal"><span class="pre">dir</span></tt> to see if it was a method.  This
led to some strange symptoms (e.g. <tt class="docutils literal"><span class="pre">AttributeError:</span> <span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span>
<span class="pre">attribute</span> <span class="pre">__provides__</span></tt>), and was generally just a bad idea.  Now,
instead of groping classes for methods at startup time, we just
cause the <tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorator itself to populate the method's
class' <tt class="docutils literal"><span class="pre">__dict__</span></tt> when it is used as a method decorator.  This
also requires a nasty _getframe thing but it's slightly less nasty
than the startup time groping behavior.  This is essentially a
reversion back to 1.1a6 &quot;grokking&quot; behavior plus some special magic
for using the <tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorator as method decorator inside the
<tt class="docutils literal"><span class="pre">bfg_view</span></tt> class itself.</li>
<li>The router now checks for a <tt class="docutils literal"><span class="pre">global_response_headers</span></tt> attribute of
the request object before returning a response.  If this value
exists, it is presumed to be a sequence of two-tuples, representing
a set of headers to append to the 'normal' response headers.  This
feature is internal, rather than exposed externally, because it's
unclear whether it will stay around in the long term.  It was added
to support the <tt class="docutils literal"><span class="pre">reissue_time</span></tt> feature of the authtkt
authentication policy.</li>
<li>The interface ITraverserFactory is now just an alias for ITraverser.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-10-18">
<h2>1.1a7 (2009-10-18)<a class="headerlink" href="#a7-2009-10-18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id317">
<h3>Features<a class="headerlink" href="#id317" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">More than one <tt class="docutils literal"><span class="pre">&#64;bfg_view</span></tt> decorator may now be stacked on top of
any number of others.  Each invocation of the decorator registers a
single view configuration.  For instance, the following combination
of decorators and a function will register two view configurations
for the same view callable:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="kn">import</span> <span class="n">bfg_view</span>

<span class="nd">@bfg_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;edit&#39;</span><span class="p">)</span>
<span class="nd">@bfg_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;change&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This makes it possible to associate more than one view configuration
with a single callable without requiring any ZCML.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">&#64;bfg_view</span></tt> decorator can now be used against a class method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">webob</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="kn">import</span> <span class="n">bfg_view</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@bfg_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;hello&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">amethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&#39;hello from </span><span class="si">%s</span><span class="s">!&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>When the bfg_view decorator is used against a class method, a view
is registered for the <em>class</em> (it's a &quot;class view&quot; where the &quot;attr&quot;
happens to be the name of the method it is attached to), so the
class it's defined within must have a suitable constructor: one that
accepts <tt class="docutils literal"><span class="pre">context,</span> <span class="pre">request</span></tt> or just <tt class="docutils literal"><span class="pre">request</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id318">
<h3>Documentation<a class="headerlink" href="#id318" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added <tt class="docutils literal"><span class="pre">Changing</span> <span class="pre">the</span> <span class="pre">Traverser</span></tt> and <tt class="docutils literal"><span class="pre">Changing</span> <span class="pre">How</span>
<span class="pre">:mod:`repoze.bfg.url.model_url`</span> <span class="pre">Generates</span> <span class="pre">a</span> <span class="pre">URL</span></tt> to the &quot;Hooks&quot;
narrative chapter of the docs.</li>
</ul>
</div>
<div class="section" id="id319">
<h3>Internal<a class="headerlink" href="#id319" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">ez_setup.py</span></tt> and imports of it within <tt class="docutils literal"><span class="pre">setup.py</span></tt>.  In
the new world, and as per virtualenv setup instructions, people will
already have either setuptools or distribute.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-10-15">
<h2>1.1a6 (2009-10-15)<a class="headerlink" href="#a6-2009-10-15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id320">
<h3>Features<a class="headerlink" href="#id320" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">xhr</span></tt>, <tt class="docutils literal"><span class="pre">accept</span></tt>, and <tt class="docutils literal"><span class="pre">header</span></tt> view configuration
predicates to ZCML view declaration, ZCML route declaration, and
<tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorator.  See the <tt class="docutils literal"><span class="pre">Views</span></tt> narrative documentation
chapter for more information about these predicates.</li>
<li>Add <tt class="docutils literal"><span class="pre">setUp</span></tt> and <tt class="docutils literal"><span class="pre">tearDown</span></tt> functions to the
<tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt> module.  Using <tt class="docutils literal"><span class="pre">setUp</span></tt> in a test setup and
<tt class="docutils literal"><span class="pre">tearDown</span></tt> in a test teardown is now the recommended way to do
component registry setup and teardown.  Previously, it was
recommended that a single function named
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.cleanUp</span></tt> be called in both the test setup and
tear down.  <tt class="docutils literal"><span class="pre">repoze.bfg.testing.cleanUp</span></tt> still exists (and will
exist &quot;forever&quot; due to its widespread use); it is now just an alias
for <tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt> and is nominally deprecated.</li>
<li>The BFG component registry is now available in view and event
subscriber code as an attribute of the request
ie. <tt class="docutils literal"><span class="pre">request.registry</span></tt>.  This fact is currently undocumented
except for this note, because BFG developers never need to interact
with the registry directly anywhere else.</li>
<li>The BFG component registry now inherits from <tt class="docutils literal"><span class="pre">dict</span></tt>, meaning that
it can optionally be used as a simple dictionary.  <em>Component</em>
registrations performed against it via e.g. <tt class="docutils literal"><span class="pre">registerUtility</span></tt>,
<tt class="docutils literal"><span class="pre">registerAdapter</span></tt>, and similar API methods are kept in a
completely separate namespace than its dict members, so using the
its component API methods won't effect the keys and values in the
dictionary namespace.  Likewise, though the component registry
&quot;happens to be&quot; a dictionary, use of mutating dictionary methods
such as <tt class="docutils literal"><span class="pre">__setitem__</span></tt> will have no influence on any component
registrations made against it.  In other words, the registry object
you obtain via e.g. <tt class="docutils literal"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></tt>
or <tt class="docutils literal"><span class="pre">request.registry</span></tt> happens to be both a component registry and
a dictionary, but using its component-registry API won't impact data
added to it via its dictionary API and vice versa.  This is a
forward compatibility move based on the goals of &quot;marco&quot;.</li>
<li>Expose and document <tt class="docutils literal"><span class="pre">repoze.bfg.testing.zcml_configure</span></tt> API.  This
function populates a component registry from a ZCML file for testing
purposes.  It is documented in the &quot;Unit and Integration Testing&quot;
chapter.</li>
</ul>
</div>
<div class="section" id="id321">
<h3>Documentation<a class="headerlink" href="#id321" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Virtual hosting narrative docs chapter updated with info about
<tt class="docutils literal"><span class="pre">mod_wsgi</span></tt>.</li>
<li>Point all index URLs at the literal 1.1 index (this alpha cycle may
go on a while).</li>
<li>Various tutorial test modules updated to use
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt> and <tt class="docutils literal"><span class="pre">repoze.bfg.testing.tearDown</span></tt>
methods in order to encourage this as best practice going forward.</li>
<li>Added &quot;Creating Integration Tests&quot; section to unit testing narrative
documentation chapter.  As a result, the name of the unittesting
chapter is now &quot;Unit and Integration Testing&quot;.</li>
</ul>
</div>
<div class="section" id="id322">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id322" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Importing <tt class="docutils literal"><span class="pre">getSiteManager</span></tt> and <tt class="docutils literal"><span class="pre">get_registry</span></tt> from
<tt class="docutils literal"><span class="pre">repoze.bfg.registry</span></tt> is no longer supported.  These imports were
deprecated in repoze.bfg 1.0.  Import of <tt class="docutils literal"><span class="pre">getSiteManager</span></tt> should
be done as <tt class="docutils literal"><span class="pre">from</span> <span class="pre">zope.component</span> <span class="pre">import</span> <span class="pre">getSiteManager</span></tt>.  Import of
<tt class="docutils literal"><span class="pre">get_registry</span></tt> should be done as <tt class="docutils literal"><span class="pre">from</span> <span class="pre">repoze.bfg.threadlocal</span>
<span class="pre">import</span> <span class="pre">get_current_registry</span></tt>.  This was done to prevent a circular
import dependency.</li>
<li>Code bases which alternately invoke both
<tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> and <tt class="docutils literal"><span class="pre">repoze.bfg.testing.cleanUp</span></tt>
(treating them equivalently, using them interchangeably) in the
setUp/tearDown of unit tests will begin to experience test failures
due to lack of test isolation.  The &quot;right&quot; mechanism is
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.cleanUp</span></tt> (or the combination of
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.tearDown</span></tt>). but a good number of legacy
codebases will use <tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> instead.  We
support <tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> but not in combination with
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.cleanUp</span></tt> in the same codebase.  You should use
one or the other test cleanup function in a single codebase, but not
both.</li>
</ul>
</div>
<div class="section" id="id323">
<h3>Internal<a class="headerlink" href="#id323" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Created new <tt class="docutils literal"><span class="pre">repoze.bfg.configuration</span></tt> module which assumes
responsibilities previously held by the <tt class="docutils literal"><span class="pre">repoze.bfg.registry</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.router</span></tt> modules (avoid a circular import dependency).</li>
<li>The result of the <tt class="docutils literal"><span class="pre">zope.component.getSiteManager</span></tt> function in unit
tests set up with <tt class="docutils literal"><span class="pre">repoze.bfg.testing.cleanUp</span></tt> or
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.setUp</span></tt> will be an instance of
<tt class="docutils literal"><span class="pre">repoze.bfg.registry.Registry</span></tt> instead of the global
<tt class="docutils literal"><span class="pre">zope.component.globalregistry.base</span></tt> registry.  This also means
that the threadlocal ZCA API functions such as <tt class="docutils literal"><span class="pre">getAdapter</span></tt> and
<tt class="docutils literal"><span class="pre">getUtility</span></tt> as well as internal BFG machinery (such as
<tt class="docutils literal"><span class="pre">model_url</span></tt> and <tt class="docutils literal"><span class="pre">route_url</span></tt>) will consult this registry within
unit tests. This is a forward compatibility move based on the goals
of &quot;marco&quot;.</li>
<li>Removed <tt class="docutils literal"><span class="pre">repoze.bfg.testing.addCleanUp</span></tt> function and associated
module-scope globals.  This was never an API.</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-10-10">
<h2>1.1a5 (2009-10-10)<a class="headerlink" href="#a5-2009-10-10" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id324">
<h3>Documentation<a class="headerlink" href="#id324" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Change &quot;Traversal + ZODB&quot; and &quot;URL Dispatch + SQLAlchemy&quot; Wiki
tutorials to make use of the new-to-1.1 &quot;renderer&quot; feature (return
dictionaries from all views).</li>
<li>Add tests to the &quot;URL Dispatch + SQLAlchemy&quot; tutorial after the
&quot;view&quot; step.</li>
<li>Added a diagram of model graph traversal to the &quot;Traversal&quot;
narrative chapter of the documentation.</li>
<li>An <tt class="docutils literal"><span class="pre">exceptions</span></tt> API chapter was added, documenting the new
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions</span></tt> module.</li>
<li>Describe &quot;request-only&quot; view calling conventions inside the
urldispatch narrative chapter, where it's most helpful.</li>
<li>Add a diagram which explains the operation of the BFG router to the
&quot;Router&quot; narrative chapter.</li>
</ul>
</div>
<div class="section" id="id325">
<h3>Features<a class="headerlink" href="#id325" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a new <tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt> API: <tt class="docutils literal"><span class="pre">registerRoute</span></tt>, for
registering routes to satisfy calls to
e.g. <tt class="docutils literal"><span class="pre">repoze.bfg.url.route_url</span></tt> in unit tests.</li>
<li>The <tt class="docutils literal"><span class="pre">notfound</span></tt> and <tt class="docutils literal"><span class="pre">forbidden</span></tt> ZCML directives now accept the
following addtional attributes: <tt class="docutils literal"><span class="pre">attr</span></tt>, <tt class="docutils literal"><span class="pre">renderer</span></tt>, and
<tt class="docutils literal"><span class="pre">wrapper</span></tt>.  These have the same meaning as they do in the context
of a ZCML <tt class="docutils literal"><span class="pre">view</span></tt> directive.</li>
<li>For behavior like Django's <tt class="docutils literal"><span class="pre">APPEND_SLASH=True</span></tt>, use the
<tt class="docutils literal"><span class="pre">repoze.bfg.view.append_slash_notfound_view</span></tt> view as the Not Found
view in your application.  When this view is the Not Found view
(indicating that no view was found), and any routes have been
defined in the configuration of your application, if the value of
<tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> does not already end in a slash, and if the value of
<tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> <em>plus</em> a slash matches any route's path, do an HTTP
redirect to the slash-appended PATH_INFO.  Note that this will
<em>lose</em> <tt class="docutils literal"><span class="pre">POST</span></tt> data information (turning it into a GET), so you
shouldn't rely on this to redirect POST requests.</li>
<li>Speed up <tt class="docutils literal"><span class="pre">repoze.bfg.location.lineage</span></tt> slightly.</li>
<li>Speed up <tt class="docutils literal"><span class="pre">repoze.bfg.encode.urlencode</span></tt> (nee'
<tt class="docutils literal"><span class="pre">repoze.bfg.url.urlencode</span></tt>) slightly.</li>
<li>Speed up <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path</span></tt>.</li>
<li>Speed up <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></tt> slightly.</li>
<li>Speed up <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.traverse</span></tt> slightly.</li>
<li>Speed up <tt class="docutils literal"><span class="pre">repoze.bfg.url.model_url</span></tt> slightly.</li>
<li>Speed up <tt class="docutils literal"><span class="pre">repoze.bfg.url.route_url</span></tt> slightly.</li>
<li>Sped up <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.ModelGraphTraverser:__call__</span></tt>
slightly.</li>
<li>Minor speedup of <tt class="docutils literal"><span class="pre">repoze.bfg.router.Router.__call__</span></tt>.</li>
<li>New <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions</span></tt> module was created to house exceptions
that were previously sprinkled through various modules.</li>
</ul>
</div>
<div class="section" id="id326">
<h3>Internal<a class="headerlink" href="#id326" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Move <tt class="docutils literal"><span class="pre">repoze.bfg.traversal._url_quote</span></tt> into <tt class="docutils literal"><span class="pre">repoze.bfg.encode</span></tt>
as <tt class="docutils literal"><span class="pre">url_quote</span></tt>.</li>
</ul>
</div>
<div class="section" id="id327">
<h3>Deprecations<a class="headerlink" href="#id327" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The import of <tt class="docutils literal"><span class="pre">repoze.bfg.view.NotFound</span></tt> is deprecated in favor of
<tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.NotFound</span></tt>.  The old location still
functions, but emits a deprecation warning.</li>
<li>The import of <tt class="docutils literal"><span class="pre">repoze.bfg.security.Unauthorized</span></tt> is deprecated in
favor of <tt class="docutils literal"><span class="pre">repoze.bfg.exceptions.Forbidden</span></tt>.  The old location
still functions but emits a deprecation warning.  The rename from
<tt class="docutils literal"><span class="pre">Unauthorized</span></tt> to <tt class="docutils literal"><span class="pre">Forbidden</span></tt> brings parity to the name of
the exception and the system view it invokes when raised.</li>
</ul>
</div>
<div class="section" id="id328">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id328" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">We previously had a Unicode-aware wrapper for the
<tt class="docutils literal"><span class="pre">urllib.urlencode</span></tt> function named <tt class="docutils literal"><span class="pre">repoze.bfg.url.urlencode</span></tt>
which delegated to the stdlib function, but which marshalled all
unicode values to utf-8 strings before calling the stdlib version.
A newer replacement now lives in <tt class="docutils literal"><span class="pre">repoze.bfg.encode</span></tt> The
replacement does not delegate to the stdlib.</p>
<p>The replacement diverges from the stdlib implementation and the
previous <tt class="docutils literal"><span class="pre">repoze.bfg.url</span></tt> url implementation inasmuch as its
<tt class="docutils literal"><span class="pre">doseq</span></tt> argument is now a decoy: it always behaves in the
<tt class="docutils literal"><span class="pre">doseq=True</span></tt> way (which is the only sane behavior) for speed
purposes.</p>
<p>The old import location (<tt class="docutils literal"><span class="pre">repoze.bfg.url.urlencode</span></tt>) still
functions and has not been deprecated.</p>
</li>
<li><p class="first">In 0.8a7, the return value expected from an object implementing
<tt class="docutils literal"><span class="pre">ITraverserFactory</span></tt> was changed from a sequence of values to a
dictionary containing the keys <tt class="docutils literal"><span class="pre">context</span></tt>, <tt class="docutils literal"><span class="pre">view_name</span></tt>,
<tt class="docutils literal"><span class="pre">subpath</span></tt>, <tt class="docutils literal"><span class="pre">traversed</span></tt>, <tt class="docutils literal"><span class="pre">virtual_root</span></tt>, <tt class="docutils literal"><span class="pre">virtual_root_path</span></tt>,
and <tt class="docutils literal"><span class="pre">root</span></tt>.  Until now, old-style traversers which returned a
sequence have continued to work but have generated a deprecation
warning.  In this release, traversers which return a sequence
instead of a dictionary will no longer work.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-09-23">
<h2>1.1a4 (2009-09-23)<a class="headerlink" href="#a4-2009-09-23" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id329">
<h3>Bug Fixes<a class="headerlink" href="#id329" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>On 64-bit Linux systems, views that were members of a multiview
(orderings of views with predicates) were not evaluated in the
proper order.  Symptom: in a configuration that had two views with
the same name but one with a <tt class="docutils literal"><span class="pre">request_method=POST</span></tt> predicate and
one without, the one without the predicate would be called
unconditionally (even if the request was a POST request).  Thanks
much to Sebastien Douche for providing the buildbots that pointed
this out.</li>
</ul>
</div>
<div class="section" id="id330">
<h3>Documentation<a class="headerlink" href="#id330" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a tutorial which explains how to use <tt class="docutils literal"><span class="pre">repoze.session</span></tt>
(ZODB-based sessions) in a ZODB-based repoze.bfg app.</li>
<li>Added a tutorial which explains how to add ZEO to a ZODB-based
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> application.</li>
<li>Added a tutorial which explains how to run a <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>
application under <a class="reference external" href="http://code.google.com/p/modwsgi/">mod_wsgi</a>.
See &quot;Running a repoze.bfg Application under mod_wsgi&quot; in the
tutorials section of the documentation.</li>
</ul>
</div>
<div class="section" id="id331">
<h3>Features<a class="headerlink" href="#id331" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">repoze.bfg.url.static_url</span></tt> API which is capable of
generating URLs to static resources defined by the <tt class="docutils literal"><span class="pre">&lt;static&gt;</span></tt> ZCML
directive.  See the &quot;Views&quot; narrative chapter's section titled
&quot;Generating Static Resource URLs&quot; for more information.</li>
<li>Add a <tt class="docutils literal"><span class="pre">string</span></tt> renderer.  This renderer converts a non-Response
return value of any view callble into a string.  It is documented in
the &quot;Views&quot; narrative chapter.</li>
<li>Give the <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive the <tt class="docutils literal"><span class="pre">view_attr</span></tt> and
<tt class="docutils literal"><span class="pre">view_renderer</span></tt> parameters (bring up to speed with 1.1a3
features).  These can also be spelled as <tt class="docutils literal"><span class="pre">attr</span></tt> and <tt class="docutils literal"><span class="pre">renderer</span></tt>.</li>
</ul>
</div>
<div class="section" id="id332">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id332" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>An object implementing the <tt class="docutils literal"><span class="pre">IRenderer</span></tt> interface (and
<tt class="docutils literal"><span class="pre">ITemplateRenderer`,</span> <span class="pre">which</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">subclass</span> <span class="pre">of</span> <span class="pre">``IRenderer</span></tt>) must now
accept an extra <tt class="docutils literal"><span class="pre">system</span></tt> argument in its <tt class="docutils literal"><span class="pre">__call__</span></tt> method
implementation.  Values computed by the system (as opposed to by the
view) are passed by the system in the <tt class="docutils literal"><span class="pre">system</span></tt> parameter, which
will always be a dictionary.  Keys in the dictionary include:
<tt class="docutils literal"><span class="pre">view</span></tt> (the view object that returned the value),
<tt class="docutils literal"><span class="pre">renderer_name</span></tt> (the template name or simple name of the
renderer), <tt class="docutils literal"><span class="pre">context</span></tt> (the context object passed to the view), and
<tt class="docutils literal"><span class="pre">request</span></tt> (the request object passed to the view).  Previously
only ITemplateRenderers received system arguments as elements inside
the main <tt class="docutils literal"><span class="pre">value</span></tt> dictionary.</li>
</ul>
</div>
<div class="section" id="id333">
<h3>Internal<a class="headerlink" href="#id333" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The way <tt class="docutils literal"><span class="pre">bfg_view</span></tt> declarations are scanned for has been modified.
This should have no external effects.</li>
<li>Speed: do not register an ITraverserFactory in configure.zcml;
instead rely on queryAdapter and a manual default to
ModelGraphTraverser.</li>
<li>Speed: do not register an IContextURL in configure.zcml; instead
rely on queryAdapter and a manual default to TraversalContextURL.</li>
<li>General speed microimprovements for helloworld benchmark: replace
try/excepts with statements which use 'in' keyword.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-09-16">
<h2>1.1a3 (2009-09-16)<a class="headerlink" href="#a3-2009-09-16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id334">
<h3>Documentation<a class="headerlink" href="#id334" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The &quot;Views&quot; narrative chapter in the documentation has been updated
extensively to discuss &quot;renderers&quot;.</li>
</ul>
</div>
<div class="section" id="id335">
<h3>Features<a class="headerlink" href="#id335" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">renderer</span></tt> attribute has been added to view configurations,
replacing the previous (1.1a2) version's <tt class="docutils literal"><span class="pre">template</span></tt> attribute.  A
&quot;renderer&quot; is an object which accepts the return value of a view and
converts it to a string.  This includes, but is not limited to,
templating systems.</li>
<li>A new interface named <tt class="docutils literal"><span class="pre">IRenderer</span></tt> was added.  The existing
interface, <tt class="docutils literal"><span class="pre">ITemplateRenderer</span></tt> now derives from this new
interface.  This interface is internal.</li>
<li>A new interface named <tt class="docutils literal"><span class="pre">IRendererFactory</span></tt> was added.  An existing
interface named <tt class="docutils literal"><span class="pre">ITemplateRendererFactory</span></tt> now derives from this
interface.  This interface is internal.</li>
<li>The <tt class="docutils literal"><span class="pre">view</span></tt> attribute of the <tt class="docutils literal"><span class="pre">view</span></tt> ZCML directive is no longer
required if the ZCML directive also has a <tt class="docutils literal"><span class="pre">renderer</span></tt> attribute.
This is useful when the renderer is a template renderer and no names
need be passed to the template at render time.</li>
<li>A new zcml directive <tt class="docutils literal"><span class="pre">renderer</span></tt> has been added.  It is documented
in the &quot;Views&quot; narrative chapter of the documentation.</li>
<li>A ZCML <tt class="docutils literal"><span class="pre">view</span></tt> directive (and the associated <tt class="docutils literal"><span class="pre">bfg_view</span></tt>
decorator) can now accept a &quot;wrapper&quot; value.  If a &quot;wrapper&quot; value
is supplied, it is the value of a separate view's <em>name</em> attribute.
When a view with a <tt class="docutils literal"><span class="pre">wrapper</span></tt> attribute is rendered, the &quot;inner&quot;
view is first rendered normally.  Its body is then attached to the
request as &quot;wrapped_body&quot;, and then a wrapper view name is looked up
and rendered (using <tt class="docutils literal"><span class="pre">repoze.bfg.render_view_to_response</span></tt>), passed
the request and the context.  The wrapper view is assumed to do
something sensible with <tt class="docutils literal"><span class="pre">request.wrapped_body</span></tt>, usually inserting
its structure into some other rendered template.  This feature makes
it possible to specify (potentially nested) &quot;owrap&quot; relationships
between views using only ZCML or decorators (as opposed always using
ZPT METAL and analogues to wrap view renderings in outer wrappers).</li>
</ul>
</div>
<div class="section" id="id336">
<h3>Dependencies<a class="headerlink" href="#id336" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When used under Python &lt; 2.6, BFG now has an installation time
dependency on the <tt class="docutils literal"><span class="pre">simplejson</span></tt> package.</li>
</ul>
</div>
<div class="section" id="id337">
<h3>Deprecations<a class="headerlink" href="#id337" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerDummyRenderer</span></tt> API has been
deprecated in favor of
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerTemplateRenderer</span></tt>.  A deprecation
warning is <em>not</em> issued at import time for the former name; it will
exist &quot;forever&quot;; its existence has been removed from the
documentation, however.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.templating.renderer_from_cache</span></tt> function has been
moved to <tt class="docutils literal"><span class="pre">repoze.bfg.renderer.template_renderer_factory</span></tt>.  This
was never an API, but code in the wild was spotted that used it.  A
deprecation warning is issued at import time for the former.</li>
</ul>
</div>
<div class="section" id="id338">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id338" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">ITemplateRenderer</span></tt> interface has been changed.  Previously
its <tt class="docutils literal"><span class="pre">__call__</span></tt> method accepted <tt class="docutils literal"><span class="pre">**kw</span></tt>.  It now accepts a single
positional parameter named <tt class="docutils literal"><span class="pre">kw</span></tt> (REVISED: it accepts two
positional parameters as of 1.1a4: <tt class="docutils literal"><span class="pre">value</span></tt> and <tt class="docutils literal"><span class="pre">system</span></tt>).  This
is mostly an internal change, but it was exposed in APIs in one
place: if you've used the
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerDummyRenderer</span></tt> API in your tests with
a custom &quot;renderer&quot; argument with your own renderer implementation,
you will need to change that renderer implementation to accept
<tt class="docutils literal"><span class="pre">kw</span></tt> instead of <tt class="docutils literal"><span class="pre">**kw</span></tt> in its <tt class="docutils literal"><span class="pre">__call__</span></tt> method (REVISED: make
it accept <tt class="docutils literal"><span class="pre">value</span></tt> and <tt class="docutils literal"><span class="pre">system</span></tt> positional arguments as of 1.1a4).</li>
<li>The <tt class="docutils literal"><span class="pre">ITemplateRendererFactory</span></tt> interface has been changed.
Previously its <tt class="docutils literal"><span class="pre">__call__</span></tt> method accepted an <tt class="docutils literal"><span class="pre">auto_reload</span></tt>
keyword parameter.  Now its <tt class="docutils literal"><span class="pre">__call__</span></tt> method accepts no keyword
parameters.  Renderers are now themselves responsible for
determining details of auto-reload.  This is purely an internal
change.  This interface was never external.</li>
<li>The <tt class="docutils literal"><span class="pre">template_renderer</span></tt> ZCML directive introduced in 1.1a2 has
been removed.  It has been replaced by the <tt class="docutils literal"><span class="pre">renderer</span></tt> directive.</li>
<li>The previous release (1.1a2) added a view configuration attribute
named <tt class="docutils literal"><span class="pre">template</span></tt>.  In this release, the attribute has been renamed
to <tt class="docutils literal"><span class="pre">renderer</span></tt>.  This signifies that the attribute is more generic:
it can now be not just a template name but any renderer name (ala
<tt class="docutils literal"><span class="pre">json</span></tt>).</li>
<li>In the previous release (1.1a2), the Chameleon text template
renderer was used if the system didn't associate the <tt class="docutils literal"><span class="pre">template</span></tt>
view configuration value with a filename with a &quot;known&quot; extension.
In this release, you must use a <tt class="docutils literal"><span class="pre">renderer</span></tt> attribute which is a
path that ends with a <tt class="docutils literal"><span class="pre">.txt</span></tt> extension
(e.g. <tt class="docutils literal"><span class="pre">templates/foo.txt</span></tt>) to use the Chameleon text renderer.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-09-14">
<h2>1.1a2 (2009-09-14)<a class="headerlink" href="#a2-2009-09-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id339">
<h3>Features<a class="headerlink" href="#id339" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A ZCML <tt class="docutils literal"><span class="pre">view</span></tt> directive (and the associated <tt class="docutils literal"><span class="pre">bfg_view</span></tt>
decorator) can now accept an &quot;attr&quot; value.  If an &quot;attr&quot; value is
supplied, it is considered a method named of the view object to be
called when the response is required.  This is typically only good
for views that are classes or instances (not so useful for
functions, as functions typically have no methods other than
<tt class="docutils literal"><span class="pre">__call__</span></tt>).</li>
<li>A ZCML <tt class="docutils literal"><span class="pre">view</span></tt> directive (and the associated <tt class="docutils literal"><span class="pre">bfg_view</span></tt>
decorator) can now accept a &quot;template&quot; value.  If a &quot;template&quot; value
is supplied, and the view callable returns a dictionary, the
associated template is rendered with the dictionary as keyword
arguments.  See the section named &quot;Views That Have a <tt class="docutils literal"><span class="pre">template</span></tt>&quot;
in the &quot;Views&quot; narrative documentation chapter for more information.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-09-06">
<h2>1.1a1 (2009-09-06)<a class="headerlink" href="#a1-2009-09-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id340">
<h3>Bug Fixes<a class="headerlink" href="#id340" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>&quot;tests&quot; module removed from the bfg_alchemy paster template; these
tests didn't work.</li>
<li>Bugfix: the <tt class="docutils literal"><span class="pre">discriminator</span></tt> for the ZCML &quot;route&quot; directive was
incorrect.  It was possible to register two routes that collided
without the system spitting out a ConfigurationConflictError at
startup time.</li>
</ul>
</div>
<div class="section" id="id341">
<h3>Features<a class="headerlink" href="#id341" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Feature addition: view predicates.  These are exposed as the
<tt class="docutils literal"><span class="pre">request_method</span></tt>, <tt class="docutils literal"><span class="pre">request_param</span></tt>, and <tt class="docutils literal"><span class="pre">containment</span></tt>
attributes of a ZCML <tt class="docutils literal"><span class="pre">view</span></tt> declaration, or the respective
arguments to a <tt class="docutils literal"><span class="pre">&#64;bfg_view</span></tt> decorator.  View predicates can be used
to register a view for a more precise set of environment parameters
than was previously possible.  For example, you can register two
views with the same <tt class="docutils literal"><span class="pre">name</span></tt> with different <tt class="docutils literal"><span class="pre">request_param</span></tt>
attributes.  If the <tt class="docutils literal"><span class="pre">request.params</span></tt> dict contains 'foo'
(request_param=&quot;foo&quot;), one view might be called; if it contains
'bar' (request_param=&quot;bar&quot;), another view might be called.
<tt class="docutils literal"><span class="pre">request_param</span></tt> can also name a key/value pair ala <tt class="docutils literal"><span class="pre">foo=123</span></tt>.
This will match only when the <tt class="docutils literal"><span class="pre">foo</span></tt> key is in the request.params
dict and it has the value '123'.  This particular example makes it
possible to write separate view functions for different form
submissions.  The other predicates, <tt class="docutils literal"><span class="pre">containment</span></tt> and
<tt class="docutils literal"><span class="pre">request_method</span></tt> work similarly.  <tt class="docutils literal"><span class="pre">containment</span></tt> is a view
predicate that will match only when the context's graph lineage has
an object possessing a particular class or interface, for example.
<tt class="docutils literal"><span class="pre">request_method</span></tt> is a view predicate that will match when the HTTP
<tt class="docutils literal"><span class="pre">REQUEST_METHOD</span></tt> equals some string (eg. 'POST').</li>
<li>The <tt class="docutils literal"><span class="pre">&#64;bfg_view</span></tt> decorator now accepts three additional arguments:
<tt class="docutils literal"><span class="pre">request_method</span></tt>, <tt class="docutils literal"><span class="pre">request_param</span></tt>, and <tt class="docutils literal"><span class="pre">containment</span></tt>.
<tt class="docutils literal"><span class="pre">request_method</span></tt> is used when you'd like the view to match only a
request with a particular HTTP <tt class="docutils literal"><span class="pre">REQUEST_METHOD</span></tt>; a string naming
the <tt class="docutils literal"><span class="pre">REQUEST_METHOD</span></tt> can also be supplied as <tt class="docutils literal"><span class="pre">request_type</span></tt> for
backwards compatibility.  <tt class="docutils literal"><span class="pre">request_param</span></tt> is used when you'd like
a view to match only a request that contains a particular
<tt class="docutils literal"><span class="pre">request.params</span></tt> key (with or without a value).  <tt class="docutils literal"><span class="pre">containment</span></tt>
is used when you'd like to match a request that has a context that
has some class or interface in its graph lineage.  These are
collectively known as &quot;view predicates&quot;.</li>
<li>The <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive now honors <tt class="docutils literal"><span class="pre">view_request_method</span></tt>,
<tt class="docutils literal"><span class="pre">view_request_param</span></tt> and <tt class="docutils literal"><span class="pre">view_containment</span></tt> attributes, which
pass along these values to the associated view if any is provided.
Additionally, the <tt class="docutils literal"><span class="pre">request_type</span></tt> attribute can now be spelled as
<tt class="docutils literal"><span class="pre">view_request_type</span></tt>, and <tt class="docutils literal"><span class="pre">permission</span></tt> can be spelled as
<tt class="docutils literal"><span class="pre">view_permission</span></tt>.  Any attribute which starts with <tt class="docutils literal"><span class="pre">view_</span></tt> can
now be spelled without the <tt class="docutils literal"><span class="pre">view_</span></tt> prefix, so <tt class="docutils literal"><span class="pre">view_for</span></tt> can be
spelled as <tt class="docutils literal"><span class="pre">for</span></tt> now, etc.  Both forms are documented in the
urldispatch narraitve documentation chapter.</li>
<li>The <tt class="docutils literal"><span class="pre">request_param</span></tt> ZCML view directive attribute (and its
<tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorator cousin) can now specify both a key and a
value.  For example, <tt class="docutils literal"><span class="pre">request_param=&quot;foo=123&quot;</span></tt> means that the foo
key must have a value of <tt class="docutils literal"><span class="pre">123</span></tt> for the view to &quot;match&quot;.</li>
<li>Allow <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.find_interface</span></tt> API to use a class
object as the argument to compare against the <tt class="docutils literal"><span class="pre">model</span></tt> passed in.
This means you can now do <tt class="docutils literal"><span class="pre">find_interface(model,</span> <span class="pre">SomeClass)</span></tt> and
the first object which is found in the lineage which has
<tt class="docutils literal"><span class="pre">SomeClass</span></tt> as its class (or the first object found which has
<tt class="docutils literal"><span class="pre">SomeClass</span></tt> as any of its superclasses) will be returned.</li>
<li>Added <tt class="docutils literal"><span class="pre">static</span></tt> ZCML directive which registers a route for a view
that serves up files in a directory.  See the &quot;Views&quot; narrative
documentation chapter's &quot;Serving Static Resources Using a ZCML
Directive&quot; section for more information.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.view.static</span></tt> class now accepts a string as its
first argument (&quot;root_dir&quot;) that represents a package-relative name
e.g. <tt class="docutils literal"><span class="pre">somepackage:foo/bar/static</span></tt>.  This is now the preferred
mechanism for spelling package-relative static paths using this
class.  A <tt class="docutils literal"><span class="pre">package_name</span></tt> keyword argument has been left around for
backwards compatibility.  If it is supplied, it will be honored.</li>
<li>The API <tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerView</span></tt> now takes a
<tt class="docutils literal"><span class="pre">permission</span></tt> argument.  Use this instead of using
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerViewPermission</span></tt>.</li>
<li>The ordering of route declarations vs. the ordering of view
declarations that use a &quot;route_name&quot; in ZCML no longer matters.
Previously it had been impossible to use a route_name from a route
that had not yet been defined in ZCML (order-wise) within a &quot;view&quot;
declaration.</li>
<li>The repoze.bfg router now catches both
<tt class="docutils literal"><span class="pre">repoze.bfg.security.Unauthorized</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.view.NotFound</span></tt> exceptions while rendering a view.
When the router catches an <tt class="docutils literal"><span class="pre">Unauthorized</span></tt>, it returns the
registered forbidden view.  When the router catches a <tt class="docutils literal"><span class="pre">NotFound</span></tt>,
it returns the registered notfound view.</li>
</ul>
</div>
<div class="section" id="id342">
<h3>Internal<a class="headerlink" href="#id342" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Change urldispatch internals: Route object is now constructed using
a path, a name, and a factory instead of a name, a matcher, a
generator, and a factory.</li>
<li>Move (non-API) default_view, default_forbidden_view, and
default_notfound_view functions into the <tt class="docutils literal"><span class="pre">repoze.bfg.view</span></tt> module
(moved from <tt class="docutils literal"><span class="pre">repoze.bfg.router</span></tt>).</li>
<li>Removed ViewPermissionFactory from <tt class="docutils literal"><span class="pre">repoze.bfg.security</span></tt>.  View
permission checking is now done by registering and looking up an
ISecuredView.</li>
<li>The <tt class="docutils literal"><span class="pre">static</span></tt> ZCML directive now uses a custom root factory when
constructing a route.</li>
<li>The interface <tt class="docutils literal"><span class="pre">IRequestFactories</span></tt> was removed from the
repoze.bfg.interfaces module.  This interface was never an API.</li>
<li>The function named <tt class="docutils literal"><span class="pre">named_request_factories</span></tt> and the data
structure named <tt class="docutils literal"><span class="pre">DEFAULT_REQUEST_FACTORIES</span></tt> have been removed from
the <tt class="docutils literal"><span class="pre">repoze.bfg.request</span></tt> module.  These were never APIs.</li>
<li>The <tt class="docutils literal"><span class="pre">IViewPermissionFactory</span></tt> interface has been removed.  This was
never an API.</li>
</ul>
</div>
<div class="section" id="id343">
<h3>Documentation<a class="headerlink" href="#id343" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Request-only-convention examples in the &quot;Views&quot; narrative
documentation were broken.</li>
<li>Fixed documentation bugs related to forget and remember in security API
docs.</li>
<li>Fixed documentation for <tt class="docutils literal"><span class="pre">repoze.bfg.view.static</span></tt> (in narrative
<tt class="docutils literal"><span class="pre">Views</span></tt> chapter).</li>
</ul>
</div>
<div class="section" id="id344">
<h3>Deprecations<a class="headerlink" href="#id344" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The API <tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerViewPermission</span></tt> has been
deprecated.</li>
</ul>
</div>
<div class="section" id="id345">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id345" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The interfaces <tt class="docutils literal"><span class="pre">IPOSTRequest</span></tt>, <tt class="docutils literal"><span class="pre">IGETRequest</span></tt>, <tt class="docutils literal"><span class="pre">IPUTRequest</span></tt>,
<tt class="docutils literal"><span class="pre">IDELETERequest</span></tt>, and <tt class="docutils literal"><span class="pre">IHEADRequest</span></tt> have been removed from the
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces</span></tt> module.  These were not documented as APIs
post-1.0.  Instead of using one of these, use a <tt class="docutils literal"><span class="pre">request_method</span></tt>
ZCML attribute or <tt class="docutils literal"><span class="pre">request_method</span></tt> bfg_view decorator parameter
containing an HTTP method name (one of <tt class="docutils literal"><span class="pre">GET</span></tt>, <tt class="docutils literal"><span class="pre">POST</span></tt>, <tt class="docutils literal"><span class="pre">HEAD</span></tt>,
<tt class="docutils literal"><span class="pre">PUT</span></tt>, <tt class="docutils literal"><span class="pre">DELETE</span></tt>) instead of one of these interfaces if you were
using one explicitly.  Passing a string in the set (<tt class="docutils literal"><span class="pre">GET</span></tt>,
<tt class="docutils literal"><span class="pre">HEAD</span></tt>, <tt class="docutils literal"><span class="pre">PUT</span></tt>, <tt class="docutils literal"><span class="pre">POST</span></tt>, <tt class="docutils literal"><span class="pre">DELETE</span></tt>) as a <tt class="docutils literal"><span class="pre">request_type</span></tt>
argument will work too.  Rationale: instead of relying on interfaces
attached to the request object, BFG now uses a &quot;view predicate&quot; to
determine the request type.</p>
</li>
<li><p class="first">Views registered without the help of the ZCML <tt class="docutils literal"><span class="pre">view</span></tt> directive are
now responsible for performing their own authorization checking.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">registry_manager</span></tt> backwards compatibility alias importable
from &quot;repoze.bfg.registry&quot;, deprecated since repoze.bfg 0.9 has been
removed.  If you are tring to use the registry manager within a
debug script of your own, use a combination of the
&quot;repoze.bfg.paster.get_app&quot; and &quot;repoze.bfg.scripting.get_root&quot; APIs
instead.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">INotFoundAppFactory</span></tt> interface has been removed; it has
been deprecated since repoze.bfg 0.9.  If you have something like
the following in your <tt class="docutils literal"><span class="pre">configure.zcml</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;utility provides=&quot;repoze.bfg.interfaces.INotFoundAppFactory&quot;
         component=&quot;helloworld.factories.notfound_app_factory&quot;/&gt;
</pre></div>
</div>
<p>Replace it with something like:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;notfound
    view=&quot;helloworld.views.notfound_view&quot;/&gt;
</pre></div>
</div>
<p>See &quot;Changing the Not Found View&quot; in the &quot;Hooks&quot; chapter of the
documentation for more information.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">IUnauthorizedAppFactory</span></tt> interface has been removed; it has
been deprecated since repoze.bfg 0.9.  If you have something like
the following in your <tt class="docutils literal"><span class="pre">configure.zcml</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;utility provides=&quot;repoze.bfg.interfaces.IUnauthorizedAppFactory&quot;
         component=&quot;helloworld.factories.unauthorized_app_factory&quot;/&gt;
</pre></div>
</div>
<p>Replace it with something like:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;forbidden
    view=&quot;helloworld.views.forbidden_view&quot;/&gt;
</pre></div>
</div>
<p>See &quot;Changing the Forbidden View&quot; in the &quot;Hooks&quot; chapter of the
documentation for more information.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">ISecurityPolicy</span></tt>-based security policies, deprecated since
repoze.bfg 0.9, have been removed.  If you have something like this
in your <tt class="docutils literal"><span class="pre">configure.zcml</span></tt>, it will no longer work:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;utility
  provides=&quot;repoze.bfg.interfaces.ISecurityPolicy&quot;
  factory=&quot;repoze.bfg.security.RemoteUserInheritingACLSecurityPolicy&quot;
 /&gt;
</pre></div>
</div>
<p>If ZCML like the above exists in your application, you will receive
an error at startup time.  Instead of the above, you'll need
something like:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;remoteuserauthenticationpolicy/&gt;
&lt;aclauthorizationpolicy/&gt;
</pre></div>
</div>
<p>This is just an example.  See the &quot;Security&quot; chapter of the
repoze.bfg documentation for more information about configuring
security policies.</p>
</li>
<li><p class="first">Custom ZCML directives which register an authentication or
authorization policy (ala &quot;authtktauthenticationpolicy&quot; or
&quot;aclauthorizationpolicy&quot;) should register the policy &quot;eagerly&quot; in
the ZCML directive instead of from within a ZCML action.  If an
authentication or authorization policy is not found in the component
registry by the view machinery during deferred ZCML processing, view
security will not work as expected.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id346">
<h2>1.0.1 (2009-07-22)<a class="headerlink" href="#id346" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added support for <tt class="docutils literal"><span class="pre">has_resource</span></tt>, <tt class="docutils literal"><span class="pre">resource_isdir</span></tt>, and
<tt class="docutils literal"><span class="pre">resource_listdir</span></tt> to the resource &quot;OverrideProvider&quot;; this fixes
a bug with a symptom that a file could not be overridden in a
resource directory unless a file with the same name existed in the
original directory being overridden.</li>
<li>Fixed documentation bug showing invalid test for values from the
<tt class="docutils literal"><span class="pre">matchdict</span></tt>:  they are stored as attributes of the <tt class="docutils literal"><span class="pre">Article</span></tt>, rather
than subitems.</li>
<li>Fixed documentation bug showing wrong environment key for the <tt class="docutils literal"><span class="pre">matchdict</span></tt>
produced by the matching route.</li>
<li>Added a workaround for a bug in Python 2.6, 2.6.1, and 2.6.2 having
to do with a recursion error in the mimetypes module when trying to
serve static files from Paste's FileApp:
<a class="reference external" href="http://bugs.python.org/issue5853">http://bugs.python.org/issue5853</a>.  Symptom: File
&quot;/usr/lib/python2.6/mimetypes.py&quot;, line 244, in guess_type return
guess_type(url, strict) RuntimeError: maximum recursion depth
exceeded.  Thanks to Armin Ronacher for identifying the symptom and
pointing out a fix.</li>
<li>Minor edits to tutorials for accuracy based on feedback.</li>
<li>Declared Paste and PasteDeploy dependencies.</li>
</ul>
</div>
<div class="section" id="id347">
<h2>1.0 (2009-07-05)<a class="headerlink" href="#id347" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Retested and added some content to GAE tutorial.</li>
<li>Edited &quot;Extending&quot; narrative docs chapter.</li>
<li>Added &quot;Deleting the Database&quot; section to the &quot;Defining Models&quot;
chapter of the traversal wiki tutorial.</li>
<li>Spell checking of narratives and tutorials.</li>
</ul>
</div>
<div class="section" id="b2-2009-07-03">
<h2>1.0b2 (2009-07-03)<a class="headerlink" href="#b2-2009-07-03" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">remoteuserauthenticationpolicy</span></tt> ZCML directive didn't work
without an <tt class="docutils literal"><span class="pre">environ_key</span></tt> directive (didn't match docs).</li>
<li>Fix <tt class="docutils literal"><span class="pre">configure_zcml</span></tt> filespec check on Windows.  Previously if an
absolute filesystem path including a drive letter was passed as
<tt class="docutils literal"><span class="pre">filename</span></tt> (or as <tt class="docutils literal"><span class="pre">configure_zcml</span></tt> in the options dict) to
<tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt>, it would be treated as a
package:resource_name specification.</li>
<li>Fix inaccuracies and import errors in bfgwiki (traversal+ZODB) and
bfgwiki2 (urldispatch+SA) tutorials.</li>
<li>Use bfgsite index for all tutorial setup.cfg files.</li>
<li>Full documentation grammar/style/spelling audit.</li>
</ul>
</div>
<div class="section" id="b1-2009-07-02">
<h2>1.0b1 (2009-07-02)<a class="headerlink" href="#b1-2009-07-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id348">
<h3>Features<a class="headerlink" href="#id348" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow a Paste config file (<tt class="docutils literal"><span class="pre">configure_zcml</span></tt>) value or an
environment variable (<tt class="docutils literal"><span class="pre">BFG_CONFIGURE_ZCML</span></tt>) to name a ZCML file
(optionally package-relative) that will be used to bootstrap the
application.  Previously, the integrator could not influence which
ZCML file was used to do the boostrapping (only the original
application developer could do so).</li>
</ul>
</div>
<div class="section" id="id349">
<h3>Documentation<a class="headerlink" href="#id349" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a &quot;Resources&quot; chapter to the narrative documentation which
explains how to override resources within one package from another
package.</li>
<li>Added an &quot;Extending&quot; chapter to the narrative documentation which
explains how to extend or modify an existing BFG application using
another Python package and ZCML.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2009-07-01">
<h2>1.0a9 (2009-07-01)<a class="headerlink" href="#a9-2009-07-01" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id350">
<h3>Features<a class="headerlink" href="#id350" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make it possible to pass strings in the form
&quot;package_name:relative/path&quot; to APIs like <tt class="docutils literal"><span class="pre">render_template</span></tt>,
<tt class="docutils literal"><span class="pre">render_template_to_response</span></tt>, and <tt class="docutils literal"><span class="pre">get_template</span></tt>.  Sometimes
the package in which a caller lives is a direct namespace package,
so the module which is returned is semi-useless for navigating from.
In this way, the caller can control the horizontal and vertical of
where things get looked up from.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2009-07-01">
<h2>1.0a8 (2009-07-01)<a class="headerlink" href="#a8-2009-07-01" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id351">
<h3>Deprecations<a class="headerlink" href="#id351" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deprecate the <tt class="docutils literal"><span class="pre">authentication_policy</span></tt> and <tt class="docutils literal"><span class="pre">authorization_policy</span></tt>
arguments to <tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt>.  Instead, developers
should use the various authentication policy ZCML directives
(<tt class="docutils literal"><span class="pre">repozewho1authenticationpolicy</span></tt>,
<tt class="docutils literal"><span class="pre">remoteuserauthenticationpolicy</span></tt> and
<tt class="docutils literal"><span class="pre">authtktauthenticationpolicy</span></tt>) and the <cite>aclauthorizationpolicy`</cite>
authorization policy directive as described in the changes to the
&quot;Security&quot; narrative documenation chapter and the wiki tutorials.</li>
</ul>
</div>
<div class="section" id="id352">
<h3>Features<a class="headerlink" href="#id352" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add three new ZCML directives which configure authentication
policies:<ul>
<li><tt class="docutils literal"><span class="pre">repozewho1authenticationpolicy</span></tt></li>
<li><tt class="docutils literal"><span class="pre">remoteuserauthenticationpolicy</span></tt></li>
<li><tt class="docutils literal"><span class="pre">authtktauthenticationpolicy</span></tt></li>
</ul>
</li>
<li>Add a new ZCML directive which configures an ACL authorization
policy named <tt class="docutils literal"><span class="pre">aclauthorizationpolicy</span></tt>.</li>
</ul>
</div>
<div class="section" id="id353">
<h3>Bug Fixes<a class="headerlink" href="#id353" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug fix: when a <tt class="docutils literal"><span class="pre">repoze.bfg.resource.PackageOverrides</span></tt> class was
instantiated, and the package it was overriding already had a
<tt class="docutils literal"><span class="pre">__loader__</span></tt> attribute, it would fail at startup time, even if the
<tt class="docutils literal"><span class="pre">__loader__</span></tt> attribute was another PackageOverrides instance.  We
now replace any <tt class="docutils literal"><span class="pre">__loader__</span></tt> that is also a PackageOverrides
instance.  Symptom: <tt class="docutils literal"><span class="pre">ConfigurationExecutionError:</span> <span class="pre">&lt;type</span>
<span class="pre">'exceptions.TypeError'&gt;:</span> <span class="pre">Package</span> <span class="pre">&lt;module</span> <span class="pre">'karl.views'</span> <span class="pre">from</span>
<span class="pre">'/Users/chrism/projects/osi/bfgenv/src/karl/karl/views/__init__.pyc'&gt;</span>
<span class="pre">already</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">__loader__</span> <span class="pre">(probably</span> <span class="pre">a</span> <span class="pre">module</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">zipped</span> <span class="pre">egg)</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-06-30">
<h2>1.0a7 (2009-06-30)<a class="headerlink" href="#a7-2009-06-30" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id354">
<h3>Features<a class="headerlink" href="#id354" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">reload_resources</span></tt> configuration file setting (aka the
<tt class="docutils literal"><span class="pre">BFG_RELOAD_RESOURCES</span></tt> environment variable).  When this is set to
true, the server never needs to be restarted when moving files
between directory resource overrides (esp. for templates currently).</li>
<li>Add a <tt class="docutils literal"><span class="pre">reload_all</span></tt> configuration file setting (aka the
<tt class="docutils literal"><span class="pre">BFG_RELOAD_ALL</span></tt> environment variable) that implies both
<tt class="docutils literal"><span class="pre">reload_resources</span></tt> and <tt class="docutils literal"><span class="pre">reload_templates</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">static</span></tt> helper view class now uses a <tt class="docutils literal"><span class="pre">PackageURLParser</span></tt> in
order to allow for the overriding of static resources (CSS / logo
files, etc) using the <tt class="docutils literal"><span class="pre">resource</span></tt> ZCML directive.  The
<tt class="docutils literal"><span class="pre">PackageURLParser</span></tt> class was added to a (new) <tt class="docutils literal"><span class="pre">static</span></tt> module in
BFG; it is a subclass of the <tt class="docutils literal"><span class="pre">StaticURLParser</span></tt> class in
<tt class="docutils literal"><span class="pre">paste.urlparser</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.templating.renderer_from_cache</span></tt> function now
checks for the <tt class="docutils literal"><span class="pre">reload_resources</span></tt> setting; if it's true, it does
not register a template renderer (it won't use the registry as a
template renderer cache).</li>
</ul>
</div>
<div class="section" id="id355">
<h3>Documentation<a class="headerlink" href="#id355" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">pkg_resources</span></tt> to the glossary.</li>
<li>Update the &quot;Environment&quot; docs to note the existence of
<tt class="docutils literal"><span class="pre">reload_resources</span></tt> and <tt class="docutils literal"><span class="pre">reload_all</span></tt>.</li>
<li>Updated the <tt class="docutils literal"><span class="pre">bfg_alchemy</span></tt> paster template to include two views:
the view on the root shows a list of links to records;  the view on
a record shows the details for that object.</li>
</ul>
</div>
<div class="section" id="id356">
<h3>Internal<a class="headerlink" href="#id356" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use a colon instead of a tab as the separator between package name
and relpath to form the &quot;spec&quot; when register a ITemplateRenderer.</li>
<li>Register a <tt class="docutils literal"><span class="pre">repoze.bfg.resource.OverrideProvider</span></tt> as a
pkg_resources provider only for modules which are known to have
overrides, instead of globally, when a &lt;resource&gt; directive is used
(performance).</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-06-29">
<h2>1.0a6 (2009-06-29)<a class="headerlink" href="#a6-2009-06-29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id357">
<h3>Bug Fixes<a class="headerlink" href="#id357" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use <tt class="docutils literal"><span class="pre">caller_package</span></tt> function instead of <tt class="docutils literal"><span class="pre">caller_module</span></tt>
function within <tt class="docutils literal"><span class="pre">templating</span></tt> to avoid needing to name the caller
module in resource overrides (actually match docs).</li>
<li>Make it possible to override templates stored directly in a module
with templates in a subdirectory of the same module, stored directly
within another module, or stored in a subdirectory of another module
(actually match docs).</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-06-28">
<h2>1.0a5 (2009-06-28)<a class="headerlink" href="#a5-2009-06-28" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id358">
<h3>Features<a class="headerlink" href="#id358" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">A new ZCML directive exists named &quot;resource&quot;.  This ZCML directive
allows you to override Chameleon templates within a package (both
directories full of templates and individual template files) with
other templates in the same package or within another package.  This
allows you to &quot;fake out&quot; a view's use of a template, causing it to
retrieve a different template than the one actually named by a
relative path to a call like
<tt class="docutils literal"><span class="pre">render_template_to_response('templates/mytemplate.pt')</span></tt>.  For
example, you can override a template file by doing:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;resource
  to_override=&quot;some.package:templates/mytemplate.pt&quot;
  override_with=&quot;another.package:othertemplates/anothertemplate.pt&quot;
 /&gt;
</pre></div>
</div>
<p>The string passed to &quot;to_override&quot; and &quot;override_with&quot; is named a
&quot;specification&quot;.  The colon separator in a specification separates
the package name from a package-relative directory name.  The colon
and the following relative path are optional.  If they are not
specified, the override attempts to resolve every lookup into a
package from the directory of another package.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;resource
  to_override=&quot;some.package&quot;
  override_with=&quot;another.package&quot;
 /&gt;
</pre></div>
</div>
<p>Individual subdirectories within a package can also be overridden:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;resource
  to_override=&quot;some.package:templates/&quot;
  override_with=&quot;another.package:othertemplates/&quot;
 /&gt;
</pre></div>
</div>
<p>If you wish to override a directory with another directory, you must
make sure to attach the slash to the end of both the <tt class="docutils literal"><span class="pre">to_override</span></tt>
specification and the <tt class="docutils literal"><span class="pre">override_with</span></tt> specification.  If you fail
to attach a slash to the end of a specification that points a
directory, you will get unexpected results.  You cannot override a
directory specification with a file specification, and vice versa (a
startup error will occur if you try).</p>
<p>You cannot override a resource with itself (a startup error will
occur if you try).</p>
<p>Only individual <em>package</em> resources may be overridden.  Overrides
will not traverse through subpackages within an overridden package.
This means that if you want to override resources for both
<tt class="docutils literal"><span class="pre">some.package:templates</span></tt>, and <tt class="docutils literal"><span class="pre">some.package.views:templates</span></tt>,
you will need to register two overrides.</p>
<p>The package name in a specification may start with a dot, meaning
that the package is relative to the package in which the ZCML file
resides.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;resource
  to_override=&quot;.subpackage:templates/&quot;
  override_with=&quot;another.package:templates/&quot;
 /&gt;
</pre></div>
</div>
<p>Overrides for the same <tt class="docutils literal"><span class="pre">to_overrides</span></tt> specification can be named
multiple times within ZCML.  Each <tt class="docutils literal"><span class="pre">override_with</span></tt> path will be
consulted in the order defined within ZCML, forming an override
search path.</p>
<p>Resource overrides can actually override resources other than
templates.  Any software which uses the <tt class="docutils literal"><span class="pre">pkg_resources</span></tt>
<tt class="docutils literal"><span class="pre">get_resource_filename</span></tt>, <tt class="docutils literal"><span class="pre">get_resource_stream</span></tt> or
<tt class="docutils literal"><span class="pre">get_resource_string</span></tt> APIs will obtain an overridden file when an
override is used.  However, the only built-in facility which uses
the <tt class="docutils literal"><span class="pre">pkg_resources</span></tt> API within BFG is the templating stuff, so we
only call out template overrides here.</p>
</li>
<li><p class="first">Use the <tt class="docutils literal"><span class="pre">pkg_resources</span></tt> API to locate template filenames instead
of dead-reckoning using the <tt class="docutils literal"><span class="pre">os.path</span></tt> module.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.templating</span></tt> module now uses <tt class="docutils literal"><span class="pre">pkg_resources</span></tt> to
locate and register template files instead of using an absolute
path name.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-06-25">
<h2>1.0a4 (2009-06-25)<a class="headerlink" href="#a4-2009-06-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id359">
<h3>Features<a class="headerlink" href="#id359" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Cause <tt class="docutils literal"><span class="pre">:segment</span></tt> matches in route paths to put a Unicode-decoded
and URL-dequoted value in the matchdict for the value matched.
Previously a non-decoded non-URL-dequoted string was placed in the
matchdict as the value.</li>
<li>Cause <tt class="docutils literal"><span class="pre">*remainder</span></tt> matches in route paths to put a <em>tuple</em> in the
matchdict dictionary in order to be able to present Unicode-decoded
and URL-dequoted values for the traversal path.  Previously a
non-decoded non-URL-dequoted string was placed in the matchdict as
the value.</li>
<li>Add optional <tt class="docutils literal"><span class="pre">max_age</span></tt> keyword value to the <tt class="docutils literal"><span class="pre">remember</span></tt> method of
<tt class="docutils literal"><span class="pre">repoze.bfg.authentication.AuthTktAuthenticationPolicy</span></tt>; if this
value is passed to <tt class="docutils literal"><span class="pre">remember</span></tt>, the generated cookie will have a
corresponding Max-Age value.</li>
</ul>
</div>
<div class="section" id="id360">
<h3>Documentation<a class="headerlink" href="#id360" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add information to the URL Dispatch narrative documentation about
path pattern matching syntax.</li>
</ul>
</div>
<div class="section" id="id361">
<h3>Bug Fixes<a class="headerlink" href="#id361" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make <tt class="docutils literal"><span class="pre">route_url</span></tt> URL-quote segment replacements during generation.
Remainder segments are not quoted.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-06-24">
<h2>1.0a3 (2009-06-24)<a class="headerlink" href="#a3-2009-06-24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="implementation-changes">
<h3>Implementation Changes<a class="headerlink" href="#implementation-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> no longer relies on the Routes package to interpret
URL paths.  All known existing <tt class="docutils literal"><span class="pre">path</span></tt> patterns will continue to
work with the reimplemented logic, which lives in
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch</span></tt>.  <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> ZCML directives which use
certain attributes (uncommon ones) may not work (see &quot;Backwards
Incompatibilities&quot; below).</li>
</ul>
</div>
<div class="section" id="id362">
<h3>Bug Fixes<a class="headerlink" href="#id362" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">model_url</span></tt> when passed a request that was generated as a result
of a route match would fail in a call to <tt class="docutils literal"><span class="pre">route.generate</span></tt>.</li>
<li>BFG-on-GAE didn't work due to a corner case bug in the fallback
Python implementation of <tt class="docutils literal"><span class="pre">threading.local</span></tt> (symptom:
&quot;Initialization arguments are not supported&quot;).  Thanks to Michael
Bernstein for the bug report.</li>
</ul>
</div>
<div class="section" id="id363">
<h3>Documentation<a class="headerlink" href="#id363" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a &quot;corner case&quot; explanation to the &quot;Hybrid Apps&quot; chapter
explaining what to do when &quot;the wrong&quot; view is matched.</li>
<li>Use <tt class="docutils literal"><span class="pre">repoze.bfg.url.route_url</span></tt> API in tutorials rather than Routes
<tt class="docutils literal"><span class="pre">url_for</span></tt> API.</li>
</ul>
</div>
<div class="section" id="id364">
<h3>Features<a class="headerlink" href="#id364" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added the <tt class="docutils literal"><span class="pre">repoze.bfg.url.route_url</span></tt> API.  This API allows you to
generate URLs based on <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> declarations.  See the URL
Dispatch narrative chapter and the &quot;repoze.bfg.url&quot; module API
documentation for more information.</li>
</ul>
</div>
<div class="section" id="id365">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id365" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>As a result of disusing Routes, using the Routes <tt class="docutils literal"><span class="pre">url_for</span></tt> API
inside a BFG application (as was suggested by previous iterations of
tutorials) will no longer work.  Use the
<tt class="docutils literal"><span class="pre">repoze.bfg.url.route_url</span></tt> method instead.</li>
<li>The following attributes on the <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> ZCML directive no longer
work: <tt class="docutils literal"><span class="pre">encoding</span></tt>, <tt class="docutils literal"><span class="pre">static</span></tt>, <tt class="docutils literal"><span class="pre">filter</span></tt>, <tt class="docutils literal"><span class="pre">condition_method</span></tt>,
<tt class="docutils literal"><span class="pre">condition_subdomain</span></tt>, <tt class="docutils literal"><span class="pre">condition_function</span></tt>, <tt class="docutils literal"><span class="pre">explicit</span></tt>, or
<tt class="docutils literal"><span class="pre">subdomains</span></tt>.  These were all Routes features.</li>
<li>The <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> ZCML directive no longer supports the
<tt class="docutils literal"><span class="pre">&lt;requirement&gt;</span></tt> subdirective.  This was a Routes feature.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-06-23">
<h2>1.0a2 (2009-06-23)<a class="headerlink" href="#a2-2009-06-23" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id366">
<h3>Bug Fixes<a class="headerlink" href="#id366" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">bfg_routesalchemy</span></tt> paster template app tests failed due to a
mismatch between test and view signatures.</li>
</ul>
</div>
<div class="section" id="id367">
<h3>Features<a class="headerlink" href="#id367" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">view_for</span></tt> attribute to the <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive.  This
attribute should refer to an interface or a class (ala the <tt class="docutils literal"><span class="pre">for</span></tt>
attribute of the <tt class="docutils literal"><span class="pre">view</span></tt> ZCML directive).</li>
</ul>
</div>
<div class="section" id="id368">
<h3>Documentation<a class="headerlink" href="#id368" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Conditional documentation in installation section (&quot;how to install a
Python interpreter&quot;).</li>
</ul>
</div>
<div class="section" id="id369">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id369" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">callback</span></tt> argument of the <tt class="docutils literal"><span class="pre">repoze.bfg.authentication</span></tt>
authentication policies named <tt class="docutils literal"><span class="pre">RepozeWho1AuthenticationPolicy</span></tt>,
<tt class="docutils literal"><span class="pre">RemoteUserAuthenticationPolicy</span></tt>, and
<tt class="docutils literal"><span class="pre">AuthTktAuthenticationPolicy</span></tt> now must accept two positional
arguments: the orginal argument accepted by each (userid or
identity) plus a second argument, which will be the current request.
Apologies, this is required to service finding groups when there is
no &quot;global&quot; database connection.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-06-22">
<h2>1.0a1 (2009-06-22)<a class="headerlink" href="#a1-2009-06-22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id370">
<h3>Features<a class="headerlink" href="#id370" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">A new ZCML directive was added named <tt class="docutils literal"><span class="pre">notfound</span></tt>.  This ZCML
directive can be used to name a view that should be invoked when the
request can't otherwise be resolved to a view callable.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;notfound
    view=&quot;helloworld.views.notfound_view&quot;/&gt;
</pre></div>
</div>
</li>
<li><p class="first">A new ZCML directive was added named <tt class="docutils literal"><span class="pre">forbidden</span></tt>.  This ZCML
directive can be used to name a view that should be invoked when a
view callable for a request is found, but cannot be invoked due to
an authorization failure.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;forbidden
    view=&quot;helloworld.views.forbidden_view&quot;/&gt;
</pre></div>
</div>
</li>
<li><p class="first">Allow views to be <em>optionally</em> defined as callables that accept only
a request object, instead of both a context and a request (which
still works, and always will).  The following types work as views in
this style:</p>
<ul>
<li><p class="first">functions that accept a single argument <tt class="docutils literal"><span class="pre">request</span></tt>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">aview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</li>
<li><p class="first">new and old-style classes that have an <tt class="docutils literal"><span class="pre">__init__</span></tt> method that
accepts <tt class="docutils literal"><span class="pre">self,</span> <span class="pre">request</span></tt>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>def View(object):
    __init__(self, request):
       pass
</pre></div>
</div>
</li>
<li><p class="first">Arbitrary callables that have a <tt class="docutils literal"><span class="pre">__call__</span></tt> method that accepts
<tt class="docutils literal"><span class="pre">self,</span> <span class="pre">request</span></tt>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">AView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
       <span class="k">pass</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">AView</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
<p>This likely should have been the calling convention all along, as
the request has <tt class="docutils literal"><span class="pre">context</span></tt> as an attribute already, and with views
called as a result of URL dispatch, having the context in the
arguments is not very useful.  C'est la vie.</p>
</li>
<li><p class="first">Cache the absolute path in the caller's package globals within
<tt class="docutils literal"><span class="pre">repoze.bfg.path</span></tt> to get rid of repeated (expensive) calls to
os.path.abspath.</p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">reissue_time</span></tt> and <tt class="docutils literal"><span class="pre">timeout</span></tt> parameters to
<tt class="docutils literal"><span class="pre">repoze.bfg.authentication.AuthTktAuthenticationPolicy</span></tt>
constructor.  If these are passed, cookies will be reset every so
often (cadged from the same change to repoze.who lately).</p>
</li>
<li><p class="first">The matchdict related to the matching of a Routes route is available
on the request as the <tt class="docutils literal"><span class="pre">matchdict</span></tt> attribute:
<tt class="docutils literal"><span class="pre">request.matchdict</span></tt>.  If no route matched, this attribute will be
None.</p>
</li>
<li><p class="first">Make 404 responses slightly cheaper by showing
<tt class="docutils literal"><span class="pre">environ[&quot;PATH_INFO&quot;]</span></tt> on the notfound result page rather than the
fullly computed URL.</p>
</li>
<li><p class="first">Move LRU cache implementation into a separate package
(<tt class="docutils literal"><span class="pre">repoze.lru</span></tt>).</p>
</li>
<li><p class="first">The concepts of traversal and URL dispatch have been unified.  It is
now possible to use the same sort of factory as both a traversal
&quot;root factory&quot; and what used to be referred to as a urldispatch
&quot;context factory&quot;.</p>
</li>
<li><p class="first">When the root factory argument (as a first argument) passed to
<tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt> is <tt class="docutils literal"><span class="pre">None</span></tt>, a <em>default</em> root factory
is used.  This is in support of using routes as &quot;root finders&quot;; it
supplants the idea that there is a default
<tt class="docutils literal"><span class="pre">IRoutesContextFactory</span></tt>.</p>
</li>
<li><p class="first">The <cite>view`</cite> ZCML statement and the <tt class="docutils literal"><span class="pre">repoze.bfg.view.bfg_view</span></tt>
decorator now accept an extra argument: <tt class="docutils literal"><span class="pre">route_name</span></tt>.  If a
<tt class="docutils literal"><span class="pre">route_name</span></tt> is specified, it must match the name of a previously
defined <tt class="docutils literal"><span class="pre">route</span></tt> statement.  When it is specified, the view will
only be called when that route matches during a request.</p>
</li>
<li><p class="first">It is now possible to perfom traversal <em>after</em> a route has matched.
Use the pattern <tt class="docutils literal"><span class="pre">*traverse</span></tt> in a <tt class="docutils literal"><span class="pre">&lt;route&gt;</span></tt> <tt class="docutils literal"><span class="pre">path</span></tt> attribute
within ZCML, and the path remainder which it matches will be used as
a traversal path.</p>
</li>
<li><p class="first">When any route defined matches, the WSGI environment will now
contain a key <tt class="docutils literal"><span class="pre">bfg.routes.route</span></tt> (the Route object which matched),
and a key <tt class="docutils literal"><span class="pre">bfg.routes.matchdict</span></tt> (the result of calling route.match).</p>
</li>
</ul>
</div>
<div class="section" id="id371">
<h3>Deprecations<a class="headerlink" href="#id371" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Utility registrations against
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INotFoundView</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IForbiddenView</span></tt> are now deprecated.  Use
the <tt class="docutils literal"><span class="pre">notfound</span></tt> and <tt class="docutils literal"><span class="pre">forbidden</span></tt> ZCML directives instead (see the
&quot;Hooks&quot; chapter for more information).  Such registrations will
continue to work, but the notfound and forbidden directives do
&quot;extra work&quot; to ensure that the callable named by the directive can
be called by the router even if it's a class or
request-argument-only view.</li>
</ul>
</div>
<div class="section" id="removals">
<h3>Removals<a class="headerlink" href="#removals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">IRoutesContext</span></tt>, <tt class="docutils literal"><span class="pre">IRoutesContextFactory</span></tt>, and
<tt class="docutils literal"><span class="pre">IContextNotFound</span></tt> interfaces were removed from
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces</span></tt>.  These were never APIs.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesContextNotFound</span></tt>,
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesModelTraverser</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesContextURL</span></tt> classes were removed.
These were also never APIs.</li>
</ul>
</div>
<div class="section" id="id372">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id372" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Moved the <tt class="docutils literal"><span class="pre">repoze.bfg.push</span></tt> module, which implemented the <tt class="docutils literal"><span class="pre">pushpage</span></tt>
decorator, into a separate distribution, <tt class="docutils literal"><span class="pre">repoze.bfg.pushpage</span></tt>.
Applications which used this decorator should continue to work after
adding that distribution to their installation requirements.</li>
<li>Changing the default request factory via an IRequestFactory utility
registration (as used to be documented in the &quot;Hooks&quot; chapter's
&quot;Changing the request factory&quot; section) is no longer supported.  The
dance to manufacture a request is complicated as a result of
unifying traversal and url dispatch, making it highly unlikely for
anyone to be able to override it properly.  For those who just want
to decorate or modify a request, use a NewRequestEvent subscriber
(see the Events chapter in the documentation).</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.IRequestFactory</span></tt> interface was removed.  See the
bullet above for why.</li>
<li>Routes &quot;context factories&quot; (spelled as the factory argument to a
route statement in ZCML) must now expect the WSGI environ as a
single argument rather than a set of keyword arguments.  They can
obtain the match dictionary by asking for
environ['bfg.routes.matchdict'].  This is the same set of keywords
that used to be passed to urldispatch &quot;context factories&quot; in BFG 0.9
and below.</li>
<li>Using the <tt class="docutils literal"><span class="pre">&#64;zope.component.adapter</span></tt> decorator on a bfg view
function no longer works.  Use the <tt class="docutils literal"><span class="pre">&#64;repoze.bfg.view.bfg_view</span></tt>
decorator instead to mark a function (or a class) as a view.</li>
<li>The name under which the matching route object is found in the
environ was changed from <tt class="docutils literal"><span class="pre">bfg.route</span></tt> to <tt class="docutils literal"><span class="pre">bfg.routes.route</span></tt>.</li>
<li>Finding the root is now done <em>before</em> manufacturing a request object
(and sending a new request event) within the router (it used to be
performed afterwards).</li>
<li>Adding <tt class="docutils literal"><span class="pre">*path_info</span></tt> to a route no longer changes the PATH_INFO for
a request that matches using URL dispatch.  This feature was only
there to service the <tt class="docutils literal"><span class="pre">repoze.bfg.wsgi.wsgiapp2</span></tt> decorator and it
did it wrong; use <tt class="docutils literal"><span class="pre">*subpath</span></tt> instead now.</li>
<li>The values of <tt class="docutils literal"><span class="pre">subpath</span></tt>, <tt class="docutils literal"><span class="pre">traversed</span></tt>, and <tt class="docutils literal"><span class="pre">virtual_root_path</span></tt>
attached to the request object are always now tuples instead of
lists (performance).</li>
</ul>
</div>
<div class="section" id="id373">
<h3>Bug Fixes<a class="headerlink" href="#id373" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">bfg_alchemy</span></tt> Paster template named &quot;repoze.tm&quot; in its
pipeline rather than &quot;repoze.tm2&quot;, causing the startup to fail.</li>
<li>Move BBB logic for registering an
IAuthenticationPolicy/IForbiddenView/INotFoundView based on older
concepts from the router module's <tt class="docutils literal"><span class="pre">make_app</span></tt> function into the
<tt class="docutils literal"><span class="pre">repoze.bfg.zcml.zcml_configure</span></tt> callable, to service
compatibility with scripts that use &quot;zope.configuration.xmlconfig&quot;
(replace with <tt class="docutils literal"><span class="pre">repoze.bfg.zml.zcml_configure</span></tt> as necessary to get
BBB logic)</li>
</ul>
</div>
<div class="section" id="id374">
<h3>Documentation<a class="headerlink" href="#id374" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add interface docs related to how to create authentication policies
and authorization policies to the &quot;Security&quot; narrative chapter.</li>
<li>Added a (fairly sad) &quot;Combining Traversal and URL Dispatch&quot; chapter
to the narrative documentation.  This explains the usage of
<tt class="docutils literal"><span class="pre">*traverse</span></tt> and <tt class="docutils literal"><span class="pre">*subpath</span></tt> in routes URL patters.</li>
<li>A &quot;router&quot; chapter explaining the request/response lifecycle at a
high level was added.</li>
<li>Replaced all mentions and explanations of a routes &quot;context factory&quot;
with equivalent explanations of a &quot;root factory&quot; (context factories
have been disused).</li>
<li>Updated Routes bfgwiki2 tutorial to reflect the fact that context
factories are now no longer used.</li>
</ul>
</div>
</div>
<div class="section" id="id375">
<h2>0.9.1 (2009-06-02)<a class="headerlink" href="#id375" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id376">
<h3>Features<a class="headerlink" href="#id376" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add API named <tt class="docutils literal"><span class="pre">repoze.bfg.settings.get_settings</span></tt> which retrieves a
derivation of values passed as the <tt class="docutils literal"><span class="pre">options</span></tt> value of
<tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt>.  This API should be preferred
instead of using getUtility(ISettings).  I added a new
<tt class="docutils literal"><span class="pre">repoze.bfg.settings</span></tt> API document as well.</li>
</ul>
</div>
<div class="section" id="id377">
<h3>Bug Fixes<a class="headerlink" href="#id377" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Restored missing entry point declaration for bfg_alchemy paster
template, which was accidentally removed in 0.9.</li>
</ul>
</div>
<div class="section" id="id378">
<h3>Documentation<a class="headerlink" href="#id378" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a reference to <tt class="docutils literal"><span class="pre">wsgiapp</span></tt> in the <tt class="docutils literal"><span class="pre">wsgiapp2</span></tt> API documentation
within the <tt class="docutils literal"><span class="pre">repoze.bfg.wsgi</span></tt> module.</li>
</ul>
</div>
<div class="section" id="api-removals">
<h3>API Removals<a class="headerlink" href="#api-removals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.location.locate</span></tt> API was removed: it didn't do
enough to be very helpful and had a misleading name.</li>
</ul>
</div>
</div>
<div class="section" id="id379">
<h2>0.9 (2009-06-01)<a class="headerlink" href="#id379" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id380">
<h3>Bug Fixes<a class="headerlink" href="#id380" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>It was not possible to register a custom <tt class="docutils literal"><span class="pre">IRoutesContextFactory</span></tt>
for use as a default context factory as documented in the &quot;Hooks&quot;
chapter.</li>
</ul>
</div>
<div class="section" id="id381">
<h3>Features<a class="headerlink" href="#id381" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">request_type</span></tt> argument of ZCML <tt class="docutils literal"><span class="pre">view</span></tt> declarations and
<tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorators can now be one of the strings <tt class="docutils literal"><span class="pre">GET</span></tt>,
<tt class="docutils literal"><span class="pre">POST</span></tt>, <tt class="docutils literal"><span class="pre">PUT</span></tt>, <tt class="docutils literal"><span class="pre">DELETE</span></tt>, or <tt class="docutils literal"><span class="pre">HEAD</span></tt> instead of a reference to
the respective interface type imported from
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive now accepts <tt class="docutils literal"><span class="pre">request_type</span></tt> as an
alias for its <tt class="docutils literal"><span class="pre">condition_method</span></tt> argument for symmetry with the
<tt class="docutils literal"><span class="pre">view</span></tt> directive.</li>
<li>The <tt class="docutils literal"><span class="pre">bfg_routesalchemy</span></tt> paster template now provides a unit test
and actually uses the database during a view rendering.</li>
</ul>
</div>
<div class="section" id="id382">
<h3>Removals<a class="headerlink" href="#id382" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">repoze.bfg.threadlocal.setManager</span></tt>.  It was only used in
unit tests.</li>
<li>Remove <tt class="docutils literal"><span class="pre">repoze.bfg.wsgi.HTTPException</span></tt>,
<tt class="docutils literal"><span class="pre">repoze.bfg.wsgi.NotFound</span></tt>, and <tt class="docutils literal"><span class="pre">repoze.bfg.wsgi.Unauthorized</span></tt>.
These classes were disused with the introduction of the
<tt class="docutils literal"><span class="pre">IUnauthorizedView</span></tt> and <tt class="docutils literal"><span class="pre">INotFoundView</span></tt> machinery.</li>
</ul>
</div>
<div class="section" id="id383">
<h3>Documentation<a class="headerlink" href="#id383" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add description to narrative templating chapter about how to use
Chameleon text templates.</li>
<li>Changed Views narrative chapter to use method strings rather than
interface types, and moved advanced interface type usage to Events
narrative chapter.</li>
<li>Added a Routes+SQLAlchemy wiki tutorial.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2009-05-31">
<h2>0.9a8 (2009-05-31)<a class="headerlink" href="#a8-2009-05-31" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id384">
<h3>Features<a class="headerlink" href="#id384" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>It is now possible to register a custom
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INotFoundView</span></tt> for a given application.
This feature replaces the
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INotFoundAppFactory</span></tt> feature previously
described in the Hooks chapter.  The INotFoundView will be called
when the framework detects that a view lookup done as a result of a
request fails; it should accept a context object and a request
object; it should return an IResponse object (a webob response,
basically).  See the Hooks narrative chapter of the BFG docs for
more info.</li>
<li>The error presented when a view invoked by the router returns a
non-response object now includes the view's name for troubleshooting
purposes.</li>
</ul>
</div>
<div class="section" id="id385">
<h3>Bug Fixes<a class="headerlink" href="#id385" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A &quot;new response&quot; event is emitted for forbidden and notfound views.</li>
</ul>
</div>
<div class="section" id="id386">
<h3>Deprecations<a class="headerlink" href="#id386" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INotFoundAppFactory</span></tt> interface has been
deprecated in favor of using the new
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INotFoundView</span></tt> mechanism.</li>
</ul>
</div>
<div class="section" id="renames">
<h3>Renames<a class="headerlink" href="#renames" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Renamed <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IForbiddenResponseFactory</span></tt> to
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IForbiddenView</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-05-30">
<h2>0.9a7 (2009-05-30)<a class="headerlink" href="#a7-2009-05-30" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id387">
<h3>Features<a class="headerlink" href="#id387" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove &quot;context&quot; argument from <tt class="docutils literal"><span class="pre">effective_principals</span></tt> and
<tt class="docutils literal"><span class="pre">authenticated_userid</span></tt> function APIs in <tt class="docutils literal"><span class="pre">repoze.bfg.security</span></tt>,
effectively a doing reversion to 0.8 and before behavior.  Both
functions now again accept only the <tt class="docutils literal"><span class="pre">request</span></tt> parameter.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-05-29">
<h2>0.9a6 (2009-05-29)<a class="headerlink" href="#a6-2009-05-29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id388">
<h3>Documentation<a class="headerlink" href="#id388" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Changed &quot;BFG Wiki&quot; tutorial to use AuthTktAuthenticationPolicy
rather than repoze.who.</li>
</ul>
</div>
<div class="section" id="id389">
<h3>Features<a class="headerlink" href="#id389" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add an AuthTktAuthenticationPolicy.  This policy retrieves
credentials from an auth_tkt cookie managed by the application
itself (instead of relying on an upstream data source for
authentication data).  See the Security API chapter of the
documentation for more info.</li>
<li>Allow RemoteUserAuthenticationPolicy and
RepozeWho1AuthenticationPolicy to accept various constructor
arguments.  See the Security API chapter of the documentation for
more info.</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-05-28">
<h2>0.9a5 (2009-05-28)<a class="headerlink" href="#a5-2009-05-28" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id390">
<h3>Features<a class="headerlink" href="#id390" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">get_app</span></tt> API functions to the <tt class="docutils literal"><span class="pre">paster</span></tt> module.  This
obtains a WSGI application from a config file given a config file
name and a section name.  See the <tt class="docutils literal"><span class="pre">repoze.bfg.paster</span></tt> API docs for
more information.</li>
<li>Add a new module named <tt class="docutils literal"><span class="pre">scripting</span></tt>.  It contains a <tt class="docutils literal"><span class="pre">get_root</span></tt>
API function, which, provided a Router instance, returns a traversal
root object and a &quot;closer&quot;.  See the <tt class="docutils literal"><span class="pre">repoze.bfg.scripting</span></tt> API
docs for more info.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-05-27">
<h2>0.9a4 (2009-05-27)<a class="headerlink" href="#a4-2009-05-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id391">
<h3>Bug Fixes<a class="headerlink" href="#id391" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Try checking for an &quot;old style&quot; security policy <em>after</em> we parse
ZCML (thinko).</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-05-27">
<h2>0.9a3 (2009-05-27)<a class="headerlink" href="#a3-2009-05-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id392">
<h3>Features<a class="headerlink" href="#id392" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow IAuthenticationPolicy and IAuthorizationPolicy to be
overridden via ZCML registrations (do ZCML parsing after
registering these in router.py).</li>
</ul>
</div>
<div class="section" id="id393">
<h3>Documentation<a class="headerlink" href="#id393" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added &quot;BFG Wiki&quot; tutorial to documentation; it describes
step-by-step how to create a traversal-based ZODB application with
authentication.</li>
</ul>
</div>
<div class="section" id="id394">
<h3>Deprecations<a class="headerlink" href="#id394" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added deprecations for imports of <tt class="docutils literal"><span class="pre">ACLSecurityPolicy</span></tt>,
<tt class="docutils literal"><span class="pre">InheritingACLSecurityPolicy</span></tt>, <tt class="docutils literal"><span class="pre">RemoteUserACLSecurityPolicy</span></tt>,
<tt class="docutils literal"><span class="pre">RemoteUserInheritingACLSecurityPolicy</span></tt>, <tt class="docutils literal"><span class="pre">WhoACLSecurityPolicy</span></tt>,
and <tt class="docutils literal"><span class="pre">WhoInheritingACLSecurityPolicy</span></tt> from the
<tt class="docutils literal"><span class="pre">repoze.bfg.security</span></tt> module; for the meantime (for backwards
compatibility purposes) these live in the <tt class="docutils literal"><span class="pre">repoze.bfg.secpols</span></tt>
module.  Note however, that the entire concept of a &quot;security
policy&quot; is deprecated in BFG in favor of separate authentication and
authorization policies, so any use of a security policy will
generate additional deprecation warnings even if you do start using
<tt class="docutils literal"><span class="pre">repoze.bfg.secpols</span></tt>.  <tt class="docutils literal"><span class="pre">repoze.bfg.secpols</span></tt> will disappear in a
future release of <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>.</li>
</ul>
</div>
<div class="section" id="deprecated-import-alias-removals">
<h3>Deprecated Import Alias Removals<a class="headerlink" href="#deprecated-import-alias-removals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">repoze.bfg.template</span></tt> module.  All imports from this
package have been deprecated since 0.3.8.  Instead, import
<tt class="docutils literal"><span class="pre">get_template</span></tt>, <tt class="docutils literal"><span class="pre">render_template</span></tt>, and
<tt class="docutils literal"><span class="pre">render_template_to_response</span></tt> from the
<tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt</span></tt> module.</li>
<li>Remove backwards compatibility import alias for
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.split_path</span></tt> (deprecated since 0.6.5).  This
must now be imported as <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.traversal_path</span></tt>).</li>
<li>Remove backwards compatibility import alias for
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesContext</span></tt> (deprecated since 0.6.5).
This must now be imported as
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.DefaultRoutesContext</span></tt>.</li>
<li>Removed backwards compatibility import aliases for
<tt class="docutils literal"><span class="pre">repoze.bfg.router.get_options</span></tt> and <tt class="docutils literal"><span class="pre">repoze.bfg.router.Settings</span></tt>
(deprecated since 0.6.2).  These both must now be imported from
<tt class="docutils literal"><span class="pre">repoze.bfg.settings</span></tt>.</li>
<li>Removed backwards compatibility import alias for
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IRootPolicy</span></tt> (deprecated since 0.6.2).  It
must be imported as <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IRootFactory</span></tt> now.</li>
<li>Removed backwards compatibility import alias for
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplate</span></tt> (deprecated since 0.4.4).  It
must be imported as <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplateRenderer</span></tt> now.</li>
<li>Removed backwards compatibility import alias for
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplateFactory</span></tt> (deprecated since 0.4.4).
It must be imported as
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplateRendererFactory</span></tt> now.</li>
<li>Removed backwards compatibility import alias for
<tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt.ZPTTemplateFactory</span></tt> (deprecated since
0.4.4).  This must be imported as <tt class="docutils literal"><span class="pre">repoze.bfg.ZPTTemplateRenderer</span></tt>
now.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-05-27">
<h2>0.9a2 (2009-05-27)<a class="headerlink" href="#a2-2009-05-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id395">
<h3>Features<a class="headerlink" href="#id395" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">A paster command has been added named &quot;bfgshell&quot;.  This command can
be used to get an interactive prompt with your BFG root object in
the global namespace.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>bin/paster bfgshell /path/to/myapp.ini myapp
</pre></div>
</div>
<p>See the <tt class="docutils literal"><span class="pre">Project</span></tt> chapter in the BFG documentation for more
information.</p>
</li>
</ul>
</div>
<div class="section" id="id396">
<h3>Deprecations<a class="headerlink" href="#id396" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The name <tt class="docutils literal"><span class="pre">repoze.bfg.registry.registry_manager</span></tt> was never an API,
but scripts in the wild were using it to set up an environment for
use under a debug shell.  A backwards compatibility shim has been
added for this purpose, but the feature is deprecated.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-5-27">
<h2>0.9a1 (2009-5-27)<a class="headerlink" href="#a1-2009-5-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id397">
<h3>Features<a class="headerlink" href="#id397" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">New API functions named <tt class="docutils literal"><span class="pre">forget</span></tt> and <tt class="docutils literal"><span class="pre">remember</span></tt> are available in
the <tt class="docutils literal"><span class="pre">security</span></tt> module.  The <tt class="docutils literal"><span class="pre">forget</span></tt> function returns headers
which will cause the currently authenticated user to be logged out
when set in a response.  The <tt class="docutils literal"><span class="pre">remember</span></tt> function (when passed the
proper arguments) will return headers which will cause a principal
to be &quot;logged in&quot; when set in a response.  See the Security API
chapter of the docs for more info.</p>
</li>
<li><p class="first">New keyword arguments to the <tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt> call
have been added: <tt class="docutils literal"><span class="pre">authentication_policy</span></tt> and
<tt class="docutils literal"><span class="pre">authorization_policy</span></tt>.  These should, respectively, be an
implementation of an authentication policy (an object implementing
the <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IAuthenticationPolicy</span></tt> interface) and
an implementation of an authorization policy (an object implementing
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IAuthorizationPolicy)</span></tt>.  Concrete
implementations of authentication policies exist in
<tt class="docutils literal"><span class="pre">repoze.bfg.authentication</span></tt>.  Concrete implementations of
authorization policies exist in <tt class="docutils literal"><span class="pre">repoze.bfg.authorization</span></tt>.</p>
<p>Both <tt class="docutils literal"><span class="pre">authentication_policy</span></tt> and <tt class="docutils literal"><span class="pre">authorization_policy</span></tt> default
to <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
<p>If <tt class="docutils literal"><span class="pre">authentication_policy</span></tt> is <tt class="docutils literal"><span class="pre">None</span></tt>, but
<tt class="docutils literal"><span class="pre">authorization_policy</span></tt> is <em>not</em> <tt class="docutils literal"><span class="pre">None</span></tt>, then
<tt class="docutils literal"><span class="pre">authorization_policy</span></tt> is ignored (the ability to do authorization
depends on authentication).</p>
<p>If the <tt class="docutils literal"><span class="pre">authentication_policy</span></tt> argument is <em>not</em> <tt class="docutils literal"><span class="pre">None</span></tt>, and the
<tt class="docutils literal"><span class="pre">authorization_policy</span></tt> argument <em>is</em> <tt class="docutils literal"><span class="pre">None</span></tt>, the authorization
policy defaults to an authorization implementation that uses ACLs
(<tt class="docutils literal"><span class="pre">repoze.bfg.authorization.ACLAuthorizationPolicy</span></tt>).</p>
<p>We no longer encourage configuration of &quot;security policies&quot; using
ZCML, as previously we did for <tt class="docutils literal"><span class="pre">ISecurityPolicy</span></tt>.  This is because
it's not uncommon to need to configure settings for concrete
authorization or authentication policies using paste .ini
parameters; the app entry point for your application is the natural
place to do this.</p>
</li>
<li><p class="first">Two new abstractions have been added in the way of adapters used by
the system: an <tt class="docutils literal"><span class="pre">IAuthorizationPolicy</span></tt> and an
<tt class="docutils literal"><span class="pre">IAuthenticationPolicy</span></tt>.  A combination of these (as registered by
the <tt class="docutils literal"><span class="pre">securitypolicy</span></tt> ZCML directive) take the place of the
<tt class="docutils literal"><span class="pre">ISecurityPolicy</span></tt> abstraction in previous releases of repoze.who.
The API functions in <tt class="docutils literal"><span class="pre">repoze.who.security</span></tt> (such as
<tt class="docutils literal"><span class="pre">authentication_userid</span></tt>, <tt class="docutils literal"><span class="pre">effective_principals</span></tt>,
<tt class="docutils literal"><span class="pre">has_permission</span></tt>, and so on) have been changed to try to make use
of these new adapters.  If you're using an older <tt class="docutils literal"><span class="pre">ISecurityPolicy</span></tt>
adapter, the system will still work, but it will print deprecation
warnings when such a policy is used.</p>
</li>
<li><p class="first">The way the (internal) IViewPermission utilities registered via ZCML
are invoked has changed.  They are purely adapters now, returning a
boolean result, rather than returning a callable. You shouldn't have
been using these anyway. ;-)</p>
</li>
<li><p class="first">New concrete implementations of IAuthenticationPolicy have been
added to the <tt class="docutils literal"><span class="pre">repoze.bfg.authentication</span></tt> module:
<tt class="docutils literal"><span class="pre">RepozeWho1AuthenticationPolicy</span></tt> which uses <tt class="docutils literal"><span class="pre">repoze.who</span></tt>
identity to retrieve authentication data from and
<tt class="docutils literal"><span class="pre">RemoteUserAuthenticationPolicy</span></tt>, which uses the <tt class="docutils literal"><span class="pre">REMOTE_USER</span></tt>
value in the WSGI environment to retrieve authentication data.</p>
</li>
<li><p class="first">A new concrete implementation of IAuthorizationPolicy has been added
to the <tt class="docutils literal"><span class="pre">repoze.bfg.authorization</span></tt> module:
<tt class="docutils literal"><span class="pre">ACLAuthorizationPolicy</span></tt> which uses ACL inheritance to do
authorization.</p>
</li>
<li><p class="first">It is now possible to register a custom
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IForbiddenResponseFactory</span></tt> for a given
application.  This feature replaces the
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IUnauthorizedAppFactory</span></tt> feature previously
described in the Hooks chapter.  The IForbiddenResponseFactory will
be called when the framework detects an authorization failure; it
should accept a context object and a request object; it should
return an IResponse object (a webob response, basically).  Read the
below point for more info and see the Hooks narrative chapter of the
BFG docs for more info.</p>
</li>
</ul>
</div>
<div class="section" id="id398">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id398" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Custom NotFound and Forbidden (nee' Unauthorized) WSGI applications
(registered as a utility for INotFoundAppFactory and
IUnauthorizedAppFactory) could rely on an environment key named
<tt class="docutils literal"><span class="pre">message</span></tt> describing the circumstance of the response.  This key
has been renamed to <tt class="docutils literal"><span class="pre">repoze.bfg.message</span></tt> (as per the WSGI spec,
which requires environment extensions to contain dots).</li>
</ul>
</div>
<div class="section" id="id399">
<h3>Deprecations<a class="headerlink" href="#id399" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IUnauthorizedAppFactory</span></tt> interface has
been deprecated in favor of using the new
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IForbiddenResponseFactory</span></tt> mechanism.</li>
<li>The <tt class="docutils literal"><span class="pre">view_execution_permitted</span></tt> API should now be imported from the
<tt class="docutils literal"><span class="pre">repoze.bfg.security</span></tt> module instead of the <tt class="docutils literal"><span class="pre">repoze.bfg.view</span></tt>
module.</li>
<li>The <tt class="docutils literal"><span class="pre">authenticated_userid</span></tt> and <tt class="docutils literal"><span class="pre">effective_principals</span></tt> APIs in
<tt class="docutils literal"><span class="pre">repoze.bfg.security</span></tt> used to only take a single argument
(request).  They now accept two arguments (<tt class="docutils literal"><span class="pre">context</span></tt> and
<tt class="docutils literal"><span class="pre">request</span></tt>).  Calling them with a single argument is still
supported but issues a deprecation warning.  (NOTE: this change was
reverted in 0.9a7; meaning the 0.9 versions of these functions
again accept <tt class="docutils literal"><span class="pre">request</span></tt> only, just like 0.8 and before).</li>
<li>Use of &quot;old-style&quot; security policies (those base on ISecurityPolicy)
is now deprecated.  See the &quot;Security&quot; chapter of the docs for info
about activating an authorization policy and an authentication poicy.</li>
</ul>
</div>
</div>
<div class="section" id="id400">
<h2>0.8.1 (2009-05-21)<a class="headerlink" href="#id400" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id401">
<h3>Features<a class="headerlink" href="#id401" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Class objects may now be used as view callables (both via ZCML and
via use of the <tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorator in Python 2.6 as a class
decorator).  The calling semantics when using a class as a view
callable is similar to that of using a class as a Zope &quot;browser
view&quot;: the class' <tt class="docutils literal"><span class="pre">__init__</span></tt> must accept two positional parameters
(conventionally named <tt class="docutils literal"><span class="pre">context</span></tt>, and <tt class="docutils literal"><span class="pre">request</span></tt>).  The resulting
instance must be callable (it must have a <tt class="docutils literal"><span class="pre">__call__</span></tt> method).
When called, the instance should return a response.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre> from webob import Response

 class MyView(object):
     def __init__(self, context, request):
         self.context = context
         self.request = request

     def __call__(self):
         return Response(&#39;hello from %s!&#39; % self.context)

See the &quot;Views&quot; chapter in the documentation and the
``repoze.bfg.view`` API documentation for more information.
</pre></div>
</div>
</li>
<li><p class="first">Removed the pickling of ZCML actions (the code that wrote
<tt class="docutils literal"><span class="pre">configure.zcml.cache</span></tt> next to <tt class="docutils literal"><span class="pre">configure.zcml</span></tt> files in
projects).  The code which managed writing and reading of the cache
file was a source of subtle bugs when users switched between
imperative (e.g. <tt class="docutils literal"><span class="pre">&#64;bfg_view</span></tt>) registrations and declarative
registrations (e.g. the <tt class="docutils literal"><span class="pre">view</span></tt> directive in ZCML) on the same
project. On a moderately-sized project (535 ZCML actions and 15 ZCML
files), executing actions read from the pickle was saving us only
about 200ms (2.5 sec vs 2.7 sec average). On very small projects (1
ZCML file and 4 actions), startup time was comparable, and sometimes
even slower when reading from the pickle, and both ways were so fast
that it really just didn't matter anyway.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id402">
<h2>0.8 (2009-05-18)<a class="headerlink" href="#id402" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id403">
<h3>Features<a class="headerlink" href="#id403" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a <tt class="docutils literal"><span class="pre">traverse</span></tt> function to the <tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt>
module.  This function may be used to retrieve certain values
computed during path resolution.  See the Traversal API chapter of
the documentation for more information about this function.</li>
</ul>
</div>
<div class="section" id="id404">
<h3>Deprecations<a class="headerlink" href="#id404" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Internal: <tt class="docutils literal"><span class="pre">ITraverser</span></tt> callables should now return a dictionary
rather than a tuple.  Up until 0.7.0, all ITraversers were assumed
to return a 3-tuple.  In 0.7.1, ITraversers were assumed to return a
6-tuple.  As (by evidence) it's likely we'll need to add further
information to the return value of an ITraverser callable, 0.8
assumes that an ITraverser return a dictionary with certain elements
in it.  See the <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITraverser</span></tt> interface for
the list of keys that should be present in the dictionary.
<tt class="docutils literal"><span class="pre">ITraversers</span></tt> which return tuples will still work, although a
deprecation warning will be issued.</li>
</ul>
</div>
<div class="section" id="id405">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id405" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If your code used the ITraverser interface directly (not via an API
function such as <tt class="docutils literal"><span class="pre">find_model</span></tt>) via an adapter lookup, you'll need
to change your code to expect a dictionary rather than a 3- or
6-tuple if your code ever gets return values from the default
ModelGraphTraverser or RoutesModelTraverser adapters.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-05-16">
<h2>0.8a7 (2009-05-16)<a class="headerlink" href="#a7-2009-05-16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id406">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id406" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">RoutesMapper</span></tt> class in <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch</span></tt> has been
removed, as well as its documentation.  It had been deprecated since
0.6.3.  Code in <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesModelTraverser</span></tt>
which catered to it has also been removed.</p>
</li>
<li><p class="first">The semantics of the <tt class="docutils literal"><span class="pre">route</span></tt> ZCML directive have been simplified.
Previously, it was assumed that to use a route, you wanted to map a
route to an externally registered view.  The new <tt class="docutils literal"><span class="pre">route</span></tt> directive
instead has a <tt class="docutils literal"><span class="pre">view</span></tt> attribute which is required, specifying the
dotted path to a view callable.  When a route directive is
processed, a view is <em>registered</em> using the name attribute of the
route directive as its name and the callable as its value.  The
<tt class="docutils literal"><span class="pre">view_name</span></tt> and <tt class="docutils literal"><span class="pre">provides</span></tt> attributes of the <tt class="docutils literal"><span class="pre">route</span></tt> directive
are therefore no longer used.  Effectively, if you were previously
using the <tt class="docutils literal"><span class="pre">route</span></tt> directive, it means you must change a pair of
ZCML directives that look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;route
   name=&quot;home&quot;
   path=&quot;&quot;
   view_name=&quot;login&quot;
   factory=&quot;.models.root.Root&quot;
 /&gt;

&lt;view
   for=&quot;.models.root.Root&quot;
   name=&quot;login&quot;
   view=&quot;.views.login_view&quot;
 /&gt;
</pre></div>
</div>
<p>To a ZCML directive that looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;route
   name=&quot;home&quot;
   path=&quot;&quot;
   view=&quot;.views.login_view&quot;
   factory=&quot;.models.root.Root&quot;
 /&gt;
</pre></div>
</div>
<p>In other words, to make old code work, remove the <tt class="docutils literal"><span class="pre">view</span></tt>
directives that were only there to serve the purpose of backing
<tt class="docutils literal"><span class="pre">route</span></tt> directives, and move their <tt class="docutils literal"><span class="pre">view=</span></tt> attribute into the
<tt class="docutils literal"><span class="pre">route</span></tt> directive itself.</p>
<p>This change also necessitated that the <tt class="docutils literal"><span class="pre">name</span></tt> attribute of the
<tt class="docutils literal"><span class="pre">route</span></tt> directive is now required.  If you were previously using
<tt class="docutils literal"><span class="pre">route</span></tt> directives without a <tt class="docutils literal"><span class="pre">name</span></tt> attribute, you'll need to
add one (the name is arbitrary, but must be unique among all
<tt class="docutils literal"><span class="pre">route</span></tt> and <tt class="docutils literal"><span class="pre">view</span></tt> statements).</p>
<p>The <tt class="docutils literal"><span class="pre">provides</span></tt> attribute of the <tt class="docutils literal"><span class="pre">route</span></tt> directive has also been
removed.  This directive specified a sequence of interface types
that the generated context would be decorated with.  Since route
views are always generated now for a single interface
(<tt class="docutils literal"><span class="pre">repoze.bfg.IRoutesContext</span></tt>) as opposed to being looked up
arbitrarily, there is no need to decorate any context to ensure a
view is found.</p>
</li>
</ul>
</div>
<div class="section" id="id407">
<h3>Documentation<a class="headerlink" href="#id407" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added API docs for the <tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt> methods
<tt class="docutils literal"><span class="pre">registerAdapter</span></tt>, <tt class="docutils literal"><span class="pre">registerUtiity</span></tt>, <tt class="docutils literal"><span class="pre">registerSubscriber</span></tt>, and
<tt class="docutils literal"><span class="pre">cleanUp</span></tt>.</li>
<li>Added glossary entry for &quot;root factory&quot;.</li>
<li>Noted existence of <tt class="docutils literal"><span class="pre">repoze.bfg.pagetemplate</span></tt> template bindings in
&quot;Available Add On Template System Bindings&quot; in Templates chapter in
narrative docs.</li>
<li>Update &quot;Templates&quot; narrative chapter in docs (expand to show a
sample template and correct macro example).</li>
</ul>
</div>
<div class="section" id="id408">
<h3>Features<a class="headerlink" href="#id408" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Courtesty Carlos de la Guardia, added an <tt class="docutils literal"><span class="pre">alchemy</span></tt> Paster
template.  This paster template sets up a BFG project that uses
SQAlchemy (with SQLite) and uses traversal to resolve URLs.  (no
Routes areused).  This template can be used via <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">create</span> <span class="pre">-t</span>
<span class="pre">bfg_alchemy</span></tt>.</li>
<li>The Routes <tt class="docutils literal"><span class="pre">Route</span></tt> object used to resolve the match is now put
into the environment as <tt class="docutils literal"><span class="pre">bfg.route</span></tt> when URL dispatch is used.</li>
<li>You can now change the default Routes &quot;context factory&quot; globally.
See the &quot;ZCML Hooks&quot; chapter of the documentation (in the &quot;Changing
the Default Routes Context Factory&quot; section).</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-05-11">
<h2>0.8a6 (2009-05-11)<a class="headerlink" href="#a6-2009-05-11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id409">
<h3>Features<a class="headerlink" href="#id409" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a <tt class="docutils literal"><span class="pre">routesalchemy</span></tt> Paster template.  This paster template
sets up a BFG project that uses SQAlchemy (with SQLite) and uses
Routes exclusively to resolve URLs (no traversal root factory is
used).  This template can be used via <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">create</span> <span class="pre">-t</span>
<span class="pre">bfg_routesalchemy</span></tt>.</li>
</ul>
</div>
<div class="section" id="id410">
<h3>Documentation<a class="headerlink" href="#id410" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added documentation to the URL Dispatch chapter about how to catch
the root URL using a ZCML <tt class="docutils literal"><span class="pre">route</span></tt> directive.</li>
<li>Added documentation to the URL Dispatch chapter about how to perform
a cleanup function at the end of a request (e.g. close the SQL
connection).</li>
</ul>
</div>
<div class="section" id="id411">
<h3>Bug Fixes<a class="headerlink" href="#id411" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">In version 0.6.3, passing a <tt class="docutils literal"><span class="pre">get_root</span></tt> callback (a &quot;root factory&quot;)
to <tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt> became optional if any <tt class="docutils literal"><span class="pre">route</span></tt>
declaration was made in ZCML.  The intent was to make it possible to
disuse traversal entirely, instead relying entirely on URL dispatch
(Routes) to resolve all contexts.  However a compound set of bugs
prevented usage of a Routes-based root view (a view which responds
to &quot;/&quot;).  One bug existed in <cite>repoze.bfg.urldispatch`</cite>, another
existed in Routes itself.</p>
<p>To resolve this issue, the urldispatch module was fixed, and a fork
of the Routes trunk was put into the &quot;dev&quot; index named
<tt class="docutils literal"><span class="pre">Routes-1.11dev-chrism-home</span></tt>.  The source for the fork exists at
<a class="reference external" href="http://bitbucket.org/chrism/routes-home/">http://bitbucket.org/chrism/routes-home/</a> (broken link);
its contents have been merged into the Routes trunk
(what will be Routes 1.11).</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-05-08">
<h2>0.8a5 (2009-05-08)<a class="headerlink" href="#a5-2009-05-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id412">
<h3>Features<a class="headerlink" href="#id412" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Two new security policies were added:
RemoteUserInheritingACLSecurityPolicy and
WhoInheritingACLSecurityPolicy.  These are security policies which
take into account <em>all</em> ACLs defined in the lineage of a context
rather than stopping at the first ACL found in a lineage.  See the
&quot;Security&quot; chapter of the API documentation for more information.</li>
<li>The API and narrative documentation dealing with security was
changed to introduce the new &quot;inheriting&quot; security policy variants.</li>
<li>Added glossary entry for &quot;lineage&quot;.</li>
</ul>
</div>
<div class="section" id="id413">
<h3>Deprecations<a class="headerlink" href="#id413" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The security policy previously named
<tt class="docutils literal"><span class="pre">RepozeWhoIdentityACLSecurityPolicy</span></tt> now has the slightly saner
name of <tt class="docutils literal"><span class="pre">WhoACLSecurityPolicy</span></tt>.  A deprecation warning is emitted
when this policy is imported under the &quot;old&quot; name; usually this is
due to its use in ZCML within your application.  If you're getting
this deprecation warning, change your ZCML to use the new name,
e.g. change:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;utility
  provides=&quot;repoze.bfg.interfaces.ISecurityPolicy&quot;
  factory=&quot;repoze.bfg.security.RepozeWhoIdentityACLSecurityPolicy&quot;
  /&gt;
</pre></div>
</div>
<p>To:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;utility
  provides=&quot;repoze.bfg.interfaces.ISecurityPolicy&quot;
  factory=&quot;repoze.bfg.security.WhoACLSecurityPolicy&quot;
  /&gt;
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-05-04">
<h2>0.8a4 (2009-05-04)<a class="headerlink" href="#a4-2009-05-04" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id414">
<h3>Features<a class="headerlink" href="#id414" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">zope.testing</span></tt> is no longer a direct dependency, although our
dependencies (such as <tt class="docutils literal"><span class="pre">zope.interface</span></tt>, <tt class="docutils literal"><span class="pre">repoze.zcml</span></tt>, etc)
still depend on it.</li>
<li>Tested on Google App Engine.  Added a tutorial to the documentation
explaining how to deploy a BFG app to GAE.</li>
</ul>
</div>
<div class="section" id="id415">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id415" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Applications which rely on <tt class="docutils literal"><span class="pre">zope.testing.cleanup.cleanUp</span></tt> in unit
tests can still use that function indefinitely.  However, for
maximum forward compatibility, they should import <tt class="docutils literal"><span class="pre">cleanUp</span></tt> from
<tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt> instead of from <tt class="docutils literal"><span class="pre">zope.testing.cleanup</span></tt>.
The BFG paster templates and docs have been changed to use this
function instead of the <tt class="docutils literal"><span class="pre">zope.testing.cleanup</span></tt> version.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-05-03">
<h2>0.8a3 (2009-05-03)<a class="headerlink" href="#a3-2009-05-03" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id416">
<h3>Features<a class="headerlink" href="#id416" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Don't require a successful import of <tt class="docutils literal"><span class="pre">zope.testing</span></tt> at BFG
application runtime.  This allows us to get rid of <tt class="docutils literal"><span class="pre">zope.testing</span></tt>
on platforms like GAE which have file limits.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-05-02">
<h2>0.8a2 (2009-05-02)<a class="headerlink" href="#a2-2009-05-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id417">
<h3>Features<a class="headerlink" href="#id417" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We no longer include the <tt class="docutils literal"><span class="pre">configure.zcml</span></tt> of the <tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt>
package within the <tt class="docutils literal"><span class="pre">configure.zcml</span></tt> of the &quot;repoze.bfg.includes&quot;
package.  This has been a no-op for some time now.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt</span></tt> package no longer imports from
<tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt> at module scope, deferring the import until later
within a method call.  The <tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt> package can't be
imported on platforms like GAE.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-05-02">
<h2>0.8a1 (2009-05-02)<a class="headerlink" href="#a1-2009-05-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="deprecation-warning-and-import-alias-removals">
<h3>Deprecation Warning and Import Alias Removals<a class="headerlink" href="#deprecation-warning-and-import-alias-removals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Since version 0.6.1, a deprecation warning has been emitted when the
name <tt class="docutils literal"><span class="pre">model_url</span></tt> is imported from the <tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt>
module.  This import alias (and the deprecation warning) has been
removed.  Any import of the <tt class="docutils literal"><span class="pre">model_url</span></tt> function will now need to
be done from <tt class="docutils literal"><span class="pre">repoze.bfg.url</span></tt>; any import of the name
<tt class="docutils literal"><span class="pre">model_url</span></tt> from <tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt> will now fail.  This was
done to remove a dependency on zope.deferredimport.</li>
<li>Since version 0.6.5, a deprecation warning has been emitted when the
name <tt class="docutils literal"><span class="pre">RoutesModelTraverser</span></tt> is imported from the
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt> module.  This import alias (and the
deprecation warning) has been removed.  Any import of the
<tt class="docutils literal"><span class="pre">RoutesModelTraverser</span></tt> class will now need to be done from
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch</span></tt>; any import of the name
<tt class="docutils literal"><span class="pre">RoutesModelTraverser</span></tt> from <tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt> will now
fail.  This was done to remove a dependency on zope.deferredimport.</li>
</ul>
</div>
<div class="section" id="id418">
<h3>Features<a class="headerlink" href="#id418" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">This release of <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> is &quot;C-free&quot;.  This means it has no
hard dependencies on any software that must be compiled from C
source at installation time.  In particular, <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> no
longer depends on the <tt class="docutils literal"><span class="pre">lxml</span></tt> package.</p>
<p>This change has introduced some backwards incompatibilities,
described in the &quot;Backwards Incompatibilities&quot; section below.</p>
</li>
<li><p class="first">This release was tested on Windows XP.  It appears to work fine and
all the tests pass.</p>
</li>
</ul>
</div>
<div class="section" id="id419">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id419" title="Permalink to this headline">¶</a></h3>
<p>Incompatibilities related to making <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> &quot;C-free&quot;:</p>
<ul class="simple">
<li>Removed the <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_genshi</span></tt> module, and thus support
for Genshi-style chameleon templates.  Genshi-style Chameleon
templates depend upon <tt class="docutils literal"><span class="pre">lxml</span></tt>, which is implemented in C (as
opposed to pure Python) and the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> core is &quot;C-free&quot; as
of this release. You may get Genshi-style Chameleon support back by
installing the <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_genshi</span></tt> package availalable
from <a class="reference external" href="http://svn.repoze.org/repoze.bfg.chameleon_genshi">http://svn.repoze.org/repoze.bfg.chameleon_genshi</a> (also
available in the index at <a class="reference external" href="http://dist.repoze.org/bfg/0.8/simple">http://dist.repoze.org/bfg/0.8/simple</a>).
All existing code that depended on the <tt class="docutils literal"><span class="pre">chameleon_genshi</span></tt> module
prior to this release of <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> should work without change
after this addon is installed.</li>
<li>Removed the <tt class="docutils literal"><span class="pre">repoze.bfg.xslt</span></tt> module and thus support for XSL
templates.  The <tt class="docutils literal"><span class="pre">repoze.bfg.xslt</span></tt> module depended upon <tt class="docutils literal"><span class="pre">lxml</span></tt>,
which is implemented in C, and the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> core is &quot;C-free&quot;
as of this release.  You bay get XSL templating back by installing
the <tt class="docutils literal"><span class="pre">repoze.bfg.xslt</span></tt> package available from
<a class="reference external" href="http://svn.repoze.org/repoze.bfg.xslt/">http://svn.repoze.org/repoze.bfg.xslt/</a> (also available in the index
at <a class="reference external" href="http://dist.repoze.org/bfg/0.8/simple">http://dist.repoze.org/bfg/0.8/simple</a>).  All existing code that
depended upon the <tt class="docutils literal"><span class="pre">xslt</span></tt> module prior to this release of
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> should work without modification after this addon is
installed.</li>
<li>Removed the <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INodeTemplateRenderer</span></tt>
interface and the an old b/w compat aliases from that interface to
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INodeTemplate</span></tt>.  This interface must now be
imported from the <tt class="docutils literal"><span class="pre">repoze.bfg.xslt.interfaces</span></tt> package after
installation of the <tt class="docutils literal"><span class="pre">repoze.bfg.xslt</span></tt> addon package described
above as <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INodeTemplateRenderer</span></tt>.  This
interface was never part of any public API.</li>
</ul>
<p>Other backwards incompatibilities:</p>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">render_template</span></tt> function in <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt</span></tt>
returns Unicode instead of a string.  Likewise, the individual
values returned by the iterable created by the
<tt class="docutils literal"><span class="pre">render_template_to_iterable</span></tt> function are also each Unicode.
This is actually a backwards incompatibility inherited from our new
use of the combination of <tt class="docutils literal"><span class="pre">chameleon.core</span></tt> 1.0b32 (the
non-lxml-depending version) and <tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt> 1.0b16+ ; the
<tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt> PageTemplateFile implementation used to return a
string, but now returns Unicode.</li>
</ul>
</div>
</div>
<div class="section" id="id420">
<h2>0.7.1 (2009-05-01)<a class="headerlink" href="#id420" title="Permalink to this headline">¶</a></h2>
<div class="section" id="index-related">
<h3>Index-Related<a class="headerlink" href="#index-related" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The canonical package index location for <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> has changed.
The &quot;old&quot; index (<a class="reference external" href="http://dist.repoze.org/lemonade/dev/simple">http://dist.repoze.org/lemonade/dev/simple</a>) has
been superseded by a new index location
(<a class="reference external" href="http://dist.repoze.org/bfg/current/simple">http://dist.repoze.org/bfg/current/simple</a>).  The installation
documentation has been updated as well as the <tt class="docutils literal"><span class="pre">setup.cfg</span></tt> file in
this package.  The &quot;lemonade&quot; index still exists, but it is not
guaranteed to have the latest BFG software in it, nor will it be
maintained in the future.</li>
</ul>
</div>
<div class="section" id="id421">
<h3>Features<a class="headerlink" href="#id421" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The &quot;paster create&quot; templates have been modified to use links to the
new &quot;bfg.repoze.org&quot; and &quot;docs.repoze.org&quot; websites.</p>
</li>
<li><p class="first">Added better documentation for virtual hosting at a URL prefix
within the virtual hosting docs chapter.</p>
</li>
<li><p class="first">The interface for <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITraverser</span></tt> and the
built-in implementations that implement the interface
(<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.ModelGraphTraverser</span></tt>, and
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesModelTraverser</span></tt>) now expect the
<tt class="docutils literal"><span class="pre">__call__</span></tt> method of an ITraverser to return 3 additional
arguments: <tt class="docutils literal"><span class="pre">traversed</span></tt>, <tt class="docutils literal"><span class="pre">virtual_root</span></tt>, and
<tt class="docutils literal"><span class="pre">virtual_root_path</span></tt> (the old contract was that the <tt class="docutils literal"><span class="pre">__call__</span></tt>
method of an ITraverser returned; three arguments, the contract new
is that it returns six).  <tt class="docutils literal"><span class="pre">traversed</span></tt> will be a sequence of
Unicode names that were traversed (including the virtual root path,
if any) or <tt class="docutils literal"><span class="pre">None</span></tt> if no traversal was performed, <tt class="docutils literal"><span class="pre">virtual_root</span></tt>
will be a model object representing the virtual root (or the
physical root if traversal was not performed), and
<tt class="docutils literal"><span class="pre">virtual_root_path</span></tt> will be a sequence representing the virtual
root path (a sequence of Unicode names) or <tt class="docutils literal"><span class="pre">None</span></tt> if traversal was
not performed.</p>
<p>Six arguments are now returned from BFG ITraversers.  They are
returned in this order: <tt class="docutils literal"><span class="pre">context</span></tt>, <tt class="docutils literal"><span class="pre">view_name</span></tt>, <tt class="docutils literal"><span class="pre">subpath</span></tt>,
<tt class="docutils literal"><span class="pre">traversed</span></tt>, <tt class="docutils literal"><span class="pre">virtual_root</span></tt>, and <tt class="docutils literal"><span class="pre">virtual_root_path</span></tt>.</p>
<p>Places in the BFG code which called an ITraverser continue to accept
a 3-argument return value, although BFG will generate and log a
warning when one is encountered.</p>
</li>
<li><p class="first">The request object now has the following attributes: <tt class="docutils literal"><span class="pre">traversed</span></tt>
(the sequence of names traversed or <tt class="docutils literal"><span class="pre">None</span></tt> if traversal was not
performed), <tt class="docutils literal"><span class="pre">virtual_root</span></tt> (the model object representing the
virtual root, including the virtual root path if any), and
<tt class="docutils literal"><span class="pre">virtual_root_path</span></tt> (the seuquence of names representing the
virtual root path or <tt class="docutils literal"><span class="pre">None</span></tt> if traversal was not performed).</p>
</li>
<li><p class="first">A new decorator named <tt class="docutils literal"><span class="pre">wsgiapp2</span></tt> was added to the
<tt class="docutils literal"><span class="pre">repoze.bfg.wsgi</span></tt> module.  This decorator performs the same
function as <tt class="docutils literal"><span class="pre">repoze.bfg.wsgi.wsgiapp</span></tt> except it fixes up the
<tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt>, and <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> environment values before
invoking the WSGI subapplication.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.testing.DummyRequest</span></tt> object now has default
attributes for <tt class="docutils literal"><span class="pre">traversed</span></tt>, <tt class="docutils literal"><span class="pre">virtual_root</span></tt>, and
<tt class="docutils literal"><span class="pre">virtual_root_path</span></tt>.</p>
</li>
<li><p class="first">The RoutesModelTraverser now behaves more like the Routes
&quot;RoutesMiddleware&quot; object when an element in the match dict is named
<tt class="docutils literal"><span class="pre">path_info</span></tt> (usually when there's a pattern like
<tt class="docutils literal"><span class="pre">http://foo/*path_info</span></tt>).  When this is the case, the
<tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> environment variable is set to the value in the match
dict, and the <tt class="docutils literal"><span class="pre">SCRIPT_NAME</span></tt> is appended to with the prefix of the
original <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> not including the value of the new variable.</p>
</li>
<li><p class="first">The notfound debug now shows the traversed path, the virtual root,
and the virtual root path too.</p>
</li>
<li><p class="first">Speed up / clarify 'traversal' module's 'model_path', 'model_path_tuple',
and '_model_path_list' functions.</p>
</li>
</ul>
</div>
<div class="section" id="id422">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id422" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">In previous releases, the <tt class="docutils literal"><span class="pre">repoze.bfg.url.model_url</span></tt>,
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></tt> functions always ignored
the <tt class="docutils literal"><span class="pre">__name__</span></tt> argument of the root object in a model graph (
effectively replacing it with a leading <tt class="docutils literal"><span class="pre">/</span></tt> in the returned value)
when a path or URL was generated.  The code required to perform this
operation was not efficient.  As of this release, the root object in
a model graph <em>must</em> have a <tt class="docutils literal"><span class="pre">__name__</span></tt> attribute that is either
<tt class="docutils literal"><span class="pre">None</span></tt> or the empty string (<tt class="docutils literal"><span class="pre">''</span></tt>) for URLs and paths to be
generated properly from these APIs.  If your root model object has a
<tt class="docutils literal"><span class="pre">__name__</span></tt> argument that is not one of these values, you will need
to change your code for URLs and paths to be generated properly.  If
your model graph has a root node with a string <tt class="docutils literal"><span class="pre">__name__</span></tt> that is
not null, the value of <tt class="docutils literal"><span class="pre">__name__</span></tt> will be prepended to every path
and URL generated.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.location.LocationProxy</span></tt> class and the
<tt class="docutils literal"><span class="pre">repoze.bfg.location.ClassAndInstanceDescr</span></tt> class have both been
removed in order to be able to eventually shed a dependency on
<tt class="docutils literal"><span class="pre">zope.proxy</span></tt>.  Neither of these classes was ever an API.</p>
</li>
<li><p class="first">In all previous releases, the <tt class="docutils literal"><span class="pre">repoze.bfg.location.locate</span></tt>
function worked like so: if a model did not explicitly provide the
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ILocation</span></tt> interface, <tt class="docutils literal"><span class="pre">locate</span></tt> returned a
<tt class="docutils literal"><span class="pre">LocationProxy</span></tt> object representing <tt class="docutils literal"><span class="pre">model</span></tt> with its
<tt class="docutils literal"><span class="pre">__parent__</span></tt> attribute assigned to <tt class="docutils literal"><span class="pre">parent</span></tt> and a <tt class="docutils literal"><span class="pre">__name__</span></tt>
attribute assigned to <tt class="docutils literal"><span class="pre">__name__</span></tt>.  In this release, the
<tt class="docutils literal"><span class="pre">repoze.bfg.location.locate</span></tt> function simply jams the <tt class="docutils literal"><span class="pre">__name__</span></tt>
and <tt class="docutils literal"><span class="pre">__parent__</span></tt> attributes on to the supplied model
unconditionally, no matter if the object implements ILocation or
not, and it never returns a proxy.  This was done because the
LocationProxy behavior has now moved into an add-on package
(<tt class="docutils literal"><span class="pre">repoze.bfg.traversalwrapper</span></tt>), in order to eventually be able to
shed a dependency on <tt class="docutils literal"><span class="pre">zope.proxy</span></tt>.</p>
</li>
<li><p class="first">In all previous releases, by default, if traversal was used (as
opposed to URL-dispatch), and the root object supplied
the``repoze.bfg.interfaces.ILocation`` interface, but the children
returned via its <tt class="docutils literal"><span class="pre">__getitem__</span></tt> returned an object that did not
implement the same interface, <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> provided some
implicit help during traversal.  This traversal feature wrapped
subobjects from the root (and thereafter) that did not implement
<tt class="docutils literal"><span class="pre">ILocation</span></tt> in proxies which automatically provided them with a
<tt class="docutils literal"><span class="pre">__name__</span></tt> and <tt class="docutils literal"><span class="pre">__parent__</span></tt> attribute based on the name being
traversed and the previous object traversed.  This feature has now
been removed from the base <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> package for purposes of
eventually shedding a dependency on <tt class="docutils literal"><span class="pre">zope.proxy</span></tt>.</p>
<p>In order to re-enable the wrapper behavior for older applications
which cannot be changed, register the &quot;traversalwrapper&quot;
<tt class="docutils literal"><span class="pre">ModelGraphTraverser</span></tt> as the traversal policy, rather than the
default <tt class="docutils literal"><span class="pre">ModelGraphTraverser</span></tt>. To use this feature, you will need
to install the <tt class="docutils literal"><span class="pre">repoze.bfg.traversalwrapper</span></tt> package (an add-on
package, available at
<a class="reference external" href="http://svn.repoze.org/repoze.bfg.traversalwrapper">http://svn.repoze.org/repoze.bfg.traversalwrapper</a>) Then change your
application's <tt class="docutils literal"><span class="pre">configure.zcml</span></tt> to include the following stanza:</p>
<blockquote>
<div><blockquote>
<div><dl class="docutils">
<dt>&lt;adapter</dt>
<dd><p class="first last">factory=&quot;repoze.bfg.traversalwrapper.ModelGraphTraverser&quot;
provides=&quot;repoze.bfg.interfaces.ITraverserFactory&quot;
for=&quot;*&quot;
/&gt;</p>
</dd>
</dl>
</div></blockquote>
<p>When this ITraverserFactory is used instead of the default, no
object in the graph (even the root object) must supply a
<tt class="docutils literal"><span class="pre">__name__</span></tt> or <tt class="docutils literal"><span class="pre">__parent__</span></tt> attribute.  Even if subobjects
returned from the root <em>do</em> implement the ILocation interface,
these will still be wrapped in proxies that override the object's
&quot;real&quot; <tt class="docutils literal"><span class="pre">__parent__</span></tt> and <tt class="docutils literal"><span class="pre">__name__</span></tt> attributes.</p>
<p>See also changes to the &quot;Models&quot; chapter of the documentation (in
the &quot;Location-Aware Model Instances&quot;) section.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="id423">
<h2>0.7.0 (2009-04-11)<a class="headerlink" href="#id423" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id424">
<h3>Bug Fixes<a class="headerlink" href="#id424" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug in <tt class="docutils literal"><span class="pre">repoze.bfg.wsgi.HTTPException</span></tt>: the content length
was returned as an int rather than as a string.</li>
<li>Add explicit dependencies on <tt class="docutils literal"><span class="pre">zope.deferredimport</span></tt>,
<tt class="docutils literal"><span class="pre">zope.deprecation</span></tt>, and <tt class="docutils literal"><span class="pre">zope.proxy</span></tt> for forward compatibility
reasons (<tt class="docutils literal"><span class="pre">zope.component</span></tt> will stop relying on
<tt class="docutils literal"><span class="pre">zope.deferredimport</span></tt> soon and although we use it directly, it's
only a transitive dependency, and ''zope.deprecation`` and
<tt class="docutils literal"><span class="pre">zope.proxy</span></tt> are used directly even though they're only transitive
dependencies as well).</li>
<li>Using <tt class="docutils literal"><span class="pre">model_url</span></tt> or <tt class="docutils literal"><span class="pre">model_path</span></tt> against a broken model graph
(one with models that had a non-root model with a <tt class="docutils literal"><span class="pre">__name__</span></tt> of
<tt class="docutils literal"><span class="pre">None</span></tt>) caused an inscrutable error to be thrown: ( if not
<tt class="docutils literal"><span class="pre">_must_quote[cachekey].search(s):</span> <span class="pre">TypeError:</span> <span class="pre">expected</span> <span class="pre">string</span> <span class="pre">or</span>
<span class="pre">buffer</span></tt>).  Now URLs and paths generated against graphs that have
None names in intermediate nodes will replace the None with the
empty string, and, as a result, the error won't be raised.  Of
course the URL or path will still be bogus.</li>
</ul>
</div>
<div class="section" id="id425">
<h3>Features<a class="headerlink" href="#id425" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make it possible to have <tt class="docutils literal"><span class="pre">testing.DummyTemplateRenderer</span></tt> return
some nondefault string representation.</li>
<li>Added a new <tt class="docutils literal"><span class="pre">anchor</span></tt> keyword argument to <tt class="docutils literal"><span class="pre">model_url</span></tt>.  If
<tt class="docutils literal"><span class="pre">anchor</span></tt> is present, its string representation will be used
as a named anchor in the generated URL (e.g. if <tt class="docutils literal"><span class="pre">anchor</span></tt> is
passed as <tt class="docutils literal"><span class="pre">foo</span></tt> and the model URL is
<tt class="docutils literal"><span class="pre">http://example.com/model/url</span></tt>, the generated URL will be
<tt class="docutils literal"><span class="pre">http://example.com/model/url#foo</span></tt>).</li>
</ul>
</div>
<div class="section" id="id426">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id426" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The default request charset encoding is now <tt class="docutils literal"><span class="pre">utf-8</span></tt>.  As a result,
the request machinery will attempt to decode values from the utf-8
encoding to Unicode automatically when they are obtained via
<tt class="docutils literal"><span class="pre">request.params</span></tt>, <tt class="docutils literal"><span class="pre">request.GET</span></tt>, and <tt class="docutils literal"><span class="pre">request.POST</span></tt>.  The
previous behavior of BFG was to return a bytestring when a value was
accessed in this manner.  This change will break form handling code
in apps that rely on values from those APIs being considered
bytestrings.  If you are manually decoding values from form
submissions in your application, you'll either need to change the
code that does that to expect Unicode values from
<tt class="docutils literal"><span class="pre">request.params</span></tt>, <tt class="docutils literal"><span class="pre">request.GET</span></tt> and <tt class="docutils literal"><span class="pre">request.POST</span></tt>, or you'll
need to explicitly reenable the previous behavior.  To reenable the
previous behavior, add the following to your application's
<tt class="docutils literal"><span class="pre">configure.zcml</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;subscriber for=&quot;repoze.bfg.interfaces.INewRequest&quot;
            handler=&quot;repoze.bfg.request.make_request_ascii&quot;/&gt;
</pre></div>
</div>
<p>See also the documentation in the &quot;Views&quot; chapter of the BFG docs
entitled &quot;Using Views to Handle Form Submissions (Unicode and
Character Set Issues)&quot;.</p>
</li>
</ul>
</div>
<div class="section" id="id427">
<h3>Documentation<a class="headerlink" href="#id427" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a section to the narrative Views chapter entitled &quot;Using Views
to Handle Form Submissions (Unicode and Character Set Issues)&quot;
explaining implicit decoding of form data values.</li>
</ul>
</div>
</div>
<div class="section" id="id428">
<h2>0.6.9 (2009-02-16)<a class="headerlink" href="#id428" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id429">
<h3>Bug Fixes<a class="headerlink" href="#id429" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>lru cache was unstable under concurrency (big surprise!) when it
tried to redelete a key in the cache that had already been deleted.
Symptom: line 64 in put:del data[oldkey]:KeyError: '/some/path'.
Now we just ignore the key error if we can't delete the key (it has
already been deleted).</li>
<li>Empty location names in model paths when generating a URL using
<tt class="docutils literal"><span class="pre">repoze.bfg.model_url</span></tt> based on a model obtained via traversal are
no longer ignored in the generated URL.  This means that if a
non-root model object has a <tt class="docutils literal"><span class="pre">__name__</span></tt> of <tt class="docutils literal"><span class="pre">''</span></tt>, the URL will
reflect it (e.g. <tt class="docutils literal"><span class="pre">model_url</span></tt> will generate <tt class="docutils literal"><span class="pre">http://foo/bar//baz</span></tt>
if an object with the <tt class="docutils literal"><span class="pre">__name__</span></tt> of <tt class="docutils literal"><span class="pre">''</span></tt> is a child of bar and
the parent of baz).  URLs generated with empty path segments are,
however, still irresolveable by the model graph traverser on request
ingress (the traverser strips empty path segment names).</li>
</ul>
</div>
<div class="section" id="id430">
<h3>Features<a class="headerlink" href="#id430" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Microspeedups of <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path</span></tt>,
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></tt>,
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.quote_path_segment</span></tt>, and
<tt class="docutils literal"><span class="pre">repoze.bfg.url.urlencode</span></tt>.</li>
<li>add zip_safe = false to setup.cfg.</li>
</ul>
</div>
<div class="section" id="id431">
<h3>Documentation<a class="headerlink" href="#id431" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add a note to the <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.quote_path_segment</span></tt> API
docs about caching of computed values.</li>
</ul>
</div>
<div class="section" id="id432">
<h3>Implementation Changes<a class="headerlink" href="#id432" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Simplification of
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.TraversalContextURL.__call__</span></tt> (it now uses
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path</span></tt> instead of rolling its own
path-generation).</li>
</ul>
</div>
</div>
<div class="section" id="id433">
<h2>0.6.8 (2009-02-05)<a class="headerlink" href="#id433" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id434">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id434" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path</span></tt> API now returns a <em>quoted</em>
string rather than a string represented by series of unquoted
elements joined via <tt class="docutils literal"><span class="pre">/</span></tt> characters.  Previously it returned a
string or unicode object representing the model path, with each
segment name in the path joined together via <tt class="docutils literal"><span class="pre">/</span></tt> characters,
e.g. <tt class="docutils literal"><span class="pre">/foo</span> <span class="pre">/bar</span></tt>.  Now it returns a string, where each segment is
a UTF-8 encoded and URL-quoted element e.g. <tt class="docutils literal"><span class="pre">/foo%20/bar</span></tt>.  This
change was (as discussed briefly on the repoze-dev maillist)
necessary to accomodate model objects which themselves have
<tt class="docutils literal"><span class="pre">__name__</span></tt> attributes that contain the <tt class="docutils literal"><span class="pre">/</span></tt> character.</p>
<p>For people that have no models that have high-order Unicode
<tt class="docutils literal"><span class="pre">__name__</span></tt> attributes or <tt class="docutils literal"><span class="pre">__name__</span></tt> attributes with values that
require URL-quoting with in their model graphs, this won't cause any
issue.  However, if you have code that currently expects
<tt class="docutils literal"><span class="pre">model_path</span></tt> to return an unquoted string, or you have an existing
application with data generated via the old method, and you're too
lazy to change anything, you may wish replace the BFG-imported
<tt class="docutils literal"><span class="pre">model_path</span></tt> in your code with this function (this is the code of
the &quot;old&quot; <tt class="docutils literal"><span class="pre">model_path</span></tt> implementation):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">repoze.bfg.location</span> <span class="kn">import</span> <span class="n">lineage</span>

<span class="k">def</span> <span class="nf">i_am_too_lazy_to_move_to_the_new_model_path</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="o">*</span><span class="n">elements</span><span class="p">):</span>
    <span class="n">rpath</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">lineage</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">location</span><span class="o">.</span><span class="n">__name__</span><span class="p">:</span>
            <span class="n">rpath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">rpath</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">elements</span><span class="p">:</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">path</span><span class="p">,</span> <span class="n">suffix</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">path</span>
</pre></div>
</div>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.find_model</span></tt> API no longer implicitly
converts unicode representations of a full path passed to it as a
Unicode object into a UTF-8 string.  Callers should either use
prequoted path strings returned by
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path</span></tt>, or tuple values returned by the
result of <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></tt> or they should
use the guidelines about passing a string <tt class="docutils literal"><span class="pre">path</span></tt> argument
described in the <tt class="docutils literal"><span class="pre">find_model</span></tt> API documentation.</p>
</li>
</ul>
</div>
<div class="section" id="bugfixes">
<h3>Bugfixes<a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Each argument contained in <tt class="docutils literal"><span class="pre">elements</span></tt> passed to
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path</span></tt> will now have any <tt class="docutils literal"><span class="pre">/</span></tt>
characters contained within quoted to <tt class="docutils literal"><span class="pre">%2F</span></tt> in the returned
string.  Previously, <tt class="docutils literal"><span class="pre">/</span></tt> characters in elements were left unquoted
(a bug).</li>
</ul>
</div>
<div class="section" id="id435">
<h3>Features<a class="headerlink" href="#id435" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></tt> API was added.  This API
is an alternative to <tt class="docutils literal"><span class="pre">model_path</span></tt> (which returns a string);
<tt class="docutils literal"><span class="pre">model_path_tuple</span></tt> returns a model path as a tuple (much like
Zope's <tt class="docutils literal"><span class="pre">getPhysicalPath</span></tt>).</li>
<li>A <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.quote_path_segment</span></tt> API was added.  This
API will quote an individual path segment (string or unicode
object).  See the <tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt> API documentation for
more information.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.find_model</span></tt> API now accepts &quot;path
tuples&quot; (see the above note regarding <tt class="docutils literal"><span class="pre">model_path_tuple</span></tt>) as well
as string path representations (from
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_path</span></tt>) as a <tt class="docutils literal"><span class="pre">path</span></tt> argument.</li>
<li>Add ` <cite>renderer`</cite> argument (defaulting to None) to
<tt class="docutils literal"><span class="pre">repoze.bfg.testing.registerDummyRenderer</span></tt>.  This makes it
possible, for instance, to register a custom renderer that raises an
exception in a unit test.</li>
</ul>
</div>
<div class="section" id="id436">
<h3>Implementation Changes<a class="headerlink" href="#id436" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Moved _url_quote function back to <tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt> from
<tt class="docutils literal"><span class="pre">repoze.bfg.url</span></tt>.  This is not an API.</li>
</ul>
</div>
</div>
<div class="section" id="id437">
<h2>0.6.7 (2009-01-27)<a class="headerlink" href="#id437" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id438">
<h3>Features<a class="headerlink" href="#id438" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.url.model_url</span></tt> API now works against contexts
derived from Routes URL dispatch (<tt class="docutils literal"><span class="pre">Routes.util.url_for</span></tt> is called
under the hood).</li>
<li>&quot;Virtual root&quot; support for traversal-based applications has been
added.  Virtual root support is useful when you'd like to host some
model in a <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> model graph as an application under a
URL pathname that does not include the model path itself.  For more
information, see the (new) &quot;Virtual Hosting&quot; chapter in the
documentation.</li>
<li>A <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.virtual_root</span></tt> API has been added.  When
called, it returns the virtual root object (or the physical root
object if no virtual root has been specified).</li>
</ul>
</div>
<div class="section" id="id439">
<h3>Implementation Changes<a class="headerlink" href="#id439" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">repoze.bfg.traversal.RoutesModelTraverser</span></tt> has been moved to
<tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">model_url</span></tt> URL generation is now performed via an adapter lookup
based on the context and the request.</li>
<li>ZCML which registers two adapters for the <tt class="docutils literal"><span class="pre">IContextURL</span></tt> interface
has been added to the configure.zcml in <tt class="docutils literal"><span class="pre">repoze.bfg.includes</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="id440">
<h2>0.6.6 (2009-01-26)<a class="headerlink" href="#id440" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id441">
<h3>Implementation Changes<a class="headerlink" href="#id441" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>There is an indirection in <tt class="docutils literal"><span class="pre">repoze.bfg.url.model_url</span></tt> now that
consults a utility to generate the base model url (without extra
elements or a query string).  Eventually this will service virtual
hosting; for now it's undocumented and should not be hooked.</li>
</ul>
</div>
</div>
<div class="section" id="id442">
<h2>0.6.5 (2009-01-26)<a class="headerlink" href="#id442" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id443">
<h3>Features<a class="headerlink" href="#id443" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>You can now override the NotFound and Unauthorized responses that
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> generates when a view cannot be found or cannot be
invoked due to lack of permission.  See the &quot;ZCML Hooks&quot; chapter in
the docs for more information.</li>
<li>Added Routes ZCML directive attribute explanations in documentation.</li>
<li>Added a <tt class="docutils literal"><span class="pre">traversal_path</span></tt> API to the traversal module; see the
&quot;traversal&quot; API chapter in the docs.  This was a function previously
known as <tt class="docutils literal"><span class="pre">split_path</span></tt> that was not an API but people were using it
anyway.  Unlike <tt class="docutils literal"><span class="pre">split_path</span></tt>, it now returns a tuple instead of a
list (as its values are cached).</li>
</ul>
</div>
<div class="section" id="id444">
<h3>Behavior Changes<a class="headerlink" href="#id444" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.view.render_view_to_response</span></tt> API will no longer
raise a ValueError if an object returned by a view function it calls
does not possess certain attributes (<tt class="docutils literal"><span class="pre">headerlist</span></tt>, <tt class="docutils literal"><span class="pre">app_iter</span></tt>,
<tt class="docutils literal"><span class="pre">status</span></tt>).  This API used to attempt to perform a check using the
<tt class="docutils literal"><span class="pre">is_response</span></tt> function in <tt class="docutils literal"><span class="pre">repoze.bfg.view</span></tt>, and raised a
<tt class="docutils literal"><span class="pre">ValueError</span></tt> if the <tt class="docutils literal"><span class="pre">is_response</span></tt> check failed.  The
responsibility is now the caller's to ensure that the return value
from a view function is a &quot;real&quot; response.</li>
<li>WSGI environ dicts passed to <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> 's Router must now
contain a REQUEST_METHOD key/value; if they do not, a KeyError will
be raised (speed).</li>
<li>It is no longer permissible to pass a &quot;nested&quot; list of principals to
<tt class="docutils literal"><span class="pre">repoze.bfg.ACLAuthorizer.permits</span></tt> (e.g. <tt class="docutils literal"><span class="pre">['fred',</span> <span class="pre">['larry',</span>
<span class="pre">'bob']]</span></tt>).  The principals list must be fully expanded.  This
feature was never documented, and was never an API, so it's not a
backwards incompatibility.</li>
<li>It is no longer permissible for a security ACE to contain a &quot;nested&quot;
list of permissions (e.g. <tt class="docutils literal"><span class="pre">(Allow,</span> <span class="pre">Everyone,</span> <span class="pre">['read',</span> <span class="pre">['view',</span>
<span class="pre">['write',</span> <span class="pre">'manage']]])`)`.</span>&nbsp; <span class="pre">The</span> <span class="pre">list</span> <span class="pre">must</span> <span class="pre">instead</span> <span class="pre">be</span> <span class="pre">fully</span> <span class="pre">expanded</span>
<span class="pre">(e.g.</span> <span class="pre">``(Allow,</span> <span class="pre">Everyone,</span> <span class="pre">['read',</span> <span class="pre">'view',</span> <span class="pre">'write',</span> <span class="pre">'manage])</span></tt>).  This
feature was never documented, and was never an API, so it's not a
backwards incompatibility.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesRootFactory</span></tt> now injects the
<tt class="docutils literal"><span class="pre">wsgiorg.routing_args</span></tt> environment variable into the environ when
a route matches.  This is a tuple of ((), routing_args) where
routing_args is the value that comes back from the routes mapper
match (the &quot;match dict&quot;).</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.RoutesModelTraverser</span></tt> class now wants to
obtain the <tt class="docutils literal"><span class="pre">view_name</span></tt> and <tt class="docutils literal"><span class="pre">subpath</span></tt> from the
<tt class="docutils literal"><span class="pre">wsgiorgs.routing_args</span></tt> environment variable.  It falls back to
obtaining these from the context for backwards compatibility.</li>
</ul>
</div>
<div class="section" id="id445">
<h3>Implementation Changes<a class="headerlink" href="#id445" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Get rid of <tt class="docutils literal"><span class="pre">repoze.bfg.security.ACLAuthorizer</span></tt>: the
<tt class="docutils literal"><span class="pre">ACLSecurityPolicy</span></tt> now does what it did inline.</li>
<li>Get rid of <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.NoAuthorizationInformation</span></tt>
exception: it was used only by <tt class="docutils literal"><span class="pre">ACLAuthorizer</span></tt>.</li>
<li>Use a homegrown NotFound error instead of <tt class="docutils literal"><span class="pre">webob.exc.HTTPNotFound</span></tt>
(the latter is slow).</li>
<li>Use a homegrown Unauthorized error instead of
<tt class="docutils literal"><span class="pre">webob.exc.Unauthorized</span></tt> (the latter is slow).</li>
<li>the <tt class="docutils literal"><span class="pre">repoze.bfg.lru.lru_cached</span></tt> decorator now uses functools.wraps
in order to make documentation of LRU-cached functions possible.</li>
<li>Various speed micro-tweaks.</li>
</ul>
</div>
<div class="section" id="id446">
<h3>Bug Fixes<a class="headerlink" href="#id446" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">repoze.bfg.testing.DummyModel</span></tt> did not have a <tt class="docutils literal"><span class="pre">get</span></tt> method;
it now does.</li>
</ul>
</div>
</div>
<div class="section" id="id447">
<h2>0.6.4 (2009-01-23)<a class="headerlink" href="#id447" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id448">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id448" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">unicode_path_segments</span></tt> configuration variable and the
<tt class="docutils literal"><span class="pre">BFG_UNICODE_PATH_SEGMENTS</span></tt> configuration variable have been
removed.  Path segments are now always passed to model
<tt class="docutils literal"><span class="pre">__getitem__</span></tt> methods as unicode.  &quot;True&quot; has been the default for
this setting since 0.5.4, but changing this configuration setting to
false allowed you to go back to passing raw path element strings to
model <tt class="docutils literal"><span class="pre">__getitem__</span></tt> methods.  Removal of this knob services a
speed goal (we get about +80 req/s by removing the check), and it's
clearer just to always expect unicode path segments in model
<tt class="docutils literal"><span class="pre">__getitem__</span></tt> methods.</li>
</ul>
</div>
<div class="section" id="id449">
<h3>Implementation Changes<a class="headerlink" href="#id449" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">repoze.bfg.traversal.split_path</span></tt> now also handles decoding
path segments to unicode (for speed, because its results are
cached).</p>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">repoze.bfg.traversal.step</span></tt> was made a method of the</dt>
<dd><p class="first last">ModelGraphTraverser.</p>
</dd>
</dl>
</li>
<li><p class="first">Use &quot;precooked&quot; Request subclasses
(e.g. <tt class="docutils literal"><span class="pre">repoze.bfg.request.GETRequest</span></tt>) that correspond to HTTP
request methods within <tt class="docutils literal"><span class="pre">router.py</span></tt> when constructing a request
object rather than using <tt class="docutils literal"><span class="pre">alsoProvides</span></tt> to attach the proper
interface to an unsubclassed <tt class="docutils literal"><span class="pre">webob.Request</span></tt>.  This pattern is
purely an optimization (e.g. preventing calls to <tt class="docutils literal"><span class="pre">alsoProvides</span></tt>
means the difference between 590 r/s and 690 r/s on a MacBook 2GHz).</p>
</li>
<li><p class="first">Tease out an extra 4% performance boost by changing the Router;
instead of using imported ZCA APIs, use the same APIs directly
against the registry that is an attribute of the Router.</p>
</li>
<li><p class="first">The registry used by BFG is now a subclass of
<tt class="docutils literal"><span class="pre">zope.component.registry.Components</span></tt> (defined as
<tt class="docutils literal"><span class="pre">repoze.bfg.registry.Registry</span></tt>); it has a <tt class="docutils literal"><span class="pre">notify</span></tt> method, a
<tt class="docutils literal"><span class="pre">registerSubscriptionAdapter</span></tt> and a <tt class="docutils literal"><span class="pre">registerHandler</span></tt> method.
If no subscribers are registered via <tt class="docutils literal"><span class="pre">registerHandler</span></tt> or
<tt class="docutils literal"><span class="pre">registerSubscriptionAdapter</span></tt>, <tt class="docutils literal"><span class="pre">notify</span></tt> is a noop for speed.</p>
</li>
<li><p class="first">The Allowed and Denied classes in <tt class="docutils literal"><span class="pre">repoze.bfg.security</span></tt> now are
lazier about constructing the representation of a reason message for
speed; <tt class="docutils literal"><span class="pre">repoze.bfg.view_execution_permitted</span></tt> takes advantage of
this.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">is_response</span></tt> check was sped up by about half at the expense
of making its code slightly uglier.</p>
</li>
</ul>
</div>
<div class="section" id="new-modules">
<h3>New Modules<a class="headerlink" href="#new-modules" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">repoze.bfg.lru</span></tt> implements an LRU cache class and a decorator for
internal use.</li>
</ul>
</div>
</div>
<div class="section" id="id450">
<h2>0.6.3 (2009-01-19)<a class="headerlink" href="#id450" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id451">
<h3>Bug Fixes<a class="headerlink" href="#id451" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Readd <tt class="docutils literal"><span class="pre">root_policy</span></tt> attribute on Router object (as a property
which returns the IRootFactory utility).  It was inadvertently
removed in 0.6.2.  Code in the wild depended upon its presence
(esp. scripts and &quot;debug&quot; helpers).</li>
</ul>
</div>
<div class="section" id="id452">
<h3>Features<a class="headerlink" href="#id452" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>URL-dispatch has been overhauled: it is no longer necessary to
manually create a RoutesMapper in your application's entry point
callable in order to use URL-dispatch (aka <a class="reference external" href="http://routes.groovie.org">Routes</a>).  A new <tt class="docutils literal"><span class="pre">route</span></tt> directive has been
added to the available list of ZCML directives.  Each <tt class="docutils literal"><span class="pre">route</span></tt>
directive inserted into your application's <tt class="docutils literal"><span class="pre">configure.zcml</span></tt>
establishes a Routes mapper connection.  If any <tt class="docutils literal"><span class="pre">route</span></tt>
declarations are made via ZCML within a particular application, the
<tt class="docutils literal"><span class="pre">get_root</span></tt> callable passed in to <tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt>
will automatically be wrapped in the equivalent of a RoutesMapper.
Additionally, the new <tt class="docutils literal"><span class="pre">route</span></tt> directive allows the specification
of a <tt class="docutils literal"><span class="pre">context_interfaces</span></tt> attribute for a route, this will be used
to tag the manufactured routes context with specific interfaces when
a route specifying a <tt class="docutils literal"><span class="pre">context_interfaces</span></tt> attribute is matched.</li>
<li>A new interface <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IContextNotFound</span></tt> was
added.  This interface is attached to a &quot;dummy&quot; context generated
when Routes cannot find a match and there is no &quot;fallback&quot; get_root
callable that uses traversal.</li>
<li>The <tt class="docutils literal"><span class="pre">bfg_starter</span></tt> and <tt class="docutils literal"><span class="pre">bfg_zodb</span></tt> &quot;paster create&quot; templates now
contain images and CSS which are displayed when the default page is
displayed after initial project generation.</li>
<li>Allow the <tt class="docutils literal"><span class="pre">repoze.bfg.view.static</span></tt> helper to be passed a relative
<tt class="docutils literal"><span class="pre">root_path</span></tt> name; it will be considered relative to the file in
which it was called.</li>
<li>The functionality of <tt class="docutils literal"><span class="pre">repoze.bfg.convention</span></tt> has been merged into
the core.  Applications which make use of <tt class="docutils literal"><span class="pre">repoze.bfg.convention</span></tt>
will continue to work indefinitely, but it is recommended that apps
stop depending upon it.  To do so, substitute imports of
<tt class="docutils literal"><span class="pre">repoze.bfg.convention.bfg_view</span></tt> with imports of
<tt class="docutils literal"><span class="pre">repoze.bfg.view.bfg_view</span></tt>, and change the stanza in ZCML from
<tt class="docutils literal"><span class="pre">&lt;convention</span> <span class="pre">package=&quot;.&quot;&gt;</span></tt> to <tt class="docutils literal"><span class="pre">&lt;scan</span> <span class="pre">package=&quot;.&quot;&gt;</span></tt>.  As a result
of the merge, bfg has grown a new dependency: <tt class="docutils literal"><span class="pre">martian</span></tt>.</li>
<li>View functions which use the pushpage decorator are now pickleable
(meaning their use won't prevent a <tt class="docutils literal"><span class="pre">configure.zcml.cache</span></tt> file
from being written to disk).</li>
<li>Instead of invariably using <tt class="docutils literal"><span class="pre">webob.Request</span></tt> as the &quot;request
factory&quot; (e.g. in the <tt class="docutils literal"><span class="pre">Router</span></tt> class) and <tt class="docutils literal"><span class="pre">webob.Response</span></tt> and
the &quot;response factory&quot; (e.g. in <tt class="docutils literal"><span class="pre">render_template_to_response</span></tt>),
allow both to be overridden via a ZCML utility hook.  See the &quot;Using
ZCML Hooks&quot; chapter of the documentation for more information.</li>
</ul>
</div>
<div class="section" id="id453">
<h3>Deprecations<a class="headerlink" href="#id453" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The class <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesContext</span></tt> has been renamed
to <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.DefaultRoutesContext</span></tt>.  The class
should be imported by the new name as necessary (although in reality
it probably shouldn't be imported from anywhere except internally
within BFG, as it's not part of the API).</li>
</ul>
</div>
<div class="section" id="id454">
<h3>Implementation Changes<a class="headerlink" href="#id454" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.wsgi.wsgiapp</span></tt> decorator now uses
<tt class="docutils literal"><span class="pre">webob.Request.get_response</span></tt> to do its work rather than relying on
homegrown WSGI code.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.view.static</span></tt> helper now uses
<tt class="docutils literal"><span class="pre">webob.Request.get_response</span></tt> to do its work rather than relying on
homegrown WSGI code.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.urldispatch.RoutesModelTraverser</span></tt> class has been
moved to <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.RoutesModelTraverser</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.registry.makeRegistry</span></tt> function was renamed to
<tt class="docutils literal"><span class="pre">repoze.bfg.registry.populateRegistry</span></tt> and now accepts a
<tt class="docutils literal"><span class="pre">registry</span></tt> argument (which should be an instance of
<tt class="docutils literal"><span class="pre">zope.component.registry.Components</span></tt>).</li>
</ul>
</div>
<div class="section" id="documentation-additions">
<h3>Documentation Additions<a class="headerlink" href="#documentation-additions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Updated narrative urldispatch chapter with changes required by
<tt class="docutils literal"><span class="pre">&lt;route..&gt;</span></tt> ZCML directive.</li>
<li>Add a section on &quot;Using BFG Security With URL Dispatch&quot; into the
urldispatch chapter of the documentation.</li>
<li>Better documentation of security policy implementations that ship
with repoze.bfg.</li>
<li>Added a &quot;Using ZPT Macros in repoze.bfg&quot; section to the narrative
templating chapter.</li>
</ul>
</div>
</div>
<div class="section" id="id455">
<h2>0.6.2 (2009-01-13)<a class="headerlink" href="#id455" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id456">
<h3>Features<a class="headerlink" href="#id456" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Tests can be run with coverage output if you've got <tt class="docutils literal"><span class="pre">nose</span></tt>
installed in the interpreter which you use to run tests.  Using an
interpreter with <tt class="docutils literal"><span class="pre">nose</span></tt> installed, do <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span>
<span class="pre">nosetests</span></tt> within a checkout of the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> package to see
test coverage output.</li>
<li>Added a <tt class="docutils literal"><span class="pre">post</span></tt> argument to the <tt class="docutils literal"><span class="pre">repoze.bfg.testing:DummyRequest</span></tt>
constructor.</li>
<li>Added <tt class="docutils literal"><span class="pre">__len__</span></tt> and <tt class="docutils literal"><span class="pre">__nonzero__</span></tt> to <tt class="docutils literal"><span class="pre">repoze.bfg.testing:DummyModel</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.registry.get_options</span></tt> callable (now renamed to
<tt class="docutils literal"><span class="pre">repoze.bfg.setings.get_options</span></tt>) used to return only
framework-specific keys and values in the dictionary it returned.
It now returns all the keys and values in the dictionary it is
passed <em>plus</em> any framework-specific settings culled from the
environment.  As a side effect, all PasteDeploy application-specific
config file settings are made available as attributes of the
<tt class="docutils literal"><span class="pre">ISettings</span></tt> utility from within BFG.</li>
<li>Renamed the existing BFG paster template to <tt class="docutils literal"><span class="pre">bfg_starter</span></tt>.  Added
another template (<tt class="docutils literal"><span class="pre">bfg_zodb</span></tt>) showing default ZODB setup using
<tt class="docutils literal"><span class="pre">repoze.zodbconn</span></tt>.</li>
<li>Add a method named <tt class="docutils literal"><span class="pre">assert_</span></tt> to the DummyTemplateRenderer.  This
method accepts keyword arguments.  Each key/value pair in the
keyword arguments causes an assertion to be made that the renderer
received this key with a value equal to the asserted value.</li>
<li>Projects generated by the paster templates now use the
<tt class="docutils literal"><span class="pre">DummyTemplateRenderer.assert_</span></tt> method in their view tests.</li>
<li>Make the (internal) thread local registry manager maintain a stack
of registries in order to make it possible to call one BFG
application from inside another.</li>
<li>An interface specific to the HTTP verb (GET/PUT/POST/DELETE/HEAD) is
attached to each request object on ingress.  The HTTP-verb-related
interfaces are defined in <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces</span></tt> and are
<tt class="docutils literal"><span class="pre">IGETRequest</span></tt>, <tt class="docutils literal"><span class="pre">IPOSTRequest</span></tt>, <tt class="docutils literal"><span class="pre">IPUTRequest</span></tt>,
<tt class="docutils literal"><span class="pre">IDELETERequest</span></tt> and <tt class="docutils literal"><span class="pre">IHEADRequest</span></tt>.  These interfaces can be
specified as the <tt class="docutils literal"><span class="pre">request_type</span></tt> attribute of a bfg view
declaration.  A view naming a specific HTTP-verb-matching interface
will be found only if the view is defined with a request_type that
matches the HTTP verb in the incoming request.  The more general
<tt class="docutils literal"><span class="pre">IRequest</span></tt> interface can be used as the request_type to catch all
requests (and this is indeed the default).  All requests implement
<tt class="docutils literal"><span class="pre">IRequest</span></tt>. The HTTP-verb-matching idea was pioneered by
<a class="reference external" href="http://pypi.python.org/pypi/repoze.bfg.restrequest/1.0.1">repoze.bfg.restrequest</a> . That
package is no longer required, but still functions fine.</li>
</ul>
</div>
<div class="section" id="id457">
<h3>Bug Fixes<a class="headerlink" href="#id457" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug where the Paste configuration's <tt class="docutils literal"><span class="pre">unicode_path_segments</span></tt>
(and os.environ's <tt class="docutils literal"><span class="pre">BFG_UNICODE_PATH_SEGMENTS</span></tt>) may have been
defaulting to false in some circumstances.  It now always defaults
to true, matching the documentation and intent.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.traversal.find_model</span></tt> API did not work properly
when passed a <tt class="docutils literal"><span class="pre">path</span></tt> argument which was unicode and contained
high-order bytes when the <tt class="docutils literal"><span class="pre">unicode_path_segments</span></tt> or
<tt class="docutils literal"><span class="pre">BFG_UNICODE_PATH_SEGMENTS</span></tt> configuration variables were &quot;true&quot;.</li>
<li>A new module was added: <tt class="docutils literal"><span class="pre">repoze.bfg.settings</span></tt>.  This contains
deployment-settings-related code.</li>
</ul>
</div>
<div class="section" id="id458">
<h3>Implementation Changes<a class="headerlink" href="#id458" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">make_app</span></tt> callable within <tt class="docutils literal"><span class="pre">repoze.bfg.router</span></tt> now registers
the <tt class="docutils literal"><span class="pre">root_policy</span></tt> argument as a utility (unnamed, using the new
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IRootFactory</span></tt> as a provides interface)
rather than passing it as the first argument to the
<tt class="docutils literal"><span class="pre">repoze.bfg.router.Router</span></tt> class.  As a result, the
<tt class="docutils literal"><span class="pre">repoze.bfg.router.Router</span></tt> router class only accepts a single
argument: <tt class="docutils literal"><span class="pre">registry</span></tt>.  The <tt class="docutils literal"><span class="pre">repoze.bfg.router.Router</span></tt> class
retrieves the root policy via a utility lookup now.  The
<tt class="docutils literal"><span class="pre">repoze.bfg.router.make_app</span></tt> API also now performs some important
application registrations that were previously handled inside
<tt class="docutils literal"><span class="pre">repoze.bfg.registry.makeRegistry</span></tt>.</li>
</ul>
</div>
<div class="section" id="id459">
<h3>New Modules<a class="headerlink" href="#id459" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">repoze.bfg.settings</span></tt> module was added.  It contains code
related to deployment settings.  Most of the code it contains was
moved to it from the <tt class="docutils literal"><span class="pre">repoze.bfg.registry</span></tt> module.</li>
</ul>
</div>
<div class="section" id="id460">
<h3>Behavior Changes<a class="headerlink" href="#id460" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.settings.Settings</span></tt> class (an instance of which is
registered as a utility providing
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ISettings</span></tt> when any application is started)
now automatically calls <tt class="docutils literal"><span class="pre">repoze.bfg.settings.get_options</span></tt> on the
options passed to its constructor.  This means that usage of
<tt class="docutils literal"><span class="pre">get_options</span></tt> within an application's <tt class="docutils literal"><span class="pre">make_app</span></tt> function is no
longer required (the &quot;raw&quot; <tt class="docutils literal"><span class="pre">options</span></tt> dict or None may be passed).</li>
<li>Remove old cold which attempts to recover from trying to unpickle a
<tt class="docutils literal"><span class="pre">z3c.pt</span></tt> template; Chameleon has been the templating engine for a
good long time now.  Running repoze.bfg against a sandbox that has
pickled <tt class="docutils literal"><span class="pre">z3c.pt</span></tt> templates it will now just fail with an
unpickling error, but can be fixed by deleting the template cache
files.</li>
</ul>
</div>
<div class="section" id="id461">
<h3>Deprecations<a class="headerlink" href="#id461" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Moved the <tt class="docutils literal"><span class="pre">repoze.bfg.registry.Settings</span></tt> class.  This has been
moved to <tt class="docutils literal"><span class="pre">repoze.bfg.settings.Settings</span></tt>. A deprecation warning is
issued when it is imported from the older location.</li>
<li>Moved the <tt class="docutils literal"><span class="pre">repoze.bfg.registry.get_options</span></tt> function This has been
moved to <tt class="docutils literal"><span class="pre">repoze.bfg.settings.get_options</span></tt>.  A deprecation warning
is issued when it is imported from the older location.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.IRootPolicy</span></tt> interface was renamed
within the interfaces package.  It has been renamed to
<tt class="docutils literal"><span class="pre">IRootFactory</span></tt>.  A deprecation warning is issued when it is
imported from the older location.</li>
</ul>
</div>
</div>
<div class="section" id="id462">
<h2>0.6.1 (2009-01-06)<a class="headerlink" href="#id462" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id463">
<h3>New Modules<a class="headerlink" href="#id463" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A new module <tt class="docutils literal"><span class="pre">repoze.bfg.url</span></tt> has been added.  It contains the
<tt class="docutils literal"><span class="pre">model_url</span></tt> API (moved from <tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt>) and an
implementation of <tt class="docutils literal"><span class="pre">urlencode</span></tt> (like Python's
<tt class="docutils literal"><span class="pre">urllib.urlencode</span></tt>) which can handle Unicode keys and values in
parameters to the <tt class="docutils literal"><span class="pre">query</span></tt> argument.</li>
</ul>
</div>
<div class="section" id="id464">
<h3>Deprecations<a class="headerlink" href="#id464" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">model_url</span></tt> function has been moved from
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt> into <tt class="docutils literal"><span class="pre">repoze.bfg.url</span></tt>.  It can still
be imported from <tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt> but an import from
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal</span></tt> will emit a DeprecationWarning.</li>
</ul>
</div>
<div class="section" id="id465">
<h3>Features<a class="headerlink" href="#id465" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">static</span></tt> helper class was added to the <tt class="docutils literal"><span class="pre">repoze.bfg.views</span></tt>
module.  Instances of this class are willing to act as BFG views
which return static resources using files on disk.  See the
<tt class="docutils literal"><span class="pre">repoze.bfg.view</span></tt> docs for more info.</li>
<li>The <tt class="docutils literal"><span class="pre">repoze.bfg.url.model_url</span></tt> API (nee'
<tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_url</span></tt>) now accepts and honors a
keyword argument named <tt class="docutils literal"><span class="pre">query</span></tt>.  The value of this argument
will be used to compose a query string, which will be attached to
the generated URL before it is returned.  See the API docs (in
the docs directory or <a class="reference external" href="http://static.repoze.org/bfgdocs">on the web</a>) for more information.</li>
</ul>
</div>
</div>
<div class="section" id="id466">
<h2>0.6 (2008-12-26)<a class="headerlink" href="#id466" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id467">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id467" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Rather than prepare the &quot;stock&quot; implementations of the ZCML directives
from the <tt class="docutils literal"><span class="pre">zope.configuration</span></tt> package for use under <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>,
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> now makes available the implementations of directives
from the <tt class="docutils literal"><span class="pre">repoze.zcml</span></tt> package (see <a class="reference external" href="http://static.repoze.org/zcmldocs">http://static.repoze.org/zcmldocs</a>).
As a result, the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> package now depends on the
<tt class="docutils literal"><span class="pre">repoze.zcml</span></tt> package, and no longer depends directly on the
<tt class="docutils literal"><span class="pre">zope.component</span></tt>, <tt class="docutils literal"><span class="pre">zope.configuration</span></tt>, <tt class="docutils literal"><span class="pre">zope.interface</span></tt>, or
<tt class="docutils literal"><span class="pre">zope.proxy</span></tt> packages.</p>
<p>The primary reason for this change is to enable us to eventually reduce
the number of inappropriate <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> Zope package dependencies,
as well as to shed features of dependent package directives that don't
make sense for <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>.</p>
<p>Note that currently the set of requirements necessary to use bfg has not
changed.  This is due to inappropriate Zope package requirements in
<tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt>, which will hopefully be remedied soon. NOTE: in
lemonade index a 1.0b8-repozezcml0 package exists which does away with
these requirements.</p>
</li>
<li><p class="first">BFG applications written prior to this release which expect the &quot;stock&quot;
<tt class="docutils literal"><span class="pre">zope.component</span></tt> ZCML directive implementations (e.g. <tt class="docutils literal"><span class="pre">adapter</span></tt>,
<tt class="docutils literal"><span class="pre">subscriber</span></tt>, or <tt class="docutils literal"><span class="pre">utility</span></tt>) to function now must either 1) include
the <tt class="docutils literal"><span class="pre">meta.zcml</span></tt> file from <tt class="docutils literal"><span class="pre">zope.component</span></tt> manually (e.g. <tt class="docutils literal"><span class="pre">&lt;include</span>
<span class="pre">package=&quot;zope.component&quot;</span> <span class="pre">file=&quot;meta.zcml&quot;&gt;</span></tt>) and include the
<tt class="docutils literal"><span class="pre">zope.security</span></tt> package as an <tt class="docutils literal"><span class="pre">install_requires</span></tt> dependency or 2)
change the ZCML in their applications to use the declarations from
<a class="reference external" href="http://static.repoze.org/zcmldocs/">repoze.zcml</a> instead of the stock
declarations.  <tt class="docutils literal"><span class="pre">repoze.zcml</span></tt> only makes available the <tt class="docutils literal"><span class="pre">adapter</span></tt>,
<tt class="docutils literal"><span class="pre">subscriber</span></tt> and <tt class="docutils literal"><span class="pre">utility</span></tt> directives.</p>
<p>In short, if you've got an existing BFG application, after this
update, if your application won't start due to an import error for
&quot;zope.security&quot;, the fastest way to get it working again is to add
<tt class="docutils literal"><span class="pre">zope.security</span></tt> to the &quot;install_requires&quot; of your BFG
application's <tt class="docutils literal"><span class="pre">setup.py</span></tt>, then add the following ZCML anywhere
in your application's <tt class="docutils literal"><span class="pre">configure.zcml</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;include package=&quot;zope.component&quot; file=&quot;meta.zcml&quot;&gt;
</pre></div>
</div>
<p>Then re-<tt class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span></tt> or reinstall your application.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">http://namespaces.repoze.org/bfg</span></tt> XML namespace is now the default
XML namespace in ZCML for paster-generated applications.  The docs have
been updated to reflect this.</p>
</li>
<li><p class="first">The copies of BFG's <tt class="docutils literal"><span class="pre">meta.zcml</span></tt> and <tt class="docutils literal"><span class="pre">configure.zcml</span></tt> were removed
from the root of the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> package.  In 0.3.6, a new package
named <tt class="docutils literal"><span class="pre">repoze.bfg.includes</span></tt> was added, which contains the &quot;correct&quot;
copies of these ZCML files; the ones that were removed were for backwards
compatibility purposes.</p>
</li>
<li><p class="first">The BFG <tt class="docutils literal"><span class="pre">view</span></tt> ZCML directive no longer calls
<tt class="docutils literal"><span class="pre">zope.component.interface.provideInterface</span></tt> for the <tt class="docutils literal"><span class="pre">for</span></tt> interface.
We don't support <tt class="docutils literal"><span class="pre">provideInterface</span></tt> in BFG because it mutates the
global registry.</p>
</li>
</ul>
</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The minimum requirement for <tt class="docutils literal"><span class="pre">chameleon.core</span></tt> is now 1.0b13.  The
minimum requirement for <tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt> is now 1.0b8.  The minimum
requirement for <tt class="docutils literal"><span class="pre">chameleon.genshi</span></tt> is now 1.0b2.</li>
<li>Updated paster template &quot;ez_setup.py&quot; to one that requires setuptools
0.6c9.</li>
<li>Turn <tt class="docutils literal"><span class="pre">view_execution_permitted</span></tt> from the <tt class="docutils literal"><span class="pre">repoze.bfg.view</span></tt> module
into a documented API.</li>
<li>Doc cleanups.</li>
<li>Documented how to create a view capable of serving static resources.</li>
</ul>
</div>
</div>
<div class="section" id="id468">
<h2>0.5.6 (2008-12-18)<a class="headerlink" href="#id468" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Speed up <tt class="docutils literal"><span class="pre">traversal.model_url</span></tt> execution by using a custom url quoting
function instead of Python's <tt class="docutils literal"><span class="pre">urllib.quote</span></tt>, by caching URL path
segment quoting and encoding results, by disusing Python's
<tt class="docutils literal"><span class="pre">urlparse.urljoin</span></tt> in favor of a simple string concatenation, and by
using <tt class="docutils literal"><span class="pre">ob.__class__</span> <span class="pre">is</span> <span class="pre">unicode</span></tt> rather than <tt class="docutils literal"><span class="pre">isinstance(ob,</span> <span class="pre">unicode)</span></tt>
in one strategic place.</li>
</ul>
</div>
<div class="section" id="id469">
<h2>0.5.5 (2008-12-17)<a class="headerlink" href="#id469" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id470">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id470" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">In the past, during traversal, the ModelGraphTraverser (the default
traverser) always passed each URL path segment to any <tt class="docutils literal"><span class="pre">__getitem__</span></tt>
method of a model object as a byte string (a <tt class="docutils literal"><span class="pre">str</span></tt> object).  Now, by
default the ModelGraphTraverser attempts to decode the path segment to
Unicode (a <tt class="docutils literal"><span class="pre">unicode</span></tt> object) using the UTF-8 encoding before passing it
to the <tt class="docutils literal"><span class="pre">__getitem__</span></tt> method of a model object.  This makes it possible
for model objects to be dumber in <tt class="docutils literal"><span class="pre">__getitem__</span></tt> when trying to resolve
a subobject, as model objects themselves no longer need to try to divine
whether or not to try to decode the path segment passed by the
traverser.</p>
<p>Note that since 0.5.4, URLs generated by repoze.bfg's <tt class="docutils literal"><span class="pre">model_url</span></tt> API
will contain UTF-8 encoded path segments as necessary, so any URL
generated by BFG itself will be decodeable by the traverser.  If another
application generates URLs to a BFG application, to be resolved
successully, it should generate the URL with UTF-8 encoded path segments
to be successfully resolved.  The decoder is not at all magical: if a
non-UTF-8-decodeable path segment (e.g. one encoded using UTF-16 or some
other insanity) is passed in the URL, BFG will raise a <tt class="docutils literal"><span class="pre">TypeError</span></tt> with
a message indicating it could not decode the path segment.</p>
<p>To turn on the older behavior, where path segments were not decoded to
Unicode before being passed to model object <tt class="docutils literal"><span class="pre">__getitem__</span></tt> by the
traverser, and were passed as a raw byte string, set the
<tt class="docutils literal"><span class="pre">unicode_path_segments</span></tt> configuration setting to a false value in your
BFG application's section of the paste .ini file, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">unicode_path_segments</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
<p>Or start the application using the <tt class="docutils literal"><span class="pre">BFG_UNICODE_PATH_SEGMENT</span></tt> envvar
set to a false value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BFG_UNICODE_PATH_SEGMENTS</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="id471">
<h2>0.5.4 (2008-12-13)<a class="headerlink" href="#id471" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id472">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id472" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>URL-quote &quot;extra&quot; element names passed in as <tt class="docutils literal"><span class="pre">**elements</span></tt> to the
<tt class="docutils literal"><span class="pre">traversal.model_url</span></tt> API.  If any of these names is a Unicode string,
encode it to UTF-8 before URL-quoting.  This is a slight backwards
incompatibility that will impact you if you were already UTF-8 encoding
or URL-quoting the values you passed in as <tt class="docutils literal"><span class="pre">elements</span></tt> to this API.</li>
</ul>
</div>
<div class="section" id="id473">
<h3>Bugfixes<a class="headerlink" href="#id473" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>UTF-8 encode each segment in the model path used to generate a URL before
url-quoting it within the <tt class="docutils literal"><span class="pre">traversal.model_url</span></tt> API.  This is a bugfix,
as Unicode cannot always be successfully URL-quoted.</li>
</ul>
</div>
<div class="section" id="id474">
<h3>Features<a class="headerlink" href="#id474" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make it possible to run unit tests using a buildout-generated Python
&quot;interpreter&quot;.</li>
<li>Add <tt class="docutils literal"><span class="pre">request.root</span></tt> to <tt class="docutils literal"><span class="pre">router.Router</span></tt> in order to have easy access to
the application root.</li>
</ul>
</div>
</div>
<div class="section" id="id475">
<h2>0.5.3 (2008-12-07)<a class="headerlink" href="#id475" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Remove the <tt class="docutils literal"><span class="pre">ITestingTemplateRenderer</span></tt> interface.  When
<tt class="docutils literal"><span class="pre">testing.registerDummyRenderer</span></tt> is used, it instead registers a dummy
implementation using <tt class="docutils literal"><span class="pre">ITemplateRenderer</span></tt> interface, which is checked
for when the built-in templating facilities do rendering.  This change
also allows developers to make explcit named utility registrations in
the ZCML registry against <tt class="docutils literal"><span class="pre">ITemplateRenderer</span></tt>; these will be found
before any on-disk template is looked up.</li>
</ul>
</div>
<div class="section" id="id476">
<h2>0.5.2 (2008-12-05)<a class="headerlink" href="#id476" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The component registration handler for views (functions or class
instances) now observes component adaptation annotations (see
<tt class="docutils literal"><span class="pre">zope.component.adaptedBy</span></tt>) and uses them before the fallback values
for <tt class="docutils literal"><span class="pre">for_</span></tt> and <tt class="docutils literal"><span class="pre">request_type</span></tt>. This change does not affect existing
code insomuch as the code does not rely on these defaults when an
annotation is set on the view (unlikely).  This means that for a
new-style class you can do <tt class="docutils literal"><span class="pre">zope.component.adapts(ISomeContext,</span>
<span class="pre">ISomeRequest)</span></tt> at class scope or at module scope as a decorator to a
bfg view function you can do <tt class="docutils literal"><span class="pre">&#64;zope.component.adapter(ISomeContext,</span>
<span class="pre">ISomeRequest)</span></tt>.  This differs from r.bfg.convention inasmuch as you
still need to put something in ZCML for the registrations to get done;
it's only the defaults that will change if these declarations exist.</li>
<li>Strip all slashes from end and beginning of path in clean_path within
traversal machinery.</li>
</ul>
</div>
<div class="section" id="id477">
<h2>0.5.1 (2008-11-25)<a class="headerlink" href="#id477" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">keys</span></tt>, <tt class="docutils literal"><span class="pre">items</span></tt>, and <tt class="docutils literal"><span class="pre">values</span></tt> methods to
<tt class="docutils literal"><span class="pre">testing.DummyModel</span></tt>.</li>
<li>Add __delitem__ method to <tt class="docutils literal"><span class="pre">testing.DummyModel</span></tt>.</li>
</ul>
</div>
<div class="section" id="id478">
<h2>0.5.0 (2008-11-18)<a class="headerlink" href="#id478" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fix ModelGraphTraverser; don't try to change the <tt class="docutils literal"><span class="pre">__name__</span></tt> or
<tt class="docutils literal"><span class="pre">__parent__</span></tt> of an object that claims it implements ILocation during
traversal even if the <tt class="docutils literal"><span class="pre">__name__</span></tt> or <tt class="docutils literal"><span class="pre">__parent__</span></tt> of the object
traversed does not match the name used in the traversal step or the or
the traversal parent .  Rationale: it was insane to do so. This bug was
only found due to a misconfiguration in an application that mistakenly
had intermediate persistent non-ILocation objects; traversal was causing
a persistent write on every request under this setup.</li>
<li><tt class="docutils literal"><span class="pre">repoze.bfg.location.locate</span></tt> now unconditionally sets <tt class="docutils literal"><span class="pre">__name__</span></tt> and
<tt class="docutils literal"><span class="pre">__parent__</span></tt> on objects which provide ILocation (it previously only set
them conditionally if they didn't match attributes already present on the
object via equality).</li>
</ul>
</div>
<div class="section" id="id479">
<h2>0.4.9 (2008-11-17)<a class="headerlink" href="#id479" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add chameleon text template API (chameleon ${name} renderings where the
template does not need to be wrapped in any containing XML).</li>
<li>Change docs to explain install in terms of a virtualenv
(unconditionally).</li>
<li>Make pushpage decorator compatible with repoze.bfg.convention's
<tt class="docutils literal"><span class="pre">bfg_view</span></tt> decorator when they're stacked.</li>
<li>Add content_length attribute to testing.DummyRequest.</li>
<li>Change paster template <tt class="docutils literal"><span class="pre">tests.py</span></tt> to include a true unit test.  Retain
old test as an integration test.  Update documentation.</li>
<li>Document view registrations against classes and <tt class="docutils literal"><span class="pre">repoze.bfg.convention</span></tt>
in context.</li>
<li>Change the default paster template to register its single view against a
class rather than an interface.</li>
<li>Document adding a request type interface to the request via a subscriber
function in the events narrative documentation.</li>
</ul>
</div>
<div class="section" id="id480">
<h2>0.4.8 (2008-11-12)<a class="headerlink" href="#id480" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id481">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id481" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">repoze.bfg.traversal.model_url</span></tt> now always appends a slash to all
generated URLs unless further elements are passed in as the third and
following arguments.  Rationale: views often use <tt class="docutils literal"><span class="pre">model_url</span></tt> without
the third-and-following arguments in order to generate a URL for a model
in order to point at the default view of a model.  The URL that points to
the default view of the <em>root</em> model is technically <tt class="docutils literal"><span class="pre">http://mysite/</span></tt> as
opposed to <tt class="docutils literal"><span class="pre">http://mysite</span></tt> (browsers happen to ask for '/' implicitly
in the GET request).  Because URLs are never automatically generated for
anything <em>except</em> models by <tt class="docutils literal"><span class="pre">model_url</span></tt>, and because the root model is
not really special, we continue this pattern.  The impact of this change
is minimal (at most you will have too many slashes in your URL, which BFG
deals with gracefully anyway).</li>
</ul>
</div>
</div>
<div class="section" id="id482">
<h2>0.4.7 (2008-11-11)<a class="headerlink" href="#id482" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id483">
<h3>Features<a class="headerlink" href="#id483" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow <tt class="docutils literal"><span class="pre">testing.registerEventListener</span></tt> to be used with Zope 3 style
&quot;object events&quot; (subscribers accept more than a single event argument).
We extend the list with the arguments, rather than append.</li>
</ul>
</div>
</div>
<div class="section" id="id484">
<h2>0.4.6 (2008-11-10)<a class="headerlink" href="#id484" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id485">
<h3>Bug Fixes<a class="headerlink" href="#id485" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">model_path</span></tt> and <tt class="docutils literal"><span class="pre">model_url</span></tt> traversal APIs returned the wrong
value for the root object (e.g. <tt class="docutils literal"><span class="pre">model_path</span></tt> returned <tt class="docutils literal"><span class="pre">''</span></tt> for the
root object, while it should have been returning <tt class="docutils literal"><span class="pre">'/'</span></tt>).</li>
</ul>
</div>
</div>
<div class="section" id="id486">
<h2>0.4.5 (2008-11-09)<a class="headerlink" href="#id486" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id487">
<h3>Features<a class="headerlink" href="#id487" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a <tt class="docutils literal"><span class="pre">clone</span></tt> method and a <tt class="docutils literal"><span class="pre">__contains__</span></tt> method to the DummyModel
testing object.</li>
<li>Allow DummyModel objects to receive extra keyword arguments, which will
be attached as attributes.</li>
<li>The DummyTemplateRenderer now returns <tt class="docutils literal"><span class="pre">self</span></tt> as its implementation.</li>
</ul>
</div>
</div>
<div class="section" id="id488">
<h2>0.4.4 (2008-11-08)<a class="headerlink" href="#id488" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id489">
<h3>Features<a class="headerlink" href="#id489" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a <tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt> module to attempt to make it slightly
easier to write unittest-based automated tests of BFG applications.
Information about this module is in the documentation.</li>
<li>The default template renderer now supports testing better by looking for
<tt class="docutils literal"><span class="pre">ITestingTemplateRenderer</span></tt> using a relative pathname.  This is exposed
indirectly through the API named <tt class="docutils literal"><span class="pre">registerTemplateRenderer</span></tt> in
<tt class="docutils literal"><span class="pre">repoze.bfg.testing</span></tt>.</li>
</ul>
</div>
<div class="section" id="id490">
<h3>Deprecations<a class="headerlink" href="#id490" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The names <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplate</span></tt> ,
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplateFactory</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.INodeTemplate</span></tt> have been deprecated.  These
should now be imported as <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplateRenderer</span></tt> and
<tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ITemplateRendererFactory</span></tt>, and
<tt class="docutils literal"><span class="pre">INodeTemplateRenderer</span></tt> respectively.</li>
<li>The name <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt.ZPTTemplateFactory</span></tt> is deprecated.
Use <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt.ZPTTemplateRenderer</span></tt>.</li>
<li>The name <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_genshi.GenshiTemplateFactory</span></tt> is
deprecated.  Use <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_genshi.GenshiTemplateRenderer</span></tt>.</li>
<li>The name <tt class="docutils literal"><span class="pre">repoze.bfg.xslt.XSLTemplateFactory</span></tt> is deprecated.  Use
<tt class="docutils literal"><span class="pre">repoze.bfg.xslt.XSLTemplateRenderer</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="id491">
<h2>0.4.3 (2008-11-02)<a class="headerlink" href="#id491" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id492">
<h3>Bug Fixes<a class="headerlink" href="#id492" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Not passing the result of &quot;get_options&quot; as the second argument of
make_app could cause attribute errors when attempting to look up settings
against the ISettings object (internal).  Fixed by giving the Settings
objects defaults for <tt class="docutils literal"><span class="pre">debug_authorization</span></tt> and <tt class="docutils literal"><span class="pre">debug_notfound</span></tt>.</li>
<li>Return an instance of <tt class="docutils literal"><span class="pre">Allowed</span></tt> (rather than <tt class="docutils literal"><span class="pre">True</span></tt>) from
<tt class="docutils literal"><span class="pre">has_permission</span></tt> when no security policy is in use.</li>
<li>Fix bug where default deny in authorization check would throw a TypeError
(use <tt class="docutils literal"><span class="pre">ACLDenied</span></tt> instead of <tt class="docutils literal"><span class="pre">Denied</span></tt>).</li>
</ul>
</div>
</div>
<div class="section" id="id493">
<h2>0.4.2 (2008-11-02)<a class="headerlink" href="#id493" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id494">
<h3>Features<a class="headerlink" href="#id494" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Expose a single ILogger named &quot;repoze.bfg.debug&quot; as a utility; this
logger is registered unconditionally and is used by the authorization
debug machinery.  Applications may also make use of it as necessary
rather than inventing their own logger, for convenience.</li>
<li>The <tt class="docutils literal"><span class="pre">BFG_DEBUG_AUTHORIZATION</span></tt> envvar and the <tt class="docutils literal"><span class="pre">debug_authorization</span></tt>
config file value now only imply debugging of view-invoked security
checks.  Previously, information was printed for every call to
<tt class="docutils literal"><span class="pre">has_permission</span></tt> as well, which made output confusing.  To debug
<tt class="docutils literal"><span class="pre">has_permission</span></tt> checks and other manual permission checks, use the
debugger and print statements in your own code.</li>
<li>Authorization debugging info is now only present in the HTTP response
body oif <tt class="docutils literal"><span class="pre">debug_authorization</span></tt> is true.</li>
<li>The format of authorization debug messages was improved.</li>
<li>A new <tt class="docutils literal"><span class="pre">BFG_DEBUG_NOTFOUND</span></tt> envvar was added and a symmetric
<tt class="docutils literal"><span class="pre">debug_notfound</span></tt> config file value was added.  When either is true, and
a NotFound response is returned by the BFG router (because a view could
not be found), debugging information is printed to stderr.  When this
value is set true, the body of HTTPNotFound responses will also contain
the same debugging information.</li>
<li><tt class="docutils literal"><span class="pre">Allowed</span></tt> and <tt class="docutils literal"><span class="pre">Denied</span></tt> responses from the security machinery are now
specialized into two types: ACL types, and non-ACL types.  The
ACL-related responses are instances of <tt class="docutils literal"><span class="pre">repoze.bfg.security.ACLAllowed</span></tt>
and <tt class="docutils literal"><span class="pre">repoze.bfg.security.ACLDenied</span></tt>.  The non-ACL-related responses are
<tt class="docutils literal"><span class="pre">repoze.bfg.security.Allowed</span></tt> and <tt class="docutils literal"><span class="pre">repoze.bfg.security.Denied</span></tt>.  The
allowed-type responses continue to evaluate equal to things that
themselves evaluate equal to the <tt class="docutils literal"><span class="pre">True</span></tt> boolean, while the denied-type
responses continue to evaluate equal to things that themselves evaluate
equal to the <tt class="docutils literal"><span class="pre">False</span></tt> boolean.  The only difference between the two
types is the information attached to them for debugging purposes.</li>
<li>Added a new <tt class="docutils literal"><span class="pre">BFG_DEBUG_ALL</span></tt> envvar and a symmetric <tt class="docutils literal"><span class="pre">debug_all</span></tt> config
file value.  When either is true, all other debug-related flags are set
true unconditionally (e.g. <tt class="docutils literal"><span class="pre">debug_notfound</span></tt> and
<tt class="docutils literal"><span class="pre">debug_authorization</span></tt>).</li>
</ul>
</div>
<div class="section" id="id495">
<h3>Documentation<a class="headerlink" href="#id495" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added info about debug flag changes.</li>
<li>Added a section to the security chapter named &quot;Debugging Imperative
Authorization Failures&quot; (for e.g. <tt class="docutils literal"><span class="pre">has_permssion</span></tt>).</li>
</ul>
</div>
<div class="section" id="id496">
<h3>Bug Fixes<a class="headerlink" href="#id496" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Change default paster template generator to use <tt class="docutils literal"><span class="pre">Paste#http</span></tt> server
rather than <tt class="docutils literal"><span class="pre">PasteScript#cherrpy</span></tt> server.  The cherrypy server has a
security risk in it when <tt class="docutils literal"><span class="pre">REMOTE_USER</span></tt> is trusted by the downstream
application.</li>
</ul>
</div>
</div>
<div class="section" id="id497">
<h2>0.4.1 (2008-10-28)<a class="headerlink" href="#id497" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id498">
<h3>Bug Fixes<a class="headerlink" href="#id498" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If the <tt class="docutils literal"><span class="pre">render_view_to_response</span></tt> function was called, if the view was
found and called, but it returned something that did not implement
IResponse, the error would pass by unflagged.  This was noticed when I
created a view function that essentially returned None, but received a
NotFound error rather than a ValueError when the view was rendered.  This
was fixed.</li>
</ul>
</div>
</div>
<div class="section" id="id499">
<h2>0.4.0 (2008-10-03)<a class="headerlink" href="#id499" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id500">
<h3>Docs<a class="headerlink" href="#id500" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>An &quot;Environment and Configuration&quot; chapter was added to the narrative
portion of the documentation.</li>
</ul>
</div>
<div class="section" id="id501">
<h3>Features<a class="headerlink" href="#id501" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Ensure bfg doesn't generate warnings when running under Python
2.6.</li>
<li>The environment variable <tt class="docutils literal"><span class="pre">BFG_RELOAD_TEMPLATES</span></tt> is now available
(serves the same purpose as <tt class="docutils literal"><span class="pre">reload_templates</span></tt> in the config file).</li>
<li>A new configuration file option <tt class="docutils literal"><span class="pre">debug_authorization</span></tt> was added.
This turns on printing of security authorization debug statements
to <tt class="docutils literal"><span class="pre">sys.stderr</span></tt>.  The <tt class="docutils literal"><span class="pre">BFG_DEBUG_AUTHORIZATION</span></tt> environment
variable was also added; this performs the same duty.</li>
</ul>
</div>
<div class="section" id="id502">
<h3>Bug Fixes<a class="headerlink" href="#id502" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The environment variable <tt class="docutils literal"><span class="pre">BFG_SECURITY_DEBUG</span></tt> did not always work.
It has been renamed to <tt class="docutils literal"><span class="pre">BFG_DEBUG_AUTHORIZATION</span></tt> and fixed.</li>
</ul>
</div>
<div class="section" id="id503">
<h3>Deprecations<a class="headerlink" href="#id503" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A deprecation warning is now issued when old API names from the
<tt class="docutils literal"><span class="pre">repoze.bfg.templates</span></tt> module are imported.</li>
</ul>
</div>
<div class="section" id="id504">
<h3>Backwards incompatibilities<a class="headerlink" href="#id504" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">BFG_SECURITY_DEBUG</span></tt> environment variable was renamed to
<tt class="docutils literal"><span class="pre">BFG_DEBUG_AUTHORIZATION</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="id505">
<h2>0.3.9 (2008-08-27)<a class="headerlink" href="#id505" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id506">
<h3>Features<a class="headerlink" href="#id506" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">repoze.bfg.location</span></tt> API module was added.</li>
</ul>
</div>
<div class="section" id="id507">
<h3>Backwards incompatibilities<a class="headerlink" href="#id507" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Applications must now use the <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ILocation</span></tt>
interface rather than <tt class="docutils literal"><span class="pre">zope.location.interfaces.ILocation</span></tt> to
represent that a model object is &quot;location-aware&quot;.  We've removed
a dependency on <tt class="docutils literal"><span class="pre">zope.location</span></tt> for cleanliness purposes: as
new versions of zope libraries are released which have improved
dependency information, getting rid of our dependence on
<tt class="docutils literal"><span class="pre">zope.location</span></tt> will prevent a newly installed repoze.bfg
application from requiring the <tt class="docutils literal"><span class="pre">zope.security</span></tt>, egg, which not
truly used at all in a &quot;stock&quot; repoze.bfg setup.  These
dependencies are still required by the stack at this time; this
is purely a futureproofing move.</p>
<p>The security and model documentation for previous versions of
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> recommended using the
<tt class="docutils literal"><span class="pre">zope.location.interfaces.ILocation</span></tt> interface to represent
that a model object is &quot;location-aware&quot;.  This documentation has
been changed to reflect that this interface should now be
imported from <tt class="docutils literal"><span class="pre">repoze.bfg.interfaces.ILocation</span></tt> instead.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id508">
<h2>0.3.8 (2008-08-26)<a class="headerlink" href="#id508" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id509">
<h3>Docs<a class="headerlink" href="#id509" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Documented URL dispatch better in narrative form.</li>
</ul>
</div>
<div class="section" id="id510">
<h3>Bug fixes<a class="headerlink" href="#id510" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Routes URL dispatch did not have access to the WSGI environment,
so conditions such as method=GET did not work.</li>
</ul>
</div>
<div class="section" id="id511">
<h3>Features<a class="headerlink" href="#id511" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">principals_allowed_by_permission</span></tt> API to security module.</li>
<li>Replace <tt class="docutils literal"><span class="pre">z3c.pt</span></tt> support with support for <tt class="docutils literal"><span class="pre">chameleon.zpt</span></tt>.
Chameleon is the new name for the package that used to be named
<tt class="docutils literal"><span class="pre">z3c.pt</span></tt>.  NOTE: If you update a <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> SVN checkout
that you're using for development, you will need to run &quot;setup.py
install&quot; or &quot;setup.py develop&quot; again in order to obtain the
proper Chameleon packages.  <tt class="docutils literal"><span class="pre">z3c.pt</span></tt> is no longer supported by
<tt class="docutils literal"><span class="pre">repoze.bfg</span></tt>.  All API functions that used to render <tt class="docutils literal"><span class="pre">z3c.pt</span></tt>
templates will work fine with the new packages, and your
templates should render almost identically.</li>
<li>Add a <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_zpt</span></tt> module.  This module provides
Chameleon ZPT support.</li>
<li>Add a <tt class="docutils literal"><span class="pre">repoze.bfg.xslt</span></tt> module.  This module provides XSLT
support.</li>
<li>Add a <tt class="docutils literal"><span class="pre">repoze.bfg.chameleon_genshi</span></tt> module.  This provides
direct Genshi support, which did not exist previously.</li>
</ul>
</div>
<div class="section" id="id512">
<h3>Deprecations<a class="headerlink" href="#id512" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Importing API functions directly from <tt class="docutils literal"><span class="pre">repoze.bfg.template</span></tt> is
now deprecated.  The <tt class="docutils literal"><span class="pre">get_template</span></tt>, <tt class="docutils literal"><span class="pre">render_template</span></tt>,
<tt class="docutils literal"><span class="pre">render_template_to_response</span></tt> functions should now be imported
from <tt class="docutils literal"><span class="pre">repoze.chameleon_zpt</span></tt>.  The <tt class="docutils literal"><span class="pre">render_transform</span></tt>, and
<tt class="docutils literal"><span class="pre">render_transform_to_response</span></tt> functions should now be imported
from <tt class="docutils literal"><span class="pre">repoze.bfg.xslt</span></tt>.  The <tt class="docutils literal"><span class="pre">repoze.bfg.template</span></tt> module
will remain around &quot;forever&quot; to support backwards compatibility.</li>
</ul>
</div>
</div>
<div class="section" id="id513">
<h2>0.3.7 (2008-09-09)<a class="headerlink" href="#id513" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id514">
<h3>Features<a class="headerlink" href="#id514" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add compatibility with z3c.pt 1.0a7+ (z3c.pt became a namespace package).</li>
</ul>
</div>
<div class="section" id="id515">
<h3>Bug fixes<a class="headerlink" href="#id515" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">repoze.bfg.traversal.find_model</span></tt> function did not function properly.</li>
</ul>
</div>
</div>
<div class="section" id="id516">
<h2>0.3.6 (2008-09-04)<a class="headerlink" href="#id516" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id517">
<h3>Features<a class="headerlink" href="#id517" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add startup process docs.</li>
<li>Allow configuration cache to be bypassed by actions which include special
&quot;uncacheable&quot; discriminators (for actions that have variable results).</li>
</ul>
</div>
<div class="section" id="id518">
<h3>Bug Fixes<a class="headerlink" href="#id518" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Move core repoze.bfg ZCML into a <tt class="docutils literal"><span class="pre">repoze.bfg.includes</span></tt> package so we
can use repoze.bfg better as a namespace package.  Adjust the code
generator to use it.  We've left around the <tt class="docutils literal"><span class="pre">configure.zcml</span></tt> in the
repoze.bfg package directly so as not to break older apps.</li>
<li>When a zcml application registry cache was unpickled, and it contained a
reference to an object that no longer existed (such as a view), bfg would
not start properly.</li>
</ul>
</div>
</div>
<div class="section" id="id519">
<h2>0.3.5 (2008-09-01)<a class="headerlink" href="#id519" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id520">
<h3>Features<a class="headerlink" href="#id520" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Event notification is issued after application is created and configured
(<tt class="docutils literal"><span class="pre">IWSGIApplicationCreatedEvent</span></tt>).</li>
<li>New API module: <tt class="docutils literal"><span class="pre">repoze.bfg.view</span></tt>.  This module contains the functions
named <tt class="docutils literal"><span class="pre">render_view_to_response</span></tt>, <tt class="docutils literal"><span class="pre">render_view_to_iterable</span></tt>,
<tt class="docutils literal"><span class="pre">render_view</span></tt> and <tt class="docutils literal"><span class="pre">is_response</span></tt>, which are documented in the API
docs.  These features aid programmatic (non-server-driven) view
execution.</li>
</ul>
</div>
</div>
<div class="section" id="id521">
<h2>0.3.4 (2008-08-28)<a class="headerlink" href="#id521" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id522">
<h3>Backwards incompatibilities<a class="headerlink" href="#id522" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> a namespace package so we can allow folks to create
subpackages (e.g. <tt class="docutils literal"><span class="pre">repoze.bfg.otherthing</span></tt>) within separate eggs.  This
is a backwards incompatible change which makes it impossible to import
&quot;make_app&quot; and &quot;get_options&quot; from the <tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> module directly.
This change will break all existing apps generated by the paster code
generator.  Instead, you need to import these functions as
<tt class="docutils literal"><span class="pre">repoze.bfg.router:make_app</span></tt> and <tt class="docutils literal"><span class="pre">repoze.bfg.registry:get_options</span></tt>,
respectively.  Sorry folks, it has to be done now or never, and
definitely better now.</li>
</ul>
</div>
<div class="section" id="id523">
<h3>Features<a class="headerlink" href="#id523" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">model_path</span></tt> API function to traversal module.</li>
</ul>
<p>Bugfixes</p>
<ul class="simple">
<li>Normalize path returned by repoze.bfg.caller_path.</li>
</ul>
</div>
</div>
<div class="section" id="id524">
<h2>0.3.3 (2008-08-23)<a class="headerlink" href="#id524" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fix generated test.py module to use project name rather than package
name.</li>
</ul>
</div>
<div class="section" id="id525">
<h2>0.3.2 (2008-08-23)<a class="headerlink" href="#id525" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">sampleapp</span></tt> sample application from bfg package itself.</li>
<li>Remove dependency on FormEncode (only needed by sampleapp).</li>
<li>Fix paster template generation so that case-sensitivity is preserved for
project vs. package name.</li>
<li>Depend on <tt class="docutils literal"><span class="pre">z3c.pt</span></tt> version 1.0a1 (which requires the <tt class="docutils literal"><span class="pre">[lxml]</span></tt> extra
currently).</li>
<li>Read and write a pickled ZCML actions list, stored as
<tt class="docutils literal"><span class="pre">configure.zcml.cache</span></tt> next to the applications's &quot;normal&quot;
configuration file.  A given bfg app will usually start faster if it's
able to read the pickle data.  It fails gracefully to reading the real
ZCML file if it cannot read the pickle.</li>
</ul>
</div>
<div class="section" id="id526">
<h2>0.3.1 (2008-08-20)<a class="headerlink" href="#id526" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Generated application differences: <tt class="docutils literal"><span class="pre">make_app</span></tt> entry point renamed to
<tt class="docutils literal"><span class="pre">app</span></tt> in order to have a different name than the bfg function of the
same name, to prevent confusion.</li>
<li>Add &quot;options&quot; processing to bfg's <tt class="docutils literal"><span class="pre">make_app</span></tt> to support runtime
options.  A new API function named <tt class="docutils literal"><span class="pre">get_options</span></tt> was added to the
registry module.  This function is typically used in an application's
<tt class="docutils literal"><span class="pre">app</span></tt> entry point.  The Paste config file section for the app can now
supply the <tt class="docutils literal"><span class="pre">reload_templates</span></tt> option, which, if true, will prevent the
need to restart the appserver in order for <tt class="docutils literal"><span class="pre">z3c.pt</span></tt> or XSLT template
changes to be detected.</li>
<li>Use only the module name in generated project's &quot;test_suite&quot; (run all
tests found in the package).</li>
<li>Default port for generated apps changed from 5432 to 6543 (Postgres
default port is 6543).</li>
</ul>
</div>
<div class="section" id="id527">
<h2>0.3.0 (2008-08-16)<a class="headerlink" href="#id527" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">get_template</span></tt> API to template module.</li>
</ul>
</div>
<div class="section" id="id528">
<h2>0.2.9 (2008-08-11)<a class="headerlink" href="#id528" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>0.2.8 was &quot;brown bag&quot; release.  It didn't work at all.  Symptom:
ComponentLookupError when trying to render a page.</li>
</ul>
</div>
<div class="section" id="id529">
<h2>0.2.8 (2008-08-11)<a class="headerlink" href="#id529" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">find_model</span></tt> and <tt class="docutils literal"><span class="pre">find_root</span></tt> traversal APIs.  In the process,
make ITraverser a uni-adapter (on context) rather than a multiadapter (on
context and request).</li>
</ul>
</div>
<div class="section" id="id530">
<h2>0.2.7 (2008-08-05)<a class="headerlink" href="#id530" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">request_type</span></tt> attribute to the available attributes of a
<tt class="docutils literal"><span class="pre">bfg:view</span></tt> configure.zcml element.  This attribute will have a value
which is a dotted Python path, pointing at an interface.  If the request
object implements this interface when the view lookup is performed, the
appropriate view will be called.  This is meant to allow for simple
&quot;skinning&quot; of sites based on request type.  An event subscriber should
attach the interface to the request on ingress to support skins.</li>
<li>Remove &quot;template only&quot; views.  These were just confusing and were never
documented.</li>
<li>Small url dispatch overhaul: the <tt class="docutils literal"><span class="pre">connect</span></tt> method of the
<tt class="docutils literal"><span class="pre">urldispatch.RoutesMapper</span></tt> object now accepts a keyword parameter named
<tt class="docutils literal"><span class="pre">context_factory</span></tt>.  If this parameter is supplied, it must be a
callable which returns an instance.  This instance is used as the context
for the request when a route is matched.</li>
<li>The registration of a RoutesModelTraverser no longer needs to be
performed by the application; it's in the bfg ZCML now.</li>
</ul>
</div>
<div class="section" id="id531">
<h2>0.2.6 (2008-07-31)<a class="headerlink" href="#id531" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add event sends for INewRequest and INewResponse.  See the events.rst
chapter in the documentation's <tt class="docutils literal"><span class="pre">api</span></tt> directory.</li>
</ul>
</div>
<div class="section" id="id532">
<h2>0.2.5 (2008-07-28)<a class="headerlink" href="#id532" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add <tt class="docutils literal"><span class="pre">model_url</span></tt> API.</li>
</ul>
</div>
<div class="section" id="id533">
<h2>0.2.4 (2008-07-27)<a class="headerlink" href="#id533" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added url-based dispatch.</li>
</ul>
</div>
<div class="section" id="id534">
<h2>0.2.3 (2008-07-20)<a class="headerlink" href="#id534" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add API functions for authenticated_userid and effective_principals.</li>
</ul>
</div>
<div class="section" id="id535">
<h2>0.2.2 (2008-07-20)<a class="headerlink" href="#id535" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add authenticated_userid and effective_principals API to security
policy.</li>
</ul>
</div>
<div class="section" id="id536">
<h2>0.2.1 (2008-07-20)<a class="headerlink" href="#id536" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add find_interface API.</li>
</ul>
</div>
<div class="section" id="id537">
<h2>0.2 (2008-07-19)<a class="headerlink" href="#id537" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add wsgiapp decorator.</li>
<li>The concept of &quot;view factories&quot; was removed in favor of always calling a
view, which is a callable that returns a response directly (as opposed to
returning a view).  As a result, the <tt class="docutils literal"><span class="pre">factory</span></tt> attribute in the
bfg:view ZCML statement has been renamed to <tt class="docutils literal"><span class="pre">view</span></tt>.  Various interface
names were changed also.</li>
<li><tt class="docutils literal"><span class="pre">render_template</span></tt> and <tt class="docutils literal"><span class="pre">render_transform</span></tt> no longer return a Response
object.  Instead, these return strings.  The old behavior can be obtained
by using <tt class="docutils literal"><span class="pre">render_template_to_response</span></tt> and
<tt class="docutils literal"><span class="pre">render_transform_to_response</span></tt>.</li>
<li>Added 'repoze.bfg.push:pushpage' decorator, which creates BFG views from
callables which take (context, request) and return a mapping of top-level
names.</li>
<li>Added ACL-based security.</li>
<li>Support for XSLT templates via a render_transform method</li>
</ul>
</div>
<div class="section" id="id538">
<h2>0.1 (2008-07-08)<a class="headerlink" href="#id538" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Initial release.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><span>Pyramid</span> Change History</a><ul>
<li><a class="reference internal" href="#next-release">Next release</a></li>
<li><a class="reference internal" href="#id1">1.5.1 (2014-05-31)</a></li>
<li><a class="reference internal" href="#id2">1.5 (2014-04-08)</a></li>
<li><a class="reference internal" href="#b1-2014-02-08">1.5b1 (2014-02-08)</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2014-01-28">1.5a4 (2014-01-28)</a><ul>
<li><a class="reference internal" href="#id3">Features</a></li>
<li><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2013-12-10">1.5a3 (2013-12-10)</a><ul>
<li><a class="reference internal" href="#id4">Features</a></li>
<li><a class="reference internal" href="#id5">Bug Fixes</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#backwards-incompatibilities">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2013-09-22">1.5a2 (2013-09-22)</a><ul>
<li><a class="reference internal" href="#id6">Features</a></li>
<li><a class="reference internal" href="#id7">Bug Fixes</a></li>
<li><a class="reference internal" href="#id8">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id9">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2013-08-30">1.5a1 (2013-08-30)</a><ul>
<li><a class="reference internal" href="#id10">Features</a></li>
<li><a class="reference internal" href="#id11">Bug Fixes</a></li>
<li><a class="reference internal" href="#id12">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13">1.4 (2012-12-18)</a><ul>
<li><a class="reference internal" href="#docs">Docs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2012-12-10">1.4b3 (2012-12-10)</a></li>
<li><a class="reference internal" href="#b2-2012-12-10">1.4b2 (2012-12-10)</a><ul>
<li><a class="reference internal" href="#id14">Docs</a></li>
<li><a class="reference internal" href="#id15">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2012-11-21">1.4b1 (2012-11-21)</a><ul>
<li><a class="reference internal" href="#id16">Features</a></li>
<li><a class="reference internal" href="#id17">Bug Fixes</a></li>
<li><a class="reference internal" href="#id18">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2012-11-14">1.4a4 (2012-11-14)</a><ul>
<li><a class="reference internal" href="#id19">Features</a></li>
<li><a class="reference internal" href="#id20">Bug Fixes</a></li>
<li><a class="reference internal" href="#id21">Deprecations</a></li>
<li><a class="reference internal" href="#id22">Documentation</a></li>
<li><a class="reference internal" href="#internals">Internals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2012-10-26">1.4a3 (2012-10-26)</a><ul>
<li><a class="reference internal" href="#id23">Bug Fixes</a></li>
<li><a class="reference internal" href="#id24">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2012-09-27">1.4a2 (2012-09-27)</a><ul>
<li><a class="reference internal" href="#id25">Bug Fixes</a></li>
<li><a class="reference internal" href="#id26">Features</a></li>
<li><a class="reference internal" href="#id27">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2012-09-16">1.4a1 (2012-09-16)</a><ul>
<li><a class="reference internal" href="#id28">Bug Fixes</a></li>
<li><a class="reference internal" href="#id29">Features</a></li>
<li><a class="reference internal" href="#id30">Deprecations</a></li>
<li><a class="reference internal" href="#id31">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id32">Documentation</a></li>
<li><a class="reference internal" href="#id33">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id34">1.3 (2012-03-21)</a><ul>
<li><a class="reference internal" href="#id35">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2012-03-17">1.3b3 (2012-03-17)</a><ul>
<li><a class="reference internal" href="#id36">Bug Fixes</a></li>
<li><a class="reference internal" href="#scaffolds">Scaffolds</a></li>
<li><a class="reference internal" href="#id37">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2012-03-02">1.3b2 (2012-03-02)</a><ul>
<li><a class="reference internal" href="#id38">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2012-02-26">1.3b1 (2012-02-26)</a><ul>
<li><a class="reference internal" href="#id39">Bug Fixes</a></li>
<li><a class="reference internal" href="#id40">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2012-02-22">1.3a9 (2012-02-22)</a><ul>
<li><a class="reference internal" href="#id41">Features</a></li>
<li><a class="reference internal" href="#id42">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id43">Deprecations</a></li>
<li><a class="reference internal" href="#id44">Bug Fixes</a></li>
<li><a class="reference internal" href="#id45">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2012-02-19">1.3a8 (2012-02-19)</a><ul>
<li><a class="reference internal" href="#id46">Features</a></li>
<li><a class="reference internal" href="#id47">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id48">Documentation</a></li>
<li><a class="reference internal" href="#scaffolding">Scaffolding</a></li>
<li><a class="reference internal" href="#id49">Dependencies</a></li>
<li><a class="reference internal" href="#internal">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2012-02-07">1.3a7 (2012-02-07)</a><ul>
<li><a class="reference internal" href="#id50">Features</a></li>
<li><a class="reference internal" href="#id51">Bug Fixes</a></li>
<li><a class="reference internal" href="#id52">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id53">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2012-01-20">1.3a6 (2012-01-20)</a><ul>
<li><a class="reference internal" href="#id54">Features</a></li>
<li><a class="reference internal" href="#id55">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2012-01-09">1.3a5 (2012-01-09)</a><ul>
<li><a class="reference internal" href="#id56">Bug Fixes</a></li>
<li><a class="reference internal" href="#id57">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2012-01-05">1.3a4 (2012-01-05)</a><ul>
<li><a class="reference internal" href="#id58">Features</a></li>
<li><a class="reference internal" href="#id59">Bug Fixes</a></li>
<li><a class="reference internal" href="#id60">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2011-12-21">1.3a3 (2011-12-21)</a><ul>
<li><a class="reference internal" href="#id61">Features</a></li>
<li><a class="reference internal" href="#id62">Bug Fixes</a></li>
<li><a class="reference internal" href="#id63">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2011-12-14">1.3a2 (2011-12-14)</a><ul>
<li><a class="reference internal" href="#id64">Features</a></li>
<li><a class="reference internal" href="#id65">Documentation</a></li>
<li><a class="reference internal" href="#id66">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2011-12-09">1.3a1 (2011-12-09)</a><ul>
<li><a class="reference internal" href="#id67">Features</a></li>
<li><a class="reference internal" href="#id68">Bug Fixes</a></li>
<li><a class="reference internal" href="#id69">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id70">Dependencies</a></li>
<li><a class="reference internal" href="#id71">Documentation</a></li>
<li><a class="reference internal" href="#id72">Scaffolds</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id73">1.2 (2011-09-12)</a><ul>
<li><a class="reference internal" href="#id74">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2011-09-11">1.2b3 (2011-09-11)</a><ul>
<li><a class="reference internal" href="#id75">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2011-09-08">1.2b2 (2011-09-08)</a><ul>
<li><a class="reference internal" href="#id76">Bug Fixes</a></li>
<li><a class="reference internal" href="#id77">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2011-09-08">1.2b1 (2011-09-08)</a><ul>
<li><a class="reference internal" href="#id78">Bug Fixes</a></li>
<li><a class="reference internal" href="#id79">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2011-09-06">1.2a6 (2011-09-06)</a><ul>
<li><a class="reference internal" href="#id80">Bug Fixes</a></li>
<li><a class="reference internal" href="#id81">Internal</a></li>
<li><a class="reference internal" href="#behavior-differences">Behavior Differences</a></li>
<li><a class="reference internal" href="#id82">Scaffolds</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2011-09-04">1.2a5 (2011-09-04)</a><ul>
<li><a class="reference internal" href="#id83">Bug Fixes</a></li>
<li><a class="reference internal" href="#id84">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2011-09-02">1.2a4 (2011-09-02)</a><ul>
<li><a class="reference internal" href="#id85">Features</a></li>
<li><a class="reference internal" href="#id86">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2011-08-29">1.2a3 (2011-08-29)</a><ul>
<li><a class="reference internal" href="#id87">Bug Fixes</a></li>
<li><a class="reference internal" href="#id88">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2011-08-27">1.2a2 (2011-08-27)</a><ul>
<li><a class="reference internal" href="#id89">Bug Fixes</a></li>
<li><a class="reference internal" href="#id90">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2011-08-24">1.2a1 (2011-08-24)</a><ul>
<li><a class="reference internal" href="#id91">Features</a></li>
<li><a class="reference internal" href="#id92">Internal</a></li>
<li><a class="reference internal" href="#id93">Deprecations</a></li>
<li><a class="reference internal" href="#id94">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id95">Documentation</a></li>
<li><a class="reference internal" href="#dependency-changes">Dependency Changes</a></li>
<li><a class="reference internal" href="#id96">Scaffolds</a></li>
<li><a class="reference internal" href="#id97">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id98">1.1 (2011-07-22)</a><ul>
<li><a class="reference internal" href="#id99">Features</a></li>
<li><a class="reference internal" href="#id100">Internals</a></li>
<li><a class="reference internal" href="#id101">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b4-2011-07-18">1.1b4 (2011-07-18)</a><ul>
<li><a class="reference internal" href="#id102">Documentation</a></li>
<li><a class="reference internal" href="#id103">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id104">Features</a></li>
<li><a class="reference internal" href="#id105">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2011-07-15">1.1b3 (2011-07-15)</a><ul>
<li><a class="reference internal" href="#id106">Features</a></li>
<li><a class="reference internal" href="#id107">Deprecations</a></li>
<li><a class="reference internal" href="#id108">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2011-07-13">1.1b2 (2011-07-13)</a><ul>
<li><a class="reference internal" href="#id109">Features</a></li>
<li><a class="reference internal" href="#behavior-changes">Behavior Changes</a></li>
<li><a class="reference internal" href="#id110">Bug Fixes</a></li>
<li><a class="reference internal" href="#id111">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2011-07-10">1.1b1 (2011-07-10)</a><ul>
<li><a class="reference internal" href="#id112">Features</a></li>
<li><a class="reference internal" href="#id113">Bug Fixes</a></li>
<li><a class="reference internal" href="#id114">Documentation</a></li>
<li><a class="reference internal" href="#id115">Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2011-07-01">1.1a4 (2011-07-01)</a><ul>
<li><a class="reference internal" href="#id116">Bug Fixes</a></li>
<li><a class="reference internal" href="#id117">Features</a></li>
<li><a class="reference internal" href="#id118">Deprecations</a></li>
<li><a class="reference internal" href="#id119">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2011-06-26">1.1a3 (2011-06-26)</a><ul>
<li><a class="reference internal" href="#id120">Features</a></li>
<li><a class="reference internal" href="#id121">Bug fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2011-06-22">1.1a2 (2011-06-22)</a><ul>
<li><a class="reference internal" href="#id122">Bug Fixes</a></li>
<li><a class="reference internal" href="#id123">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2011-06-20">1.1a1 (2011-06-20)</a><ul>
<li><a class="reference internal" href="#id124">Documentation</a></li>
<li><a class="reference internal" href="#id125">Features</a></li>
<li><a class="reference internal" href="#id126">Bug Fixes</a></li>
<li><a class="reference internal" href="#id127">Deprecations</a></li>
<li><a class="reference internal" href="#id128">Behavior Changes</a></li>
<li><a class="reference internal" href="#id129">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id130">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id131">1.0 (2011-01-30)</a><ul>
<li><a class="reference internal" href="#id132">Documentation</a></li>
<li><a class="reference internal" href="#id133">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2011-01-28">1.0b3 (2011-01-28)</a><ul>
<li><a class="reference internal" href="#id134">Bug Fixes</a></li>
<li><a class="reference internal" href="#id135">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2011-01-24">1.0b2 (2011-01-24)</a><ul>
<li><a class="reference internal" href="#id136">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2011-01-21">1.0b1 (2011-01-21)</a><ul>
<li><a class="reference internal" href="#id137">Features</a></li>
<li><a class="reference internal" href="#id138">Bug Fixes</a></li>
<li><a class="reference internal" href="#id139">Documentation</a></li>
<li><a class="reference internal" href="#id140">Deprecations</a></li>
<li><a class="reference internal" href="#id141">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#paster-templates">Paster Templates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a10-2011-01-18">1.0a10 (2011-01-18)</a><ul>
<li><a class="reference internal" href="#id142">Bug Fixes</a></li>
<li><a class="reference internal" href="#id143">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id144">Features</a></li>
<li><a class="reference internal" href="#id145">Paster Templates</a></li>
<li><a class="reference internal" href="#id146">Documentation</a></li>
<li><a class="reference internal" href="#id147">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2011-01-08">1.0a9 (2011-01-08)</a><ul>
<li><a class="reference internal" href="#id148">Bug Fixes</a></li>
<li><a class="reference internal" href="#id149">Features</a></li>
<li><a class="reference internal" href="#id150">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id151">Documentation</a></li>
<li><a class="reference internal" href="#id152">Internals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2010-12-27">1.0a8 (2010-12-27)</a><ul>
<li><a class="reference internal" href="#id153">Bug Fixes</a></li>
<li><a class="reference internal" href="#id154">Features</a></li>
<li><a class="reference internal" href="#id155">Paster Templates</a></li>
<li><a class="reference internal" href="#id156">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2010-12-20">1.0a7 (2010-12-20)</a><ul>
<li><a class="reference internal" href="#terminology-changes">Terminology Changes</a></li>
<li><a class="reference internal" href="#id157">Bug Fixes</a></li>
<li><a class="reference internal" href="#id158">Features</a></li>
<li><a class="reference internal" href="#environment">Environment</a></li>
<li><a class="reference internal" href="#id159">Documentation</a></li>
<li><a class="reference internal" href="#id160">Paster Templates</a></li>
<li><a class="reference internal" href="#id161">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2010-12-15">1.0a6 (2010-12-15)</a><ul>
<li><a class="reference internal" href="#id162">Bug Fixes</a></li>
<li><a class="reference internal" href="#id163">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2010-12-14">1.0a5 (2010-12-14)</a><ul>
<li><a class="reference internal" href="#id164">Features</a></li>
<li><a class="reference internal" href="#id165">Dependencies</a></li>
<li><a class="reference internal" href="#id166">Bug Fixes</a></li>
<li><a class="reference internal" href="#id167">Documentation</a></li>
<li><a class="reference internal" href="#id168">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2010-11-21">1.0a4 (2010-11-21)</a><ul>
<li><a class="reference internal" href="#id169">Features</a></li>
<li><a class="reference internal" href="#id170">Documentation</a></li>
<li><a class="reference internal" href="#id171">Bug Fixes</a></li>
<li><a class="reference internal" href="#id172">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id173">Deprecations</a></li>
<li><a class="reference internal" href="#id174">Documentation</a></li>
<li><a class="reference internal" href="#id175">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2010-11-16">1.0a3 (2010-11-16)</a><ul>
<li><a class="reference internal" href="#id176">Features</a></li>
<li><a class="reference internal" href="#id177">Bug Fixes</a></li>
<li><a class="reference internal" href="#id178">Documentation</a></li>
<li><a class="reference internal" href="#id179">Deprecations</a></li>
<li><a class="reference internal" href="#id180">Behavior Differences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2010-11-09">1.0a2 (2010-11-09)</a><ul>
<li><a class="reference internal" href="#id181">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2010-11-05">1.0a1 (2010-11-05)</a><ul>
<li><a class="reference internal" href="#features-delta-from-bfg-1-3">Features (delta from BFG 1.3)</a></li>
<li><a class="reference internal" href="#documentation-delta-from-bfg-1-3">Documentation (delta from BFG 1.3)</a></li>
<li><a class="reference internal" href="#backwards-incompatibilities-with-bfg-1-3">Backwards Incompatibilities (with BFG 1.3)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#repoze-bfg-change-history-previous-name-for-pyramid"><tt class="docutils literal"><span class="pre">repoze.bfg</span></tt> Change History (previous name for Pyramid)</a><ul>
<li><a class="reference internal" href="#b1-2010-10-25">1.3b1 (2010-10-25)</a><ul>
<li><a class="reference internal" href="#id182">Features</a></li>
<li><a class="reference internal" href="#id183">Bug Fixes</a></li>
<li><a class="reference internal" href="#id184">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a15-2010-09-30">1.3a15 (2010-09-30)</a><ul>
<li><a class="reference internal" href="#id185">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a14-2010-09-14">1.3a14 (2010-09-14)</a><ul>
<li><a class="reference internal" href="#id186">Bug Fixes</a></li>
<li><a class="reference internal" href="#id187">Features</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#id188">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#errata">Errata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a13-2010-09-14">1.3a13 (2010-09-14)</a><ul>
<li><a class="reference internal" href="#id189">Bug Fixes</a></li>
<li><a class="reference internal" href="#id190">Features</a></li>
<li><a class="reference internal" href="#id191">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id192">Deprecations</a></li>
<li><a class="reference internal" href="#id193">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a12-2010-09-08">1.3a12 (2010-09-08)</a><ul>
<li><a class="reference internal" href="#id194">Bug Fixes</a></li>
<li><a class="reference internal" href="#id195">Features</a></li>
<li><a class="reference internal" href="#id196">Documentation</a></li>
<li><a class="reference internal" href="#id197">Paster Templates</a></li>
<li><a class="reference internal" href="#id198">Dependencies</a></li>
<li><a class="reference internal" href="#id199">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a11-2010-09-05">1.3a11 (2010-09-05)</a><ul>
<li><a class="reference internal" href="#id200">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a10-2010-09-05">1.3a10 (2010-09-05)</a><ul>
<li><a class="reference internal" href="#id201">Features</a></li>
<li><a class="reference internal" href="#id202">Bug Fixes</a></li>
<li><a class="reference internal" href="#id203">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id204">Documentation</a></li>
<li><a class="reference internal" href="#id205">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2010-08-22">1.3a9 (2010-08-22)</a><ul>
<li><a class="reference internal" href="#id206">Features</a></li>
<li><a class="reference internal" href="#id207">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id208">Documentation</a></li>
<li><a class="reference internal" href="#id209">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2010-08-08">1.3a8 (2010-08-08)</a><ul>
<li><a class="reference internal" href="#id210">Features</a></li>
<li><a class="reference internal" href="#id211">Documentation</a></li>
<li><a class="reference internal" href="#id212">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2010-08-01">1.3a7 (2010-08-01)</a><ul>
<li><a class="reference internal" href="#id213">Features</a></li>
<li><a class="reference internal" href="#id214">Bug Fixes</a></li>
<li><a class="reference internal" href="#id215">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id216">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2010-07-25">1.3a6 (2010-07-25)</a><ul>
<li><a class="reference internal" href="#id217">Features</a></li>
<li><a class="reference internal" href="#id218">Documentation</a></li>
<li><a class="reference internal" href="#id219">Bug Fixes</a></li>
<li><a class="reference internal" href="#id220">Deprecations</a></li>
<li><a class="reference internal" href="#id221">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2010-07-14">1.3a5 (2010-07-14)</a><ul>
<li><a class="reference internal" href="#id222">Features</a></li>
<li><a class="reference internal" href="#id223">Bug Fixes</a></li>
<li><a class="reference internal" href="#id224">Documentation</a></li>
<li><a class="reference internal" href="#id225">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2010-07-03">1.3a4 (2010-07-03)</a><ul>
<li><a class="reference internal" href="#id226">Features</a></li>
<li><a class="reference internal" href="#id227">Documentation</a></li>
<li><a class="reference internal" href="#id228">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2010-05-01">1.3a3 (2010-05-01)</a><ul>
<li><a class="reference internal" href="#id229">Paster Templates</a></li>
<li><a class="reference internal" href="#id230">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2010-04-28">1.3a2 (2010-04-28)</a><ul>
<li><a class="reference internal" href="#id231">Features</a></li>
<li><a class="reference internal" href="#id232">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id233">Behavior Changes</a></li>
<li><a class="reference internal" href="#id234">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2010-04-26">1.3a1 (2010-04-26)</a><ul>
<li><a class="reference internal" href="#id235">Features</a></li>
<li><a class="reference internal" href="#zcml">ZCML</a></li>
<li><a class="reference internal" href="#id236">Deprecations</a></li>
<li><a class="reference internal" href="#id237">Dependencies</a></li>
<li><a class="reference internal" href="#id238">Internal</a></li>
<li><a class="reference internal" href="#id239">Documentation</a></li>
<li><a class="reference internal" href="#id240">Paster Templates</a></li>
<li><a class="reference internal" href="#licensing">Licensing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id241">1.2 (2010-02-10)</a></li>
<li><a class="reference internal" href="#b6-2010-02-06">1.2b6 (2010-02-06)</a><ul>
<li><a class="reference internal" href="#id242">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id243">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b5-2010-02-04">1.2b5 (2010-02-04)</a><ul>
<li><a class="reference internal" href="#id244">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b4-2010-02-03">1.2b4 (2010-02-03)</a><ul>
<li><a class="reference internal" href="#id245">Documentation</a></li>
<li><a class="reference internal" href="#id246">Bug Fixes</a></li>
<li><a class="reference internal" href="#id247">Features</a></li>
<li><a class="reference internal" href="#id248">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id249">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2010-01-24">1.2b3 (2010-01-24)</a><ul>
<li><a class="reference internal" href="#id250">Bug Fixes</a></li>
<li><a class="reference internal" href="#id251">Features</a></li>
<li><a class="reference internal" href="#id252">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2010-01-21">1.2b2 (2010-01-21)</a><ul>
<li><a class="reference internal" href="#id253">Bug Fixes</a></li>
<li><a class="reference internal" href="#id254">Documentation</a></li>
<li><a class="reference internal" href="#id255">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2010-01-18">1.2b1 (2010-01-18)</a><ul>
<li><a class="reference internal" href="#id256">Bug Fixes</a></li>
<li><a class="reference internal" href="#id257">Features</a></li>
<li><a class="reference internal" href="#id258">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a11-2010-01-05">1.2a11 (2010-01-05)</a><ul>
<li><a class="reference internal" href="#id259">Bug Fixes</a></li>
<li><a class="reference internal" href="#id260">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a10-2010-01-04">1.2a10 (2010-01-04)</a><ul>
<li><a class="reference internal" href="#id261">Features</a></li>
<li><a class="reference internal" href="#documentation-and-paster-templates">Documentation and Paster Templates</a></li>
<li><a class="reference internal" href="#documentation-licensing">Documentation Licensing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2009-12-27">1.2a9 (2009-12-27)</a><ul>
<li><a class="reference internal" href="#id262">Documentation Licensing</a></li>
<li><a class="reference internal" href="#id263">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2009-12-24">1.2a8 (2009-12-24)</a><ul>
<li><a class="reference internal" href="#id264">Features</a></li>
<li><a class="reference internal" href="#id265">Bug Fixes</a></li>
<li><a class="reference internal" href="#id266">Documentation</a></li>
<li><a class="reference internal" href="#id267">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-12-20">1.2a7 (2009-12-20)</a><ul>
<li><a class="reference internal" href="#id268">Features</a></li>
<li><a class="reference internal" href="#id269">Internal</a></li>
<li><a class="reference internal" href="#documenation">Documenation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-12-18">1.2a6 (2009-12-18)</a><ul>
<li><a class="reference internal" href="#id270">Features</a></li>
<li><a class="reference internal" href="#id271">Documentation</a></li>
<li><a class="reference internal" href="#id272">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-12-10">1.2a5 (2009-12-10)</a><ul>
<li><a class="reference internal" href="#id273">Features</a></li>
<li><a class="reference internal" href="#id274">Internals</a></li>
<li><a class="reference internal" href="#id275">Documentation</a></li>
<li><a class="reference internal" href="#id276">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-12-07">1.2a4 (2009-12-07)</a><ul>
<li><a class="reference internal" href="#id277">Features</a></li>
<li><a class="reference internal" href="#id278">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-12-02">1.2a3 (2009-12-02)</a><ul>
<li><a class="reference internal" href="#id279">Bug Fixes</a></li>
<li><a class="reference internal" href="#id280">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-11-29">1.2a2 (2009-11-29)</a><ul>
<li><a class="reference internal" href="#id281">Bug Fixes</a></li>
<li><a class="reference internal" href="#id282">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-11-28">1.2a1 (2009-11-28)</a><ul>
<li><a class="reference internal" href="#id283">Features</a></li>
<li><a class="reference internal" href="#id284">Documentation</a></li>
<li><a class="reference internal" href="#id285">Bug Fixes</a></li>
<li><a class="reference internal" href="#id286">Internals</a></li>
<li><a class="reference internal" href="#backwards-incompatibilites">Backwards Incompatibilites</a></li>
<li><a class="reference internal" href="#id287">Deprecations</a></li>
<li><a class="reference internal" href="#id288">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id289">1.1.1 (2009-11-21)</a><ul>
<li><a class="reference internal" href="#id290">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id291">1.1 (2009-11-15)</a><ul>
<li><a class="reference internal" href="#id292">Internals</a></li>
<li><a class="reference internal" href="#id293">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b4-2009-11-12">1.1b4 (2009-11-12)</a><ul>
<li><a class="reference internal" href="#id294">Bug Fixes</a></li>
<li><a class="reference internal" href="#id295">Documentation</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#id296">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2009-11-06">1.1b3 (2009-11-06)</a><ul>
<li><a class="reference internal" href="#id297">Features</a></li>
<li><a class="reference internal" href="#id298">Bug Fixes</a></li>
<li><a class="reference internal" href="#id299">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2009-11-02">1.1b2 (2009-11-02)</a><ul>
<li><a class="reference internal" href="#id300">Bug Fixes</a></li>
<li><a class="reference internal" href="#id301">Documentation</a></li>
<li><a class="reference internal" href="#id302">Features</a></li>
<li><a class="reference internal" href="#id303">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2009-11-01">1.1b1 (2009-11-01)</a><ul>
<li><a class="reference internal" href="#id304">Bug Fixes</a></li>
<li><a class="reference internal" href="#id305">Documentation</a></li>
<li><a class="reference internal" href="#id306">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2009-10-31">1.1a9 (2009-10-31)</a><ul>
<li><a class="reference internal" href="#id307">Bug Fixes</a></li>
<li><a class="reference internal" href="#id308">Features</a></li>
<li><a class="reference internal" href="#id309">Documentation</a></li>
<li><a class="reference internal" href="#id310">Internal</a></li>
<li><a class="reference internal" href="#id311">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2009-10-27">1.1a8 (2009-10-27)</a><ul>
<li><a class="reference internal" href="#id312">Features</a></li>
<li><a class="reference internal" href="#id313">Bug Fixes</a></li>
<li><a class="reference internal" href="#id314">Documentation</a></li>
<li><a class="reference internal" href="#id315">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id316">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-10-18">1.1a7 (2009-10-18)</a><ul>
<li><a class="reference internal" href="#id317">Features</a></li>
<li><a class="reference internal" href="#id318">Documentation</a></li>
<li><a class="reference internal" href="#id319">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-10-15">1.1a6 (2009-10-15)</a><ul>
<li><a class="reference internal" href="#id320">Features</a></li>
<li><a class="reference internal" href="#id321">Documentation</a></li>
<li><a class="reference internal" href="#id322">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id323">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-10-10">1.1a5 (2009-10-10)</a><ul>
<li><a class="reference internal" href="#id324">Documentation</a></li>
<li><a class="reference internal" href="#id325">Features</a></li>
<li><a class="reference internal" href="#id326">Internal</a></li>
<li><a class="reference internal" href="#id327">Deprecations</a></li>
<li><a class="reference internal" href="#id328">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-09-23">1.1a4 (2009-09-23)</a><ul>
<li><a class="reference internal" href="#id329">Bug Fixes</a></li>
<li><a class="reference internal" href="#id330">Documentation</a></li>
<li><a class="reference internal" href="#id331">Features</a></li>
<li><a class="reference internal" href="#id332">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id333">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-09-16">1.1a3 (2009-09-16)</a><ul>
<li><a class="reference internal" href="#id334">Documentation</a></li>
<li><a class="reference internal" href="#id335">Features</a></li>
<li><a class="reference internal" href="#id336">Dependencies</a></li>
<li><a class="reference internal" href="#id337">Deprecations</a></li>
<li><a class="reference internal" href="#id338">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-09-14">1.1a2 (2009-09-14)</a><ul>
<li><a class="reference internal" href="#id339">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-09-06">1.1a1 (2009-09-06)</a><ul>
<li><a class="reference internal" href="#id340">Bug Fixes</a></li>
<li><a class="reference internal" href="#id341">Features</a></li>
<li><a class="reference internal" href="#id342">Internal</a></li>
<li><a class="reference internal" href="#id343">Documentation</a></li>
<li><a class="reference internal" href="#id344">Deprecations</a></li>
<li><a class="reference internal" href="#id345">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id346">1.0.1 (2009-07-22)</a></li>
<li><a class="reference internal" href="#id347">1.0 (2009-07-05)</a></li>
<li><a class="reference internal" href="#b2-2009-07-03">1.0b2 (2009-07-03)</a></li>
<li><a class="reference internal" href="#b1-2009-07-02">1.0b1 (2009-07-02)</a><ul>
<li><a class="reference internal" href="#id348">Features</a></li>
<li><a class="reference internal" href="#id349">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2009-07-01">1.0a9 (2009-07-01)</a><ul>
<li><a class="reference internal" href="#id350">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2009-07-01">1.0a8 (2009-07-01)</a><ul>
<li><a class="reference internal" href="#id351">Deprecations</a></li>
<li><a class="reference internal" href="#id352">Features</a></li>
<li><a class="reference internal" href="#id353">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-06-30">1.0a7 (2009-06-30)</a><ul>
<li><a class="reference internal" href="#id354">Features</a></li>
<li><a class="reference internal" href="#id355">Documentation</a></li>
<li><a class="reference internal" href="#id356">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-06-29">1.0a6 (2009-06-29)</a><ul>
<li><a class="reference internal" href="#id357">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-06-28">1.0a5 (2009-06-28)</a><ul>
<li><a class="reference internal" href="#id358">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-06-25">1.0a4 (2009-06-25)</a><ul>
<li><a class="reference internal" href="#id359">Features</a></li>
<li><a class="reference internal" href="#id360">Documentation</a></li>
<li><a class="reference internal" href="#id361">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-06-24">1.0a3 (2009-06-24)</a><ul>
<li><a class="reference internal" href="#implementation-changes">Implementation Changes</a></li>
<li><a class="reference internal" href="#id362">Bug Fixes</a></li>
<li><a class="reference internal" href="#id363">Documentation</a></li>
<li><a class="reference internal" href="#id364">Features</a></li>
<li><a class="reference internal" href="#id365">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-06-23">1.0a2 (2009-06-23)</a><ul>
<li><a class="reference internal" href="#id366">Bug Fixes</a></li>
<li><a class="reference internal" href="#id367">Features</a></li>
<li><a class="reference internal" href="#id368">Documentation</a></li>
<li><a class="reference internal" href="#id369">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-06-22">1.0a1 (2009-06-22)</a><ul>
<li><a class="reference internal" href="#id370">Features</a></li>
<li><a class="reference internal" href="#id371">Deprecations</a></li>
<li><a class="reference internal" href="#removals">Removals</a></li>
<li><a class="reference internal" href="#id372">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id373">Bug Fixes</a></li>
<li><a class="reference internal" href="#id374">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id375">0.9.1 (2009-06-02)</a><ul>
<li><a class="reference internal" href="#id376">Features</a></li>
<li><a class="reference internal" href="#id377">Bug Fixes</a></li>
<li><a class="reference internal" href="#id378">Documentation</a></li>
<li><a class="reference internal" href="#api-removals">API Removals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id379">0.9 (2009-06-01)</a><ul>
<li><a class="reference internal" href="#id380">Bug Fixes</a></li>
<li><a class="reference internal" href="#id381">Features</a></li>
<li><a class="reference internal" href="#id382">Removals</a></li>
<li><a class="reference internal" href="#id383">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2009-05-31">0.9a8 (2009-05-31)</a><ul>
<li><a class="reference internal" href="#id384">Features</a></li>
<li><a class="reference internal" href="#id385">Bug Fixes</a></li>
<li><a class="reference internal" href="#id386">Deprecations</a></li>
<li><a class="reference internal" href="#renames">Renames</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-05-30">0.9a7 (2009-05-30)</a><ul>
<li><a class="reference internal" href="#id387">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-05-29">0.9a6 (2009-05-29)</a><ul>
<li><a class="reference internal" href="#id388">Documentation</a></li>
<li><a class="reference internal" href="#id389">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-05-28">0.9a5 (2009-05-28)</a><ul>
<li><a class="reference internal" href="#id390">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-05-27">0.9a4 (2009-05-27)</a><ul>
<li><a class="reference internal" href="#id391">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-05-27">0.9a3 (2009-05-27)</a><ul>
<li><a class="reference internal" href="#id392">Features</a></li>
<li><a class="reference internal" href="#id393">Documentation</a></li>
<li><a class="reference internal" href="#id394">Deprecations</a></li>
<li><a class="reference internal" href="#deprecated-import-alias-removals">Deprecated Import Alias Removals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-05-27">0.9a2 (2009-05-27)</a><ul>
<li><a class="reference internal" href="#id395">Features</a></li>
<li><a class="reference internal" href="#id396">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-5-27">0.9a1 (2009-5-27)</a><ul>
<li><a class="reference internal" href="#id397">Features</a></li>
<li><a class="reference internal" href="#id398">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id399">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id400">0.8.1 (2009-05-21)</a><ul>
<li><a class="reference internal" href="#id401">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id402">0.8 (2009-05-18)</a><ul>
<li><a class="reference internal" href="#id403">Features</a></li>
<li><a class="reference internal" href="#id404">Deprecations</a></li>
<li><a class="reference internal" href="#id405">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-05-16">0.8a7 (2009-05-16)</a><ul>
<li><a class="reference internal" href="#id406">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id407">Documentation</a></li>
<li><a class="reference internal" href="#id408">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-05-11">0.8a6 (2009-05-11)</a><ul>
<li><a class="reference internal" href="#id409">Features</a></li>
<li><a class="reference internal" href="#id410">Documentation</a></li>
<li><a class="reference internal" href="#id411">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-05-08">0.8a5 (2009-05-08)</a><ul>
<li><a class="reference internal" href="#id412">Features</a></li>
<li><a class="reference internal" href="#id413">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-05-04">0.8a4 (2009-05-04)</a><ul>
<li><a class="reference internal" href="#id414">Features</a></li>
<li><a class="reference internal" href="#id415">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-05-03">0.8a3 (2009-05-03)</a><ul>
<li><a class="reference internal" href="#id416">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-05-02">0.8a2 (2009-05-02)</a><ul>
<li><a class="reference internal" href="#id417">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-05-02">0.8a1 (2009-05-02)</a><ul>
<li><a class="reference internal" href="#deprecation-warning-and-import-alias-removals">Deprecation Warning and Import Alias Removals</a></li>
<li><a class="reference internal" href="#id418">Features</a></li>
<li><a class="reference internal" href="#id419">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id420">0.7.1 (2009-05-01)</a><ul>
<li><a class="reference internal" href="#index-related">Index-Related</a></li>
<li><a class="reference internal" href="#id421">Features</a></li>
<li><a class="reference internal" href="#id422">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id423">0.7.0 (2009-04-11)</a><ul>
<li><a class="reference internal" href="#id424">Bug Fixes</a></li>
<li><a class="reference internal" href="#id425">Features</a></li>
<li><a class="reference internal" href="#id426">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id427">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id428">0.6.9 (2009-02-16)</a><ul>
<li><a class="reference internal" href="#id429">Bug Fixes</a></li>
<li><a class="reference internal" href="#id430">Features</a></li>
<li><a class="reference internal" href="#id431">Documentation</a></li>
<li><a class="reference internal" href="#id432">Implementation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id433">0.6.8 (2009-02-05)</a><ul>
<li><a class="reference internal" href="#id434">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#bugfixes">Bugfixes</a></li>
<li><a class="reference internal" href="#id435">Features</a></li>
<li><a class="reference internal" href="#id436">Implementation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id437">0.6.7 (2009-01-27)</a><ul>
<li><a class="reference internal" href="#id438">Features</a></li>
<li><a class="reference internal" href="#id439">Implementation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id440">0.6.6 (2009-01-26)</a><ul>
<li><a class="reference internal" href="#id441">Implementation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id442">0.6.5 (2009-01-26)</a><ul>
<li><a class="reference internal" href="#id443">Features</a></li>
<li><a class="reference internal" href="#id444">Behavior Changes</a></li>
<li><a class="reference internal" href="#id445">Implementation Changes</a></li>
<li><a class="reference internal" href="#id446">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id447">0.6.4 (2009-01-23)</a><ul>
<li><a class="reference internal" href="#id448">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id449">Implementation Changes</a></li>
<li><a class="reference internal" href="#new-modules">New Modules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id450">0.6.3 (2009-01-19)</a><ul>
<li><a class="reference internal" href="#id451">Bug Fixes</a></li>
<li><a class="reference internal" href="#id452">Features</a></li>
<li><a class="reference internal" href="#id453">Deprecations</a></li>
<li><a class="reference internal" href="#id454">Implementation Changes</a></li>
<li><a class="reference internal" href="#documentation-additions">Documentation Additions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id455">0.6.2 (2009-01-13)</a><ul>
<li><a class="reference internal" href="#id456">Features</a></li>
<li><a class="reference internal" href="#id457">Bug Fixes</a></li>
<li><a class="reference internal" href="#id458">Implementation Changes</a></li>
<li><a class="reference internal" href="#id459">New Modules</a></li>
<li><a class="reference internal" href="#id460">Behavior Changes</a></li>
<li><a class="reference internal" href="#id461">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id462">0.6.1 (2009-01-06)</a><ul>
<li><a class="reference internal" href="#id463">New Modules</a></li>
<li><a class="reference internal" href="#id464">Deprecations</a></li>
<li><a class="reference internal" href="#id465">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id466">0.6 (2008-12-26)</a><ul>
<li><a class="reference internal" href="#id467">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#other">Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id468">0.5.6 (2008-12-18)</a></li>
<li><a class="reference internal" href="#id469">0.5.5 (2008-12-17)</a><ul>
<li><a class="reference internal" href="#id470">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id471">0.5.4 (2008-12-13)</a><ul>
<li><a class="reference internal" href="#id472">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id473">Bugfixes</a></li>
<li><a class="reference internal" href="#id474">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id475">0.5.3 (2008-12-07)</a></li>
<li><a class="reference internal" href="#id476">0.5.2 (2008-12-05)</a></li>
<li><a class="reference internal" href="#id477">0.5.1 (2008-11-25)</a></li>
<li><a class="reference internal" href="#id478">0.5.0 (2008-11-18)</a></li>
<li><a class="reference internal" href="#id479">0.4.9 (2008-11-17)</a></li>
<li><a class="reference internal" href="#id480">0.4.8 (2008-11-12)</a><ul>
<li><a class="reference internal" href="#id481">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id482">0.4.7 (2008-11-11)</a><ul>
<li><a class="reference internal" href="#id483">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id484">0.4.6 (2008-11-10)</a><ul>
<li><a class="reference internal" href="#id485">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id486">0.4.5 (2008-11-09)</a><ul>
<li><a class="reference internal" href="#id487">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id488">0.4.4 (2008-11-08)</a><ul>
<li><a class="reference internal" href="#id489">Features</a></li>
<li><a class="reference internal" href="#id490">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id491">0.4.3 (2008-11-02)</a><ul>
<li><a class="reference internal" href="#id492">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id493">0.4.2 (2008-11-02)</a><ul>
<li><a class="reference internal" href="#id494">Features</a></li>
<li><a class="reference internal" href="#id495">Documentation</a></li>
<li><a class="reference internal" href="#id496">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id497">0.4.1 (2008-10-28)</a><ul>
<li><a class="reference internal" href="#id498">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id499">0.4.0 (2008-10-03)</a><ul>
<li><a class="reference internal" href="#id500">Docs</a></li>
<li><a class="reference internal" href="#id501">Features</a></li>
<li><a class="reference internal" href="#id502">Bug Fixes</a></li>
<li><a class="reference internal" href="#id503">Deprecations</a></li>
<li><a class="reference internal" href="#id504">Backwards incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id505">0.3.9 (2008-08-27)</a><ul>
<li><a class="reference internal" href="#id506">Features</a></li>
<li><a class="reference internal" href="#id507">Backwards incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id508">0.3.8 (2008-08-26)</a><ul>
<li><a class="reference internal" href="#id509">Docs</a></li>
<li><a class="reference internal" href="#id510">Bug fixes</a></li>
<li><a class="reference internal" href="#id511">Features</a></li>
<li><a class="reference internal" href="#id512">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id513">0.3.7 (2008-09-09)</a><ul>
<li><a class="reference internal" href="#id514">Features</a></li>
<li><a class="reference internal" href="#id515">Bug fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id516">0.3.6 (2008-09-04)</a><ul>
<li><a class="reference internal" href="#id517">Features</a></li>
<li><a class="reference internal" href="#id518">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id519">0.3.5 (2008-09-01)</a><ul>
<li><a class="reference internal" href="#id520">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id521">0.3.4 (2008-08-28)</a><ul>
<li><a class="reference internal" href="#id522">Backwards incompatibilities</a></li>
<li><a class="reference internal" href="#id523">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id524">0.3.3 (2008-08-23)</a></li>
<li><a class="reference internal" href="#id525">0.3.2 (2008-08-23)</a></li>
<li><a class="reference internal" href="#id526">0.3.1 (2008-08-20)</a></li>
<li><a class="reference internal" href="#id527">0.3.0 (2008-08-16)</a></li>
<li><a class="reference internal" href="#id528">0.2.9 (2008-08-11)</a></li>
<li><a class="reference internal" href="#id529">0.2.8 (2008-08-11)</a></li>
<li><a class="reference internal" href="#id530">0.2.7 (2008-08-05)</a></li>
<li><a class="reference internal" href="#id531">0.2.6 (2008-07-31)</a></li>
<li><a class="reference internal" href="#id532">0.2.5 (2008-07-28)</a></li>
<li><a class="reference internal" href="#id533">0.2.4 (2008-07-27)</a></li>
<li><a class="reference internal" href="#id534">0.2.3 (2008-07-20)</a></li>
<li><a class="reference internal" href="#id535">0.2.2 (2008-07-20)</a></li>
<li><a class="reference internal" href="#id536">0.2.1 (2008-07-20)</a></li>
<li><a class="reference internal" href="#id537">0.2 (2008-07-19)</a></li>
<li><a class="reference internal" href="#id538">0.1 (2008-07-08)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="whatsnew-1.0.html"
                        title="previous chapter">What's New In Pyramid 1.0</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="designdefense.html"
                        title="next chapter">Defending Pyramid's Design</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="designdefense.html" title="Defending Pyramid&#39;s Design"
             >next</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.0.html" title="What&#39;s New In Pyramid 1.0"
             >previous</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.5</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="copyright.html">Copyright</a> 2008-2014, Agendaless Consulting.
      Last updated on Nov 09, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>