<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>binary – Tools for representing binary data to be stored in MongoDB — PyMongo 3.4.0 documentation</title>
<link href="../../_static/pydoctheme.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="../../_static/jquery.js" type="text/javascript"></script>
<script src="../../_static/underscore.js" type="text/javascript"></script>
<script src="../../_static/doctools.js" type="text/javascript"></script>
<script src="../../_static/sidebar.js" type="text/javascript"></script>
<link href="../../index.html" rel="top" title="PyMongo 3.4.0 documentation"/>
<link href="index.html" rel="up" title="bson – BSON (Binary JSON) Encoding and Decoding"/>
<link href="code.html" rel="next" title="code – Tools for representing JavaScript code"/>
<link href="index.html" rel="prev" title="bson – BSON (Binary JSON) Encoding and Decoding"/>
</head>
<body role="document">
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a accesskey="N" href="code.html" title="code – Tools for representing JavaScript code">next</a> |</li>
<li class="right">
<a accesskey="P" href="index.html" title="bson – BSON (Binary JSON) Encoding and Decoding">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../../index.html">PyMongo 3.4.0 documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="../index.html">API Documentation</a> »</li>
<li class="nav-item nav-item-2"><a accesskey="U" href="index.html"><code class="docutils literal"><span class="pre">bson</span></code> – BSON (Binary JSON) Encoding and Decoding</a> »</li>
</ul>
</div>
<div class="document">
<div class="documentwrapper">
<div class="body" role="main">
<div class="section" id="module-bson.binary">
<span id="binary-tools-for-representing-binary-data-to-be-stored-in-mongodb"></span><h1><a name="//apple_ref/cpp/Module/bson.binary"></a><code class="xref py py-mod docutils literal"><span class="pre">binary</span></code> – Tools for representing binary data to be stored in MongoDB<a class="headerlink" href="#module-bson.binary" title="Permalink to this headline">¶</a></h1>
<dl class="data">
<dt id="bson.binary.BINARY_SUBTYPE"><a name="//apple_ref/cpp/Value/bson.binary.BINARY_SUBTYPE"></a>
<code class="descclassname">bson.binary.</code><code class="descname">BINARY_SUBTYPE</code><em class="property"> = 0</em><a class="headerlink" href="#bson.binary.BINARY_SUBTYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>BSON binary subtype for binary data.</p>
<p>This is the default subtype for binary data.</p>
</dd></dl>
<dl class="data">
<dt id="bson.binary.FUNCTION_SUBTYPE"><a name="//apple_ref/cpp/Value/bson.binary.FUNCTION_SUBTYPE"></a>
<code class="descclassname">bson.binary.</code><code class="descname">FUNCTION_SUBTYPE</code><em class="property"> = 1</em><a class="headerlink" href="#bson.binary.FUNCTION_SUBTYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>BSON binary subtype for functions.</p>
</dd></dl>
<dl class="data">
<dt id="bson.binary.OLD_BINARY_SUBTYPE"><a name="//apple_ref/cpp/Value/bson.binary.OLD_BINARY_SUBTYPE"></a>
<code class="descclassname">bson.binary.</code><code class="descname">OLD_BINARY_SUBTYPE</code><em class="property"> = 2</em><a class="headerlink" href="#bson.binary.OLD_BINARY_SUBTYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Old BSON binary subtype for binary data.</p>
<p>This is the old default subtype, the current
default is <a class="reference internal" href="#bson.binary.BINARY_SUBTYPE" title="bson.binary.BINARY_SUBTYPE"><code class="xref py py-data docutils literal"><span class="pre">BINARY_SUBTYPE</span></code></a>.</p>
</dd></dl>
<dl class="data">
<dt id="bson.binary.OLD_UUID_SUBTYPE"><a name="//apple_ref/cpp/Value/bson.binary.OLD_UUID_SUBTYPE"></a>
<code class="descclassname">bson.binary.</code><code class="descname">OLD_UUID_SUBTYPE</code><em class="property"> = 3</em><a class="headerlink" href="#bson.binary.OLD_UUID_SUBTYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Old BSON binary subtype for a UUID.</p>
<p><code class="xref py py-class docutils literal"><span class="pre">uuid.UUID</span></code> instances will automatically be encoded
by <a class="reference internal" href="index.html#module-bson" title="bson: BSON (Binary JSON) Encoding and Decoding"><code class="xref py py-mod docutils literal"><span class="pre">bson</span></code></a> using this subtype.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.</span></p>
</div>
</dd></dl>
<dl class="data">
<dt id="bson.binary.UUID_SUBTYPE"><a name="//apple_ref/cpp/Value/bson.binary.UUID_SUBTYPE"></a>
<code class="descclassname">bson.binary.</code><code class="descname">UUID_SUBTYPE</code><em class="property"> = 4</em><a class="headerlink" href="#bson.binary.UUID_SUBTYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>BSON binary subtype for a UUID.</p>
<p>This is the new BSON binary subtype for UUIDs. The
current default is <a class="reference internal" href="#bson.binary.OLD_UUID_SUBTYPE" title="bson.binary.OLD_UUID_SUBTYPE"><code class="xref py py-data docutils literal"><span class="pre">OLD_UUID_SUBTYPE</span></code></a> but will
change to this in a future release.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.1: </span>Changed to subtype 4.</p>
</div>
</dd></dl>
<dl class="data">
<dt id="bson.binary.STANDARD"><a name="//apple_ref/cpp/Value/bson.binary.STANDARD"></a>
<code class="descclassname">bson.binary.</code><code class="descname">STANDARD</code><em class="property"> = 4</em><a class="headerlink" href="#bson.binary.STANDARD" title="Permalink to this definition">¶</a></dt>
<dd><p>The standard UUID representation.</p>
<p><code class="xref py py-class docutils literal"><span class="pre">uuid.UUID</span></code> instances will automatically be encoded to
and decoded from BSON binary, using RFC-4122 byte order with
binary subtype <a class="reference internal" href="#bson.binary.UUID_SUBTYPE" title="bson.binary.UUID_SUBTYPE"><code class="xref py py-data docutils literal"><span class="pre">UUID_SUBTYPE</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
</dd></dl>
<dl class="data">
<dt id="bson.binary.PYTHON_LEGACY"><a name="//apple_ref/cpp/Value/bson.binary.PYTHON_LEGACY"></a>
<code class="descclassname">bson.binary.</code><code class="descname">PYTHON_LEGACY</code><em class="property"> = 3</em><a class="headerlink" href="#bson.binary.PYTHON_LEGACY" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python legacy UUID representation.</p>
<p><code class="xref py py-class docutils literal"><span class="pre">uuid.UUID</span></code> instances will automatically be encoded to
and decoded from BSON binary, using RFC-4122 byte order with
binary subtype <a class="reference internal" href="#bson.binary.OLD_UUID_SUBTYPE" title="bson.binary.OLD_UUID_SUBTYPE"><code class="xref py py-data docutils literal"><span class="pre">OLD_UUID_SUBTYPE</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
</dd></dl>
<dl class="data">
<dt id="bson.binary.JAVA_LEGACY"><a name="//apple_ref/cpp/Value/bson.binary.JAVA_LEGACY"></a>
<code class="descclassname">bson.binary.</code><code class="descname">JAVA_LEGACY</code><em class="property"> = 5</em><a class="headerlink" href="#bson.binary.JAVA_LEGACY" title="Permalink to this definition">¶</a></dt>
<dd><p>The Java legacy UUID representation.</p>
<p><code class="xref py py-class docutils literal"><span class="pre">uuid.UUID</span></code> instances will automatically be encoded to
and decoded from BSON binary, using the Java driver’s legacy
byte order with binary subtype <a class="reference internal" href="#bson.binary.OLD_UUID_SUBTYPE" title="bson.binary.OLD_UUID_SUBTYPE"><code class="xref py py-data docutils literal"><span class="pre">OLD_UUID_SUBTYPE</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>
<dl class="data">
<dt id="bson.binary.CSHARP_LEGACY"><a name="//apple_ref/cpp/Value/bson.binary.CSHARP_LEGACY"></a>
<code class="descclassname">bson.binary.</code><code class="descname">CSHARP_LEGACY</code><em class="property"> = 6</em><a class="headerlink" href="#bson.binary.CSHARP_LEGACY" title="Permalink to this definition">¶</a></dt>
<dd><p>The C#/.net legacy UUID representation.</p>
<p><code class="xref py py-class docutils literal"><span class="pre">uuid.UUID</span></code> instances will automatically be encoded to
and decoded from BSON binary, using the C# driver’s legacy
byte order and binary subtype <a class="reference internal" href="#bson.binary.OLD_UUID_SUBTYPE" title="bson.binary.OLD_UUID_SUBTYPE"><code class="xref py py-data docutils literal"><span class="pre">OLD_UUID_SUBTYPE</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>
<dl class="data">
<dt id="bson.binary.MD5_SUBTYPE"><a name="//apple_ref/cpp/Value/bson.binary.MD5_SUBTYPE"></a>
<code class="descclassname">bson.binary.</code><code class="descname">MD5_SUBTYPE</code><em class="property"> = 5</em><a class="headerlink" href="#bson.binary.MD5_SUBTYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>BSON binary subtype for an MD5 hash.</p>
</dd></dl>
<dl class="data">
<dt id="bson.binary.USER_DEFINED_SUBTYPE"><a name="//apple_ref/cpp/Value/bson.binary.USER_DEFINED_SUBTYPE"></a>
<code class="descclassname">bson.binary.</code><code class="descname">USER_DEFINED_SUBTYPE</code><em class="property"> = 128</em><a class="headerlink" href="#bson.binary.USER_DEFINED_SUBTYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>BSON binary subtype for any user defined structure.</p>
</dd></dl>
<dl class="class">
<dt id="bson.binary.Binary"><a name="//apple_ref/cpp/Class/bson.binary.Binary"></a>
<em class="property">class </em><code class="descclassname">bson.binary.</code><code class="descname">Binary</code><span class="sig-paren">(</span><em>data</em>, <em>subtype=BINARY_SUBTYPE</em><span class="sig-paren">)</span><a class="headerlink" href="#bson.binary.Binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">str</span></code></p>
<p>Representation of BSON binary data.</p>
<p>This is necessary because we want to represent Python strings as
the BSON string type. We need to wrap binary data so we can tell
the difference between what should be considered binary data and
what should be considered a string when we encode to BSON.</p>
<p>Raises TypeError if <cite>data</cite> is not an instance of <code class="xref py py-class docutils literal"><span class="pre">str</span></code>
(<code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> in python 3) or <cite>subtype</cite> is not an instance of
<code class="xref py py-class docutils literal"><span class="pre">int</span></code>. Raises ValueError if <cite>subtype</cite> is not in [0, 256).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In python 3 instances of Binary with subtype 0 will be decoded
directly to <code class="xref py py-class docutils literal"><span class="pre">bytes</span></code>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><cite>data</cite>: the binary data to represent</li>
<li><cite>subtype</cite> (optional): the <a class="reference external" href="http://bsonspec.org/#/specification">binary subtype</a>
to use</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="bson.binary.Binary.subtype"><a name="//apple_ref/cpp/Attribute/bson.binary.Binary.subtype"></a>
<code class="descname">subtype</code><a class="headerlink" href="#bson.binary.Binary.subtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtype of this binary data.</p>
</dd></dl>
</dd></dl>
<dl class="class">
<dt id="bson.binary.UUIDLegacy"><a name="//apple_ref/cpp/Class/bson.binary.UUIDLegacy"></a>
<em class="property">class </em><code class="descclassname">bson.binary.</code><code class="descname">UUIDLegacy</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#bson.binary.UUIDLegacy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#bson.binary.Binary" title="bson.binary.Binary"><code class="xref py py-class docutils literal"><span class="pre">bson.binary.Binary</span></code></a></p>
<p>UUID wrapper to support working with UUIDs stored as PYTHON_LEGACY.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">uuid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bson.binary</span> <span class="kn">import</span> <span class="n">Binary</span><span class="p">,</span> <span class="n">UUIDLegacy</span><span class="p">,</span> <span class="n">STANDARD</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bson.codec_options</span> <span class="kn">import</span> <span class="n">CodecOptions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_uuid</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="s">'test'</span><span class="p">,</span>
<span class="gp">... </span>                         <span class="n">CodecOptions</span><span class="p">(</span><span class="n">uuid_representation</span><span class="o">=</span><span class="n">STANDARD</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span><span class="o">.</span><span class="n">insert_one</span><span class="p">({</span><span class="s">'uuid'</span><span class="p">:</span> <span class="n">Binary</span><span class="p">(</span><span class="n">my_uuid</span><span class="o">.</span><span class="n">bytes</span><span class="p">,</span> <span class="mi">3</span><span class="p">)})</span><span class="o">.</span><span class="n">inserted_id</span>
<span class="go">ObjectId('...')</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s">'uuid'</span><span class="p">:</span> <span class="n">my_uuid</span><span class="p">})</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s">'uuid'</span><span class="p">:</span> <span class="n">UUIDLegacy</span><span class="p">(</span><span class="n">my_uuid</span><span class="p">)})</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s">'uuid'</span><span class="p">:</span> <span class="n">UUIDLegacy</span><span class="p">(</span><span class="n">my_uuid</span><span class="p">)})[</span><span class="mi">0</span><span class="p">][</span><span class="s">'uuid'</span><span class="p">]</span>
<span class="go">UUID('...')</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Convert from subtype 3 to subtype 4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="n">coll</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s">'uuid'</span><span class="p">:</span> <span class="n">UUIDLegacy</span><span class="p">(</span><span class="n">my_uuid</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span><span class="o">.</span><span class="n">replace_one</span><span class="p">({</span><span class="s">"_id"</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s">"_id"</span><span class="p">]},</span> <span class="n">doc</span><span class="p">)</span><span class="o">.</span><span class="n">matched_count</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s">'uuid'</span><span class="p">:</span> <span class="n">UUIDLegacy</span><span class="p">(</span><span class="n">my_uuid</span><span class="p">)})</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s">'uuid'</span><span class="p">:</span> <span class="p">{</span><span class="s">'$in'</span><span class="p">:</span> <span class="p">[</span><span class="n">UUIDLegacy</span><span class="p">(</span><span class="n">my_uuid</span><span class="p">),</span> <span class="n">my_uuid</span><span class="p">]}})</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s">'uuid'</span><span class="p">:</span> <span class="n">my_uuid</span><span class="p">})[</span><span class="s">'uuid'</span><span class="p">]</span>
<span class="go">UUID('...')</span>
</pre></div>
</div>
<p>Raises TypeError if <cite>obj</cite> is not an instance of <code class="xref py py-class docutils literal"><span class="pre">UUID</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><cite>obj</cite>: An instance of <code class="xref py py-class docutils literal"><span class="pre">UUID</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="bson.binary.UUIDLegacy.uuid"><a name="//apple_ref/cpp/Attribute/bson.binary.UUIDLegacy.uuid"></a>
<code class="descname">uuid</code><a class="headerlink" href="#bson.binary.UUIDLegacy.uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>UUID instance wrapped by this UUIDLegacy instance.</p>
</dd></dl>
</dd></dl>
</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a href="../../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a href="code.html" title="code – Tools for representing JavaScript code">next</a> |</li>
<li class="right">
<a href="index.html" title="bson – BSON (Binary JSON) Encoding and Decoding">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../../index.html">PyMongo 3.4.0 documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="../index.html">API Documentation</a> »</li>
<li class="nav-item nav-item-2"><a href="index.html"><code class="docutils literal"><span class="pre">bson</span></code> – BSON (Binary JSON) Encoding and Decoding</a> »</li>
</ul>
</div>
<div class="footer" role="contentinfo">
        © Copyright 2008 - 2015, MongoDB, Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
</body>
</html>