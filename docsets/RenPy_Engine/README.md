Renpy Engine Docset
=======================

[Renpy](http://www.renpy.org/) docset for [Dash](http://kapeli.com/dash), [Zeal](https://zealdocs.org).

Generated by [scillidan](https://github.com/scillidan) with [doc2dash](https://github.com/hynek/doc2dash).

With `8.2.0` version, `make html` failed on Windows 10, so I make `html` on Ubuntu in [VirtualBox](https://www.virtualbox.org/). There will be some changes in Ubuntu, but you can still refer to the following manul.

## Install requirements

```sh
scoop install python39
pip install doc2dash
scoop install make
scoop install trash
```

## Make docset

Download stable-version from https://github.com/renpy/renpy/releases. Decompress it, then:

```sh
cd renpy/sphinx
python39 -m venv venv
venv\Scripts\activate.bat
pip install sphinx==5.0.0 sphinx_rtd_theme sphinx_rtd_dark_mode future
```

Build document:

```sh
make html
```

Convert to docset, and name a shorter keyword for search. But don't use abbreviation, see [Docset requirements](https://github.com/Kapeli/Dash-User-Contributions/wiki/Docset-Contribution-Checklist#docset-requirements):

```sh
doc2dash --name renpy -f ./build/html
```

Still use current name `dirname`:

```sh
mv renpy.docset RenPy_Engine.docset
```

And in `RenPy_Engine.docset\Contents\Info.plist`:

```
<key>CFBundleName</key>
<string>RenPy Engine</string>
```

If you will use multiple versions, specify the version number:

```
<key>CFBundleName</key>
<string>RenPy 8.1.3</string>
```

If you have `.svg`, `get `svg2png.exe` from [SVG to PNG converter](https://github.com/v0lt/svg2png).

```sh
svg2png -w 16 Input.svg
svg2png -w 32 Input.svg
```

Put `icon.png`, `icon@2x.png` in `RenPy_Engine.docset`.

Move `RenPy_Engine.docset` into storage directory of Zeal.

## PR note

Refer to [Dash-User-Contributions](https://github.com/Kapeli/Dash-User-Contributions) and [Contributions](https://github.com/MarcDiethelm/contributing).

Fork https://github.com/Kapeli/Dash-User-Contributions.

```sh
git clone https://github.com/YourName/Dash-User-Contributions
cd Dash-User-Contributions
```

Sync to `upstream`:

```sh
git pull
```

Create a new branch:

```sh
git checkout -b "renpy-engine-x.x.x"
```

For contribute to https://github.com/Kapeli/Dash-User-Contributions, compress directory to `.tgz`:

```sh
tar --exclude='.DS_Store' -cvzf RenPy_Engine.tgz RenPy_Engine.docset
```

Put `RenPy_Engine.tgz` into `...\Dash-User-Contributions\docsets\RenPy_Engine\versions\x.x.x`.

Update `...\Dash-User-Contributions\docsets\RenPy_Engine\docset.json`:

```sh
{
    "name": "RenPy_Engine",
    "version": "x.x.x",
    "archive": "RenPy_Engine.tgz",
    "author": {
        "name": "...",
        "link": "..."
    },
    "aliases": ["RenPy","Ren'Py"],
    "specific_versions": [
        {
            "version": "x.x.x",
            "archive": "versions/x.x.x/RenPy_Engine.tgz"
        },
        {
            "version": "8.1.3",
            "archive": "versions/8.1.3/RenPy_Engine.tgz"
        }
        ...
    ]
}
```

Push to your fork:

```sh
git add .
git commit -m "renpy-engine-x.x.x"
git push origin
```

Fork Repository → Sync fork → Create Pull requests → Waiting check and merge ...

If PR be merge, re-sync to `upstream`,

```sh
git branch -d renpy-engine-x.x.x
git push origin --delete renpy-engine-x.x.x
```

Clear file:

```sh
trash RenPy_Engine.docset
```

## Add feed

Zeal →  Tools → Docsets → Add feed:

```
dash-feed://http%3A%2F%2Fraw.githubusercontent.com%2Fscillidan%2Fpublic_source%2Fmain%2FZeal%2FRenPy_Engine.xml
```