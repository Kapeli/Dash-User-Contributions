Renpy Engine Docset (Archived)
=======================

[Renpy](http://www.renpy.org/) docset for [Dash](http://kapeli.com/dash), [Zeal](https://zealdocs.org). Generated by [scillidan](https://github.com/scillidan) with [doc2dash](https://github.com/hynek/doc2dash).

I tried building `8.3.1` on `Ubuntu 24.04 Arm`. This time I noticed some useful print information. In the `Source code(zip)` of releases there will build higher version Renpy. And the documentation is non-release. I didn't realize it before. So I only recommended using [online documents](https://www.renpy.org/doc/html/) at present.

And I keep some notes. It will be useful when you want to make docset for yourself.

## Build renpy documentation (on Ubuntu 24.04) [^1]

```sh
sudo apt install virtualenvwrapper python3-dev libavcodec-dev libavformat-dev libswresample-dev libswscale-dev libharfbuzz-dev libfreetype6-dev libfribidi-dev libsdl2-dev libsdl2-image-dev libsdl2-gfx-dev libsdl2-mixer-dev libsdl2-ttf-dev libjpeg-dev
. /usr/share/virtualenvwrapper/virtualenvwrapper.sh
mkvirtualenv renpy
pip install -U setuptools future six typing pefile requests ecdsa
pip install -U "cython<3.0.0"
```

```sh
git clone --depth=1 https://www.github.com/renpy/pygame_sdl2
pushd pygame_sdl2
python setup.py install
python install_headers.py $VIRTUAL_ENV
popd
```

```sh
LATEST_RELEASE=$(curl -s https://api.github.com/repos/renpy/renpy/releases/latest | jq -r .tag_name)
wget https://github.com/renpy/renpy/archive/refs/tags/$LATEST_RELEASE.zip
unzip $LATEST_RELEASE.zip
pushd renpy-*
pushd module
python setup.py install
cd ..
pushd sphinx
pip install -U sphinx sphinx_rtd_theme sphinx_rtd_dark_mode
./build.sh
```

## Build docset

```sh
pip install doc2dash
doc2dash --name <short_name> -f ./build/html
```

Here, `ShortName` can be a shorter keyword for search. But don't use abbreviation, see [Docset requirements](https://github.com/Kapeli/Dash-User-Contributions/wiki/Docset-Contribution-Checklist#docset-requirements).

```sh
mv <short_name>.docset <full_name>.docset
```

Edit `<full_name>.docset\Contents\Info.plist`:

```
<key>CFBundleName</key>
<string>Full Name</string>
```

If you want to keep multiple versions, add the version number:

```
<key>CFBundleName</key>
<string>Full Name <version></string>
```

If you have `icon.svg`:

1. Get `svg2png*.zip` from [SVG to PNG converter - Releases](https://github.com/v0lt/svg2png/releases).
2. Decompress it to `svg2png\`.

```sh
cd svg2png\x64
svg2png.exe icon.svg -w 16 icon.png
svg2png.exe icon.svg -w 32 icon@2x.png
mv icon*.png <full_name>.docset\
```

## Usage docset with [Zeal](https://zealdocs.org):

Zeal → Edit → Preferences → Docset storage → Browse → Choice the path of `<full_name>.docset`

## Usage docset with [Keypirinha](https://keypirinha.com) (Optional):

1. Install [Keypirinha-Zealous](https://github.com/bantya/Keypirinha-Zealous) plugin.
2. Keypirinha → Configure Package → Zealous

```
[main]
path = "<the path of zeal.exe>"
docset_path = "<the path of docsets>"
results = 50
wildcard = no

# For example
[docs]
pyt = python
gdt = godot
lua = lua

# For example
# See more on https://kapeli.com/docsets#supportedentrytypes
[types]
a = Attribute
c = Class
e = Exception
f = Function
g = Guide
m = Method
s = Section
v = Variable
o = Option
```

## Create PR [^2][^3]

Fork `https://github.com/Kapeli/Dash-User-Contributions`.

```sh
git clone https://github.com/<User>/Dash-User-Contributions
cd Dash-User-Contributions
git pull
git checkout -b "<full-name>-<stable_version>"
tar --exclude='.DS_Store' -cvzf <full_name>.tgz <full_name>.docset
mv <full_name>.tgz Dash-User-Contributions\docsets\<full_name>\
vim Dash-User-Contributions\docsets\<full_name>\docset.json
```

```
{
    "name": "Full Name",
    "version": "<stable_version>",
    "archive": "<full_name>.tgz",
    "author": {
        "name": "<Name>",
        "link": "<Link>"
    },
    "aliases": ["Aliase_1","Aliase_2"],
}
```

If you build specific versions (Optional):

```sh
mv <full_name>.tgz Dash-User-Contributions\docsets\<full_name>\versions\<specific_version>\
vim Dash-User-Contributions\docsets\<full_name>\docset.json
```

```sh
    "specific_versions": [
        {
            "version": "<specific_version>",
            "archive": "versions/<specific_version>/<full_name>.tgz"
        },
        ...
    ]
```

Push to specific branch:

```sh
git add .
git commit -m "Update <full-name> to <stable_version>"
git push -u origin <full-name>-<stable_version>
```

Visit `https://github.com/<user>/Dash-User-Contributions` → Sync fork → Create Pull requests → Waiting check and merge

## Usage docset as feed

1. You can get some feed from [Zeal User Contributions & Cheat Sheets](https://zealusercontributions.vercel.app/docsets).
2. Zeal →  Tools → Docsets → Add feed.

[^1]: [renpy - Compiling the Modules](https://github.com/renpy/renpy#compiling-the-modules)
[^2]: [Dash-User-Contributions](https://github.com/Kapeli/Dash-User-Contributions)
[^3]: [Contributions](https://github.com/MarcDiethelm/contributing)