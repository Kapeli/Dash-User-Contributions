<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>App Engine Python SDK: google.appengine.ext.ndb.tasklets Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="common.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gae-python.logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">App Engine Python SDK
   &#160;<span id="projectnumber">v1.6.9 rev.445</span>
   </div>
   <div id="projectbrief">The Python runtime is available as an experimental Preview feature.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>google</b></li><li class="navelem"><b>appengine</b></li><li class="navelem"><b>ext</b></li><li class="navelem"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb.html">ndb</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets.html">tasklets</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">google.appengine.ext.ndb.tasklets Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets_1_1___state.html">_State</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets_1_1_future.html">Future</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets_1_1_multi_future.html">MultiFuture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets_1_1_queue_future.html">QueueFuture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets_1_1_reducing_future.html">ReducingFuture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets_1_1_serial_queue_future.html">SerialQueueFuture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a003dba2755f9462e8b3d79320efe9462"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets.html#a003dba2755f9462e8b3d79320efe9462">add_flow_exception</a></td></tr>
<tr class="separator:a003dba2755f9462e8b3d79320efe9462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa93009641450e68f71f6534da0fce954"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets.html#aa93009641450e68f71f6534da0fce954">sleep</a></td></tr>
<tr class="separator:aa93009641450e68f71f6534da0fce954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac878d9b9e364ae2dac5e695537aa1cc4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac878d9b9e364ae2dac5e695537aa1cc4"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>get_return_value</b></td></tr>
<tr class="separator:ac878d9b9e364ae2dac5e695537aa1cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523c93f69e3edd0753e9fbbc7ffcfc42"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a523c93f69e3edd0753e9fbbc7ffcfc42"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>tasklet</b></td></tr>
<tr class="separator:a523c93f69e3edd0753e9fbbc7ffcfc42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89af093870cfe112d2ed637f7f1fc3a6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets.html#a89af093870cfe112d2ed637f7f1fc3a6">synctasklet</a></td></tr>
<tr class="separator:a89af093870cfe112d2ed637f7f1fc3a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae756537578582552f10da3f0486b002a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets.html#ae756537578582552f10da3f0486b002a">toplevel</a></td></tr>
<tr class="separator:ae756537578582552f10da3f0486b002a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a479f2e22716f1accada9001525e5ed6f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a479f2e22716f1accada9001525e5ed6f"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>get_context</b></td></tr>
<tr class="separator:a479f2e22716f1accada9001525e5ed6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6cff784a25591f489828c7d75655bf2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af6cff784a25591f489828c7d75655bf2"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>make_default_context</b></td></tr>
<tr class="separator:af6cff784a25591f489828c7d75655bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e43535d25baf6d2b60c65a5a4017dc2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e43535d25baf6d2b60c65a5a4017dc2"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>make_context</b></td></tr>
<tr class="separator:a5e43535d25baf6d2b60c65a5a4017dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fda4dd220140d2624bc1a206a6af3c7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0fda4dd220140d2624bc1a206a6af3c7"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>set_context</b></td></tr>
<tr class="separator:a0fda4dd220140d2624bc1a206a6af3c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae91742fb820b95a2f5dabcf8b892a5f1"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><b>__all__</b></td></tr>
<tr class="separator:ae91742fb820b95a2f5dabcf8b892a5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a6bfdd84850834e8b7070d5d942f4fd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a6bfdd84850834e8b7070d5d942f4fd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_logging_debug</b> = utils.logging_debug</td></tr>
<tr class="separator:a0a6bfdd84850834e8b7070d5d942f4fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07c21621a23a95509b15c34daa9932b2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a07c21621a23a95509b15c34daa9932b2"></a>
tuple&#160;</td><td class="memItemRight" valign="bottom"><b>_state</b> = <a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets_1_1___state.html">_State</a>()</td></tr>
<tr class="separator:a07c21621a23a95509b15c34daa9932b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf1d949e6678eab290537489bd976032"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acf1d949e6678eab290537489bd976032"></a>
tuple&#160;</td><td class="memItemRight" valign="bottom"><b>_flow_exceptions</b> = ()</td></tr>
<tr class="separator:acf1d949e6678eab290537489bd976032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38d2bacac3a4e171c176041a16ee7144"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a38d2bacac3a4e171c176041a16ee7144"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Return</b> = StopIteration</td></tr>
<tr class="separator:a38d2bacac3a4e171c176041a16ee7144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c69d901d3aa5f59e986226875b5048"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17c69d901d3aa5f59e986226875b5048"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>_CONTEXT_KEY</b> = '__CONTEXT__'</td></tr>
<tr class="separator:a17c69d901d3aa5f59e986226875b5048"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A tasklet decorator.

Tasklets are a way to write concurrently running functions without
threads; tasklets are executed by an event loop and can suspend
themselves blocking for I/O or some other operation using a yield
statement.  The notion of a blocking operation is abstracted into the
Future class, but a tasklet may also yield an RPC in order to wait for
that RPC to complete.

The @tasklet decorator wraps generator function so that when it is
called, a Future is returned while the generator is executed by the
event loop.  Within the tasklet, any yield of a Future waits for and
returns the Future's result.  For example:

@tasklet
def foo():
  a = yield &lt;some Future&gt;
  b = yield &lt;another Future&gt;
  raise Return(a + b)

def main():
  f = foo()
  x = f.get_result()
  print x

Note that blocking until the Future's result is available using
get_result() is somewhat inefficient (though not vastly -- it is not
busy-waiting).  In most cases such code should be rewritten as a tasklet
instead:

@tasklet
def main_tasklet():
  f = foo()
  x = yield f
  print x

Calling a tasklet automatically schedules it with the event loop:

def main():
  f = main_tasklet()
  eventloop.run()  # Run until no tasklets left to do
  f.done()  # Returns True

As a special feature, if the wrapped function is not a generator
function, its return value is returned via the Future.  This makes the
following two equivalent:

@tasklet
def foo():
  return 42

@tasklet
def foo():
  if False: yield  # The presence of 'yield' makes foo a generator
  raise Return(42)  # Or, after PEP 380, return 42

This feature (inspired by Monocle) is handy in case you are
implementing an interface that expects tasklets but you have no need to
suspend -- there's no need to insert a dummy yield in order to make
the tasklet into a generator.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a003dba2755f9462e8b3d79320efe9462"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.tasklets.add_flow_exception </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>exc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add an exception that should not be logged.

The argument must be a subclass of Exception.
</pre> 
</div>
</div>
<a class="anchor" id="aa93009641450e68f71f6534da0fce954"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.tasklets.sleep </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Public function to sleep some time.

Example:
  yield tasklets.sleep(0.5)  # Sleep for half a sec.
</pre> 
</div>
</div>
<a class="anchor" id="a89af093870cfe112d2ed637f7f1fc3a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.tasklets.synctasklet </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decorator to run a function as a tasklet when called.

Use this to wrap a request handler function that will be called by
some web application framework (e.g. a Django view function or a
webapp.RequestHandler.get method).
</pre> 
</div>
</div>
<a class="anchor" id="ae756537578582552f10da3f0486b002a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.tasklets.toplevel </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A sync tasklet that sets a fresh default Context.

Use this for toplevel view functions such as
webapp.RequestHandler.get() or Django view functions.
</pre> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ae91742fb820b95a2f5dabcf8b892a5f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list google.appengine.ext.ndb.tasklets.__all__</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb_1_1tasklets.html">    1</a></span>&#160;= [<span class="stringliteral">&#39;Return&#39;</span>, <span class="stringliteral">&#39;tasklet&#39;</span>, <span class="stringliteral">&#39;synctasklet&#39;</span>, <span class="stringliteral">&#39;toplevel&#39;</span>, <span class="stringliteral">&#39;sleep&#39;</span>,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;           <span class="stringliteral">&#39;add_flow_exception&#39;</span>, <span class="stringliteral">&#39;get_return_value&#39;</span>,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;           <span class="stringliteral">&#39;get_context&#39;</span>, <span class="stringliteral">&#39;set_context&#39;</span>,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;           <span class="stringliteral">&#39;make_default_context&#39;</span>, <span class="stringliteral">&#39;make_context&#39;</span>,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;           <span class="stringliteral">&#39;Future&#39;</span>, <span class="stringliteral">&#39;MultiFuture&#39;</span>, <span class="stringliteral">&#39;QueueFuture&#39;</span>, <span class="stringliteral">&#39;SerialQueueFuture&#39;</span>,</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;           <span class="stringliteral">&#39;ReducingFuture&#39;</span>,</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;           ]</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<address class="footer">
    <small>Maintained by <a href="http://www.tzmartin.com">tzmartin</a></small>
</address>