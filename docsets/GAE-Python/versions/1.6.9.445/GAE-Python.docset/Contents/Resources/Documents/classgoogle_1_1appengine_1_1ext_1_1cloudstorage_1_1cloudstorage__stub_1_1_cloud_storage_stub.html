<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>App Engine Python SDK: google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="common.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gae-python.logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">App Engine Python SDK
   &#160;<span id="projectnumber">v1.6.9 rev.445</span>
   </div>
   <div id="projectbrief">The Python runtime is available as an experimental Preview feature.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>google</b></li><li class="navelem"><b>appengine</b></li><li class="navelem"><b>ext</b></li><li class="navelem"><b>cloudstorage</b></li><li class="navelem"><b>cloudstorage_stub</b></li><li class="navelem"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html">CloudStorageStub</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.png" usemap="#google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub_map" alt=""/>
  <map id="google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub_map" name="google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae167be348f6d846069aec8e89bd18e37"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#ae167be348f6d846069aec8e89bd18e37">__init__</a></td></tr>
<tr class="separator:ae167be348f6d846069aec8e89bd18e37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d21deb9717b1c9aab18e95ff6a4689"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#a91d21deb9717b1c9aab18e95ff6a4689">post_start_creation</a></td></tr>
<tr class="separator:a91d21deb9717b1c9aab18e95ff6a4689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97f0834eb50944cab7a2d354be5f8e5e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#a97f0834eb50944cab7a2d354be5f8e5e">put_empty</a></td></tr>
<tr class="separator:a97f0834eb50944cab7a2d354be5f8e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa017e322b1e05da6025cfbcac4bae171"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#aa017e322b1e05da6025cfbcac4bae171">put_continue_creation</a></td></tr>
<tr class="separator:aa017e322b1e05da6025cfbcac4bae171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0f739b0e4c63279096425a968b2bb5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#a7e0f739b0e4c63279096425a968b2bb5">put_copy</a></td></tr>
<tr class="separator:a7e0f739b0e4c63279096425a968b2bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20837431ce1d728fc9dfc023fd0658bf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#a20837431ce1d728fc9dfc023fd0658bf">get_bucket</a></td></tr>
<tr class="separator:a20837431ce1d728fc9dfc023fd0658bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9601b19d8bd40ec902a578c8d87f0fc5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#a9601b19d8bd40ec902a578c8d87f0fc5">get_object</a></td></tr>
<tr class="separator:a9601b19d8bd40ec902a578c8d87f0fc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ec58a6076172d6045076cd5dde1f799"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#a5ec58a6076172d6045076cd5dde1f799">head_object</a></td></tr>
<tr class="separator:a5ec58a6076172d6045076cd5dde1f799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fc550cad2765b4f75bec1ef2f8d74cf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1cloudstorage_1_1cloudstorage__stub_1_1_cloud_storage_stub.html#a3fc550cad2765b4f75bec1ef2f8d74cf">delete_object</a></td></tr>
<tr class="separator:a3fc550cad2765b4f75bec1ef2f8d74cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a31a0d881668af4e2cc3bbbcdccc1e13b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a31a0d881668af4e2cc3bbbcdccc1e13b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>blob_storage</b></td></tr>
<tr class="separator:a31a0d881668af4e2cc3bbbcdccc1e13b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Google Cloud Storage stub implementation.

We use blobstore stub to store files. All metadata are stored
in _AE_GCSFileInfo_.

Note: this Google Cloud Storage stub is designed to work with
apphosting.ext.cloudstorage.storage_api.py.
It only implements the part of GCS storage_api.py uses, and its interface
maps to GCS XML APIs.
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae167be348f6d846069aec8e89bd18e37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blob_storage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initialize.

Args:
  blob_storage:
  apphosting.api.blobstore.blobstore_stub.BlobStorage instance
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3fc550cad2765b4f75bec1ef2f8d74cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.delete_object </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Delete file with a DELETE.

Args:
  filename: gcs filename of form '/bucket/filename'

Returns:
  True if file is deleted. False if file doesn't exist.
</pre> 
</div>
</div>
<a class="anchor" id="a20837431ce1d728fc9dfc023fd0658bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.get_bucket </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bucketpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>marker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>delimiter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get bucket listing with a GET.

How GCS listbucket work in production:
GCS tries to return as many items as possible in a single response. If
there are more items satisfying user's query and the current request
took too long (e.g spent on skipping files in a subdir) or items to return
gets too big (&gt; max_keys), it returns fast and sets IsTruncated
and NextMarker for continuation. They serve redundant purpose: if
NextMarker is set, IsTruncated is True.

Note NextMarker is not where GCS scan left off. It is
only valid for the exact same type of query the marker was generated from.
For example, if a marker is generated from query with delimiter, the marker
is the name of a subdir (instead of the last file within the subdir). Thus
you can't use this marker to issue a query without delimiter.

Args:
  bucketpath: gcs bucket path of form '/bucket'
  prefix: prefix to limit listing.
  marker: a str after which to start listing. Exclusive.
  max_keys: max items we scan &amp; return.
  delimiter: delimiter for directory.

See https://developers.google.com/storage/docs/reference-methods#getbucket
for details.

Returns:
  A tuple of (a list of GCSFileStat for files or directories sorted by
  filename, next_marker to use as next marker, is_truncated boolean to
  indicate if there are more results satisfying query).
</pre> 
</div>
</div>
<a class="anchor" id="a9601b19d8bd40ec902a578c8d87f0fc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.get_object </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>end</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get file content with a GET.

Args:
  filename: gcs filename of form '/bucket/filename'.
  start: start offset to request. Inclusive.
  end: end offset to request. Inclusive.

Returns:
  The segment of file content requested.

Raises:
  ValueError: if file doesn't exist.
</pre> 
</div>
</div>
<a class="anchor" id="a5ec58a6076172d6045076cd5dde1f799"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.head_object </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get file stat with a HEAD.

Args:
  filename: gcs filename of form '/bucket/filename'

Returns:
  A GCSFileStat object containing file stat. None if file doesn't exist.
</pre> 
</div>
</div>
<a class="anchor" id="a91d21deb9717b1c9aab18e95ff6a4689"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.post_start_creation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Start object creation with a POST.

This implements the resumable upload XML API.

Only major limitation of current implementation is that we don't
support multiple upload sessions for the same GCS file. Previous
_AE_GCSFileInfo (which represents either a finalized file, or
an upload session) will be removed when a new upload session is
created.

Args:
  filename: gcs filename of form /bucket/filename.
  options: a dict containing all user specified request headers.
e.g. {'content-type': 'foo', 'x-goog-meta-bar': 'bar'}.

Returns:
  a token (blobkey) used for continuing upload.
</pre> 
</div>
</div>
<a class="anchor" id="aa017e322b1e05da6025cfbcac4bae171"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.put_continue_creation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>content_range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>length</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>_upload_filename</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Continue object upload with PUTs.

This implements the resumable upload XML API.

Args:
  token: upload token returned by post_start_creation.
  content: object content. None if no content was provided with this
PUT request.
  content_range: a (start, end) tuple specifying the content range of this
chunk. Both are inclusive according to XML API. None is content is None.
  length: file length, if this is the last chunk of file content.
  _upload_filename: internal use. Might be removed any time! This is
used by blobstore to pass in the upload filename from user.

Returns:
  _AE_GCSFileInfo entity for this file if the file is finalized.

Raises:
  ValueError: if something is invalid. The exception.args is a tuple of
  (msg, http status code).
</pre> 
</div>
</div>
<a class="anchor" id="a7e0f739b0e4c63279096425a968b2bb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.put_copy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Copy file from src to dst.

Metadata is copied.

Args:
  src: /bucket/filename. This file must exist.
  dst: /bucket/filename.
  options: a dict containing all user specified request headers.
e.g. {'content-type': 'foo', 'x-goog-meta-bar': 'bar'}. If None,
old metadata is copied.
</pre> 
</div>
</div>
<a class="anchor" id="a97f0834eb50944cab7a2d354be5f8e5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.cloudstorage.cloudstorage_stub.CloudStorageStub.put_empty </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>token</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Empty put is used to query upload progress.

The file must has not finished upload.

Args:
  token: upload token returned by post_start_creation.

Returns:
  last offset uploaded. -1 if none has been uploaded.

Raises:
  ValueError: if token matches no in progress uploads.
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>code/googleappengine-read-only/python/google/appengine/ext/cloudstorage/cloudstorage_stub.py</li>
</ul>
</div><!-- contents -->
<address class="footer">
    <small>Maintained by <a href="http://www.tzmartin.com">tzmartin</a></small>
</address>