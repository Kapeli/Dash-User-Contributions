<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>App Engine Python SDK: google.appengine.ext.ndb.eventloop.EventLoop Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="common.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gae-python.logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">App Engine Python SDK
   &#160;<span id="projectnumber">v1.6.9 rev.445</span>
   </div>
   <div id="projectbrief">The Python runtime is available as an experimental Preview feature.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>google</b></li><li class="navelem"><b>appengine</b></li><li class="navelem"><b>ext</b></li><li class="navelem"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb.html">ndb</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop.html">eventloop</a></li><li class="navelem"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html">EventLoop</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google.appengine.ext.ndb.eventloop.EventLoop Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for google.appengine.ext.ndb.eventloop.EventLoop:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.png" usemap="#google.appengine.ext.ndb.eventloop.EventLoop_map" alt=""/>
  <map id="google.appengine.ext.ndb.eventloop.EventLoop_map" name="google.appengine.ext.ndb.eventloop.EventLoop_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3dc67dcc95b8485a45b72e643da7532b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#a3dc67dcc95b8485a45b72e643da7532b">__init__</a></td></tr>
<tr class="separator:a3dc67dcc95b8485a45b72e643da7532b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa5dfcd627aa38fef544c225b6b0732"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#a1aa5dfcd627aa38fef544c225b6b0732">clear</a></td></tr>
<tr class="separator:a1aa5dfcd627aa38fef544c225b6b0732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b7b24cbae9a1b2c490d0202641ccad"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#a46b7b24cbae9a1b2c490d0202641ccad">insort_event_right</a></td></tr>
<tr class="separator:a46b7b24cbae9a1b2c490d0202641ccad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f71bdd340032b3e72b8ac0e3bf806b8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#a7f71bdd340032b3e72b8ac0e3bf806b8">queue_call</a></td></tr>
<tr class="separator:a7f71bdd340032b3e72b8ac0e3bf806b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ab64f998c4c280ed225da4e0113ec2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#a59ab64f998c4c280ed225da4e0113ec2">queue_rpc</a></td></tr>
<tr class="separator:a59ab64f998c4c280ed225da4e0113ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf2a9b1725fe090e283b913cd89d5d0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#aaaf2a9b1725fe090e283b913cd89d5d0">add_idle</a></td></tr>
<tr class="separator:aaaf2a9b1725fe090e283b913cd89d5d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa103bea5480bef54f07b40a58f4590ba"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#aa103bea5480bef54f07b40a58f4590ba">run_idle</a></td></tr>
<tr class="separator:aa103bea5480bef54f07b40a58f4590ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e7299fe2e9a9aa05f7bd466e37ce609"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#a4e7299fe2e9a9aa05f7bd466e37ce609">run0</a></td></tr>
<tr class="separator:a4e7299fe2e9a9aa05f7bd466e37ce609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5ca1cea42da885247d823c9de183e9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#a5c5ca1cea42da885247d823c9de183e9">run1</a></td></tr>
<tr class="separator:a5c5ca1cea42da885247d823c9de183e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29371944b64144d7665f71c0fd815cdf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1eventloop_1_1_event_loop.html#a29371944b64144d7665f71c0fd815cdf">run</a></td></tr>
<tr class="separator:a29371944b64144d7665f71c0fd815cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a459fdb8e95d2bb40dd8a87e2d55b4817"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a459fdb8e95d2bb40dd8a87e2d55b4817"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>current</b></td></tr>
<tr class="separator:a459fdb8e95d2bb40dd8a87e2d55b4817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7944ef543a70ba3a8658213179f9448c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7944ef543a70ba3a8658213179f9448c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>idlers</b></td></tr>
<tr class="separator:a7944ef543a70ba3a8658213179f9448c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeecabda08a16cdea2e2fd83f2c6f3d4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaeecabda08a16cdea2e2fd83f2c6f3d4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>inactive</b></td></tr>
<tr class="separator:aaeecabda08a16cdea2e2fd83f2c6f3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80fc48596d8f21ba06053f02425c4ca"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab80fc48596d8f21ba06053f02425c4ca"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>queue</b></td></tr>
<tr class="separator:ab80fc48596d8f21ba06053f02425c4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a967e39b1cef3efb23464a068de94f69b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a967e39b1cef3efb23464a068de94f69b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>rpcs</b></td></tr>
<tr class="separator:a967e39b1cef3efb23464a068de94f69b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">An event loop.</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3dc67dcc95b8485a45b72e643da7532b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Constructor.

Fields:
  current: a FIFO list of (callback, args, kwds). These callbacks
run immediately when the eventloop runs.
  idlers: a FIFO list of (callback, args, kwds). Thes callbacks
run only when no other RPCs need to be fired first.
For example, AutoBatcher uses idler to fire a batch RPC even before
the batch is full.
  queue: a sorted list of (absolute time in sec, callback, args, kwds),
sorted by time. These callbacks run only after the said time.
  rpcs: a map from rpc to (callback, args, kwds). Callback is called
when the rpc finishes.
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aaaf2a9b1725fe090e283b913cd89d5d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.add_idle </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add an idle callback.

An idle callback can return True, False or None.  These mean:

- None: remove the callback (don't reschedule)
- False: the callback did no work; reschedule later
- True: the callback did some work; reschedule soon

If the callback raises an exception, the traceback is logged and
the callback is removed.
</pre> 
</div>
</div>
<a class="anchor" id="a1aa5dfcd627aa38fef544c225b6b0732"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.clear </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove all pending events without running any.</pre> 
</div>
</div>
<a class="anchor" id="a46b7b24cbae9a1b2c490d0202641ccad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.insort_event_right </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lo</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hi</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Insert event in queue, and keep it sorted assuming queue is sorted.

If event is already in queue, insert it to the right of the rightmost
event (to keep FIFO order).

Optional args lo (default 0) and hi (default len(a)) bound the
slice of a to be searched.

Args:
  event: a (time in sec since unix epoch, callback, args, kwds) tuple.
</pre> 
</div>
</div>
<a class="anchor" id="a7f71bdd340032b3e72b8ac0e3bf806b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.queue_call </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Schedule a function call at a specific time in the future.</pre> 
</div>
</div>
<a class="anchor" id="a59ab64f998c4c280ed225da4e0113ec2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.queue_rpc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rpc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>callback</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Schedule an RPC with an optional callback.

The caller must have previously sent the call to the service.
The optional callback is called with the remaining arguments.

NOTE: If the rpc is a MultiRpc, the callback will be called once
for each sub-RPC.  TODO: Is this a good idea?
</pre> 
</div>
</div>
<a class="anchor" id="a29371944b64144d7665f71c0fd815cdf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Run until there's nothing left to do.</pre> 
</div>
</div>
<a class="anchor" id="a4e7299fe2e9a9aa05f7bd466e37ce609"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.run0 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Run one item (a callback or an RPC wait_any).

Returns:
  A time to sleep if something happened (may be 0);
  None if all queues are empty.
</pre> 
</div>
</div>
<a class="anchor" id="a5c5ca1cea42da885247d823c9de183e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.run1 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Run one item (a callback or an RPC wait_any) or sleep.

Returns:
  True if something happened; False if all queues are empty.
</pre> 
</div>
</div>
<a class="anchor" id="aa103bea5480bef54f07b40a58f4590ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.eventloop.EventLoop.run_idle </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Run one of the idle callbacks.

Returns:
  True if one was called, False if no idle callback was called.
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>code/googleappengine-read-only/python/google/appengine/ext/ndb/eventloop.py</li>
</ul>
</div><!-- contents -->
<address class="footer">
    <small>Maintained by <a href="http://www.tzmartin.com">tzmartin</a></small>
</address>