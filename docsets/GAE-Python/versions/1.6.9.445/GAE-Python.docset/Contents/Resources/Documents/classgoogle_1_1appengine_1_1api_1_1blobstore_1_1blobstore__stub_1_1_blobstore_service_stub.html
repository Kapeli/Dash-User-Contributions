<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>App Engine Python SDK: google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="common.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gae-python.logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">App Engine Python SDK
   &#160;<span id="projectnumber">v1.6.9 rev.445</span>
   </div>
   <div id="projectbrief">The Python runtime is available as an experimental Preview feature.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>google</b></li><li class="navelem"><b>appengine</b></li><li class="navelem"><b>api</b></li><li class="navelem"><b>blobstore</b></li><li class="navelem"><b>blobstore_stub</b></li><li class="navelem"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub.html">BlobstoreServiceStub</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub.png" usemap="#google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub_map" alt=""/>
  <map id="google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub_map" name="google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub_map">
<area href="classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub.html" alt="google.appengine.api.apiproxy_stub.APIProxyStub" shape="rect" coords="0,56,402,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aec3fb62dd8deb0b22cd5c57e10b70eb7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub.html#aec3fb62dd8deb0b22cd5c57e10b70eb7">__init__</a></td></tr>
<tr class="separator:aec3fb62dd8deb0b22cd5c57e10b70eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a380e92f73c0cfde997f05621fdb9c7a2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub.html#a380e92f73c0cfde997f05621fdb9c7a2">ToDatastoreBlobKey</a></td></tr>
<tr class="separator:a380e92f73c0cfde997f05621fdb9c7a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6220ac229b75cdf91f0a3194e11fa82d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub.html#a6220ac229b75cdf91f0a3194e11fa82d">storage</a></td></tr>
<tr class="separator:a6220ac229b75cdf91f0a3194e11fa82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5895b33bb78df661b8391c14eb85ec0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub.html#af5895b33bb78df661b8391c14eb85ec0">DeleteBlob</a></td></tr>
<tr class="separator:af5895b33bb78df661b8391c14eb85ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6d331e027f4a3d56da3044e0f43e012"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub.html#ae6d331e027f4a3d56da3044e0f43e012">CreateEncodedGoogleStorageKey</a></td></tr>
<tr class="separator:ae6d331e027f4a3d56da3044e0f43e012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ffa6bfea6c06f9bb60f64091ce5bf3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1blobstore_1_1blobstore__stub_1_1_blobstore_service_stub.html#a05ffa6bfea6c06f9bb60f64091ce5bf3">CreateBlob</a></td></tr>
<tr class="separator:a05ffa6bfea6c06f9bb60f64091ce5bf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub.html">google.appengine.api.apiproxy_stub.APIProxyStub</a></td></tr>
<tr class="memitem:af0bcc1097e894487e76dcace5080d7db inherit pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub.html#af0bcc1097e894487e76dcace5080d7db">__init__</a></td></tr>
<tr class="separator:af0bcc1097e894487e76dcace5080d7db inherit pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e724cb2cea1d59a2013ee8ffd07296 inherit pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub.html#ab5e724cb2cea1d59a2013ee8ffd07296">CreateRPC</a></td></tr>
<tr class="separator:ab5e724cb2cea1d59a2013ee8ffd07296 inherit pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d7835d66279211298c058508b93dd6 inherit pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub.html#a15d7835d66279211298c058508b93dd6">MakeSyncCall</a></td></tr>
<tr class="separator:a15d7835d66279211298c058508b93dd6 inherit pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac024421529d4c84677d033eae568b993 inherit pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub.html#ac024421529d4c84677d033eae568b993">SetError</a></td></tr>
<tr class="separator:ac024421529d4c84677d033eae568b993 inherit pub_methods_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a02cf228c34dbd6b44f8c2da7a86dc3f8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a02cf228c34dbd6b44f8c2da7a86dc3f8"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>GS_BLOBKEY_PREFIX</b> = 'encoded_gs_file:'</td></tr>
<tr class="separator:a02cf228c34dbd6b44f8c2da7a86dc3f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub.html">google.appengine.api.apiproxy_stub.APIProxyStub</a></td></tr>
<tr class="memitem:a76ff99ffb9b9458897bfa2369e2ad150 inherit pub_static_attribs_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76ff99ffb9b9458897bfa2369e2ad150"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>THREADSAFE</b> = False</td></tr>
<tr class="separator:a76ff99ffb9b9458897bfa2369e2ad150 inherit pub_static_attribs_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub.html">google.appengine.api.apiproxy_stub.APIProxyStub</a></td></tr>
<tr class="memitem:ab0040afcfa34e0454a5bdae9a81df989 inherit pub_attribs_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0040afcfa34e0454a5bdae9a81df989"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>request_data</b></td></tr>
<tr class="separator:ab0040afcfa34e0454a5bdae9a81df989 inherit pub_attribs_classgoogle_1_1appengine_1_1api_1_1apiproxy__stub_1_1_a_p_i_proxy_stub"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Datastore backed Blobstore service stub.

This stub stores manages upload sessions in the Datastore and must be
provided with a blob_storage object to know where the actual blob
records can be found after having been uploaded.

This stub does not handle the actual creation of blobs, neither the BlobInfo
in the Datastore nor creation of blob data in the blob_storage.  It does,
however, assume that another part of the system has created these and
uses these objects for deletion.

An upload session is created when the CreateUploadURL request is handled and
put in the Datastore under the __BlobUploadSession__ kind.  There is no
analog for this kind on a production server. Other than creation, this stub
not work with session objects.  The URLs created by this service stub are:

  http://&lt;appserver-host&gt;:&lt;appserver-port&gt;/&lt;uploader-path&gt;/&lt;session-info&gt;

This is very similar to what the URL is on a production server.  The session
info is the string encoded version of the session entity
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aec3fb62dd8deb0b22cd5c57e10b70eb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blob_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>time_function</em> = <code>time.time</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>service_name</em> = <code>'blobstore'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uploader_path</em> = <code>'_ah/upload/'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>request_data</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Constructor.

Args:
  blob_storage: BlobStorage class instance used for blob storage.
  time_function: Used for dependency injection in tests.
  service_name: Service name expected for all calls.
  uploader_path: Path to upload handler pointed to by URLs generated
by this service stub.
  request_data: A apiproxy_stub.RequestData instance used to look up state
associated with the request that generated an API call.
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a05ffa6bfea6c06f9bb60f64091ce5bf3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub.CreateBlob </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blob_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create new blob and put in storage and Datastore.

This is useful in testing where you have access to the stub.

Args:
  blob_key: String blob-key of new blob.
  content: Content of new blob as a string.

Returns:
  New Datastore entity without blob meta-data fields.
</pre> 
</div>
</div>
<a class="anchor" id="ae6d331e027f4a3d56da3044e0f43e012"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub.CreateEncodedGoogleStorageKey </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create an encoded blob key that represents a Google Storage file.

For now we'll just base64 encode the Google Storage filename, APIs that
accept encoded blob keys will need to be able to support Google Storage
files or blobstore files based on decoding this key.

Any stub that creates GS files should use this function to convert
a gs filename to a blobkey. The created blobkey should be used both
as its _GS_FILE_INFO entity's key name and as the storage key to
store its content in blobstore. This ensures the GS files created
can be operated by other APIs.

Note this encoding is easily reversible and is not encryption.

Args:
  filename: gs filename of form 'bucket/filename'

Returns:
  blobkey string of encoded filename.
</pre> 
</div>
</div>
<a class="anchor" id="af5895b33bb78df661b8391c14eb85ec0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub.DeleteBlob </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blobkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>storage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Delete a blob.

Args:
  blobkey: blobkey in str.
  storage: blobstore storage stub.
</pre> 
</div>
</div>
<a class="anchor" id="a6220ac229b75cdf91f0a3194e11fa82d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub.storage </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Access BlobStorage used by service stub.

Returns:
  BlobStorage instance used by blobstore service stub.
</pre> 
</div>
</div>
<a class="anchor" id="a380e92f73c0cfde997f05621fdb9c7a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.api.blobstore.blobstore_stub.BlobstoreServiceStub.ToDatastoreBlobKey </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blobkey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given a string blobkey, return its db.Key.</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>code/googleappengine-read-only/python/google/appengine/api/blobstore/blobstore_stub.py</li>
</ul>
</div><!-- contents -->
<address class="footer">
    <small>Maintained by <a href="http://www.tzmartin.com">tzmartin</a></small>
</address>