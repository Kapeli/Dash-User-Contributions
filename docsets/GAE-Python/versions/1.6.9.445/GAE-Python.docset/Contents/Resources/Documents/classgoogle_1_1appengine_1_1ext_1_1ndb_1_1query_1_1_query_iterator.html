<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>App Engine Python SDK: google.appengine.ext.ndb.query.QueryIterator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="common.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gae-python.logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">App Engine Python SDK
   &#160;<span id="projectnumber">v1.6.9 rev.445</span>
   </div>
   <div id="projectbrief">The Python runtime is available as an experimental Preview feature.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>google</b></li><li class="navelem"><b>appengine</b></li><li class="navelem"><b>ext</b></li><li class="navelem"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb.html">ndb</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1appengine_1_1ext_1_1ndb_1_1query.html">query</a></li><li class="navelem"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html">QueryIterator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google.appengine.ext.ndb.query.QueryIterator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for google.appengine.ext.ndb.query.QueryIterator:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.png" usemap="#google.appengine.ext.ndb.query.QueryIterator_map" alt=""/>
  <map id="google.appengine.ext.ndb.query.QueryIterator_map" name="google.appengine.ext.ndb.query.QueryIterator_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae800fca5569c5cc10a12a9692ab9f11b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#ae800fca5569c5cc10a12a9692ab9f11b">__init__</a></td></tr>
<tr class="separator:ae800fca5569c5cc10a12a9692ab9f11b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafb6babbb6b4dc58efd7904f5224f04b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#aafb6babbb6b4dc58efd7904f5224f04b">cursor_before</a></td></tr>
<tr class="separator:aafb6babbb6b4dc58efd7904f5224f04b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8faf02b6b3aedbf7cdc796246269cd41"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#a8faf02b6b3aedbf7cdc796246269cd41">cursor_after</a></td></tr>
<tr class="separator:a8faf02b6b3aedbf7cdc796246269cd41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a586ecb37fe9f3d098420c1421f717e96"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#a586ecb37fe9f3d098420c1421f717e96">index_list</a></td></tr>
<tr class="separator:a586ecb37fe9f3d098420c1421f717e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f98c59281c2a801e25b6c5fd8f960c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#a87f98c59281c2a801e25b6c5fd8f960c">__iter__</a></td></tr>
<tr class="separator:a87f98c59281c2a801e25b6c5fd8f960c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29482817a3b598860d8516ef3d5756d2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#a29482817a3b598860d8516ef3d5756d2">probably_has_next</a></td></tr>
<tr class="separator:a29482817a3b598860d8516ef3d5756d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5b0a8b344b716775b672c2a068f9a1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#ade5b0a8b344b716775b672c2a068f9a1">has_next</a></td></tr>
<tr class="separator:ade5b0a8b344b716775b672c2a068f9a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e18f10c9b26708c343b9fa18c046109"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#a0e18f10c9b26708c343b9fa18c046109">has_next_async</a></td></tr>
<tr class="separator:a0e18f10c9b26708c343b9fa18c046109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f599fea1e85e2edb6b1295700f2161"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1ext_1_1ndb_1_1query_1_1_query_iterator.html#a06f599fea1e85e2edb6b1295700f2161">next</a></td></tr>
<tr class="separator:a06f599fea1e85e2edb6b1295700f2161"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">This iterator works both for synchronous and async callers!

For synchronous callers, just use:

  for entity in Account.query():
    &lt;use entity&gt;

Async callers use this idiom:

  it = iter(Account.query())
  while (yield it.has_next_async()):
    entity = it.next()
    &lt;use entity&gt;

You can also use q.iter([options]) instead of iter(q); this allows
passing query options such as keys_only or produce_cursors.

When keys_only is set, it.next() returns a key instead of an entity.

When produce_cursors is set, the methods it.cursor_before() and
it.cursor_after() return Cursor objects corresponding to the query
position just before and after the item returned by it.next().
Before it.next() is called for the first time, both raise an
exception.  Once the loop is exhausted, both return the cursor after
the last item returned.  Calling it.has_next() does not affect the
cursors; you must call it.next() before the cursors move.  Note that
sometimes requesting a cursor requires a datastore roundtrip (but
not if you happen to request a cursor corresponding to a batch
boundary).  If produce_cursors is not set, both methods always raise
an exception.

Note that queries requiring in-memory merging of multiple queries
(i.e. queries using the IN, != or OR operators) do not support query
options.
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae800fca5569c5cc10a12a9692ab9f11b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q_options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Constructor.  Takes a Query and query options.

This is normally called by Query.iter() or Query.__iter__().
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a87f98c59281c2a801e25b6c5fd8f960c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.__iter__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Iterator protocol: get the iterator for this iterator, i.e. self.</pre> 
</div>
</div>
<a class="anchor" id="a8faf02b6b3aedbf7cdc796246269cd41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.cursor_after </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the cursor after the current item.

You must pass a QueryOptions object with produce_cursors=True
for this to work.

If there is no cursor or no current item, raise BadArgumentError.
Before next() has returned there is no cursor.    Once the loop is
exhausted, this returns the cursor after the last item.
</pre> 
</div>
</div>
<a class="anchor" id="aafb6babbb6b4dc58efd7904f5224f04b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.cursor_before </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the cursor before the current item.

You must pass a QueryOptions object with produce_cursors=True
for this to work.

If there is no cursor or no current item, raise BadArgumentError.
Before next() has returned there is no cursor.  Once the loop is
exhausted, this returns the cursor after the last item.
</pre> 
</div>
</div>
<a class="anchor" id="ade5b0a8b344b716775b672c2a068f9a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.has_next </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return whether a next item is available.

See the module docstring for the usage pattern.
</pre> 
</div>
</div>
<a class="anchor" id="a0e18f10c9b26708c343b9fa18c046109"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.has_next_async </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a Future whose result will say whether a next item is available.

See the module docstring for the usage pattern.
</pre> 
</div>
</div>
<a class="anchor" id="a586ecb37fe9f3d098420c1421f717e96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.index_list </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the list of indexes used for this query.

This returns a list of index representations, where an index
representation is the same as what is returned by get_indexes().

Before the first result, the information is unavailable, and then
None is returned.  This is not the same as an empty list -- the
empty list means that no index was used to execute the query.  (In
the dev_appserver, an empty list may also mean that only built-in
indexes were used; metadata queries also return an empty list
here.)

Proper use is as follows:
  q = &lt;modelclass&gt;.query(&lt;filters&gt;)
  i = q.iter()
  try:
i.next()
  except Stopiteration:
pass
  indexes = i.index_list()
  assert isinstance(indexes, list)

Notes:
- Forcing produce_cursors=False makes this always return None.
- This always returns None for a multi-query.
</pre> 
</div>
</div>
<a class="anchor" id="a06f599fea1e85e2edb6b1295700f2161"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.next </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Iterator protocol: get next item or raise StopIteration.</pre> 
</div>
</div>
<a class="anchor" id="a29482817a3b598860d8516ef3d5756d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.ext.ndb.query.QueryIterator.probably_has_next </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return whether a next item is (probably) available.

This is not quite the same as has_next(), because when
produce_cursors is set, some shortcuts are possible.  However, in
some cases (e.g. when the query has a post_filter) we can get a
false positive (returns True but next() will raise StopIteration).
There are no false negatives, if Batch.more_results doesn't lie.
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>code/googleappengine-read-only/python/google/appengine/ext/ndb/query.py</li>
</ul>
</div><!-- contents -->
<address class="footer">
    <small>Maintained by <a href="http://www.tzmartin.com">tzmartin</a></small>
</address>