<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>App Engine Python SDK: google.appengine.tools.bulkloader.Loader Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="common.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gae-python.logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">App Engine Python SDK
   &#160;<span id="projectnumber">v1.6.9 rev.445</span>
   </div>
   <div id="projectbrief">The Python runtime is available as an experimental Preview feature.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>google</b></li><li class="navelem"><b>appengine</b></li><li class="navelem"><b>tools</b></li><li class="navelem"><b>bulkloader</b></li><li class="navelem"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html">Loader</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google.appengine.tools.bulkloader.Loader Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for google.appengine.tools.bulkloader.Loader:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.png" usemap="#google.appengine.tools.bulkloader.Loader_map" alt=""/>
  <map id="google.appengine.tools.bulkloader.Loader_map" name="google.appengine.tools.bulkloader.Loader_map">
<area href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_restore_loader.html" alt="google.appengine.tools.bulkloader.RestoreLoader" shape="rect" coords="0,112,293,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae01a79089c8428c69dd4cc679e7c445e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#ae01a79089c8428c69dd4cc679e7c445e">__init__</a></td></tr>
<tr class="separator:ae01a79089c8428c69dd4cc679e7c445e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a181d7050ad3a41e41286d51952d2cbc9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#a181d7050ad3a41e41286d51952d2cbc9">get_keys_to_reserve</a></td></tr>
<tr class="separator:a181d7050ad3a41e41286d51952d2cbc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4978669dceef88f0366d740c936589c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#ae4978669dceef88f0366d740c936589c">alias_old_names</a></td></tr>
<tr class="separator:ae4978669dceef88f0366d740c936589c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73daa1cbc98b9d33c371ac387a0a7a98"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#a73daa1cbc98b9d33c371ac387a0a7a98">create_entity</a></td></tr>
<tr class="separator:a73daa1cbc98b9d33c371ac387a0a7a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8288499ed6c800aa769b29830f9d67c9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#a8288499ed6c800aa769b29830f9d67c9">generate_key</a></td></tr>
<tr class="separator:a8288499ed6c800aa769b29830f9d67c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac6a56dacd918f49f37c598322f9b43b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#aac6a56dacd918f49f37c598322f9b43b">handle_entity</a></td></tr>
<tr class="separator:aac6a56dacd918f49f37c598322f9b43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeffa219614dd259cc310a4c01fb1797a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#aeffa219614dd259cc310a4c01fb1797a">initialize</a></td></tr>
<tr class="separator:aeffa219614dd259cc310a4c01fb1797a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0b2fa31263681025c53d2ea622f11b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#afe0b2fa31263681025c53d2ea622f11b">finalize</a></td></tr>
<tr class="separator:afe0b2fa31263681025c53d2ea622f11b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901426ec9e90a2b6983db61db5a0dda4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#a901426ec9e90a2b6983db61db5a0dda4">generate_records</a></td></tr>
<tr class="separator:a901426ec9e90a2b6983db61db5a0dda4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a9cad2f81e859974dcc2f1d3a7d93b5ac"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#a9cad2f81e859974dcc2f1d3a7d93b5ac">RegisterLoader</a></td></tr>
<tr class="separator:a9cad2f81e859974dcc2f1d3a7d93b5ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a291e97afde50f5e4203f73350a5c4733"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#a291e97afde50f5e4203f73350a5c4733">RegisteredLoaders</a></td></tr>
<tr class="separator:a291e97afde50f5e4203f73350a5c4733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bdbc0ec19304fdbdfe308bf90853faf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1bulkloader_1_1_loader.html#a6bdbc0ec19304fdbdfe308bf90853faf">RegisteredLoader</a></td></tr>
<tr class="separator:a6bdbc0ec19304fdbdfe308bf90853faf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a28ae8c157df14304c811efe18a857bb2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a28ae8c157df14304c811efe18a857bb2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>kind</b> = None</td></tr>
<tr class="separator:a28ae8c157df14304c811efe18a857bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A base class for creating datastore entities from input data.

To add a handler for bulk loading a new entity kind into your datastore,
write a subclass of this class that calls Loader.__init__ from your
class's __init__.

If you need to run extra code to convert entities from the input
data, create new properties, or otherwise modify the entities before
they're inserted, override handle_entity.

See the create_entity method for the creation of entities from the
(parsed) input data.
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae01a79089c8428c69dd4cc679e7c445e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>properties</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Constructor.

Populates this Loader's kind and properties map.

Args:
  kind: a string containing the entity kind that this loader handles

  properties: list of (name, converter) tuples.

This is used to automatically convert the input columns into
properties.  The converter should be a function that takes one
argument, a string value from the input file, and returns a
correctly typed property value that should be inserted. The
tuples in this list should match the columns in your input file,
in order.

For example:
  [('name', str),
   ('id_number', int),
   ('email', datastore_types.Email),
   ('user', users.User),
   ('birthdate', lambda x: datetime.datetime.fromtimestamp(float(x))),
   ('description', datastore_types.Text),
   ]
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae4978669dceef88f0366d740c936589c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.alias_old_names </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Aliases method names so that Loaders defined with old names work.</pre> 
</div>
</div>
<a class="anchor" id="a73daa1cbc98b9d33c371ac387a0a7a98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.create_entity </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key_name</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parent</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates a entity from a list of property values.

Args:
  values: list/tuple of str
  key_name: if provided, the name for the (single) resulting entity
  parent: A datastore.Key instance for the parent, or None

Returns:
  list of db.Model

  The returned entities are populated with the property values from the
  argument, converted to native types using the properties map given in
  the constructor, and passed through handle_entity. They're ready to be
  inserted.

Raises:
  AssertionError: if the number of values doesn't match the number
of properties in the properties map.
  ValueError: if any element of values is None or empty.
  TypeError: if values is not a list or tuple.
</pre> 
</div>
</div>
<a class="anchor" id="afe0b2fa31263681025c53d2ea622f11b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.finalize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Performs finalization actions after the upload completes.</pre> 
</div>
</div>
<a class="anchor" id="a8288499ed6c800aa769b29830f9d67c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.generate_key </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Generates a key_name to be used in creating the underlying object.

The default implementation returns None.

This method can be overridden to control the key generation for
uploaded entities. The value returned should be None (to use a
server generated numeric key), or a string which neither starts
with a digit nor has the form __*__ (see
https://developers.google.com/appengine/docs/python/datastore/entities),
or a datastore.Key instance.

If you generate your own string keys, keep in mind:

1. The key name for each entity must be unique.
2. If an entity of the same kind and key already exists in the
   datastore, it will be overwritten.

Args:
  i: Number corresponding to this object (assume it's run in a loop,
this is your current count.
  values: list/tuple of str.

Returns:
  A string to be used as the key_name for an entity.
</pre> 
</div>
</div>
<a class="anchor" id="a901426ec9e90a2b6983db61db5a0dda4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.generate_records </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Subclasses can override this to add custom data input code.

This method must yield fixed-length lists of strings.

The default implementation uses csv.reader to read CSV rows
from filename.

Args:
  filename: The string input for the --filename option.

Yields:
  Lists of strings.
</pre> 
</div>
</div>
<a class="anchor" id="a181d7050ad3a41e41286d51952d2cbc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.get_keys_to_reserve </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns keys with ids in their paths to be reserved.

Returns:
  A list of keys used to advance the id sequences associated with
  each id to prevent collisions with future ids.
</pre> 
</div>
</div>
<a class="anchor" id="aac6a56dacd918f49f37c598322f9b43b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.handle_entity </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>entity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Subclasses can override this to add custom entity conversion code.

This is called for each entity, after its properties are populated
from the input but before it is stored. Subclasses can override
this to add custom entity handling code.

The entity to be inserted should be returned. If multiple entities
should be inserted, return a list of entities. If no entities
should be inserted, return None or [].

Args:
  entity: db.Model

Returns:
  db.Model or list of db.Model
</pre> 
</div>
</div>
<a class="anchor" id="aeffa219614dd259cc310a4c01fb1797a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.initialize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>loader_opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Performs initialization and validation of the input file.

This implementation checks that the input file exists and can be
opened for reading.

Args:
  filename: The string given as the --filename flag argument.
  loader_opts: The string given as the --loader_opts flag argument.
</pre> 
</div>
</div>
<a class="anchor" id="a6bdbc0ec19304fdbdfe308bf90853faf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.RegisteredLoader </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kind</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns the loader instance for the given kind if it exists.</pre> 
</div>
</div>
<a class="anchor" id="a291e97afde50f5e4203f73350a5c4733"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.RegisteredLoaders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns a dict of the Loader instances that have been created.</pre> 
</div>
</div>
<a class="anchor" id="a9cad2f81e859974dcc2f1d3a7d93b5ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.bulkloader.Loader.RegisterLoader </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>loader</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Register loader and the Loader instance for its kind.

Args:
  loader: A Loader instance.
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>code/googleappengine-read-only/python/google/appengine/tools/bulkloader.py</li>
</ul>
</div><!-- contents -->
<address class="footer">
    <small>Maintained by <a href="http://www.tzmartin.com">tzmartin</a></small>
</address>