<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>App Engine Python SDK: google.appengine.datastore.datastore_query.Batch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="common.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gae-python.logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">App Engine Python SDK
   &#160;<span id="projectnumber">v1.6.9 rev.445</span>
   </div>
   <div id="projectbrief">The Python runtime is available as an experimental Preview feature.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>google</b></li><li class="navelem"><b>appengine</b></li><li class="navelem"><b>datastore</b></li><li class="navelem"><b>datastore_query</b></li><li class="navelem"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html">Batch</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google.appengine.datastore.datastore_query.Batch Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for google.appengine.datastore.datastore_query.Batch:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.png" usemap="#google.appengine.datastore.datastore_query.Batch_map" alt=""/>
  <map id="google.appengine.datastore.datastore_query.Batch_map" name="google.appengine.datastore.datastore_query.Batch_map">
<area href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1___augmented_batch.html" alt="google.appengine.datastore.datastore_query._AugmentedBatch" shape="rect" coords="0,112,370,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a65272d72b8f02e0ed8575e23250d2f78"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a65272d72b8f02e0ed8575e23250d2f78"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>create_async</b></td></tr>
<tr class="separator:a65272d72b8f02e0ed8575e23250d2f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a23b5d290116b66dfb12fd4192cedd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#a78a23b5d290116b66dfb12fd4192cedd">__init__</a></td></tr>
<tr class="separator:a78a23b5d290116b66dfb12fd4192cedd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c19ccf2a42299b9856fa1cb46a71c0c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#a3c19ccf2a42299b9856fa1cb46a71c0c">query_options</a></td></tr>
<tr class="separator:a3c19ccf2a42299b9856fa1cb46a71c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad939c6b9380786a0b17274bb52a7d3a6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#ad939c6b9380786a0b17274bb52a7d3a6">query</a></td></tr>
<tr class="separator:ad939c6b9380786a0b17274bb52a7d3a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeb7e80af25d01ceb4d49e7534f0abb4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#afeb7e80af25d01ceb4d49e7534f0abb4">results</a></td></tr>
<tr class="separator:afeb7e80af25d01ceb4d49e7534f0abb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75ae039255be0f5c2950a682cee3e147"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#a75ae039255be0f5c2950a682cee3e147">keys_only</a></td></tr>
<tr class="separator:a75ae039255be0f5c2950a682cee3e147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a403d6f41b4c1cffbe1e0bc39645bc210"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#a403d6f41b4c1cffbe1e0bc39645bc210">index_list</a></td></tr>
<tr class="separator:a403d6f41b4c1cffbe1e0bc39645bc210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5060fd7c8c4fca07c65391ca88e4767"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#aa5060fd7c8c4fca07c65391ca88e4767">start_cursor</a></td></tr>
<tr class="separator:aa5060fd7c8c4fca07c65391ca88e4767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19a6e2372980ef3371730f1d78252344"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#a19a6e2372980ef3371730f1d78252344">end_cursor</a></td></tr>
<tr class="separator:a19a6e2372980ef3371730f1d78252344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26cf16d40bd73cf6ad56f18fee7adbe4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#a26cf16d40bd73cf6ad56f18fee7adbe4">skipped_results</a></td></tr>
<tr class="separator:a26cf16d40bd73cf6ad56f18fee7adbe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e1439d7d5cdc77ef91c2ee29ce4e1e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#ad1e1439d7d5cdc77ef91c2ee29ce4e1e">more_results</a></td></tr>
<tr class="separator:ad1e1439d7d5cdc77ef91c2ee29ce4e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01637199908bfbf58a46e175667c2844"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#a01637199908bfbf58a46e175667c2844">next_batch</a></td></tr>
<tr class="separator:a01637199908bfbf58a46e175667c2844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade116c41f91d9b0068ac1caf031a2433"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#ade116c41f91d9b0068ac1caf031a2433">cursor</a></td></tr>
<tr class="separator:ade116c41f91d9b0068ac1caf031a2433"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a332442ad4fa754e70d9af04615e863ff"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_batch.html#a332442ad4fa754e70d9af04615e863ff">next_batch_async</a></td></tr>
<tr class="separator:a332442ad4fa754e70d9af04615e863ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a465fe0c088126af6e0501c0683923e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a465fe0c088126af6e0501c0683923e"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__getstate__</b></td></tr>
<tr class="separator:a1a465fe0c088126af6e0501c0683923e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A batch of results returned by a query.

This class contains a batch of results returned from the datastore and
relevant metadata. This metadata includes:
  query: The query that produced this batch
  query_options: The QueryOptions used to run the query. This does not
    contained any options passed to the .next_batch() call that created the
    current batch.
  start_cursor, end_cursor: These are the cursors that can be used
    with a query to re-fetch this batch. They can also be used to
    find all entities before or after the given batch (by use start_cursor as
    an end cursor or vice versa). start_cursor can also be advanced to
    point to a position within the batch using Cursor.advance().
  skipped_results: the number of result skipped because of the offset
    given to the request that generated it. This can be set either on
    the original Query.run() request or in subsequent .next_batch() calls.
  more_results: If this is true there are more results that can be retrieved
    either by .next_batch() or Batcher.next().

This class is also able to fetch the next batch of the query using
.next_batch(). As batches of results must be fetched serially, .next_batch()
can only be called once. Additional calls to .next_batch() will return None.
When there are no more batches .next_batch() will return None as well. Note
that batches returned by iterating over Batcher will always return None for
.next_batch() as the Bather handles fetching the next batch automatically.

A Batch typically represents the result of a single RPC request. The datastore
operates on a "best effort" basis so the batch returned by .next_batch()
or Query.run_async().get_result() may not have satisfied the requested offset
or number of results (specified through FetchOptions.offset and
FetchOptions.batch_size respectively). To satisfy these restrictions
additional batches may be needed (with FetchOptions that specify the remaining
offset or results needed). The Batcher class hides these limitations.
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a78a23b5d290116b66dfb12fd4192cedd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch_shared</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start_cursor</em> = <code><a class="el" href="classgoogle_1_1appengine_1_1datastore_1_1datastore__query_1_1_cursor.html">Cursor</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Constructor.

This class is constructed in stages (one when an RPC is sent and another
when an rpc is completed) and should not be constructed directly!!
Use Query.run_async().get_result() to create a Batch or Query.run()
to use a batcher.

This constructor does not perform verification.

Args:
  batch_shared: Data shared between batches for a a single query run.
  start_cursor: Optional cursor pointing before this batch.
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ade116c41f91d9b0068ac1caf031a2433"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.cursor </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Gets the cursor that points just after the result at index - 1.

The index is relative to first result in .results. Since start_cursor
points to the position before the first skipped result, the range of
indexes this function supports is limited to
[-skipped_results, len(results)].

For example, using start_cursor=batch.cursor(i) and
end_cursor=batch.cursor(j) will return the results found in
batch.results[i:j]. Note that any result added in the range (i-1, j]
will appear in the new query's results.

Warning: Any index in the range (-skipped_results, 0) may cause
continuation to miss or duplicate results if outside a transaction.

Args:
  index: An int, the index relative to the first result before which the
cursor should point.

Returns:
  A Cursor that points to a position just after the result index - 1,
  which if used as a start_cursor will cause the first result to be
  batch.result[index].
</pre> 
</div>
</div>
<a class="anchor" id="a19a6e2372980ef3371730f1d78252344"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.end_cursor </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A cursor that points to the position just after the current batch.</pre> 
</div>
</div>
<a class="anchor" id="a403d6f41b4c1cffbe1e0bc39645bc210"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.index_list </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the list of indexes used to peform this batch's query.
Possibly None when the adapter does not implement pb_to_index.
</pre> 
</div>
</div>
<a class="anchor" id="a75ae039255be0f5c2950a682cee3e147"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.keys_only </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Whether the entities in this batch only contain keys.</pre> 
</div>
</div>
<a class="anchor" id="ad1e1439d7d5cdc77ef91c2ee29ce4e1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.more_results </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Whether more results can be retrieved from the query.</pre> 
</div>
</div>
<a class="anchor" id="a01637199908bfbf58a46e175667c2844"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.next_batch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fetch_options</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Synchronously get the next batch or None if there are no more batches.

Args:
  fetch_options: Optional fetch options to use when fetching the next batch.
Merged with both the fetch options on the original call and the
connection.

Returns:
  A new Batch of results or None if either the next batch has already been
  fetched or there are no more results.
</pre> 
</div>
</div>
<a class="anchor" id="a332442ad4fa754e70d9af04615e863ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.next_batch_async </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fetch_options</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Asynchronously get the next batch or None if there are no more batches.

Args:
  fetch_options: Optional fetch options to use when fetching the next batch.
Merged with both the fetch options on the original call and the
connection.

Returns:
  An async object that can be used to get the next Batch or None if either
  the next batch has already been fetched or there are no more results.
</pre> 
</div>
</div>
<a class="anchor" id="ad939c6b9380786a0b17274bb52a7d3a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.query </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The query the current batch came from.</pre> 
</div>
</div>
<a class="anchor" id="a3c19ccf2a42299b9856fa1cb46a71c0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.query_options </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The QueryOptions used to retrieve the first batch.</pre> 
</div>
</div>
<a class="anchor" id="afeb7e80af25d01ceb4d49e7534f0abb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.results </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A list of entities in this batch.</pre> 
</div>
</div>
<a class="anchor" id="a26cf16d40bd73cf6ad56f18fee7adbe4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.skipped_results </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The number of results skipped because of an offset in the request.

An offset is satisfied before any results are returned. The start_cursor
points to the position in the query before the skipped results.
</pre> 
</div>
</div>
<a class="anchor" id="aa5060fd7c8c4fca07c65391ca88e4767"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.datastore.datastore_query.Batch.start_cursor </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A cursor that points to the position just before the current batch.</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>code/googleappengine-read-only/python/google/appengine/datastore/datastore_query.py</li>
</ul>
</div><!-- contents -->
<address class="footer">
    <small>Maintained by <a href="http://www.tzmartin.com">tzmartin</a></small>
</address>