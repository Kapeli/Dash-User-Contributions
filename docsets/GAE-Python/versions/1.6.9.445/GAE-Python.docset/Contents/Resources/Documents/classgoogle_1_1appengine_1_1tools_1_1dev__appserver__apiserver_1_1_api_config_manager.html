<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>App Engine Python SDK: google.appengine.tools.dev_appserver_apiserver.ApiConfigManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="common.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gae-python.logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">App Engine Python SDK
   &#160;<span id="projectnumber">v1.6.9 rev.445</span>
   </div>
   <div id="projectbrief">The Python runtime is available as an experimental Preview feature.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>google</b></li><li class="navelem"><b>appengine</b></li><li class="navelem"><b>tools</b></li><li class="navelem"><b>dev_appserver_apiserver</b></li><li class="navelem"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.html">ApiConfigManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google.appengine.tools.dev_appserver_apiserver.ApiConfigManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for google.appengine.tools.dev_appserver_apiserver.ApiConfigManager:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.png" usemap="#google.appengine.tools.dev_appserver_apiserver.ApiConfigManager_map" alt=""/>
  <map id="google.appengine.tools.dev_appserver_apiserver.ApiConfigManager_map" name="google.appengine.tools.dev_appserver_apiserver.ApiConfigManager_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9556fb53a70e394b0885a1c6310b7470"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9556fb53a70e394b0885a1c6310b7470"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b></td></tr>
<tr class="separator:a9556fb53a70e394b0885a1c6310b7470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90c29ab043940151b92d3b2cf5138a5d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.html#a90c29ab043940151b92d3b2cf5138a5d">ParseApiConfigResponse</a></td></tr>
<tr class="separator:a90c29ab043940151b92d3b2cf5138a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a735a601449fe2c48ab5cff90abf22f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.html#a3a735a601449fe2c48ab5cff90abf22f">SaveRpcMethod</a></td></tr>
<tr class="separator:a3a735a601449fe2c48ab5cff90abf22f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f3f10d3a334a6de83c457a705e41cfc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.html#a8f3f10d3a334a6de83c457a705e41cfc">LookupRpcMethod</a></td></tr>
<tr class="separator:a8f3f10d3a334a6de83c457a705e41cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c3c69a6e5bffa2ffec44e47628a15ec"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.html#a2c3c69a6e5bffa2ffec44e47628a15ec">SaveRestMethod</a></td></tr>
<tr class="separator:a2c3c69a6e5bffa2ffec44e47628a15ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab63e21d709719da7f658912ac39ed005"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.html#ab63e21d709719da7f658912ac39ed005">LookupRestMethod</a></td></tr>
<tr class="separator:ab63e21d709719da7f658912ac39ed005"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:af5ca2989d9501fb1128c3ddde4aae933"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.html#af5ca2989d9501fb1128c3ddde4aae933">HasSpiEndpoint</a></td></tr>
<tr class="separator:af5ca2989d9501fb1128c3ddde4aae933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4c8dd245aaeec0093198f343582032"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1appengine_1_1tools_1_1dev__appserver__apiserver_1_1_api_config_manager.html#a2d4c8dd245aaeec0093198f343582032">CompilePathPattern</a></td></tr>
<tr class="separator:a2d4c8dd245aaeec0093198f343582032"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afaf797666c18d25b953045a468ff5bf7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afaf797666c18d25b953045a468ff5bf7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>configs</b></td></tr>
<tr class="separator:afaf797666c18d25b953045a468ff5bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Manages loading api configs and method lookup.</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2d4c8dd245aaeec0093198f343582032"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.dev_appserver_apiserver.ApiConfigManager.CompilePathPattern </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pattern</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Generates a compiled regex pattern for a path pattern.

e.g. '/{!name}/{!version}/notes/{id}'
returns re.compile(r'/([^:/?#\[\]{}]*)'
               r'/([^:/?#\[\]{}]*)'
               r'/notes/(?P&lt;id&gt;[^:/?#\[\]{}]*)')
Note in this example that !name and !version are reserved variable names
used to match the API name and version that should not be migrated into the
method argument namespace.  As such they are not named in the regex, so
groupdict() excludes them.

Args:
  pattern: parameterized path pattern to be checked

Returns:
  compiled regex to match this path pattern
</pre> 
</div>
</div>
<a class="anchor" id="af5ca2989d9501fb1128c3ddde4aae933"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.dev_appserver_apiserver.ApiConfigManager.HasSpiEndpoint </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Checks if an SPI is registered with this App.

Args:
  config: Parsed app.yaml as an appinfo proto.

Returns:
  True if any handler is registered for (/_ah/spi/.*).
</pre> 
</div>
</div>
<a class="anchor" id="ab63e21d709719da7f658912ac39ed005"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.dev_appserver_apiserver.ApiConfigManager.LookupRestMethod </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>http_method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Look up the rest method at call time.

The method is looked up in self._rest_methods, the list it is saved
in for SaveRestMethod.

Args:
  path: Path from the URL of the request.
  http_method: HTTP method of the request.

Returns:
  Tuple of (&lt;method name&gt;, &lt;method&gt;, &lt;params&gt;)
  Where:
&lt;method name&gt; is the string name of the method that was matched.
&lt;method&gt; is the descriptor as specified in the API configuration. -and-
&lt;params&gt; is a dict of path parameters matched in the rest request.
</pre> 
</div>
</div>
<a class="anchor" id="a8f3f10d3a334a6de83c457a705e41cfc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.dev_appserver_apiserver.ApiConfigManager.LookupRpcMethod </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Lookup the JsonRPC method at call time.

The method is looked up in self._rpc_method_dict, the dictionary that
it is saved in for SaveRpcMethod().

Args:
  method_name: String name of the method
  version: String version of the API

Returns:
  Method descriptor as specified in the API configuration.
</pre> 
</div>
</div>
<a class="anchor" id="a90c29ab043940151b92d3b2cf5138a5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.dev_appserver_apiserver.ApiConfigManager.ParseApiConfigResponse </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parses a json api config and registers methods for dispatch.

Side effects:
  Parses method name, etc for all methods and updates the indexing
  datastructures with the information.

Args:
  body: body of getApiConfigs response
</pre> 
</div>
</div>
<a class="anchor" id="a2c3c69a6e5bffa2ffec44e47628a15ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.dev_appserver_apiserver.ApiConfigManager.SaveRestMethod </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Store Rest api methods in a list for lookup at call time.

The list is self._rest_methods, a list of tuples:
  [(&lt;compiled_path&gt;, &lt;path_pattern&gt;, &lt;method_dict&gt;), ...]
where:
  &lt;compiled_path&gt; is a compiled regex to match against the incoming URL
  &lt;path_pattern&gt; is a string representing the original path pattern,
checked on insertion to prevent duplicates.     -and-
  &lt;method_dict&gt; is a dict (httpMethod, apiVersion) =&gt; (method_name, method)

This structure is a bit complex, it supports use in two contexts:
  Creation time:
- SaveRestMethod is called repeatedly, each method will have a path,
  which we want to be compiled for fast lookup at call time
- We want to prevent duplicate incoming path patterns, so store the
  un-compiled path, not counting on a compiled regex being a stable
  comparison as it is not documented as being stable for this use.
- Need to store the method that will be mapped at calltime.
- Different methods may have the same path but different http method.
  and/or API versions.
  Call time:
- Quickly scan through the list attempting .match(path) on each
  compiled regex to find the path that matches.
- When a path is matched, look up the API version and method from the
  request and get the method name and method config for the matching
  API method and method name.

Args:
  method_name: Name of the API method
  version: Version of the API
  method: method descriptor (as in the api config file).
</pre> 
</div>
</div>
<a class="anchor" id="a3a735a601449fe2c48ab5cff90abf22f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def google.appengine.tools.dev_appserver_apiserver.ApiConfigManager.SaveRpcMethod </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Store JsonRpc api methods in a map for lookup at call time.

(rpcMethodName, apiVersion) =&gt; method.

Args:
  method_name: Name of the API method
  version: Version of the API
  method: method descriptor (as in the api config file).
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>code/googleappengine-read-only/python/google/appengine/tools/dev_appserver_apiserver.py</li>
</ul>
</div><!-- contents -->
<address class="footer">
    <small>Maintained by <a href="http://www.tzmartin.com">tzmartin</a></small>
</address>