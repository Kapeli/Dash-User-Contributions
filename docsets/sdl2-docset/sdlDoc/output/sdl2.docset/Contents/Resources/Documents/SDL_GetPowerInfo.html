<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>SDL_GetPowerInfo</title>
    <script type="text/javascript" src="doc.js"></script>
  </head>
  <body>
    <div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><p class="line867">
</p><h1 id="SDL_GetPowerInfo-1">SDL_GetPowerInfo</h1>
<span class="anchor" id="line-5"></span><p class="line874">Use this function to get the current power supply details. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="#SDL_GetPowerInfo-1">SDL_GetPowerInfo</a><ol><li>
<a href="#Syntax">Syntax</a></li><li>
<a href="#Function_Parameters">Function Parameters</a></li><li>
<a href="#Return_Value">Return Value</a></li><li>
<a href="#Code_Examples">Code Examples</a></li><li>
<a href="#Remarks">Remarks</a></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span></p><p class="line867">
</p><h2 id="Syntax">Syntax</h2>
<span class="anchor" id="line-10"></span><p class="line867"><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_559\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_559" lang="en"><span class="line"><span class="n">SDL_PowerState</span> <span class="n">SDL_GetPowerInfo</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">secs</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">pct</span><span class="p">)</span>
</span></pre></div><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line867">
</p><h2 id="Function_Parameters">Function Parameters</h2>
<span class="anchor" id="line-15"></span><div><table><tbody><tr>  <td><p class="line891"><strong>secs</strong></p></td>
  <td><p class="line862">seconds of battery life left. You can pass a NULL here if you don't care. Will return -1 if we can't determine a value, or we're not running on a battery</p></td>
</tr>
<tr>  <td><span class="anchor" id="line-16"></span><p class="line891"><strong>pct</strong></p></td>
  <td><p class="line862">percentage of battery life left, between 0 and 100. You can pass a NULL here if you don't care. Will return -1 if we can't determine a value, or we're not running on a battery</p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867">
</p><h2 id="Return_Value">Return Value</h2>
<span class="anchor" id="line-19"></span><p class="line874">Returns the state of the battery, if any.  Return values may be any of the following: <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></p><p class="line867"></p><div dir="ltr" id="SDL_PowerState.content" lang="en"><span class="anchor" id="SDL_PowerState.top"></span>
<span class="anchor" id="SDL_PowerState.line-1"></span><span class="anchor" id="SDL_PowerState.line-2"></span><div><table><tbody><tr>  <td><p class="line862">SDL_POWERSTATE_UNKNOWN</p></td>
  <td><p class="line862">cannot determine power status</p></td>
</tr>
<tr>  <td><span class="anchor" id="SDL_PowerState.line-3"></span><p class="line862">SDL_POWERSTATE_ON_BATTERY</p></td>
  <td><p class="line862">not plugged in, running on the battery</p></td>
</tr>
<tr>  <td><span class="anchor" id="SDL_PowerState.line-4"></span><p class="line862">SDL_POWERSTATE_NO_BATTERY</p></td>
  <td><p class="line862">plugged in, no battery available</p></td>
</tr>
<tr>  <td><span class="anchor" id="SDL_PowerState.line-5"></span><p class="line862">SDL_POWERSTATE_CHARGING</p></td>
  <td><p class="line862">plugged in, charging battery</p></td>
</tr>
<tr>  <td><span class="anchor" id="SDL_PowerState.line-6"></span><p class="line862">SDL_POWERSTATE_CHARGED</p></td>
  <td><p class="line862">plugged in, battery charged</p></td>
</tr>
</tbody></table></div><span class="anchor" id="SDL_PowerState.line-7"></span><span class="anchor" id="SDL_PowerState.line-8"></span><span class="anchor" id="SDL_PowerState.bottom"></span></div> <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line862">See <a href="/SDL_PowerState">SDL_PowerState</a> for more info. <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></p><p class="line874">Both parameters will return -1 if a value can't be determined, or if not running on a battery. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span></p><p class="line867">
</p><h2 id="Code_Examples">Code Examples</h2>
<span class="anchor" id="line-28"></span><p class="line867"><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_560\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_560" lang="en"><span class="line"><span class="kt">int</span> <span class="n">secs</span><span class="p">,</span> <span class="n">pct</span><span class="p">;</span> 
</span><span class="line"><span class="k">if</span> <span class="p">(</span><span class="n">SDL_GetPowerInfo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">secs</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pct</span><span class="p">)</span> <span class="o">==</span> <span class="n">SDL_POWERSTATE_ON_BATTERY</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="n">printf</span><span class="p">(</span><span class="s">"Battery is draining: "</span><span class="p">);</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">secs</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">printf</span><span class="p">(</span><span class="s">"(unknown time left)</span><span class="se">
</span><span class="s">"</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">printf</span><span class="p">(</span><span class="s">"(%d seconds left)</span><span class="se">
</span><span class="s">"</span><span class="p">,</span> <span class="n">secs</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">pct</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">printf</span><span class="p">(</span><span class="s">"(unknown percentage left)</span><span class="se">
</span><span class="s">"</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">printf</span><span class="p">(</span><span class="s">"(%d percent left)</span><span class="se">
</span><span class="s">"</span><span class="p">,</span> <span class="n">pct</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></pre></div><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line867">
</p><h2 id="Remarks">Remarks</h2>
<span class="anchor" id="line-47"></span><p class="line874">You should never take a battery status as absolute truth. Batteries (especially failing batteries) are delicate hardware, and the values reported here are best estimates based on what that hardware reports. It's not uncommon for older batteries to lose stored power much faster than it reports, or completely drain when reporting it has 20 percent left, etc. <span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span></p><p class="line874">Battery status can change at any time; if you are concerned with power state, you should call this function frequently, and perhaps ignore changes until they seem to be stable for a few seconds. <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span></p><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-52"></span><a href="/CategoryAPI"><strong class="highlight">CategoryAPI</strong></a>, <a href="/CategoryPower">CategoryPower</a> <span class="anchor" id="line-53"></span><span class="anchor" id="bottom"></span></p></div>
  </body>
</html>
