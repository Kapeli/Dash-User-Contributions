<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>SDL_GL_BindTexture</title>
    <script type="text/javascript" src="doc.js"></script>
  </head>
  <body>
    <div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867">
</p><h1 id="SDL_GL_BindTexture-1">SDL_GL_BindTexture</h1>
<span class="anchor" id="line-4"></span><p class="line874">Use this function to bind an OpenGL/ES/ES2 texture to the current context for use with when rendering OpenGL primitives directly. <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="#SDL_GL_BindTexture-1">SDL_GL_BindTexture</a><ol><li>
<a href="#Syntax">Syntax</a></li><li>
<a href="#Function_Parameters">Function Parameters</a></li><li>
<a href="#Return_Value">Return Value</a></li><li>
<a href="#Code_Examples">Code Examples</a></li><li>
<a href="#Remarks">Remarks</a></li><li>
<a href="#Related_Functions">Related Functions</a></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span></p><p class="line867">
</p><h2 id="Syntax">Syntax</h2>
<span class="anchor" id="line-9"></span><p class="line867"><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_55\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_55" lang="en"><span class="line"><span class="kt">int</span> <span class="n">SDL_GL_BindTexture</span><span class="p">(</span><span class="n">SDL_Texture</span> <span class="o">*</span><span class="n">texture</span><span class="p">,</span> <span class="kt">float</span> <span class="o">*</span><span class="n">texw</span><span class="p">,</span> <span class="kt">float</span> <span class="o">*</span><span class="n">texh</span><span class="p">)</span>
</span></pre></div><span class="anchor" id="line-12"></span><p class="line867">
</p><h2 id="Function_Parameters">Function Parameters</h2>
<span class="anchor" id="line-13"></span><div><table><tbody><tr>  <td><p class="line891"><strong>texture</strong> </p></td>
  <td><p class="line862">the texture to bind to the current OpenGL/ES/ES2 context </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-14"></span><p class="line891"><strong>texw</strong> </p></td>
  <td><p class="line862">a pointer to a float value which will be filled with the texture width or NULL if you don't need that value </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-15"></span><p class="line891"><strong>texh</strong> </p></td>
  <td><p class="line862">a pointer to a float value which will be filled with the texture height or NULL if you don't need that value </p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867">
</p><h2 id="Return_Value">Return Value</h2>
<span class="anchor" id="line-19"></span><p class="line874">Returns 0 on success, or -1 if the operation is not supported <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></p><p class="line867">
</p><h2 id="Code_Examples">Code Examples</h2>
<span class="anchor" id="line-22"></span><p class="line862">The following are three examples extracted from the <a class="http" href="http://ignifuga.org">Ignifuga Game Engine</a> that show how to integrate <a class="http" href="http://librocket.com">libRocket</a> (which uses OpenGL for rendering) with SDL2. <span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span></p><p class="line867"><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_56\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_56" lang="en"><span class="line"><span class="kt">void</span> <span class="n">RocketSDLRenderInterfaceOpenGL</span><span class="o">::</span><span class="n">RenderGeometry</span><span class="p">(</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vertex</span><span class="o">*</span> <span class="n">vertices</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_vertices</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">indices</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_indices</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">TextureHandle</span> <span class="n">texture</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vector2f</span><span class="o">&amp;</span> <span class="n">translation</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="c1">// SDL uses shaders that we need to disable here</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glUseProgramObjectARB</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glPushMatrix</span><span class="p">();</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glTranslatef</span><span class="p">(</span><span class="n">translation</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">translation</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vector2f</span><span class="o">&gt;</span> <span class="n">Positions</span><span class="p">(</span><span class="n">num_vertices</span><span class="p">);</span>
</span><span class="line">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Colourb</span><span class="o">&gt;</span> <span class="n">Colors</span><span class="p">(</span><span class="n">num_vertices</span><span class="p">);</span>
</span><span class="line">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vector2f</span><span class="o">&gt;</span> <span class="n">TexCoords</span><span class="p">(</span><span class="n">num_vertices</span><span class="p">);</span>
</span><span class="line">    <span class="kt">float</span> <span class="n">texw</span><span class="p">,</span> <span class="n">texh</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="n">SDL_Texture</span><span class="o">*</span> <span class="n">sdl_texture</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">texture</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_TEXTURE_COORD_ARRAY</span><span class="p">);</span>
</span><span class="line">        <span class="n">sdl_texture</span> <span class="o">=</span> <span class="p">(</span><span class="n">SDL_Texture</span> <span class="o">*</span><span class="p">)</span> <span class="n">texture</span><span class="p">;</span>
</span><span class="line">        <span class="n">SDL_GL_BindTexture</span><span class="p">(</span><span class="n">sdl_texture</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">texw</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">texh</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span>  <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_vertices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">Positions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">position</span><span class="p">;</span>
</span><span class="line">        <span class="n">Colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">colour</span><span class="p">;</span>
</span><span class="line">        <span class="k">if</span> <span class="p">(</span><span class="n">sdl_texture</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">            <span class="n">TexCoords</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">tex_coord</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">texw</span><span class="p">;</span>
</span><span class="line">            <span class="n">TexCoords</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">tex_coord</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">texh</span><span class="p">;</span>
</span><span class="line">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">            <span class="n">TexCoords</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">tex_coord</span><span class="p">;</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_VERTEX_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_COLOR_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glVertexPointer</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Positions</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glColorPointer</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Colors</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glTexCoordPointer</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">TexCoords</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glTexEnvf</span><span class="p">(</span><span class="n">GL_TEXTURE_ENV</span><span class="p">,</span> <span class="n">GL_TEXTURE_ENV_MODE</span><span class="p">,</span> <span class="n">GL_MODULATE</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_BLEND</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glBlendFunc</span><span class="p">(</span><span class="n">GL_SRC_ALPHA</span><span class="p">,</span> <span class="n">GL_ONE_MINUS_SRC_ALPHA</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDrawElements</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">,</span> <span class="n">num_indices</span><span class="p">,</span> <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span> <span class="n">indices</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableClientState</span><span class="p">(</span><span class="n">GL_VERTEX_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableClientState</span><span class="p">(</span><span class="n">GL_COLOR_ARRAY</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">sdl_texture</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">SDL_GL_UnbindTexture</span><span class="p">(</span><span class="n">sdl_texture</span><span class="p">);</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableClientState</span><span class="p">(</span><span class="n">GL_TEXTURE_COORD_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glColor4f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glPopMatrix</span><span class="p">();</span>
</span><span class="line"><span class="p">}</span>
</span></pre></div><span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><p class="line867"><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_57\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_57" lang="en"><span class="line"><span class="kt">void</span> <span class="n">RocketSDLRenderInterfaceOpenGLES</span><span class="o">::</span><span class="n">RenderGeometry</span><span class="p">(</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vertex</span><span class="o">*</span> <span class="n">vertices</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_vertices</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">indices</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_indices</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">TextureHandle</span> <span class="n">texture</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vector2f</span><span class="o">&amp;</span> <span class="n">translation</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glPushMatrix</span><span class="p">();</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glTranslatef</span><span class="p">(</span><span class="n">translation</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">translation</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vector2f</span><span class="o">&gt;</span> <span class="n">Positions</span><span class="p">(</span><span class="n">num_vertices</span><span class="p">);</span>
</span><span class="line">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Colourb</span><span class="o">&gt;</span> <span class="n">Colors</span><span class="p">(</span><span class="n">num_vertices</span><span class="p">);</span>
</span><span class="line">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vector2f</span><span class="o">&gt;</span> <span class="n">TexCoords</span><span class="p">(</span><span class="n">num_vertices</span><span class="p">);</span>
</span><span class="line">    <span class="kt">float</span> <span class="n">texw</span><span class="p">,</span> <span class="n">texh</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="n">SDL_Texture</span><span class="o">*</span> <span class="n">sdl_texture</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">texture</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_TEXTURE_COORD_ARRAY</span><span class="p">);</span>
</span><span class="line">        <span class="n">sdl_texture</span> <span class="o">=</span> <span class="p">(</span><span class="n">SDL_Texture</span> <span class="o">*</span><span class="p">)</span> <span class="n">texture</span><span class="p">;</span>
</span><span class="line">        <span class="n">SDL_GL_BindTexture</span><span class="p">(</span><span class="n">sdl_texture</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">texw</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">texh</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span>  <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_vertices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">Positions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">position</span><span class="p">;</span>
</span><span class="line">        <span class="n">Colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">colour</span><span class="p">;</span>
</span><span class="line">        <span class="k">if</span> <span class="p">(</span><span class="n">sdl_texture</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">            <span class="n">TexCoords</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">tex_coord</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">texw</span><span class="p">;</span>
</span><span class="line">            <span class="n">TexCoords</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">tex_coord</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">texh</span><span class="p">;</span>
</span><span class="line">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">            <span class="n">TexCoords</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">tex_coord</span><span class="p">;</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">newIndicies</span><span class="p">[</span><span class="n">num_indices</span><span class="p">];</span>
</span><span class="line">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_indices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">newIndicies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span><span class="p">)</span> <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_VERTEX_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_COLOR_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glVertexPointer</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Positions</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glColorPointer</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Colors</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glTexCoordPointer</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">TexCoords</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class="line">
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glTexEnvf</span><span class="p">(</span><span class="n">GL_TEXTURE_ENV</span><span class="p">,</span> <span class="n">GL_TEXTURE_ENV_MODE</span><span class="p">,</span> <span class="n">GL_MODULATE</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_BLEND</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glBlendFunc</span><span class="p">(</span><span class="n">GL_SRC_ALPHA</span><span class="p">,</span> <span class="n">GL_ONE_MINUS_SRC_ALPHA</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDrawElements</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">,</span> <span class="n">num_indices</span><span class="p">,</span> <span class="n">GL_UNSIGNED_SHORT</span><span class="p">,</span> <span class="n">newIndicies</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableClientState</span><span class="p">(</span><span class="n">GL_VERTEX_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableClientState</span><span class="p">(</span><span class="n">GL_COLOR_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableClientState</span><span class="p">(</span><span class="n">GL_TEXTURE_COORD_ARRAY</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">sdl_texture</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">SDL_GL_UnbindTexture</span><span class="p">(</span><span class="n">sdl_texture</span><span class="p">);</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableClientState</span><span class="p">(</span><span class="n">GL_TEXTURE_COORD_ARRAY</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glColor4f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glPopMatrix</span><span class="p">();</span>
</span><span class="line"><span class="p">}</span>
</span></pre></div><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><p class="line867"><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_58\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_58" lang="en"><span class="line">    <span class="n">SDL_Texture</span><span class="o">*</span> <span class="n">sdl_texture</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">texture</span><span class="p">)</span> <span class="n">render_data</span><span class="p">.</span><span class="n">glUseProgram</span><span class="p">(</span><span class="n">program_texture_id</span><span class="p">);</span>
</span><span class="line">    <span class="k">else</span> <span class="n">render_data</span><span class="p">.</span><span class="n">glUseProgram</span><span class="p">(</span><span class="n">program_color_id</span><span class="p">);</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">;</span>
</span><span class="line">    <span class="n">SDL_Rect</span> <span class="n">rvp</span><span class="p">;</span>
</span><span class="line">    <span class="n">SDL_RenderGetViewport</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">rvp</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="n">GLfloat</span> <span class="n">projection</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">4</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// Prepare an orthographic projection</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.0f</span> <span class="o">/</span> <span class="n">rvp</span><span class="p">.</span><span class="n">w</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="c1">//if (renderer-&gt;target) {</span>
</span><span class="line">    <span class="c1">//    projection[1][1] = 2.0f / height;</span>
</span><span class="line">    <span class="c1">//} else {</span>
</span><span class="line">        <span class="n">projection</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0f</span> <span class="o">/</span> <span class="n">rvp</span><span class="p">.</span><span class="n">h</span><span class="p">;</span>
</span><span class="line">    <span class="c1">//}</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">;</span>
</span><span class="line">    <span class="c1">//if (renderer-&gt;target) {</span>
</span><span class="line">    <span class="c1">//    projection[3][1] = -1.0f;</span>
</span><span class="line">    <span class="c1">//} else {</span>
</span><span class="line">        <span class="n">projection</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
</span><span class="line">    <span class="c1">//}</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">projection</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// Set the projection matrix</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">texture</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glUniformMatrix4fv</span><span class="p">(</span><span class="n">u_texture_projection</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">GL_FALSE</span><span class="p">,</span> <span class="p">(</span><span class="n">GLfloat</span> <span class="o">*</span><span class="p">)</span><span class="n">projection</span><span class="p">);</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glUniform2f</span><span class="p">(</span><span class="n">u_texture_translation</span><span class="p">,</span> <span class="n">translation</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">translation</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glUniformMatrix4fv</span><span class="p">(</span><span class="n">u_color_projection</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">GL_FALSE</span><span class="p">,</span> <span class="p">(</span><span class="n">GLfloat</span> <span class="o">*</span><span class="p">)</span><span class="n">projection</span><span class="p">);</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glUniform2f</span><span class="p">(</span><span class="n">u_color_translation</span><span class="p">,</span> <span class="n">translation</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">translation</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_BLEND</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glBlendFunc</span><span class="p">(</span><span class="n">GL_SRC_ALPHA</span><span class="p">,</span> <span class="n">GL_ONE_MINUS_SRC_ALPHA</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="kt">float</span> <span class="n">texw</span><span class="p">,</span> <span class="n">texh</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">newIndicies</span><span class="p">[</span><span class="n">num_indices</span><span class="p">];</span>
</span><span class="line">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_indices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="n">newIndicies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span><span class="p">)</span> <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_POSITION</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="n">GL_FALSE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vertex</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">position</span><span class="p">);</span>
</span><span class="line">    <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_COLOR</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">GL_TRUE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vertex</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">colour</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_POSITION</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_TEXCOORD</span><span class="p">);</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_COLOR</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">texture</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">sdl_texture</span> <span class="o">=</span> <span class="p">(</span><span class="n">SDL_Texture</span> <span class="o">*</span><span class="p">)</span> <span class="n">texture</span><span class="p">;</span>
</span><span class="line">        <span class="n">SDL_GL_BindTexture</span><span class="p">(</span><span class="n">sdl_texture</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">texw</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">texh</span><span class="p">);</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glUniform1i</span><span class="p">(</span><span class="n">u_texture</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class="line">        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_TEXCOORD</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="n">GL_FALSE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Rocket</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Vertex</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">tex_coord</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glActiveTexture</span><span class="p">(</span><span class="n">GL_TEXTURE0</span><span class="p">);</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glDisable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>
</span><span class="line">        <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableVertexAttribArray</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_TEXCOORD</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDrawElements</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">,</span> <span class="n">num_indices</span><span class="p">,</span> <span class="n">GL_UNSIGNED_SHORT</span><span class="p">,</span> <span class="n">newIndicies</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="cm">/* We can disable ROCKETGLUE_ATTRIBUTE_COLOR (2) safely as SDL will reenable the vertex attrib 2 if it is required */</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDisableVertexAttribArray</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_COLOR</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="cm">/* Leave ROCKETGLUE_ATTRIBUTE_POSITION (0) and ROCKETGLUE_ATTRIBUTE_TEXCOORD (1) enabled for compatibility with SDL which</span>
</span><span class="line"><span class="cm">       doesn't re enable them when you call RenderCopy/Ex */</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">sdl_texture</span><span class="p">)</span> <span class="n">SDL_GL_UnbindTexture</span><span class="p">(</span><span class="n">sdl_texture</span><span class="p">);</span>
</span><span class="line">    <span class="k">else</span> <span class="n">render_data</span><span class="p">.</span><span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="n">ROCKETGLUE_ATTRIBUTE_TEXCOORD</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="cm">/* Reset blending and draw a fake point just outside the screen to let SDL know that it needs to reset its state in case it wants to render a texture */</span>
</span><span class="line">    <span class="n">render_data</span><span class="p">.</span><span class="n">glDisable</span><span class="p">(</span><span class="n">GL_BLEND</span><span class="p">);</span>
</span><span class="line">    <span class="n">SDL_SetRenderDrawBlendMode</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">SDL_BLENDMODE_NONE</span><span class="p">);</span>
</span><span class="line">    <span class="n">SDL_RenderDrawPoint</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></pre></div><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><p class="line867">
</p><h2 id="Remarks">Remarks</h2>
<span class="anchor" id="line-229"></span><p class="line874">If provided, texw and texh will be filled with the width and height values suitable for the provided texture.  <span class="anchor" id="line-230"></span>In most cases, both will be 1.0, however, on systems that support the GL_ARB_texture_rectangle extension, these values will actually be the pixel width and height used to create the texture, so this factor needs to be taken into account when providing texture coordinates to OpenGL. <span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span></p><p class="line867">
</p><h2 id="Related_Functions">Related Functions</h2>
<span class="anchor" id="line-233"></span><ul><li style="list-style-type:none"><p class="line891"><a href="/SDL_GL_UnbindTexture">SDL_GL_UnbindTexture</a> <span class="anchor" id="line-234"></span></p></li><li style="list-style-type:none"><p class="line891"><a href="/SDL_GL_MakeCurrent">SDL_GL_MakeCurrent</a> <span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span></p></li></ul><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-237"></span><a href="/CategoryAPI"><strong class="highlight">CategoryAPI</strong></a>, <a href="/CategoryVideo">CategoryVideo</a> <span class="anchor" id="line-238"></span><span class="anchor" id="bottom"></span></p></div>
  </body>
</html>
