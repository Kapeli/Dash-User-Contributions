<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>SDL_GetClosestDisplayMode</title>
    <script type="text/javascript" src="doc.js"></script>
  </head>
  <body>
    <div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867">
</p><h1 id="SDL_GetClosestDisplayMode-1">SDL_GetClosestDisplayMode</h1>
<span class="anchor" id="line-4"></span><p class="line874">Use this function to get the closest match to the requested display mode. <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="#SDL_GetClosestDisplayMode-1">SDL_GetClosestDisplayMode</a><ol><li>
<a href="#Syntax">Syntax</a></li><li>
<a href="#Function_Parameters">Function Parameters</a></li><li>
<a href="#Return_Value">Return Value</a></li><li>
<a href="#Code_Examples">Code Examples</a></li><li>
<a href="#Remarks">Remarks</a></li><li>
<a href="#Related_Functions">Related Functions</a></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span></p><p class="line867">
</p><h2 id="Syntax">Syntax</h2>
<span class="anchor" id="line-9"></span><p class="line867"><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_507\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_507" lang="en"><span class="line"><span class="n">SDL_DisplayMode</span><span class="o">*</span> <span class="n">SDL_GetClosestDisplayMode</span><span class="p">(</span><span class="kt">int</span>                    <span class="n">displayIndex</span><span class="p">,</span>
</span><span class="line">                                           <span class="k">const</span> <span class="n">SDL_DisplayMode</span><span class="o">*</span> <span class="n">mode</span><span class="p">,</span>
</span><span class="line">                                           <span class="n">SDL_DisplayMode</span><span class="o">*</span>       <span class="n">closest</span><span class="p">)</span>
</span></pre></div><span class="anchor" id="line-14"></span><p class="line867">
</p><h2 id="Function_Parameters">Function Parameters</h2>
<span class="anchor" id="line-15"></span><div><table><tbody><tr>  <td><p class="line891"><strong>displayIndex</strong> </p></td>
  <td><p class="line862">the index of the display to query </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-16"></span><p class="line891"><strong>mode</strong> </p></td>
  <td><p class="line862">an <a href="/SDL_DisplayMode">SDL_DisplayMode</a> structure containing the desired display mode </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-17"></span><p class="line891"><strong>closest</strong> </p></td>
  <td><p class="line862">an <a href="/SDL_DisplayMode">SDL_DisplayMode</a> structure filled in with the closest match of the available display modes </p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line867">
</p><h2 id="Return_Value">Return Value</h2>
<span class="anchor" id="line-21"></span><p class="line862">Returns the passed in value <strong>closest</strong> or NULL if no matching video mode was available; call <a href="/SDL_GetError">SDL_GetError</a>() for more information. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span></p><p class="line867">
</p><h2 id="Code_Examples">Code Examples</h2>
<span class="anchor" id="line-24"></span><p class="line867"><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_508\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_508" lang="en"><span class="line"><span class="c1">// Using SDL2's SDL_GetClosestDisplayMode()</span>
</span><span class="line">
</span><span class="line"><span class="cp">#include "SDL.h"</span>
</span><span class="line"><span class="cp">#include &lt;stdio.h&gt;</span>
</span><span class="line">
</span><span class="line"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]){</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// Declare structures to be filled in.</span>
</span><span class="line">  <span class="n">SDL_DisplayMode</span> <span class="n">target</span><span class="p">,</span> <span class="n">closest</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">  <span class="n">SDL_Init</span><span class="p">(</span><span class="n">SDL_INIT_VIDEO</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// Set the desired resolution, etc.</span>
</span><span class="line">  <span class="n">target</span><span class="p">.</span><span class="n">w</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span>
</span><span class="line">  <span class="n">target</span><span class="p">.</span><span class="n">h</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
</span><span class="line">  <span class="n">target</span><span class="p">.</span><span class="n">format</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// don't care</span>
</span><span class="line">  <span class="n">target</span><span class="p">.</span><span class="n">refresh_rate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// don't care</span>
</span><span class="line">  <span class="n">target</span><span class="p">.</span><span class="n">driverdata</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// initialize to 0</span>
</span><span class="line">  <span class="n">printf</span><span class="p">(</span><span class="s">"Requesting: </span><span class="se">	</span><span class="s">%dx%dpx @ %dhz </span><span class="se">
</span><span class="s">"</span><span class="p">,</span> <span class="n">target</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="n">target</span><span class="p">.</span><span class="n">h</span><span class="p">,</span> <span class="n">target</span><span class="p">.</span><span class="n">refresh_rate</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// Pass the display mode structures by reference to SDL_GetClosestDisplay</span>
</span><span class="line">  <span class="c1">// and check whether the result is a null pointer.</span>
</span><span class="line">  <span class="k">if</span><span class="p">(</span><span class="n">SDL_GetClosestDisplayMode</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">target</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">closest</span><span class="p">)</span><span class="o">==</span><span class="nb">NULL</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// If the returned pointer is null, no match was found.</span>
</span><span class="line">    <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">
</span><span class="s">No suitable display mode was found!</span><span class="se">

</span><span class="s">"</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">  <span class="k">else</span>
</span><span class="line">    <span class="c1">// Otherwise, a display mode close to the target is available.</span>
</span><span class="line">    <span class="c1">// Access the SDL_DisplayMode structure to see what was received.</span>
</span><span class="line">    <span class="n">printf</span><span class="p">(</span><span class="s">"  Received: </span><span class="se">	</span><span class="s">%dx%dpx @ %dhz </span><span class="se">
</span><span class="s">"</span><span class="p">,</span> <span class="n">closest</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="n">closest</span><span class="p">.</span><span class="n">h</span><span class="p">,</span> <span class="n">closest</span><span class="p">.</span><span class="n">refresh_rate</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// Clean up and exit the program.</span>
</span><span class="line">  <span class="n">SDL_Quit</span><span class="p">();</span>
</span><span class="line">  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="p">}</span>
</span></pre></div><span class="anchor" id="line-63"></span><p class="line867">
</p><h2 id="Remarks">Remarks</h2>
<span class="anchor" id="line-64"></span><p class="line862">The available display modes are scanned and <strong>closest</strong> is filled in with the closest mode matching the requested mode and returned. The mode format and refresh rate default to the desktop mode if they are set to 0. The modes are scanned with size being first priority, format being second priority, and finally checking the refresh rate. If all the available modes are too small, then NULL is returned. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span></p><p class="line867">
</p><h2 id="Related_Functions">Related Functions</h2>
<span class="anchor" id="line-67"></span><ul><li style="list-style-type:none"><p class="line891"><a href="/SDL_GetDisplayMode">SDL_GetDisplayMode</a> <span class="anchor" id="line-68"></span></p></li><li style="list-style-type:none"><p class="line891"><a href="/SDL_GetNumDisplayModes">SDL_GetNumDisplayModes</a> <span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span></p></li></ul><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-71"></span><a href="/CategoryAPI"><strong class="highlight">CategoryAPI</strong></a>, !CategoryVideo <span class="anchor" id="line-72"></span><span class="anchor" id="bottom"></span></p></div>
  </body>
</html>
