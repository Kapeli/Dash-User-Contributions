<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>SDL_MixAudioFormat</title>
    <script type="text/javascript" src="doc.js"></script>
  </head>
  <body>
    <div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><p class="line867">
</p><h1 id="SDL_MixAudioFormat-1">SDL_MixAudioFormat</h1>
<span class="anchor" id="line-5"></span><p class="line874">Use this function to mix audio data in a specified format. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="#SDL_MixAudioFormat-1">SDL_MixAudioFormat</a><ol><li>
<a href="#Syntax">Syntax</a></li><li>
<a href="#Function_Parameters">Function Parameters</a></li><li>
<a href="#Code_Examples">Code Examples</a></li><li>
<a href="#Remarks">Remarks</a></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span></p><p class="line867">
</p><h2 id="Syntax">Syntax</h2>
<span class="anchor" id="line-10"></span><p class="line867"><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_246\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_246" lang="en"><span class="line"><span class="kt">void</span> <span class="n">SDL_MixAudioFormat</span><span class="p">(</span><span class="n">Uint8</span><span class="o">*</span>          <span class="n">dst</span><span class="p">,</span>
</span><span class="line">                        <span class="k">const</span> <span class="n">Uint8</span><span class="o">*</span>    <span class="n">src</span><span class="p">,</span>
</span><span class="line">                        <span class="n">SDL_AudioFormat</span> <span class="n">format</span><span class="p">,</span>
</span><span class="line">                        <span class="n">Uint32</span>          <span class="n">len</span><span class="p">,</span> 
</span><span class="line">                        <span class="kt">int</span>             <span class="n">volume</span><span class="p">)</span>
</span></pre></div><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867">
</p><h2 id="Function_Parameters">Function Parameters</h2>
<span class="anchor" id="line-19"></span><div><table><tbody><tr>  <td><p class="line891"><strong>dst</strong></p></td>
  <td><p class="line862">the destination for the mixed audio</p></td>
</tr>
<tr>  <td><span class="anchor" id="line-20"></span><p class="line891"><strong>src</strong></p></td>
  <td><p class="line862">the source audio buffer to be mixed</p></td>
</tr>
<tr>  <td><span class="anchor" id="line-21"></span><p class="line891"><strong>format</strong></p></td>
  <td><p class="line862">the <a href="/SDL_AudioFormat">SDL_AudioFormat</a> structure representing the desired audio format</p></td>
</tr>
<tr>  <td><span class="anchor" id="line-22"></span><p class="line891"><strong>len</strong></p></td>
  <td><p class="line862">the length of the audio buffer in bytes</p></td>
</tr>
<tr>  <td><span class="anchor" id="line-23"></span><p class="line891"><strong>volume</strong></p></td>
  <td><p class="line862">ranges from 0 - 128, and should be set to SDL_MIX_MAXVOLUME for full audio volume</p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line867">
</p><h2 id="Code_Examples">Code Examples</h2>
<span class="anchor" id="line-26"></span><p class="line867"><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-pygments_247\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-pygments_247" lang="en"><span class="line"><span class="kt">void</span> <span class="nf">myAudioCallback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">udata</span><span class="p">,</span> <span class="n">Uint8</span> <span class="o">*</span><span class="n">stream</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="k">extern</span> <span class="n">SDL_AudioFormat</span> <span class="n">deviceFormat</span><span class="p">;</span>
</span><span class="line">    <span class="k">extern</span> <span class="k">const</span> <span class="n">Uint8</span> <span class="o">*</span><span class="n">mixData</span><span class="p">;</span>
</span><span class="line">    <span class="n">SDL_memset</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>  <span class="c1">// make sure this is silence.</span>
</span><span class="line">    <span class="c1">// mix our audio against the silence, at 50% volume.</span>
</span><span class="line">    <span class="n">SDL_MixAudioFormat</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">mixData</span><span class="p">,</span> <span class="n">deviceFormat</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="n">SDL_MIX_MAXVOLUME</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></pre></div><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line867">
</p><h2 id="Remarks">Remarks</h2>
<span class="anchor" id="line-39"></span><p class="line862">This takes an audio buffer <strong>src</strong> of <strong>len</strong> bytes of <strong>format</strong> data and mixes it into <strong>dst</strong>, performing addition, volume adjustment, and overflow clipping. The buffer pointed to by <strong>dst</strong> must also be <strong>len</strong> bytes of <strong>format</strong> data. <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span></p><p class="line874">This is provided for convenience -- you can mix your own audio data. <span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span></p><p class="line874">Do not use this function for mixing together more than two streams of sample data. The output from repeated application of this function may be distorted by clipping, because there is no accumulator with greater range than the input (not to mention this being an inefficient way of doing it). Use mixing functions from SDL_mixer, OpenAL, or write your own mixer instead. <span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span></p><p class="line862">It is a common misconception that this function is required to write audio data to an output stream in an audio callback.  While you can do that, <a href="/SDL_MixAudioFormat">SDL_MixAudioFormat</a>() is really only needed when you're mixing a single audio stream with a volume adjustment. <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span></p><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-48"></span><a href="/CategoryAPI"><strong class="highlight">CategoryAPI</strong></a>, <a href="/CategoryAudio">CategoryAudio</a> <span class="anchor" id="line-49"></span><span class="anchor" id="bottom"></span></p></div>
  </body>
</html>
