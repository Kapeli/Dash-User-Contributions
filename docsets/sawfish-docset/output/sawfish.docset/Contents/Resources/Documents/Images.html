<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>sawfish Programming Manual: Images</title>

<meta name="description" content="sawfish Programming Manual: Images">
<meta name="keywords" content="sawfish Programming Manual: Images">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Function-Index.html#Function-Index" rel="index" title="Function Index">
<link href="Concept-Index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="Cursors.html#Cursors" rel="next" title="Cursors">
<link href="Fonts.html#Fonts" rel="previous" title="Fonts">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Images"></a>
<div class="header">
<p>
Next: <a href="Cursors.html#Cursors" accesskey="n" rel="next">Cursors</a>, Previous: <a href="Fonts.html#Fonts" accesskey="p" rel="previous">Fonts</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-Index.html#Function-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Images-1"></a>
<h2 class="chapter">6 Images</h2>
<a name="index-Images"></a>

<p>The image type allows arbitrary 24-bit images to be manipulated by the
window manager. Images may be both loaded from files, and rendered
dynamically.
</p>
<dl>
<dt><a name="index-imagep"></a>Function: <strong>imagep</strong> <em>arg</em></dt>
<dd><p>Returns <code>t</code> when <var>arg</var> is a member of the image type.
</p></dd></dl>

<dl>
<dt><a name="index-make_002dimage"></a>Function: <strong>make-image</strong> <em>file-name <tt>#!optional</tt> plist</em></dt>
<dd><p>Creates and returns an image object containing the image defined by the
contents of the file named <var>file-name</var> (a string). The
<code>image-load-path</code> directory provides the search path used while
trying to find a directory containing the file named <var>file-name</var>.
</p>
<p>All common image formats will likely be able to be loaded. But PNG,
JPEG and XPM should always be supported.
</p>
<p>Argument <var>plist</var> becomes the property list of the returned image.
</p>
<p>Signals an error if file called <var>file-name</var> may be found, or if an
image may not be constructed from the file.
</p></dd></dl>

<dl>
<dt><a name="index-image_002ddirectory"></a>Variable: <strong>image-directory</strong></dt>
<dd><p>Directory containing built-in Sawfish images.  By default, this is
<code><var>sawfish-directory</var>/images</code>.
</p></dd></dl>

<dl>
<dt><a name="index-image_002dload_002dpath"></a>Variable: <strong>image-load-path</strong></dt>
<dd><p>A list of directory names. This defines the search path used when
loading images.  By default, this is <code>(&quot;.&quot;
<var>image-directory</var>)</code>.  Modifying <var>image-directory</var> does not
modify <var>image-load-path</var>.
</p></dd></dl>

<dl>
<dt><a name="index-make_002dsized_002dimage"></a>Function: <strong>make-sized-image</strong> <em>width height <tt>#!optional</tt> color</em></dt>
<dd><p>Create and return a new image, of size <var>width</var>,  <var>height</var>. If
<var>color</var> is defined it specifies the color of all pixels in the
image. If undefined, all pixels will be black.
</p></dd></dl>

<dl>
<dt><a name="index-make_002dimage_002dfrom_002dx_002ddrawable"></a>Function: <strong>make-image-from-x-drawable</strong> <em>id <tt>#!optional</tt> mask-id</em></dt>
<dd><p>Create and return an new image.  The image is constructed by copying
an X Drawable (identified by <var>id</var>) into a Sawfish image object.
The function automatically handles depth conversion.
</p>
<p>If <var>mask-id</var> is given, it identifies another X Drawable.  Black
pixels in this drawable indicate transparent pixels in the image
object (non-black pixels have no effect on the image object).
</p></dd></dl>

<dl>
<dt><a name="index-copy_002dimage"></a>Function: <strong>copy-image</strong> <em>image</em></dt>
<dd><p>Returns a newly allocated image object, an exact copy of the image
object <var>image</var>.
</p></dd></dl>

<dl>
<dt><a name="index-image_002ddimensions"></a>Function: <strong>image-dimensions</strong> <em>image</em></dt>
<dd><p>Returns a cons-cell <code>(<var>width</var> . <var>height</var>)</code> defining the
dimensions of the image represented by <var>image</var>.
</p></dd></dl>

<dl>
<dt><a name="index-flip_002dimage_002dhorizontally"></a>Function: <strong>flip-image-horizontally</strong> <em>image</em></dt>
<dd><p>Flip the contents of <var>image</var> about the vertical axis.
This is a mutating operation that returns the modified argument.
</p></dd></dl>

<dl>
<dt><a name="index-flip_002dimage_002dvertically"></a>Function: <strong>flip-image-vertically</strong> <em>image</em></dt>
<dd><p>Flip the contents of <var>image</var> about the horizontal axis.
This is a mutating operation that returns the modified argument.
</p></dd></dl>

<dl>
<dt><a name="index-flip_002dimage_002ddiagonally"></a>Function: <strong>flip-image-diagonally</strong> <em>image</em></dt>
<dd><p>Flip the contents of <var>image</var> about an axis running from the
top-left corner to the bottom-right corner of the image.
This is a mutating operation that returns the modified argument.
</p></dd></dl>

<p>As with many of the other types, arbitrary state may be associated with
image objects.
</p>
<dl>
<dt><a name="index-image_002dput"></a>Function: <strong>image-put</strong> <em>image property value</em></dt>
<dd><p>Set the property named <var>property</var> (a symbol) of <var>image</var> to
<var>value</var>.
</p></dd></dl>

<dl>
<dt><a name="index-image_002dget"></a>Function: <strong>image-get</strong> <em>image property</em></dt>
<dd><p>Return the property named <var>property</var> of <var>image</var>, or <code>nil</code>
if no such property exists.
</p></dd></dl>

<p>The only predefined property is the symbol <code>tiled</code>, used when an
image is displayed in a window decoration. When set to a non-nil value
the image is not scaled to the size of the decoration (the default),
but is tiled across the decoration.
</p>
<p>When images are scaled across border decorations the pixels that are
actually scaled are defined by the <em>border</em> of the image. The
border defines the outer rectangle of pixels that are left as-is, and
the inner rectangle which is scaled.
</p>
<dl>
<dt><a name="index-image_002dborder"></a>Function: <strong>image-border</strong> <em>image</em></dt>
<dd><p>Returns a list of integers <code>(<var>left</var> <var>right</var> <var>top</var>
<var>bottom</var>)</code>, the border of the image object <var>image</var>.
</p>
<p>The number associated with each edge of the image defines the number of
pixels adjacent to that edge that <em>will not</em> be scaled.
</p></dd></dl>

<dl>
<dt><a name="index-set_002dimage_002dborder"></a>Function: <strong>set-image-border</strong> <em>image left right top bottom</em></dt>
<dd><p>Sets the border of <var>image</var>.
</p>
<p>The number associated with each edge of the image defines the number of
pixels adjacent to that edge that <em>will not</em> be scaled.
</p></dd></dl>

<p>The shape of the image may also be specified, this defines which pixels
are treated as being transparent. Each image may define a single color
as marking transparent pixels.
</p>
<p>Image shapes are not supported under GDK Pixbuf.  Sawfish will
print a diagnostic message to <code>STDERR</code> if the function is called
without being supported.
</p>
<dl>
<dt><a name="index-image_002dshape_002dcolor"></a>Function: <strong>image-shape-color</strong> <em>image</em></dt>
<dd><p>Return the color marking transparent pixels in <var>image</var>, or
<code>nil</code> if no such color has been specified.
</p></dd></dl>

<dl>
<dt><a name="index-set_002dimage_002dshape_002dcolor"></a>Function: <strong>set-image-shape-color</strong> <em>image color</em></dt>
<dd><p>Specify that <var>color</var> marks transparent pixels in <var>image</var>.
</p></dd></dl>

<p>It&rsquo;s also possible to define <em>color modifiers</em> for each image.
These define the transformation applied to the value of each pixel when
it is displayed. Four different modifiers exist for each image, one for
each color component, and one for the image as a whole.
</p>
<dl>
<dt><a name="index-image_002dmodifier"></a>Function: <strong>image-modifier</strong> <em>image type</em></dt>
<dd><p>Return the modifier defined by the symbol <var>type</var> of <var>image</var>, a
list of integers <code>(<var>gamma</var> <var>brightness</var> <var>contrast</var>)</code>.
Each integer has a value between zero and 255 representing the weight
applied to the associated attribute when rendering the image.
</p>
<p>The four types are <code>red</code>, <code>green</code>, <code>blue</code> and <code>nil</code>
(all colors).  The argument must be <code>eq</code> to one of those symbols.
</p></dd></dl>

<dl>
<dt><a name="index-set_002dimage_002dmodifier"></a>Function: <strong>set-image-modifier</strong> <em>image type gamma brightness contrast</em></dt>
<dd><p>Set the image modifier of <var>image</var> defined by <var>type</var>.
<var>Type</var> may be one of the values of (not the symbols) <code>red</code>,
<code>green</code> or <code>blue</code>.
</p></dd></dl>

<p>There are also several other functions manipulating images:
</p>
<dl>
<dt><a name="index-bevel_002dimage"></a>Function: <strong>bevel-image</strong> <em>image border upwards <tt>#!optional</tt> bevel-percent</em></dt>
<dd><p>Transform the edgemost pixels of <var>image</var> to give it a &ldquo;bevelled&rdquo;
effect. <var>BORDER</var> is an integer defining the width of the bevel. If
<var>upwards</var> is non-nil the bevel is raised, otherwise it is lowered.
</p>
<p>If <var>bevel-percent</var> is defined it specifies the height or depth of
the drawn bevel. When undefined, the value of the parameter is taken
from the <code>default-bevel-percent</code> variable.
</p></dd></dl>

<dl>
<dt><a name="index-default_002dbevel_002dpercent"></a>Variable: <strong>default-bevel-percent</strong></dt>
<dd><p>Default height of drawn bevels, as a percentage.  Normally 50%.
</p></dd></dl>

<dl>
<dt><a name="index-clear_002dimage"></a>Function: <strong>clear-image</strong> <em>image <tt>#!optional</tt> color</em></dt>
<dd><p>Set all pixels in <var>image</var> to <var>color</var> (or black if <var>color</var>
is undefined).
</p></dd></dl>

<dl>
<dt><a name="index-tile_002dimage"></a>Function: <strong>tile-image</strong> <em>dest-image source-image</em></dt>
<dd><p>Tiles <var>source-image</var> into <var>dest-image</var>, starting from the
upper-left corner, working outwards.
</p></dd></dl>

<dl>
<dt><a name="index-scale_002dimage"></a>Function: <strong>scale-image</strong> <em>image width height</em></dt>
<dd><p>Return a copy of <var>image</var>, scaled to <var>width</var> by <var>height</var>
pixels.
</p></dd></dl>

<dl>
<dt><a name="index-composite_002dimages"></a>Function: <strong>composite-images</strong> <em>image1 image2 <tt>#!optional</tt> x y</em></dt>
<dd><p>Copy the contents of <var>image2</var> into <var>image1</var>.  <var>Image2</var> is
cropped to fit.  Arguments <var>x</var> and <var>y</var> indicate the position
in <var>image1</var> of the top-left corner of <var>image2</var>.  If not
supplied, they default to 0.
</p></dd></dl>

<dl>
<dt><a name="index-crop_002dimage"></a>Function: <strong>crop-image</strong> <em>image x y width height</em></dt>
<dd><p>Return a new image that is a rectangular section of <var>image</var>.  The
result image starts at pixel (<var>x</var>, <var>y</var>) in <var>image</var>, and
extends over <var>width</var> and <var>height</var> pixels in <var>image</var>.
</p>
<p>When the cropped image extends beyond the boundary of <var>image</var>, the
behavior is undefined.
</p></dd></dl>

<p>The following functions allow users to manipulate images on a
pixel-by-pixel level.  They all use a list representation for pixels:
(<var>r</var>, <var>g</var>, <var>b</var>, <var>a</var>) indicating the red, green, blue
and alpha components
</p>
<dl>
<dt><a name="index-image_002dref"></a>Function: <strong>image-ref</strong> <em>image x y</em></dt>
<dd><p>Return a list (<var>r</var>, <var>g</var>, <var>b</var>, <var>a</var>) of the red, green,
blue and alpha components of the pixel (<var>x</var>, <var>y</var>) in
<var>image</var>.
</p>
<p>When the pixel position extends outside the bounds of the image, the
behavior is undefined.
</p></dd></dl>

<dl>
<dt><a name="index-image_002dset"></a>Function: <strong>image-set</strong> <em>image x y pixel</em></dt>
<dd><p>Set the pixel at (<var>x</var>, <var>y</var>) in <var>image</var> to <var>pixel</var>.
<var>Pixel</var> is a list of four numbers (<var>r</var>, <var>g</var>, <var>b</var>,
<var>a</var>), the red, green, blue and alpha components.
</p>
<p>When the pixel position extends outside the bounds of the image, the
behavior is undefined.
</p></dd></dl>

<dl>
<dt><a name="index-image_002dmap"></a>Function: <strong>image-map</strong> <em>xform image</em></dt>
<dd><p>Transform each pixel in <var>image</var> in place by calling <var>xform</var> on
each pixel in the image.
</p>
<p><var>Xform</var> takes a single argument, a four element list (<var>r</var>,
<var>g</var>, <var>b</var>, <var>a</var>) indicating the red, green, blue and alpha
components of a pixel.  <var>Xform</var> should return the new value for
the pixel it was given.  The return format is the same four-element
list.
</p>
<p><var>Xform</var> is allowed to return <code>nil</code>.  In this case,
<code>image-map</code> immediately returns an invalid object.
</p></dd></dl>

<dl>
<dt><a name="index-image_002dfill"></a>Function: <strong>image-fill</strong> <em>generator image</em></dt>
<dd><p>Set each pixel in <var>image</var> based on the results of calling
<var>generator</var>.
</p>
<p><var>Generator</var> takes two arguments: the X and Y coordinates of a
pixel.  It returns a four element list (<var>r</var>, <var>g</var>, <var>b</var>,
<var>a</var>) indicating the red, green, blue and alpha components of a
pixel.  This new pixel replaces the current pixel contents at (X, Y).
</p>
<p><var>Generator</var> is allowed to return <code>nil</code>.  In this case,
<code>image-map</code> immediately returns an invalid object.
</p></dd></dl>

<dl>
<dt><a name="index-pixmap_002dcache_002dcontrol"></a>Function: <strong>pixmap-cache-control</strong> <em>max</em></dt>
<dd><p>Tell Sawfish to cache no more than <var>max</var> pixels.  Returns a
four-element list indicating the current cache status:
<code>(<var>max-cached-pixels</var>, <var>cached-pixels</var>, <var>hits</var>,
<var>misses</var>)</code>.
</p></dd></dl>


<hr>
<div class="header">
<p>
Next: <a href="Cursors.html#Cursors" accesskey="n" rel="next">Cursors</a>, Previous: <a href="Fonts.html#Fonts" accesskey="p" rel="previous">Fonts</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-Index.html#Function-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
