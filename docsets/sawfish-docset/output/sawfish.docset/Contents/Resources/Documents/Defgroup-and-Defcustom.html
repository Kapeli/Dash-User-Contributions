<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>sawfish Programming Manual: Defgroup and Defcustom</title>

<meta name="description" content="sawfish Programming Manual: Defgroup and Defcustom">
<meta name="keywords" content="sawfish Programming Manual: Defgroup and Defcustom">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Function-Index.html#Function-Index" rel="index" title="Function Index">
<link href="Concept-Index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Customization.html#Customization" rel="up" title="Customization">
<link href="Customization-Files.html#Customization-Files" rel="next" title="Customization Files">
<link href="Customization.html#Customization" rel="previous" title="Customization">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Defgroup-and-Defcustom"></a>
<div class="header">
<p>
Next: <a href="Customization-Files.html#Customization-Files" accesskey="n" rel="next">Customization Files</a>, Previous: <a href="Customization.html#Customization" accesskey="p" rel="previous">Customization</a>, Up: <a href="Customization.html#Customization" accesskey="u" rel="up">Customization</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-Index.html#Function-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Defgroup-and-Defcustom-1"></a>
<h3 class="section">9.1 Defgroup and Defcustom</h3>
<a name="index-defgroup"></a>
<a name="index-defcustom"></a>

<p>Customization options are organized into groups.  Each group has a name
and contains a set of related options.  Groups can be assigned to
parent groups using the <code>:group</code> parameter during construction.
</p>
<dl>
<dt><a name="index-defgroup-1"></a>Macro: <strong>defgroup</strong> <em>group real-name &amp;rest keys</em></dt>
<dd><p>Declares a new customization group whose name is defined by the symbol
<var>group</var>. The string <var>real-name</var> is the title of the group as
seen by the user.
</p>
<p><var>keys</var> is a list, defining the properties of the group. The members
of the list are grouped into pairs of elements, the first element names
the property, the second defines its value.
</p>
<dl compact="compact">
<dt><code>:group <var>group</var></code></dt>
<dd><p>Specifies the parent customization group of this group.  The value of
this key is not evaluated.
</p>
</dd>
<dt><code>:require <var>struct</var></code></dt>
<dd><p>Before displaying the customization UI for this group, <code>require</code>
the structure <var>struct</var>.  This guarantees that all customizable
variables will be known at display time.  The value of
this key is not evaluated.
</p>
</dd>
<dt><code>:layout <var>symbol</var></code></dt>
<dd><p>Use a particular UI widget to display this group.  The value is a
symbol, one of:
</p>
<dl compact="compact">
<dt><code>single</code></dt>
<dd><p>Holds a single customizable item.
</p></dd>
<dt><code>vbox</code></dt>
<dd><p>Holds any number of customizable items, arranging them vertically.
This is the default.
</p></dd>
<dt><code>hbox</code></dt>
<dd><p>Holds any number of customizable items, arranging them horizontally.
</p></dd>
<dt><code>frame</code></dt>
<dd><p>Embed the items in a vbox in a frame.
</p></dd>
<dt><code>keymaps</code></dt>
<dd><p>Use a special UI widget for customizing keymaps.
</p></dd>
</dl>

<p>The value of this key is not evaluated.
</p></dd>
</dl>

<p>This macro also creates an interactive function named
<code>customize:<var>group</var></code> allowing the GUI to be invoked to
configure the new group.
</p>
<p>While <code>defgroup</code> is a macro, there is a corresponding
<code>custom-declare-group</code> function.
</p></dd></dl>

<dl>
<dt><a name="index-defcustom-1"></a>Macro: <strong>defcustom</strong> <em>variable value documentation &amp;rest keys</em></dt>
<dd><p>The first three arguments are analogous to the <code>defvar</code> special
form, they declare a special variable stored in the symbol
<var>variable</var>, whose value is set to <var>value</var> if the variable is
currently unbound, with a documentation string <var>documentation</var>.
</p>
<p>In the configurator, gtk widget appears left to the docstring. But if
the docstring ends with &ldquo;\\w&rdquo; (literally in the source; the first
backslash for escaping the second), then the widget is put right to
the text. This feature is supported by only some widgets.
</p>
<p>All other parameters are key-value pairs as with <code>defgroup</code>. The
possible pairs are as follows:
</p>
<dl compact="compact">
<dt><code>:group <var>group</var></code></dt>
<dd><p>Specifies the customization group that this variable is a member of.
This is a list of symbols, indicating a series of nested groups, e.g.,
<code>(workspace edge-flip)</code>.  A variable in a top-level customization
group can also be specified as a plain symbol, e.g., <code>workspace</code>.
The value of this key is not evaluated.
</p>
</dd>
<dt><code>:type <var>type</var></code></dt>
<dd><p>Specifies the required type of the variable. The current possibilities
are:
</p>
</dd>
<dt><code><code>(symbol [<var>option</var> &hellip;])</code></code></dt>
<dd><p>A symbol.  The UI looks for a symbol property <code>:options</code> and
interprets it as the list of valid symbols to select from.  The
<var>option</var> arguments allow you to define a list at eval time.  It is
also possible to change this list at run time by changing the custom
symbol&rsquo;s <code>:options</code> property; see the access functions
<code>custom-add-options</code> and <code>custom-set-options</code> for more
information.
</p>
</dd>
<dt><code><code>(choice <var>option</var> &hellip;)</code></code></dt>
<dd><p>One of the <var>option</var> elements.  Each <var>option</var> is a symbol.
Unlike the <code>symbol</code> type, there is no expectation that this list
will change at run-time.
</p>
</dd>
<dt><code><code>string</code></code></dt>
<dd><p>An arbitrary string.
</p>
</dd>
<dt><code><code>(number [[<var>min</var>] <var>max</var>]</code></code></dt>
<dd><p>Integer number.  Two additional arguments specify the minimum and
maximum allowed values for the integer.  One additional argument
specified the maximum allowed value; the minimum defaults to zero.
Zero additional arguments implies no minimum nor maximum.
</p>
</dd>
<dt><code><code>boolean</code></code></dt>
<dd><p>True (<code>t</code>) or false (<code>nil</code>) value.
</p>
</dd>
<dt><code><code>color</code></code></dt>
<dd><p>A color.
</p>
</dd>
<dt><code><code>font</code></code></dt>
<dd><p>A font name.
</p>
</dd>
<dt><code><code>file</code></code></dt>
<dd><p>A file name.
</p>
</dd>
<dt><code><code>program</code></code></dt>
<dd><p>A file name that must be an executable program.
</p>
</dd>
<dt><code><code>command</code></code></dt>
<dd><p>A Sawfish command.
</p>
</dd>
<dt><code><code>event</code></code></dt>
<dd><p>A Sawfish event.
</p>
</dd>
<dt><code><code>keymap</code></code></dt>
<dd><p>A Sawfish keymap.
</p>
</dd>
<dt><code><code>frame-style</code></code></dt>
<dd><p>The name of a defined Sawfish frame style.
</p>
</dd>
<dt><code><code>icon</code></code></dt>
<dd><p>An X icon.
</p>
</dd>
<dt><code><code>modifier-list</code></code></dt>
<dd><p>A list of X modifier keys.
</p>

</dd>
</dl>

<p>Except where specified, the values of these keys are not evaluated.
</p>
<dl compact="compact">
<dt><code>:require <var>feature</var></code></dt>
<dd><p>Denotes that the feature <var>feature</var> must be loaded if the variable
is set to a non-<code>nil</code> value by user customizations.  This is
necessary because customization options are loaded on startup, possibly
before the modules that define them.
The value of this key is not evaluated.
</p>
</dd>
<dt><code>:allow-nil <var>bool</var></code></dt>
<dd><p>Specifies whether the variable may be <code>nil</code>, instead of a member
of its actual type. This is only supported by the <code>string</code>,
<code>symbol</code>, <code>font</code> and <code>color</code> types.
</p>
</dd>
<dt><code>:set <var>function</var></code></dt>
<dd><p>Specifies that the variable must be set by calling <var>function</var>
instead of the default <code>custom-set-variable</code>. The function should
accept three arguments: <code>(<var>variable</var> <var>value</var> <tt>#!optional</tt>
<var>require</var>)</code>.
</p>
<p>The usual action of this function is to translate the value into the
correct type, then call <code>custom-set-variable</code>. This translation is
necessary since many of the UI widgets accept strings representing more
complex types (i.e. a color&rsquo;s name, instead of the actual object)
</p>
</dd>
<dt><code>:get <var>function</var></code></dt>
<dd><p>Provides a function for reading the current value of the variable.
Should return a value that&rsquo;s acceptable to the UI widget associated
with the variable. Called with a single argument, the symbol containing
the variable.
</p>
</dd>
<dt><code>:before-set <var>function</var></code></dt>
<dt><code>:after-set <var>function</var></code></dt>
<dd><p>Functions called both immediately before and after setting the value of
the variable. Called with a single parameter: the variable itself.
</p>
</dd>
<dt><code>:range (<var>min</var> . <var>max</var>)</code></dt>
<dd><p>The allowed range for numeric variables.  If <var>min</var> is <code>nil</code> the
the default minimum allowed value is zero; if <var>max</var> is <code>nil</code>
then the default maximum is unbounded.  This is obsolete, since the
<code>:number</code> type now supports range declarations.
The value of this key is not evaluated.
</p>
</dd>
<dt><code>:tooltop <var>string</var></code></dt>
<dd><p>A tooltip that appears when the user&rsquo;s mouse hovers over the widget
item.
</p>
</dd>
<dt><code>:depends <var>symbol</var></code></dt>
<dd><p>This widget item is only settable when the symbol-value for
<var>symbol</var> is non-nil.
</p>
</dd>
</dl>

<p>While <code>defcustom</code> is a macro, there is a corresponding
<code>custom-declare-variable</code> function.
</p></dd></dl>

<p>Note that where necessary the types themselves define default
<code>:set</code>, <code>:get</code> and <code>:widget</code> values that may be
overridden by values in the <code>defcustom</code> call. Usually, however,
this will not be necessary.
</p>
<p>Consider the following example:
</p>
<div class="lisp">
<pre class="lisp">(defgroup move &quot;Move/Resize&quot;)

(defcustom move-outline-mode 'opaque
  &quot;The method of drawing windows being moved interactively.&quot;
  :type (set opaque box)
  :group move)

(defcustom move-snap-epsilon 8
  &quot;Proximity in pixels before snapping to a window edge.&quot;
  :group move
  :type (number 0 64))
</pre></div>

<p>This defines a group and two customization options.
</p>
<p>There are two special accessor functions to make it easier to deal
with lists of allowed symbols.
</p>
<dl>
<dt><a name="index-custom_002dadd_002doption"></a>Function: <strong>custom-add-option</strong> <em>variable option</em></dt>
<dd><p>Add symbol value <var>option</var> to the list of symbols that can be
stored in <var>variable</var>.  The new option goes on the end of the
list.
</p></dd></dl>

<dl>
<dt><a name="index-custom_002dget_002doptions"></a>Function: <strong>custom-get-options</strong> <em>variable</em></dt>
<dd><p>Return the list of symbols that can be stored in <var>variable</var>.
</p></dd></dl>

<hr>
<div class="header">
<p>
Next: <a href="Customization-Files.html#Customization-Files" accesskey="n" rel="next">Customization Files</a>, Previous: <a href="Customization.html#Customization" accesskey="p" rel="previous">Customization</a>, Up: <a href="Customization.html#Customization" accesskey="u" rel="up">Customization</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-Index.html#Function-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
