
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Integration with Graphite/Carbon &#8212; uWSGI 2.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The uWSGI Stats Server" href="StatsServer.html" />
    <link rel="prev" title="Pushing statistics (from 1.4)" href="PushingStats.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="StatsServer.html" title="The uWSGI Stats Server"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="PushingStats.html" title="Pushing statistics (from 1.4)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">uWSGI 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="integration-with-graphite-carbon">
<h1>Integration with Graphite/Carbon<a class="headerlink" href="#integration-with-graphite-carbon" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://graphite.wikidot.com/">Graphite</a> is a kick-ass realtime graphing
application built on top of three components:</p>
<ul class="simple">
<li><p>Whisper – a data storage system</p></li>
<li><p>Carbon – a server for receiving data</p></li>
<li><p>Python web application for graph rendering and management.</p></li>
</ul>
<p>The uWSGI Carbon plugin allows you to send uWSGI’s internal statistics to one
or more Carbon servers.  It is compiled in by default as of uWSGI 1.0, though
it can also be built as a plugin.</p>
<div class="section" id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h2>
<p>For the sake of illustration, let’s say your Carbon server is listening on
<code class="docutils literal notranslate"><span class="pre">127.0.0.1:2003</span></code> and your uWSGI instance is on the machine <code class="docutils literal notranslate"><span class="pre">debian32</span></code>,
listening on <code class="docutils literal notranslate"><span class="pre">127.0.0.1:3031</span></code> with 4 processes.  By adding the <code class="docutils literal notranslate"><span class="pre">--carbon</span></code>
option to your uWSGI instance you’ll instruct it to send its statistics to
the Carbon server periodically. The default period is 60 seconds.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --socket <span class="m">127</span>.0.0.1:3031 --carbon <span class="m">127</span>.0.0.1:2003 --processes <span class="m">4</span>
</pre></div>
</div>
<p>Metrics are named like <code class="docutils literal notranslate"><span class="pre">uwsgi.&lt;hostname&gt;.&lt;id&gt;.requests</span></code> and
<code class="docutils literal notranslate"><span class="pre">uwsgi.&lt;hostname&gt;.&lt;id&gt;.worker&lt;n&gt;.requests</span></code>, where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hostname</span></code> – machine’s hostname</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> – name of the first uWSGI socket (with dots replaced by underscores)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code> – number of the worker processes (1-based).</p></li>
</ul>
<p>Examples of names of Carbon metrics generated by uWSGI:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uwsgi.debian32.127_0_0_1:3031.requests</span></code>
(<code class="docutils literal notranslate"><span class="pre">uwsgi.&lt;hostname&gt;.&lt;id&gt;.requests</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uwsgi.debian32.127_0_0_1:3031.worker1.requests</span></code>
(<code class="docutils literal notranslate"><span class="pre">uwsgi.&lt;hostname&gt;.&lt;id&gt;.worker&lt;n&gt;.requests</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uwsgi.debian32.127_0_0_1:3031.worker2.requests</span></code>
(<code class="docutils literal notranslate"><span class="pre">uwsgi.&lt;hostname&gt;.&lt;id&gt;.worker&lt;n&gt;.requests</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uwsgi.debian32.127_0_0_1:3031.worker3.requests</span></code>
(<code class="docutils literal notranslate"><span class="pre">uwsgi.&lt;hostname&gt;.&lt;id&gt;.worker&lt;n&gt;.requests</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uwsgi.debian32.127_0_0_1:3031.worker4.requests</span></code>
(<code class="docutils literal notranslate"><span class="pre">uwsgi.&lt;hostname&gt;.&lt;id&gt;.worker&lt;n&gt;.requests</span></code>).</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="tutorials/GraphiteAndMetrics.html"><span class="doc">Setting up Graphite on Ubuntu using the Metrics subsystem</span></a></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Integration with Graphite/Carbon</a><ul>
<li><a class="reference internal" href="#quickstart">Quickstart</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="PushingStats.html"
                        title="previous chapter">Pushing statistics (from 1.4)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="StatsServer.html"
                        title="next chapter">The uWSGI Stats Server</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Carbon.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="StatsServer.html" title="The uWSGI Stats Server"
             >next</a> |</li>
        <li class="right" >
          <a href="PushingStats.html" title="Pushing statistics (from 1.4)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">uWSGI 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2016, uWSGI.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>