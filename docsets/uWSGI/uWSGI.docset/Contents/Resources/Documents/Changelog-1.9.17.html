
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>uWSGI 1.9.17 &#8212; uWSGI 2.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="uWSGI 1.9.16" href="Changelog-1.9.16.html" />
    <link rel="prev" title="uWSGI 1.9.18" href="Changelog-1.9.18.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Changelog-1.9.16.html" title="uWSGI 1.9.16"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Changelog-1.9.18.html" title="uWSGI 1.9.18"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">uWSGI 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="uwsgi-1-9-17">
<h1>uWSGI 1.9.17<a class="headerlink" href="#uwsgi-1-9-17" title="Permalink to this headline">¶</a></h1>
<p>Changelog [20130917]</p>
<div class="section" id="bugfixes">
<h2>Bugfixes<a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>the ‘pty’ client is now blocking (safer approach)</p></li>
<li><p>removed strtok() usage (substituted by a new uwsgi api function on top of strtok_r() )</p></li>
<li><p>fixed –pty-exec (Credits: C Anthony Risinger)</p></li>
<li><p>listen_queue/somaxconn linux check is now done even for UNIX sockets</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-master-fifo">
<h3>The Master FIFO<a class="headerlink" href="#the-master-fifo" title="Permalink to this headline">¶</a></h3>
<p>This is a new management way in addition to UNIX signals. As we have no more free signals to use (and generally dealing with signals and pidfiles is not very funny), all of the new management features of uWSGI will be based on the master fifo.</p>
<p>Docs are already available: <a class="reference internal" href="MasterFIFO.html"><span class="doc">The Master FIFO</span></a></p>
</div>
<div class="section" id="the-asap-hook">
<h3>The asap hook<a class="headerlink" href="#the-asap-hook" title="Permalink to this headline">¶</a></h3>
<p>Credits: Matthijs Kooijman</p>
<p>a new hook, named ‘asap’ has been added. It will be run soon after the options are parsed.</p>
<p>Check: <a class="reference internal" href="Hooks.html"><span class="doc">Hooks</span></a></p>
</div>
<div class="section" id="the-tcc-libtcc-plugin">
<h3>The TCC (libtcc) plugin<a class="headerlink" href="#the-tcc-libtcc-plugin" title="Permalink to this headline">¶</a></h3>
<p>TCC is an embeddable c compilers. It includes a shared library (libtcc) you can use to compile strings of c code on the fly.</p>
<p>The libtcc uWSGI plugins allows compiling strings of c to process symbols. CUrrently the “tcc” hook engine has been implemented:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">hook-asap</span> <span class="o">=</span> <span class="s">tcc:mkdir(&quot;/var/run/sockets&quot;);printf(&quot;directory created\n&quot;);</span>
<span class="na">hook-as-user</span> <span class="o">=</span> <span class="s">tcc:printf(&quot;i am process with pid %d\n&quot;, getpid());</span>
<span class="na">hook-post-app</span> <span class="o">=</span> <span class="s">tcc:if (getenv(&quot;DESTROY_THE_WORLD&quot;)) exit(1);</span>
<span class="na">http-socket</span> <span class="o">=</span> <span class="s">/var/run/sockets/foobar.sock</span>
</pre></div>
</div>
</div>
<div class="section" id="the-forkptyrouter-gateway">
<h3>The forkptyrouter gateway<a class="headerlink" href="#the-forkptyrouter-gateway" title="Permalink to this headline">¶</a></h3>
<p>While work on Linux containers/namespaces continues to improve we have added this special router/gateway allowing dynamic allocation of pseodoterminals
in uWSGI instances. To access the sockets created by the forkptyrouter you can use the –pty-connect option exposed by the ‘pty’ plugin.</p>
<p>Documention is being worked on.</p>
</div>
<div class="section" id="added-a-new-magic-var-for-ansi-escaping">
<h3>added a new magic var for ANSI escaping<a class="headerlink" href="#added-a-new-magic-var-for-ansi-escaping" title="Permalink to this headline">¶</a></h3>
<p>The %[ magic var has been added, it allows you to define ANSI sequences in your logs.</p>
<p>If you like coloured logs:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">log-encoder</span> <span class="o">=</span> <span class="s">format %[[33m${msgnl}%[[0m</span>
</pre></div>
</div>
</div>
<div class="section" id="routable-log-encoders">
<h3>Routable log encoders<a class="headerlink" href="#routable-log-encoders" title="Permalink to this headline">¶</a></h3>
<p>You can now attach log encoders to specific log routes:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">logger</span> <span class="o">=</span> <span class="s">stderr file:/dev/tty</span>
<span class="na">log-route</span> <span class="o">=</span> <span class="s">stderr ubuntu</span>
<span class="na">log-route</span> <span class="o">=</span> <span class="s">stderr clock</span>
<span class="na">print</span> <span class="o">=</span> <span class="s">%[[34mHELLO%[[0m</span>
<span class="c1">; add an encoder to the &#39;stderr&#39; logger</span>
<span class="na">log-encoder</span> <span class="o">=</span> <span class="s">format:stderr %[[33m${msgnl}%[[0m</span>
<span class="na">http-socket</span> <span class="o">=</span> <span class="s">:9090</span>
</pre></div>
</div>
</div>
<div class="section" id="vassals-include">
<h3>–vassals-include<a class="headerlink" href="#vassals-include" title="Permalink to this headline">¶</a></h3>
<p>Credits: Matthijs Kooijman</p>
<p>This is like –vassal-inherit but the parsing will be “immediate” (so you can use placeholders)</p>
</div>
<div class="section" id="the-emperor-heartbeat-system-is-now-mercyless">
<h3>The Emperor heartbeat system is now mercyless…<a class="headerlink" href="#the-emperor-heartbeat-system-is-now-mercyless" title="Permalink to this headline">¶</a></h3>
<p>The old approach for the heartbeat Emperor subsystem was asking for “gentle” reload to bad vassals.</p>
<p>Now vassals not sending heartbeat (after being registered with the heartbeat subsystem) are killed with -9</p>
<p>The result of this patch will be more robust bad vassals management</p>
</div>
<div class="section" id="logpipe">
<h3>logpipe<a class="headerlink" href="#logpipe" title="Permalink to this headline">¶</a></h3>
<p>Author: INADA Naoki</p>
<p>You can now send loglines to the stdin of an external command:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">req-logger</span> <span class="o">=</span> <span class="s">pipe:/usr/local/bin/mylogger</span>
</pre></div>
</div>
</div>
<div class="section" id="added-fd-logger-to-logfile-plugin">
<h3>added “fd” logger to “logfile” plugin<a class="headerlink" href="#added-fd-logger-to-logfile-plugin" title="Permalink to this headline">¶</a></h3>
<p>you can directly send logs to a file descriptors:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">req-logger</span> <span class="o">=</span> <span class="s">fd:17</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="availability">
<h2>Availability<a class="headerlink" href="#availability" title="Permalink to this headline">¶</a></h2>
<p>uWSGI 1.9.17 has been released on Semptember 22th 2013</p>
<p>You can download it from:</p>
<p><a class="reference external" href="https://projects.unbit.it/downloads/uwsgi-1.9.17.tar.gz">https://projects.unbit.it/downloads/uwsgi-1.9.17.tar.gz</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">uWSGI 1.9.17</a><ul>
<li><a class="reference internal" href="#bugfixes">Bugfixes</a></li>
<li><a class="reference internal" href="#new-features">New features</a><ul>
<li><a class="reference internal" href="#the-master-fifo">The Master FIFO</a></li>
<li><a class="reference internal" href="#the-asap-hook">The asap hook</a></li>
<li><a class="reference internal" href="#the-tcc-libtcc-plugin">The TCC (libtcc) plugin</a></li>
<li><a class="reference internal" href="#the-forkptyrouter-gateway">The forkptyrouter gateway</a></li>
<li><a class="reference internal" href="#added-a-new-magic-var-for-ansi-escaping">added a new magic var for ANSI escaping</a></li>
<li><a class="reference internal" href="#routable-log-encoders">Routable log encoders</a></li>
<li><a class="reference internal" href="#vassals-include">–vassals-include</a></li>
<li><a class="reference internal" href="#the-emperor-heartbeat-system-is-now-mercyless">The Emperor heartbeat system is now mercyless…</a></li>
<li><a class="reference internal" href="#logpipe">logpipe</a></li>
<li><a class="reference internal" href="#added-fd-logger-to-logfile-plugin">added “fd” logger to “logfile” plugin</a></li>
</ul>
</li>
<li><a class="reference internal" href="#availability">Availability</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Changelog-1.9.18.html"
                        title="previous chapter">uWSGI 1.9.18</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Changelog-1.9.16.html"
                        title="next chapter">uWSGI 1.9.16</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Changelog-1.9.17.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Changelog-1.9.16.html" title="uWSGI 1.9.16"
             >next</a> |</li>
        <li class="right" >
          <a href="Changelog-1.9.18.html" title="uWSGI 1.9.18"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">uWSGI 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2016, uWSGI.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>