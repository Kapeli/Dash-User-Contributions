
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Setting POSIX Capabilities &#8212; uWSGI 2.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running uWSGI in a Linux CGroup" href="Cgroups.html" />
    <link rel="prev" title="Scaling SSL connections (uWSGI 1.9)" href="SSLScaling.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Cgroups.html" title="Running uWSGI in a Linux CGroup"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="SSLScaling.html" title="Scaling SSL connections (uWSGI 1.9)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">uWSGI 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="setting-posix-capabilities">
<h1>Setting POSIX Capabilities<a class="headerlink" href="#setting-posix-capabilities" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Capability-based_security">POSIX capabilities</a> allow fine-grained permissions for processes. In addition
to the standard UNIX permission scheme, they define a new set of privileges for
system resources.  To enable capabilities support (Linux Only) you have to
install the <code class="docutils literal notranslate"><span class="pre">libcap</span></code> headers (<code class="docutils literal notranslate"><span class="pre">libcap-dev</span></code> on Debian-based distros) before
building uWSGI.  As usual your processes will lose practically all of the
capabilities after a <code class="docutils literal notranslate"><span class="pre">setuid</span></code> call. The uWSGI <code class="docutils literal notranslate"><span class="pre">cap</span></code> option allows you to
define a list of capabilities to maintain through the call.</p>
<p>For example, to allow your unprivileged app to bind on privileged ports and set
the system clock, you will use the following options.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --socket :1000 --uid <span class="m">5000</span> --gid <span class="m">5000</span> --cap net_bind_service,sys_time
</pre></div>
</div>
<p>All of the processes generated by uWSGI will then inherit this behaviour.  If
your system supports capabilities not available in the uWSGI list you can
simply specify the number of the constant:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --socket :1000 --uid <span class="m">5000</span> --gid <span class="m">5000</span> --cap net_bind_service,sys_time,42
</pre></div>
</div>
<p>In addition to <code class="docutils literal notranslate"><span class="pre">net_bind_service</span></code> and <code class="docutils literal notranslate"><span class="pre">sys_time</span></code>, a new capability numbered ‘42’ is added.</p>
<div class="section" id="available-capabilities">
<h2>Available capabilities<a class="headerlink" href="#available-capabilities" title="Permalink to this headline">¶</a></h2>
<p>This is the list of available capabilities.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>audit_control</p></td>
<td><p>CAP_AUDIT_CONTROL</p></td>
</tr>
<tr class="row-even"><td><p>audit_write</p></td>
<td><p>CAP_AUDIT_WRITE</p></td>
</tr>
<tr class="row-odd"><td><p>chown</p></td>
<td><p>CAP_CHOWN</p></td>
</tr>
<tr class="row-even"><td><p>dac_override</p></td>
<td><p>CAP_DAC_OVERRIDE</p></td>
</tr>
<tr class="row-odd"><td><p>dac_read_search</p></td>
<td><p>CAP_DAC_READ_SEARCH</p></td>
</tr>
<tr class="row-even"><td><p>fowner</p></td>
<td><p>CAP_FOWNER</p></td>
</tr>
<tr class="row-odd"><td><p>fsetid</p></td>
<td><p>CAP_FSETID</p></td>
</tr>
<tr class="row-even"><td><p>ipc_lock</p></td>
<td><p>CAP_IPC_LOCK</p></td>
</tr>
<tr class="row-odd"><td><p>ipc_owner</p></td>
<td><p>CAP_IPC_OWNER</p></td>
</tr>
<tr class="row-even"><td><p>kill</p></td>
<td><p>CAP_KILL</p></td>
</tr>
<tr class="row-odd"><td><p>lease</p></td>
<td><p>CAP_LEASE</p></td>
</tr>
<tr class="row-even"><td><p>linux_immutable</p></td>
<td><p>CAP_LINUX_IMMUTABLE</p></td>
</tr>
<tr class="row-odd"><td><p>mac_admin</p></td>
<td><p>CAP_MAC_ADMIN</p></td>
</tr>
<tr class="row-even"><td><p>mac_override</p></td>
<td><p>CAP_MAC_OVERRIDE</p></td>
</tr>
<tr class="row-odd"><td><p>mknod</p></td>
<td><p>CAP_MKNOD</p></td>
</tr>
<tr class="row-even"><td><p>net_admin</p></td>
<td><p>CAP_NET_ADMIN</p></td>
</tr>
<tr class="row-odd"><td><p>net_bind_service</p></td>
<td><p>CAP_NET_BIND_SERVICE</p></td>
</tr>
<tr class="row-even"><td><p>net_broadcast</p></td>
<td><p>CAP_NET_BROADCAST</p></td>
</tr>
<tr class="row-odd"><td><p>net_raw</p></td>
<td><p>CAP_NET_RAW</p></td>
</tr>
<tr class="row-even"><td><p>setfcap</p></td>
<td><p>CAP_SETFCAP</p></td>
</tr>
<tr class="row-odd"><td><p>setgid</p></td>
<td><p>CAP_SETGID</p></td>
</tr>
<tr class="row-even"><td><p>setpcap</p></td>
<td><p>CAP_SETPCAP</p></td>
</tr>
<tr class="row-odd"><td><p>setuid</p></td>
<td><p>CAP_SETUID</p></td>
</tr>
<tr class="row-even"><td><p>sys_admin</p></td>
<td><p>CAP_SYS_ADMIN</p></td>
</tr>
<tr class="row-odd"><td><p>sys_boot</p></td>
<td><p>CAP_SYS_BOOT</p></td>
</tr>
<tr class="row-even"><td><p>sys_chroot</p></td>
<td><p>CAP_SYS_CHROOT</p></td>
</tr>
<tr class="row-odd"><td><p>sys_module</p></td>
<td><p>CAP_SYS_MODULE</p></td>
</tr>
<tr class="row-even"><td><p>sys_nice</p></td>
<td><p>CAP_SYS_NICE</p></td>
</tr>
<tr class="row-odd"><td><p>sys_pacct</p></td>
<td><p>CAP_SYS_PACCT</p></td>
</tr>
<tr class="row-even"><td><p>sys_ptrace</p></td>
<td><p>CAP_SYS_PTRACE</p></td>
</tr>
<tr class="row-odd"><td><p>sys_rawio</p></td>
<td><p>CAP_SYS_RAWIO</p></td>
</tr>
<tr class="row-even"><td><p>sys_resource</p></td>
<td><p>CAP_SYS_RESOURCE</p></td>
</tr>
<tr class="row-odd"><td><p>sys_time</p></td>
<td><p>CAP_SYS_TIME</p></td>
</tr>
<tr class="row-even"><td><p>sys_tty_config</p></td>
<td><p>CAP_SYS_TTY_CONFIG</p></td>
</tr>
<tr class="row-odd"><td><p>syslog</p></td>
<td><p>CAP_SYSLOG</p></td>
</tr>
<tr class="row-even"><td><p>wake_alarm</p></td>
<td><p>CAP_WAKE_ALARM</p></td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Setting POSIX Capabilities</a><ul>
<li><a class="reference internal" href="#available-capabilities">Available capabilities</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="SSLScaling.html"
                        title="previous chapter">Scaling SSL connections (uWSGI 1.9)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Cgroups.html"
                        title="next chapter">Running uWSGI in a Linux CGroup</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Capabilities.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Cgroups.html" title="Running uWSGI in a Linux CGroup"
             >next</a> |</li>
        <li class="right" >
          <a href="SSLScaling.html" title="Scaling SSL connections (uWSGI 1.9)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">uWSGI 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2016, uWSGI.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>