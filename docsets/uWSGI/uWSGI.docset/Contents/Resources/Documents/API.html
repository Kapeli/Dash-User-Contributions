
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>The uWSGI api &#8212; uWSGI 2.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">uWSGI 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-uwsgi-api">
<h1>The uWSGI api<a class="headerlink" href="#the-uwsgi-api" title="Permalink to this headline">¶</a></h1>
<p>Language plugins should expose the following api. Each language has its conventions, limits and strength’s point.</p>
<p>When porting the api to a specific language try to be friendly to the language style.</p>
<p>This is the “official” list of functions exposed by the uWSGI api, functions not appearing here are not standardized
so they could change their semanthics in future uWSGI relases.</p>
<p>The syntax proposed here is a pseudo-python, each language will expose each function with its specific style</p>
<p>When not_defined is used, it means the language-specific NULL representation (like None in python or undef in perl)</p>
<div class="section" id="uwsgi-signal-signum">
<h2>uwsgi.signal(signum)<a class="headerlink" href="#uwsgi-signal-signum" title="Permalink to this headline">¶</a></h2>
<p>raise the specified uwsgi signal</p>
</div>
<div class="section" id="uwsgi-register-rpc-name-func-argc-0">
<h2>uwsgi.register_rpc(name, func, argc=0)<a class="headerlink" href="#uwsgi-register-rpc-name-func-argc-0" title="Permalink to this headline">¶</a></h2>
<p>register the function “func” as an RPC one with the specified “name”</p>
<p>argc will force the accepted number of arguments</p>
</div>
<div class="section" id="uwsgi-rpc-node-name-args">
<h2>uwsgi.rpc(node, name, <a href="#id1"><span class="problematic" id="id2">*</span></a>args)<a class="headerlink" href="#uwsgi-rpc-node-name-args" title="Permalink to this headline">¶</a></h2>
<p>call the uWSGI RPC function “name” on server “node” with the supplied args (if any)</p>
<p>if node is not_defined a “local” RPC will be made</p>
</div>
<div class="section" id="uwsgi-call-name-args">
<h2>uwsgi.call(name, <a href="#id3"><span class="problematic" id="id4">*</span></a>args)<a class="headerlink" href="#uwsgi-call-name-args" title="Permalink to this headline">¶</a></h2>
<p>call the uWSGI RPC function “name” locally with the supplied args (if any)</p>
</div>
<div class="section" id="uwsgi-cache-get-key-cache">
<h2>uwsgi.cache_get(key[, cache])<a class="headerlink" href="#uwsgi-cache-get-key-cache" title="Permalink to this headline">¶</a></h2>
<p>get “key” from the specified “cache”. If “cache” is not_defined, the default local cache will be used.</p>
<p>To get an item from a remote cache use the <a class="reference external" href="mailto:cachename&#37;&#52;&#48;addr">cachename<span>&#64;</span>addr</a>:port syntax for the “cache” value</p>
<p>returns not_defined if the item is not found or an error has occurred</p>
</div>
<div class="section" id="uwsgi-add-timer-signum-secs">
<h2>uwsgi.add_timer(signum, secs)<a class="headerlink" href="#uwsgi-add-timer-signum-secs" title="Permalink to this headline">¶</a></h2>
<p>register a timer raising “signum” every “secs”</p>
</div>
<div class="section" id="uwsgi-add-rb-timer-signum-secs-iterations">
<h2>uwsgi.add_rb_timer(signum, secs[, iterations])<a class="headerlink" href="#uwsgi-add-rb-timer-signum-secs-iterations" title="Permalink to this headline">¶</a></h2>
<p>register a redblack timer raising “signum” every “secs”</p>
</div>
<div class="section" id="uwsgi-lock-num-0">
<h2>uwsgi.lock(num=0)<a class="headerlink" href="#uwsgi-lock-num-0" title="Permalink to this headline">¶</a></h2>
<p>acquire the specified user lock</p>
</div>
<div class="section" id="uwsgi-unlock-num-0">
<h2>uwsgi.unlock(num=0)<a class="headerlink" href="#uwsgi-unlock-num-0" title="Permalink to this headline">¶</a></h2>
<p>release the specified user lock</p>
</div>
<div class="section" id="uwsgi-masterpid">
<h2>uwsgi.masterpid()<a class="headerlink" href="#uwsgi-masterpid" title="Permalink to this headline">¶</a></h2>
<p>return the current pid of the master process</p>
</div>
<div class="section" id="uwsgi-alarm-alarm-msg">
<h2>uwsgi.alarm(alarm, msg)<a class="headerlink" href="#uwsgi-alarm-alarm-msg" title="Permalink to this headline">¶</a></h2>
<p>raise the specified “alarm” with the message “msg”</p>
</div>
<div class="section" id="uwsgi-suspend">
<h2>uwsgi.suspend()<a class="headerlink" href="#uwsgi-suspend" title="Permalink to this headline">¶</a></h2>
<p>suspend the current async core and give cpu to the next core in the schedule chain</p>
</div>
<div class="section" id="uwsgi-async-sleep-secs">
<h2>uwsgi.async_sleep(secs)<a class="headerlink" href="#uwsgi-async-sleep-secs" title="Permalink to this headline">¶</a></h2>
<p>suspend the current async core for the specified number of seconds</p>
<p>(requires uwsgi.suspend() or form of “yield” to be committed)</p>
</div>
<div class="section" id="uwsgi-connection-fd">
<h2>uwsgi.connection_fd()<a class="headerlink" href="#uwsgi-connection-fd" title="Permalink to this headline">¶</a></h2>
<p>returns the file descriptor of the connection opened with the client</p>
</div>
<div class="section" id="uwsgi-async-connect-addr">
<h2>uwsgi.async_connect(addr)<a class="headerlink" href="#uwsgi-async-connect-addr" title="Permalink to this headline">¶</a></h2>
<p>returns the file descriptor of a non-blocking connection to the specified “addr”</p>
<p>will raise an exception on error</p>
</div>
<div class="section" id="uwsgi-wait-fd-read-fd-timeout">
<h2>uwsgi.wait_fd_read(fd[, timeout])<a class="headerlink" href="#uwsgi-wait-fd-read-fd-timeout" title="Permalink to this headline">¶</a></h2>
<p>(requires uwsgi.suspend() or form of “yield” to be committed)</p>
<p>will raise an exception on error</p>
</div>
<div class="section" id="uwsgi-wait-fd-write-fd-timeout">
<h2>uwsgi.wait_fd_write(fd[, timeout])<a class="headerlink" href="#uwsgi-wait-fd-write-fd-timeout" title="Permalink to this headline">¶</a></h2>
<p>(requires uwsgi.suspend() or form of “yield” to be committed)</p>
<p>will raise an exception on error</p>
</div>
<div class="section" id="uwsgi-ready-fd">
<h2>uwsgi.ready_fd()<a class="headerlink" href="#uwsgi-ready-fd" title="Permalink to this headline">¶</a></h2>
<p>after resume from suspend() returns the currently available file descriptor or -1 if a timeout was the cause of resume</p>
</div>
<div class="section" id="uwsgi-send-fd-data">
<h2>uwsgi.send([fd,] data)<a class="headerlink" href="#uwsgi-send-fd-data" title="Permalink to this headline">¶</a></h2>
<p>send the specified “data” to the file descriptor “fd”.</p>
<p>If “fd” is not specified the output of uwsgi.connection_fd() will be used</p>
<p>The position of arguments is a bit strange, but allows easier integration with POSIX write()</p>
</div>
<div class="section" id="uwsgi-recv-fd-len">
<h2>uwsgi.recv([fd,] len)<a class="headerlink" href="#uwsgi-recv-fd-len" title="Permalink to this headline">¶</a></h2>
<p>receive at most “len” bytes from the specified “fd”</p>
<p>If “fd” is not specified the output of uwsgi.connection_fd() will be used</p>
<p>The position of arguments is a bit strange, but allows easier integration with POSIX read()</p>
</div>
<div class="section" id="uwsgi-close-fd">
<h2>uwsgi.close(fd)<a class="headerlink" href="#uwsgi-close-fd" title="Permalink to this headline">¶</a></h2>
<p>close the specified file descriptor</p>
</div>
<div class="section" id="uwsgi-setprocname-name">
<h2>uwsgi.setprocname(name)<a class="headerlink" href="#uwsgi-setprocname-name" title="Permalink to this headline">¶</a></h2>
<p>set the name of the calling process</p>
</div>
<div class="section" id="uwsgi-add-cron-signum-minute-hour-day-month-week">
<h2>uwsgi.add_cron(signum, minute, hour, day, month, week)<a class="headerlink" href="#uwsgi-add-cron-signum-minute-hour-day-month-week" title="Permalink to this headline">¶</a></h2>
<p>register a cron raising the uwsgi signal “signum”</p>
</div>
<div class="section" id="uwsgi-disconnect">
<h2>uwsgi.disconnect()<a class="headerlink" href="#uwsgi-disconnect" title="Permalink to this headline">¶</a></h2>
<p>disconnect the client without stopping the request handler</p>
</div>
<div class="section" id="uwsgi-worker-id">
<h2>uwsgi.worker_id()<a class="headerlink" href="#uwsgi-worker-id" title="Permalink to this headline">¶</a></h2>
<p>returns the current worker id (as integer).</p>
<p>0 means the calling process is not a worker</p>
</div>
<div class="section" id="uwsgi-mule-id">
<h2>uwsgi.mule_id()<a class="headerlink" href="#uwsgi-mule-id" title="Permalink to this headline">¶</a></h2>
<p>returns the current mule id (as integer).</p>
<p>0 means the calling process is not a mule</p>
</div>
<div class="section" id="uwsgi-signal-registered-signum">
<h2>uwsgi.signal_registered(signum)<a class="headerlink" href="#uwsgi-signal-registered-signum" title="Permalink to this headline">¶</a></h2>
<p>check if “signum” is registered</p>
<p>returns boolean</p>
</div>
<div class="section" id="uwsgi-opt">
<h2>uwsgi.opt<a class="headerlink" href="#uwsgi-opt" title="Permalink to this headline">¶</a></h2>
<p>This is a hash/dictionary of all the specified options for the instance (both registered and virtuals)</p>
</div>
<div class="section" id="uwsgi-version">
<h2>uwsgi.version<a class="headerlink" href="#uwsgi-version" title="Permalink to this headline">¶</a></h2>
<p>the uWSGI version string</p>
</div>
<div class="section" id="uwsgi-hostname">
<h2>uwsgi.hostname<a class="headerlink" href="#uwsgi-hostname" title="Permalink to this headline">¶</a></h2>
<p>the server hostname</p>
</div>
<div class="section" id="uwsgi-register-signal-signum-kind-handler">
<h2>uwsgi.register_signal(signum, kind, handler)<a class="headerlink" href="#uwsgi-register-signal-signum-kind-handler" title="Permalink to this headline">¶</a></h2>
<p>register the uwsgi signal “signum” of the specified “kind” mapped to “handler”</p>
<p>raise an Exception on error</p>
</div>
<div class="section" id="uwsgi-set-user-harakiri-sec">
<h2>uwsgi.set_user_harakiri(sec)<a class="headerlink" href="#uwsgi-set-user-harakiri-sec" title="Permalink to this headline">¶</a></h2>
<p>set the user harakiri (for workers, mules and spoolers).</p>
<p>A value of 0, reset the timer</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The uWSGI api</a><ul>
<li><a class="reference internal" href="#uwsgi-signal-signum">uwsgi.signal(signum)</a></li>
<li><a class="reference internal" href="#uwsgi-register-rpc-name-func-argc-0">uwsgi.register_rpc(name, func, argc=0)</a></li>
<li><a class="reference internal" href="#uwsgi-rpc-node-name-args">uwsgi.rpc(node, name, *args)</a></li>
<li><a class="reference internal" href="#uwsgi-call-name-args">uwsgi.call(name, *args)</a></li>
<li><a class="reference internal" href="#uwsgi-cache-get-key-cache">uwsgi.cache_get(key[, cache])</a></li>
<li><a class="reference internal" href="#uwsgi-add-timer-signum-secs">uwsgi.add_timer(signum, secs)</a></li>
<li><a class="reference internal" href="#uwsgi-add-rb-timer-signum-secs-iterations">uwsgi.add_rb_timer(signum, secs[, iterations])</a></li>
<li><a class="reference internal" href="#uwsgi-lock-num-0">uwsgi.lock(num=0)</a></li>
<li><a class="reference internal" href="#uwsgi-unlock-num-0">uwsgi.unlock(num=0)</a></li>
<li><a class="reference internal" href="#uwsgi-masterpid">uwsgi.masterpid()</a></li>
<li><a class="reference internal" href="#uwsgi-alarm-alarm-msg">uwsgi.alarm(alarm, msg)</a></li>
<li><a class="reference internal" href="#uwsgi-suspend">uwsgi.suspend()</a></li>
<li><a class="reference internal" href="#uwsgi-async-sleep-secs">uwsgi.async_sleep(secs)</a></li>
<li><a class="reference internal" href="#uwsgi-connection-fd">uwsgi.connection_fd()</a></li>
<li><a class="reference internal" href="#uwsgi-async-connect-addr">uwsgi.async_connect(addr)</a></li>
<li><a class="reference internal" href="#uwsgi-wait-fd-read-fd-timeout">uwsgi.wait_fd_read(fd[, timeout])</a></li>
<li><a class="reference internal" href="#uwsgi-wait-fd-write-fd-timeout">uwsgi.wait_fd_write(fd[, timeout])</a></li>
<li><a class="reference internal" href="#uwsgi-ready-fd">uwsgi.ready_fd()</a></li>
<li><a class="reference internal" href="#uwsgi-send-fd-data">uwsgi.send([fd,] data)</a></li>
<li><a class="reference internal" href="#uwsgi-recv-fd-len">uwsgi.recv([fd,] len)</a></li>
<li><a class="reference internal" href="#uwsgi-close-fd">uwsgi.close(fd)</a></li>
<li><a class="reference internal" href="#uwsgi-setprocname-name">uwsgi.setprocname(name)</a></li>
<li><a class="reference internal" href="#uwsgi-add-cron-signum-minute-hour-day-month-week">uwsgi.add_cron(signum, minute, hour, day, month, week)</a></li>
<li><a class="reference internal" href="#uwsgi-disconnect">uwsgi.disconnect()</a></li>
<li><a class="reference internal" href="#uwsgi-worker-id">uwsgi.worker_id()</a></li>
<li><a class="reference internal" href="#uwsgi-mule-id">uwsgi.mule_id()</a></li>
<li><a class="reference internal" href="#uwsgi-signal-registered-signum">uwsgi.signal_registered(signum)</a></li>
<li><a class="reference internal" href="#uwsgi-opt">uwsgi.opt</a></li>
<li><a class="reference internal" href="#uwsgi-version">uwsgi.version</a></li>
<li><a class="reference internal" href="#uwsgi-hostname">uwsgi.hostname</a></li>
<li><a class="reference internal" href="#uwsgi-register-signal-signum-kind-handler">uwsgi.register_signal(signum, kind, handler)</a></li>
<li><a class="reference internal" href="#uwsgi-set-user-harakiri-sec">uwsgi.set_user_harakiri(sec)</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/API.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">uWSGI 2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2016, uWSGI.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>