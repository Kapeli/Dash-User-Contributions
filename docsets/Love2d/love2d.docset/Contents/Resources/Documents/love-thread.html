
<!DOCTYPE html>

<html lang="en">
<head>
<title>love.thread - LOVE</title>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<link href="main.css" rel="stylesheet"/>
</head>
<body>
<h1 class="firstHeading" id="firstHeading" lang="en">love.thread</h1><div id="bodyContent">
<!-- <div id="siteSub">From LOVE</div> -->
<!-- <div id="contentSub"></div> -->
<!-- <div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div> -->
<!-- start content -->
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><table bgcolor="#d0d0ff" class="new-section" data-newin="[[0.7.0]]" style="margin-top: 1em; padding: 3px; border-radius:5px; -moz-border-radius:5px;">
<tr>
<td><i> <b>Available since LÖVE 0.7.0</b> </i>
</td></tr>
<tr>
<td> <small>This module is not supported in earlier versions.</small>
</td></tr></table>
<p>Allows you to work with threads.
</p><p>Threads are separate Lua environments, running in parallel to the main code. As their code runs separately, they can be used to compute complex operations without adversely affecting the frame rate of the main thread. However, as they are separate environments, they cannot access the variables and functions of the main thread, and communication between threads is limited.
</p><p>All LÖVE objects (userdata) are shared among threads so you'll only have to send their references across threads. You may run into concurrency issues if you manipulate an object on multiple threads at the same time.
</p><p>When a <a href="thread.html" title="Thread">Thread</a> is started, it only loads the love.thread module. Every other module has to be loaded with require.
</p>
<table align="center" bgcolor="gold" class="notice" style="border-style:solid;border-width:1px;-moz-border-radius:3px;border-radius:3px;" width="80%">
<tr>
<td width="1"> <img alt="O.png" height="64" src="w-images-0-09-o.png" width="64"/>
</td>
<td>The <a href="love-graphics.html" title="love.graphics">love.graphics</a> and <a href="love-window.html" title="love.window">love.window</a> modules have several restrictions and therefore can only be used in the main thread.
</td>
<td width="1"> 
</td></tr></table><br/>
<table align="center" bgcolor="gold" class="notice" style="border-style:solid;border-width:1px;-moz-border-radius:3px;border-radius:3px;" width="80%">
<tr>
<td width="1"> <img alt="O.png" height="64" src="w-images-0-09-o.png" width="64"/>
</td>
<td>Unless you define the <a href="love-threaderror.html" title="love.threaderror">love.threaderror</a> callback or call <a href="thread-geterror.html" title="Thread:getError">Thread:getError</a> you won't see any errors your thread code throws.
</td>
<td width="1"> 
</td></tr></table><br/>
<h2><span class="mw-headline" id="Types">Types</span></h2>
<table class="smwtable" style="background-color: #eeeeff;">
<tr>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;"><a href="channel.html" title="Channel">Channel</a></td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">An object which can be used to send and receive data between different threads.</td>
<td style="padding: 1px 5px 1px 5px; background-color: #f8fff8; vertical-align: top;"><img alt="Added since" height="11" src="w-images-a-a7-add.png" width="8"/> 0.9.0 </td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">
</td></tr>
<tr>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;"><a href="thread.html" title="Thread">Thread</a></td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">A Thread represents a thread.</td>
<td style="padding: 1px 5px 1px 5px; background-color: #f8fff8; vertical-align: top;"><img alt="Added since" height="11" src="w-images-a-a7-add.png" width="8"/> 0.7.0 </td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">
</td></tr>
</table>
<h2><span class="mw-headline" id="Functions">Functions</span></h2>
<table class="smwtable" style="background-color: #eeeeff;">
<tr>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;"><a href="love-thread-getchannel.html" title="love.thread.getChannel">love.thread.getChannel</a></td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">Creates or retrieves a named thread channel.</td>
<td style="padding: 1px 5px 1px 5px; background-color: #f8fff8; vertical-align: top;"><img alt="Added since" height="11" src="w-images-a-a7-add.png" width="8"/> 0.9.0 </td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">
</td></tr>
<tr>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;"><a href="love-thread-getthread.html" title="love.thread.getThread">love.thread.getThread</a></td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">Look for a thread and get its object.</td>
<td style="padding: 1px 5px 1px 5px; background-color: #f8fff8; vertical-align: top;"><img alt="Added since" height="11" src="w-images-a-a7-add.png" width="8"/> 0.7.0 </td>
<td style="padding: 1px 5px 1px 5px; background-color: #fff8f8; vertical-align: top;"><img alt="Removed in" height="11" src="w-images-f-f4-remove.png" width="8"/> 0.9.0
</td></tr>
<tr>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;"><a href="love-thread-getthreads.html" title="love.thread.getThreads">love.thread.getThreads</a></td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">Get all threads.</td>
<td style="padding: 1px 5px 1px 5px; background-color: #f8fff8; vertical-align: top;"><img alt="Added since" height="11" src="w-images-a-a7-add.png" width="8"/> 0.7.0 </td>
<td style="padding: 1px 5px 1px 5px; background-color: #fff8f8; vertical-align: top;"><img alt="Removed in" height="11" src="w-images-f-f4-remove.png" width="8"/> 0.9.0
</td></tr>
<tr>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;"><a href="love-thread-newchannel.html" title="love.thread.newChannel">love.thread.newChannel</a></td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">Creates a new unnamed thread channel.</td>
<td style="padding: 1px 5px 1px 5px; background-color: #f8fff8; vertical-align: top;"><img alt="Added since" height="11" src="w-images-a-a7-add.png" width="8"/> 0.9.0 </td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">
</td></tr>
<tr>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;"><a href="love-thread-newthread.html" title="love.thread.newThread">love.thread.newThread</a></td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">Creates a new Thread from a Lua file or <a href="filedata.html" title="FileData">FileData</a> object.</td>
<td style="padding: 1px 5px 1px 5px; background-color: #f8fff8; vertical-align: top;"><img alt="Added since" height="11" src="w-images-a-a7-add.png" width="8"/> 0.7.0 </td>
<td style="padding: 1px 5px 1px 5px; background-color: #ffffff; vertical-align: top;">
</td></tr>
</table>
<p><br/>
</p>
<h2><span class="mw-headline" id="Examples">Examples</span></h2>
<p>A simple example showing the general usage of a thread and using channels for communication.
</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- This is the code that's going to run on the our thread. It should be moved</span>
<span class="co1">-- to its own dedicated Lua file, but for simplicity's sake we'll create it</span>
<span class="co1">-- here.</span>
<span class="kw1">local</span> threadCode <span class="sy0">=</span> <span class="co2">[[
-- Receive values sent via thread:start
local min, max = ...
 
for i = min, max do
    -- The Channel is used to handle communication between our main thread and
    -- this thread. On each iteration of the loop will push a message to it which
    -- we can then pop / receive in the main thread.
    love.thread.getChannel( 'info' ):push( i )
end
]]</span>
 
<span class="kw1">local</span> thread <span class="co1">-- Our thread object.</span>
<span class="kw1">local</span> timer  <span class="co1">-- A timer used to animate our circle.</span>
 
<span class="kw1">function</span> love<span class="sy0">.</span>load<span class="br0">(</span><span class="br0">)</span>
    thread <span class="sy0">=</span> love<span class="sy0">.</span>thread<span class="sy0">.</span>newThread<span class="br0">(</span> threadCode <span class="br0">)</span>
    thread<span class="sy0">:</span>start<span class="br0">(</span> <span class="nu0">99</span><span class="sy0">,</span> <span class="nu0">1000</span> <span class="br0">)</span>
<span class="kw1">end</span>
 
<span class="kw1">function</span> love<span class="sy0">.</span>update<span class="br0">(</span> dt <span class="br0">)</span>
    timer <span class="sy0">=</span> timer <span class="kw2">and</span> timer <span class="sy0">+</span> dt <span class="kw2">or</span> <span class="nu0">0</span>
 
    <span class="co1">-- Make sure no errors occured.</span>
    <span class="kw1">local</span> <span class="kw3">error</span> <span class="sy0">=</span> thread<span class="sy0">:</span>getError<span class="br0">(</span><span class="br0">)</span>
    <span class="kw3">assert</span><span class="br0">(</span> <span class="kw2">not</span> <span class="kw3">error</span><span class="sy0">,</span> <span class="kw3">error</span> <span class="br0">)</span>
<span class="kw1">end</span>
 
<span class="kw1">function</span> love<span class="sy0">.</span>draw<span class="br0">(</span><span class="br0">)</span>
    <span class="co1">-- Get the info channel and pop the next message from it.</span>
    <span class="kw1">local</span> info <span class="sy0">=</span> love<span class="sy0">.</span>thread<span class="sy0">.</span>getChannel<span class="br0">(</span> <span class="st0">'info'</span> <span class="br0">)</span><span class="sy0">:</span>pop<span class="br0">(</span><span class="br0">)</span>
    <span class="kw1">if</span> info <span class="kw1">then</span>
        love<span class="sy0">.</span>graphics<span class="sy0">.</span><span class="kw3">print</span><span class="br0">(</span> info<span class="sy0">,</span> <span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">10</span> <span class="br0">)</span>
    <span class="kw1">end</span>
 
    <span class="co1">-- We smoothly animate a circle to show that the thread isn't blocking our main thread.</span>
    love<span class="sy0">.</span>graphics<span class="sy0">.</span>circle<span class="br0">(</span> <span class="st0">'line'</span><span class="sy0">,</span> <span class="nu0">100</span> <span class="sy0">+</span> <span class="kw3">math.sin</span><span class="br0">(</span> timer <span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">20</span><span class="sy0">,</span> <span class="nu0">100</span> <span class="sy0">+</span> <span class="kw3">math.cos</span><span class="br0">(</span> timer <span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">20</span><span class="sy0">,</span> <span class="nu0">20</span> <span class="br0">)</span>
<span class="kw1">end</span></pre></div></div>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<ul><li> <a href="love.html" title="love">love</a></li></ul>
<!-- 
NewPP limit report
CPU time usage: 0.164 seconds
Real time usage: 0.194 seconds
Preprocessor visited node count: 601/1000000
Preprocessor generated node count: 1803/1000000
Post‐expand include size: 13908/2097152 bytes
Template argument size: 2531/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->
<!-- Saved in parser cache with key love2d_wiki:pcache:idhash:774-0!*!0!!*!5!* and timestamp 20190306195720 and revision id 21069
 -->
</div>
<!-- end content -->
<div class="visualClear"></div>
</div>
</body>
</html>
